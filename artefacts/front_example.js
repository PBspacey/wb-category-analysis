(function() {
    function r(e, n, t) {
        function o(i, f) {
            if (!n[i]) {
                if (!e[i]) {
                    var c = "function" == typeof require && require;
                    if (!f && c)
                        return c(i, !0);
                    if (u)
                        return u(i, !0);
                    var a = new Error("Cannot find module '" + i + "'");
                    throw a.code = "MODULE_NOT_FOUND",
                    a
                }
                var p = n[i] = {
                    exports: {}
                };
                e[i][0].call(p.exports, function(r) {
                    var n = e[i][1][r];
                    return o(n || r)
                }, p, p.exports, r, e, n, t)
            }
            return n[i].exports
        }
        for (var u = "function" == typeof require && require, i = 0; i < t.length; i++)
            o(t[i]);
        return o
    }
    return r
}
)()({
    1: [function(require, module, exports) {
        module.exports = {
            "RUB": {
                "locale": "ru",
                "name": "Российский рубль",
                "sign": "₽",
                "code": "643"
            },
            "BYN": {
                "locale": "by",
                "name": "Белорусский рубль",
                "sign": "р.",
                "code": "933"
            },
            "KZT": {
                "locale": "kz",
                "name": "Казахстанский тенге",
                "sign": "тг.",
                "code": "398"
            },
            "AMD": {
                "locale": "am",
                "name": "Армянский драм",
                "sign": "драм",
                "code": "051"
            },
            "KGS": {
                "locale": "kg",
                "name": "Киргизский сом",
                "sign": "сом",
                "code": "417"
            },
            "UZS": {
                "locale": "uz",
                "name": "Узбекский сум",
                "sign": "сум",
                "code": "860"
            },
            //"USD": {
            //  "locale": "us",
            //  "name": "Доллар США",
            //  "sign": "$",
            //  "code": "840"
            //}
        }
    }
    , {}],
    2: [function(require, module, exports) {
        "use strict";
        !function() {
            const e = require("./currencies.json")
              , r = Object.entries(e).reduce((e,[r,n])=>(e[n.sign] = r,
            e), {});
            wb.currencies = {
                info: e,
                getIsoBySign: e=>r[e] || wb.settings.currencyCodeByLetters,
                getDefaultForLocale: function(r) {
                    var n;
                    let i;
                    for (const n in e)
                        e[n].locale === r && (i = n);
                    return null !== (n = i) && void 0 !== n ? n : "RUB"
                }
            },
            $.views.helpers({
                wbCurrencies: wb.currencies.info
            }),
            $.views.converters({
                isoCode: e=>{
                    var r;
                    return null === (r = wb.currencies.info[null == e ? void 0 : e.toUpperCase()] || wb.currencies.info[wb.settings.currencyCodeByLetters]) || void 0 === r ? void 0 : r.code
                }
                ,
                currencySign: e=>{
                    var r;
                    return null === (r = wb.currencies.info[e] || wb.currencies.info[wb.settings.currencyCodeByLetters]) || void 0 === r ? void 0 : r.sign
                }
            })
        }();

    }
    , {
        "./currencies.json": 1
    }],
    3: [function(require, module, exports) {
        "use strict";
        const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection
          , downgradeImageMap = Object.freeze({
            c246x328: "c246x328",
            c516x688: "c246x328",
            big: "c516x688"
        })
          , imgServer = Object.freeze({
            volHostV2: function(e) {
                let t;
                switch (!0) {
                case e >= 0 && e <= 143:
                    t = "01";
                    break;
                case e >= 144 && e <= 287:
                    t = "02";
                    break;
                case e >= 288 && e <= 431:
                    t = "03";
                    break;
                case e >= 432 && e <= 719:
                    t = "04";
                    break;
                case e >= 720 && e <= 1007:
                    t = "05";
                    break;
                case e >= 1008 && e <= 1061:
                    t = "06";
                    break;
                case e >= 1062 && e <= 1115:
                    t = "07";
                    break;
                case e >= 1116 && e <= 1169:
                    t = "08";
                    break;
                case e >= 1170 && e <= 1313:
                    t = "09";
                    break;
                case e >= 1314 && e <= 1601:
                    t = "10";
                    break;
                case e >= 1602 && e <= 1655:
                    t = "11";
                    break;
                case e >= 1656 && e <= 1919:
                    t = "12";
                    break;
                case e >= 1920 && e <= 2045:
                    t = "13";
                    break;
                case e >= 2046 && e <= 2189:
                    t = "14";
                    break;
                case e >= 2091 && e <= 2405:
                    t = "15";
                    break;
                default:
                    t = "16"
                }
                return `basket-${t}.${imgServer.firstLevelDomain()}`
            },
            volFeedbackHost: function(e) {
                let t;
                switch (!0) {
                case e >= 0 && e <= 431:
                    t = "01";
                    break;
                case e >= 432 && e <= 863:
                    t = "02";
                    break;
                case e >= 864 && e <= 1199:
                    t = "03";
                    break;
                case e >= 1200 && e <= 1535:
                    t = "04";
                    break;
                case e >= 1536 && e <= 1919:
                    t = "05";
                    break;
                default:
                    t = "06"
                }
                return `feedback${t}.${imgServer.firstLevelDomain()}`
            },
            volVideoHost: function(e) {
                let t;
                switch (!0) {
                case e >= 0 && e <= 47:
                    t = "01";
                    break;
                case e >= 48 && e <= 95:
                    t = "02";
                    break;
                case e >= 96 && e <= 143:
                    t = "03";
                    break;
                default:
                    t = "04"
                }
                return `tvideobasket-${t}.wbbasket.ru`
            },
            constructHostV2: function(e, t="nm") {
                const r = parseInt(e, 10)
                  , n = "video" === t ? r % 144 : ~~(r / 1e5)
                  , a = "video" === t ? ~~(r / 1e4) : ~~(r / 1e3);
                let o;
                return "nm" === t ? o = imgServer.volHostV2(n) : "feedback" === t ? o = imgServer.volFeedbackHost(n) : "video" === t && (o = imgServer.volVideoHost(n)),
                `https://${o}/vol${n}/part${a}/${r}`
            },
            firstLevelDomain: function() {
                return wb.global.settings.switches.useCfCdn ? "wbcontent.net" : "wbbasket.ru"
            }
        });
        wb.helpers = {
            deepClone: e=>JSON.parse(JSON.stringify(e)),
            getHashCode: e=>{
                let t, r, n = 0;
                if (0 === e.length)
                    return n;
                for (t = 0; t < e.length; t++)
                    n = (n << 5) - n + (r = e.charCodeAt(t)),
                    n |= 0;
                return n
            }
            ,
            generateGuid: ()=>URL.createObjectURL(new Blob).split("/").pop().replace(/-/g, ""),
            date: {
                leftBefore: function(e) {
                    const t = wb.helpers.date.serverDate ? new Date(wb.helpers.date.serverDate) : new Date
                      , r = e.getTime() - t.getTime()
                      , n = Math.floor(r / 1e3 % 60)
                      , a = Math.floor(r / 6e4 % 60)
                      , o = Math.floor(r / 36e5);
                    return String.format("{0}:{1}:{2}", $.views.converters.leadZero(o, 2), $.views.converters.leadZero(a, 2), $.views.converters.leadZero(n, 2))
                },
                diff: (e,t=new Date)=>{
                    const r = {
                        days: 0,
                        months: 0,
                        years: 0
                    };
                    if (e == t)
                        return r;
                    if (e > t)
                        return wb.helpers.date.diff(t, e);
                    if (r.years = t.getFullYear() - e.getFullYear(),
                    r.months = t.getMonth() - e.getMonth(),
                    r.days = t.getDate() - e.getDate(),
                    r.days < 0) {
                        const t = new Date(e.getFullYear(),e.getMonth() + 1,0);
                        r.months--,
                        r.days += t.getDate()
                    }
                    return r.months < 0 && (r.years--,
                    r.months += 12),
                    r
                }
                ,
                formatEstimated: (e,t)=>{
                    const r = new Date;
                    r.setHours(0, 0, 0, 0);
                    const n = new Date(e);
                    return t || (t = new Date(e)),
                    t.setDate(t.getDate()),
                    t - r < 0 ? "Задерживается" : n.getMonth() !== t.getMonth() ? `${n.format("d MMMM")}-${t.format("d MMMM")}` : n.getDate() !== t.getDate() ? `${n.getDate()}-${t.format("d MMMM")}` : `${n.format("d MMMM")}`
                }
            },
            getParamsFromUrlQuery: function(e) {
                if (!e)
                    return {};
                0 === e.indexOf("?") && (e = e.substring(1));
                const t = e.split("&")
                  , r = {};
                for (let e = 0, n = t.length; e < n; e++) {
                    const n = t[e].split("=");
                    r[n[0]] = n[1]
                }
                return r
            },
            appendToParamsFromQuery: function(e, t) {
                if (!t)
                    return;
                0 === t.indexOf("?") && (t = t.substring(1));
                const r = t.split("&");
                for (let t = 0, n = r.length; t < n; t++) {
                    const n = r[t].split("=");
                    e.set(n[0], n[1])
                }
            },
            url: {
                imageUrl: function(e, t, r, n) {
                    var a, o;
                    n && !WbSpaModel.prototype.$isDesktop && (t = n);
                    const i = parseInt(e, 10);
                    null != connection && connection.effectiveType && "4g" !== (null == connection ? void 0 : connection.effectiveType) && "3g" !== (null == connection ? void 0 : connection.effectiveType) && downgradeImageMap[t] && null !== (a = wb.global.settings) && void 0 !== a && null !== (a = a.switches) && void 0 !== a && a.enableProductImageDowngrade && (t = downgradeImageMap[t]);
                    let s = "jpg";
                    if (null !== (o = wb.global.settings) && void 0 !== o && o.switches.enableWebpImages && null != window.WbSpaModel && window.WbSpaModel.prototype.$apiSupport.webpImage && (s = "webp"),
                    isNaN(i) || 0 === i)
                        return `${wb.settings.staticSiteUrl}/i/product/notfound/${t}.jpg`;
                    return `${imgServer.constructHostV2(i)}/images/${t}/${null != r ? r : 1}.${s}`
                },
                urlProductStatic: function(e) {
                    return `${imgServer.constructHostV2(e)}/info/ru/card.json`
                },
                urlPriceHistoryStatic: function(e) {
                    return `${imgServer.constructHostV2(e)}/info/price-history.json`
                },
                urlSellerStatic: function(e) {
                    return `${imgServer.constructHostV2(e)}/info/sellers.json`
                },
                urlMulticardStatic: function(e) {
                    return `${imgServer.constructHostV2(e)}/multicart/${e}.json`
                },
                urlCertificateStatic: function(e) {
                    return `${imgServer.constructHostV2(e)}/info/certificate.json`
                },
                urlStaticData: function(e) {
                    return e.startsWith("//") ? e : `https:${wb.settings.staticBasketUrl}/${e}`
                },
                urlStaticDataFallback: function(e) {
                    return e = e.replace(wb.settings.staticBasketUrl + "/", ""),
                    `https:${wb.settings.staticFallbackUrl}/${e}`
                },
                urlStaticDataObsolete: function(e) {
                    return `https://static.wbstatic.net/data/${e}`
                },
                urlFeedbackPhoto: function(e, t="ms") {
                    const r = parseInt(e, 10);
                    return `${imgServer.constructHostV2(r, "feedback")}/photos/${t}.${$.views.converters.toWebp("jpg")}`
                },
                urlVideoProduct: function(e, t="mp4", r="360p") {
                    const n = parseInt(e, 10);
                    return `${imgServer.constructHostV2(n, "video")}/${t}/${r}/${"mp4" === t ? "1.mp4" : "index.m3u8"}`
                },
                urlRichContent: function(e) {
                    return `${imgServer.constructHostV2(e)}/info/ru/rich.json`
                },
                urlToExternalStatic: function(e) {
                    return `https://static-basket-01.${imgServer.firstLevelDomain()}${e}`
                },
                urlFeedbackVideoPreview: function(e) {
                    const t = e.id
                      , [r,n] = null == t ? void 0 : t.split("/");
                    return `https://videofeedback${("00" + r).slice(-2)}.wb.ru/${n}/preview.jpg`
                }
            },
            replaceDeliveryFilterVal: function(e) {
                return e.replace(/&fdlvr=(\d+)/, (e,t)=>{
                    const r = 23 - new Date(Date.now()).getHours() - 1;
                    let n = null;
                    switch (parseInt(t)) {
                    case 4:
                        n = r > 4 ? 4 : r;
                        break;
                    case 12:
                        n = r;
                        break;
                    case 24:
                        n = 24 + r;
                        break;
                    case 48:
                        n = 48 + r;
                        break;
                    case 72:
                        n = 72 + r;
                        break;
                    case 120:
                        n = 120 + r
                    }
                    return null != n ? `&fdlvr=${n}` : ""
                }
                )
            },
            path: {
                fileName: e=>(null == e ? void 0 : e.substring(e.lastIndexOf("/") + 1)) || "",
                extension: e=>(null == e ? void 0 : e.slice(1 + (Math.max(e.lastIndexOf("."), 0) || e.length))) || ""
            },
            iOS: function() {
                return ["iPad Simulator", "iPhone Simulator", "iPod Simulator", "iPad", "iPhone", "iPod"].includes(navigator.platform) || navigator.userAgent.includes("Mac") && "ontouchend"in document
            },
            huawei: function() {
                const e = navigator.userAgent || navigator.vendor || window.opera;
                return /huawei/i.test(e)
            },
            formatVideoDuration: function(e) {
                const t = Math.floor(e / 60)
                  , r = e % 60;
                return `${t < 10 ? `0${t}` : t}:${r < 10 ? `0${r}` : r}`
            }
        };

    }
    , {}],
    4: [function(require, module, exports) {
        "use strict";
        !function() {
            var n, t, e = {};
            function r(n) {
                var t = [].slice.call(arguments, 1);
                return n.replace(/{(\d+)}/g, function(n, e) {
                    return void 0 !== t[e] ? t[e] : n
                })
            }
            function l(n) {
                return {
                    value: e[n] || n,
                    notfound: !e[n]
                }
            }
            function u(n) {
                return "[object Object]" === Object.prototype.toString.call(n)
            }
            n = t = function(n) {
                return n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2
            }
            ,
            $.localize = function() {
                if (1 === arguments.length)
                    return u(arguments[0]) ? void ("function" == typeof (n = arguments[0].pluralRule) && 1 == n.length && (t = n)) : l(arguments[0]).value;
                var n;
                if (2 == arguments.length && u(arguments[1]))
                    Object.assign(e, arguments[1]);
                else if (arguments.length > 1 && arguments[0] && arguments[0].indexOf(!1)) {
                    var i = [].slice.call(arguments, 1);
                    return i.unshift(l(arguments[0]).value),
                    r.apply(this, i)
                }
            }
            ,
            $.pluralize = function() {
                if (arguments.length < 2)
                    return arguments[0];
                for (var e = new Array(arguments.length - 1), u = 0; u < arguments.length - 1; u++)
                    e[u] = arguments[u + 1];
                var i = l(e.join(","))
                  , o = i.value.split(",")
                  , c = i.notfound ? n(arguments[0]) : t(arguments[0])
                  , a = o[c < o.length ? c : o.length - 1];
                return a.indexOf("{0}") > -1 ? r(a, arguments[0]) : a
            }
        }();

    }
    , {}],
    5: [function(require, module, exports) {
        "use strict";
        require("./extensions/stringExtensions"),
        require("./extensions/arrayExtensions"),
        require("./extensions/mapExtensions"),
        require("./extensions/setExtensions"),
        require("./extensions/HTMLElementExtensions"),
        require("./extensions/DOMTokenListExtensions"),
        require("./extensions/dateExtensions"),
        require("./extensions/numberExtensions"),
        require("./extensions/storageExtensions"),
        require("./extensions/eventExtensions"),
        require("./extensions/URLSearchParamsExtensions"),
        NodeList.prototype.toArray = function() {
            return Array.prototype.slice.call(this)
        }
        ,
        HTMLCollection.prototype.forEach = function(e) {
            Array.prototype.slice.call(this).forEach((n,s,t)=>e(n, s, t))
        }
        ,
        window.requestIdleCallback || (window.requestIdleCallback = function(e) {
            setTimeout(e, 1)
        }
        );

    }
    , {
        "./extensions/DOMTokenListExtensions": 6,
        "./extensions/HTMLElementExtensions": 7,
        "./extensions/URLSearchParamsExtensions": 8,
        "./extensions/arrayExtensions": 9,
        "./extensions/dateExtensions": 10,
        "./extensions/eventExtensions": 11,
        "./extensions/mapExtensions": 12,
        "./extensions/numberExtensions": 13,
        "./extensions/setExtensions": 14,
        "./extensions/storageExtensions": 15,
        "./extensions/stringExtensions": 16
    }],
    6: [function(require, module, exports) {
        "use strict";
        DOMTokenList.prototype.addMany = function(r) {
            if (null == r || !Array.isArray(r))
                throw new Error("DOMTokenList.prototype.addMany accepts only array");
            r.forEach(r=>this.add(r))
        }
        ,
        DOMTokenList.prototype.removeMany = function(r) {
            if (null == r || !Array.isArray(r))
                throw new Error("DOMTokenList.prototype.removeMany accepts only array");
            r.forEach(r=>this.remove(r))
        }
        ;

    }
    , {}],
    7: [function(require, module, exports) {
        "use strict";
        HTMLElement.prototype.hide = function() {
            this.style.display = "none"
        }
        ,
        HTMLElement.prototype.show = function() {
            this.style.display = "block"
        }
        ,
        HTMLElement.prototype.width = function() {
            return 0 == this.clientWidth ? getComputedStyle(this).width.replace("px", "") : this.clientWidth
        }
        ,
        HTMLElement.prototype.wrap = function(t) {
            let e = (new DOMParser).parseFromString(t, "text/html").body.firstElementChild;
            for (this.parentNode.insertBefore(e, this); null != e.firstElementChild; )
                e = e.firstElementChild;
            e.appendChild(this)
        }
        ,
        HTMLElement.prototype.parents = function(t) {
            for (var e = [], i = this, n = void 0 !== t; null !== (i = i.parentElement); )
                i.nodeType === Node.ELEMENT_NODE && (n && !i.matches(t) || e.push(i));
            return e
        }
        ,
        HTMLElement.prototype.isHidden = function() {
            return 0 === this.offsetWidth && 0 === this.offsetHeight || "none" === window.getComputedStyle(this).display
        }
        ,
        HTMLElement.prototype.isVisible = function() {
            return !this.isHidden()
        }
        ;

    }
    , {}],
    8: [function(require, module, exports) {
        "use strict";
        URLSearchParams.prototype.toDictionary = function() {
            const t = {};
            return this.forEach((r,o)=>t[o] = r),
            t
        }
        ;

    }
    , {}],
    9: [function(require, module, exports) {
        "use strict";
        Array.prototype.getIntesection = function(t) {
            return Array.isArray(t) ? this.filter(r=>t.includes(r)) : (console.error("Argument must be an array"),
            [])
        }
        ,
        Array.prototype.last || (Array.prototype.last = function() {
            return this[this.length - 1]
        }
        ),
        Array.prototype.first || (Array.prototype.first = function() {
            return this[0]
        }
        ),
        Array.prototype.max = function() {
            return Math.max.apply(null, this)
        }
        ,
        Array.prototype.min = function() {
            return Math.min.apply(null, this)
        }
        ,
        Array.prototype.findWhere = function(t) {
            return this.find(r=>Object.keys(t).every(n=>r[n] === t[n]))
        }
        ,
        Array.prototype.distinct = function() {
            return this.filter(function(t, r, n) {
                return n.indexOf(t) === r
            })
        }
        ,
        Array.prototype.toHashSet = function(t) {
            if (null != t && "function" != typeof t)
                throw new TypeError("toHashSet method require callback function or null");
            return this.reduce((r,n)=>{
                var o;
                return r.add(null !== (o = null == t ? void 0 : t(n)) && void 0 !== o ? o : n),
                r
            }
            , new Set)
        }
        ,
        Array.prototype.toMap = function(t, r) {
            if (null != t && "function" != typeof t)
                throw new TypeError("toMap method require callback function or null");
            if (null != r && "function" != typeof r)
                throw new TypeError("toMap method require callback function or null");
            return this.reduce((n,o)=>(n.set(null == t ? o : t(o), null == r ? o : r(o)),
            n), new Map)
        }
        ,
        Array.prototype.sum = function(t) {
            let r = 0;
            for (let n = 0, o = this.length; n < o; n++)
                r += t ? this[n][t] : this[n];
            return r
        }
        ,
        Array.prototype.sumBy = function(t) {
            let r = 0;
            for (let n = 0, o = this.length; n < o; n++)
                r += t(this[n]);
            return r
        }
        ,
        Array.prototype.groupBy = function(t) {
            const r = new Map;
            return this.forEach(n=>{
                const o = t(n)
                  , e = r.get(o);
                e ? e.push(n) : r.set(o, [n])
            }
            ),
            r
        }
        ,
        Array.prototype.selectMany = function(t) {
            return this.map(r=>t(r)).reduce((t,r)=>t.concat(r))
        }
        ,
        Array.prototype.toChunk = function(t) {
            const r = Math.ceil(this.length / t)
              , n = new Array(r);
            for (let o = 0; o < r; o++) {
                const r = t * o;
                n[o] = this.slice(r, r + t)
            }
            return n
        }
        ,
        Array.prototype.merge = function(t, {lookup: r=(t=>t), hasConflict: n=((t,r)=>!1)}={}) {
            if (!t || 0 == t.length)
                return !1;
            const o = new Map;
            for (const t of this || []) {
                const n = JSON.stringify(r(t));
                o.set(n, t)
            }
            let e = !1;
            for (const i of t) {
                const t = JSON.stringify(r(i));
                if (o.has(t)) {
                    const r = o.get(t);
                    n(i, r) && (Object.assign(r, i),
                    e = !0)
                } else
                    this.push(i),
                    e = !0
            }
            return e
        }
        ,
        Array.prototype.diff = function(t, {lookup: r=(t=>t), hasConflict: n=((t,r)=>!1)}={}) {
            const o = [];
            if (!t || 0 == t.length)
                return o;
            const e = new Map;
            for (const t of this || []) {
                const n = JSON.stringify(r(t));
                e.set(n, t)
            }
            for (const i of t) {
                const t = JSON.stringify(r(i));
                if (e.has(t)) {
                    n(i, e.get(t)) && o.push(i)
                } else
                    o.push(i)
            }
            return o
        }
        ,
        Array.prototype.remove = function(t) {
            let r = this.indexOf(t);
            r > -1 && this.splice(r, 1)
        }
        ;

    }
    , {}],
    10: [function(require, module, exports) {
        "use strict";
        Date.prototype.format = function(t, e) {
            var a, n, i, o, s = (a = /d{1,4}|M{1,5}|yy(?:yy)?|([HhmsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,
            n = /\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,
            i = /[^-+\dA-Z]/g,
            o = function(t, e) {
                for (t = String(t),
                e = e || 2; t.length < e; )
                    t = "0" + t;
                return t
            }
            ,
            function(t, e, r) {
                var d = s;
                if (1 != arguments.length || "[object String]" != Object.prototype.toString.call(t) || /\d/.test(t) || (e = t,
                t = void 0),
                t = t ? new Date(t) : new Date,
                isNaN(t))
                    throw SyntaxError("invalid date");
                "UTC:" == (e = String(d.masks[e] || e || d.masks.default)).slice(0, 4) && (e = e.slice(4),
                r = !0);
                var m = r ? "getUTC" : "get"
                  , l = t[m + "Date"]()
                  , M = t[m + "Day"]()
                  , y = t[m + "Month"]()
                  , h = t[m + "FullYear"]()
                  , u = t[m + "Hours"]()
                  , c = t[m + "Minutes"]()
                  , f = t[m + "Seconds"]()
                  , g = t[m + "Milliseconds"]()
                  , D = r ? 0 : t.getTimezoneOffset()
                  , T = {
                    d: l,
                    dd: o(l),
                    ddd: d.i18n.dayNames[M],
                    dddd: d.i18n.dayNames[M + 7],
                    M: y + 1,
                    MM: o(y + 1),
                    MMM: d.i18n.monthNames[y],
                    MMMM: d.i18n.monthNames[y + 12],
                    MMMMM: d.i18n.monthNames[y + 24],
                    yy: String(h).slice(2),
                    yyyy: h,
                    h: u % 12 || 12,
                    hh: o(u % 12 || 12),
                    H: u,
                    HH: o(u),
                    m: c,
                    mm: o(c),
                    s: f,
                    ss: o(f),
                    l: o(g, 3),
                    L: o(g > 99 ? Math.round(g / 10) : g),
                    t: u < 12 ? "a" : "p",
                    tt: u < 12 ? "am" : "pm",
                    T: u < 12 ? "A" : "P",
                    TT: u < 12 ? "AM" : "PM",
                    Z: r ? "UTC" : (String(t).match(n) || [""]).pop().replace(i, ""),
                    o: (D > 0 ? "-" : "+") + o(100 * Math.floor(Math.abs(D) / 60) + Math.abs(D) % 60, 4),
                    S: ["th", "st", "nd", "rd"][l % 10 > 3 ? 0 : (l % 100 - l % 10 != 10) * l % 10]
                };
                return e.replace(a, function(t) {
                    return t in T ? T[t] : t.slice(1, t.length - 1)
                })
            }
            );
            return s.masks = {
                default: "ddd mmm dd yyyy HH:MM:ss",
                shortDate: "m/d/yy",
                mediumDate: "mmm d, yyyy",
                longDate: "mmmm d, yyyy",
                fullDate: "dddd, mmmm d, yyyy",
                shortTime: "h:MM TT",
                mediumTime: "h:MM:ss TT",
                longTime: "h:MM:ss TT Z",
                isoDate: "yyyy-mm-dd",
                isoTime: "HH:MM:ss",
                isoDateTime: "yyyy-mm-dd'T'HH:MM:ss",
                isoUtcDateTime: "UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"
            },
            s.i18n = {
                dayNames: ["Вс", "Пн", "Вт", "Ср", "Чт", "Пт", "Сб", "Воскресенье", "Понедельник", "Вторник", "Среда", "Четверг", "Пятница", "Суббота"],
                monthNames: ["Янв", "Фев", "Мар", "Апр", "Май", "Июн", "Июл", "Авг", "Сен", "Окт", "Ноя", "Дек", "января", "февраля", "марта", "апреля", "мая", "июня", "июля", "августа", "сентября", "октября", "ноября", "декабря"]
            },
            $.localize.dfr && (s.i18n.dayNames = $.localize.dfr.abbreviatedDayNames.concat($.localize.dfr.dayNames),
            $.localize.dfr.abbreviatedMonthNames[1] = "февр",
            $.localize.dfr.abbreviatedMonthNames[2] = "марта",
            $.localize.dfr.abbreviatedMonthNames[4] = "мая",
            $.localize.dfr.abbreviatedMonthNames[5] = "июня",
            $.localize.dfr.abbreviatedMonthNames[6] = "июля",
            $.localize.dfr.abbreviatedMonthNames[8] = "сент",
            $.localize.dfr.abbreviatedMonthNames[10] = "нояб",
            s.i18n.monthNames = $.localize.dfr.abbreviatedMonthNames.concat($.localize.dfr.monthGenitiveNames).concat($.localize.dfr.monthNames.map(([t,...e])=>t.toUpperCase() + e.join("")))),
            s(this, t, e)
        }
        ,
        Date.prototype.daysBetween = function(t) {
            var e = new Date(this.getFullYear(),this.getMonth(),this.getDate())
              , a = (new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime() - e.getTime()) / 864e5;
            return Math.floor(a)
        }
        ,
        Date.prototype.dateEqual = function(t) {
            return this.getDate() === t.getDate() && this.getMonth() === t.getMonth() && this.getFullYear() === t.getFullYear()
        }
        ,
        Date.prototype.is1stJan = function() {
            return 1 === this.getDate() && 0 === this.getMonth()
        }
        ,
        Date.prototype.getUtcTime = function() {
            return this.getTime() - 6e4 * this.getTimezoneOffset()
        }
        ,
        Date.utcNow = function() {
            return (new Date).getUtcTime()
        }
        ,
        Date.prototype.addDays = function(t) {
            let e = new Date(this.valueOf());
            return e.setDate(e.getDate() + t),
            e
        }
        ,
        Date.prototype.addMinutes = function(t) {
            let e = new Date(this.valueOf());
            return e.setMinutes(e.getMinutes() + t),
            e
        }
        ,
        Date.prototype.addHours = function(t) {
            const e = new Date(this.valueOf());
            return isNaN(t) ? e : (e.setHours(e.getHours() + +t),
            e)
        }
        ,
        Date.prototype.addMinutes = function(t) {
            let e = new Date(this.valueOf());
            return e.setMinutes(e.getMinutes() + t),
            e
        }
        ;

    }
    , {}],
    11: [function(require, module, exports) {
        "use strict";
        Event.prototype.stopPropagation = function(t) {
            return function() {
                this.isPropagationStopped = !0,
                t.call(this)
            }
        }(Event.prototype.stopPropagation);

    }
    , {}],
    12: [function(require, module, exports) {
        "use strict";
        Map.prototype.every = function(t) {
            if ("function" != typeof t)
                throw new TypeError("Callback is not a function");
            let n = !0;
            return this.forEach((o,r,e)=>{
                n &= t(o, r, e)
            }
            ),
            1 == n
        }
        ,
        Map.prototype.some = function(t) {
            if (!(t instanceof Function))
                throw new TypeError("Callback is not a function");
            let n = !1;
            return this.forEach((o,r,e)=>{
                n || (n = t(o, r, e))
            }
            ),
            n
        }
        ,
        Map.prototype.reduce = function(t, n) {
            if ("function" != typeof t)
                throw new TypeError("Map reduce argument 1 must be a function");
            let o = n
              , r = 0;
            return this.forEach((e,i,f)=>{
                o = 1 != ++r || null != n ? t(o, e, i, f) : e
            }
            ),
            o
        }
        ,
        Map.prototype.map = function(t) {
            if ("function" != typeof t)
                throw new TypeError("Callback is not a function");
            const n = new Map;
            return this.forEach((o,r,e)=>{
                n.set(r, t(o, r, e))
            }
            ),
            n
        }
        ,
        Map.prototype.toArray = function(t) {
            if ("function" != typeof t && null != t)
                throw new TypeError("Callback if not a function");
            const n = [];
            return this.forEach((o,r,e)=>n.push(null == t ? o : t(o, r, e))),
            n
        }
        ,
        Map.prototype.find = function(t) {
            if ("function" != typeof t)
                throw new TypeError("Callback is not a function");
            let n = null;
            return this.forEach((o,r,e)=>{
                n || t(o, r, e) && (n = o)
            }
            ),
            n
        }
        ,
        Map.prototype.sort = function() {
            return new Map([...this.entries()].sort())
        }
        ;

    }
    , {}],
    13: [function(require, module, exports) {
        "use strict";
        Number.prototype.formatMoney = function(t, r, e) {
            var n = this
              , s = (t = isNaN(t = Math.abs(t)) ? 2 : t,
            r = null == r ? "." : r,
            e = null == e ? "," : e,
            n < 0 ? "-" : "")
              , u = parseInt(n = Math.abs(+n || 0).toFixed(t)) + ""
              , o = (o = u.length) > 3 ? o % 3 : 0;
            return s + (o ? u.substr(0, o) + e : "") + u.substr(o).replace(/(\d{3})(?=\d)/g, "$1" + e) + (t ? r + Math.abs(n - u).toFixed(t).slice(2) : "")
        }
        ,
        Number.prototype.countDecimals = function() {
            return Math.floor(this.valueOf()) === this.valueOf() ? 0 : this.toString().split(".")[1].length || 0
        }
        ,
        Number.prototype.toFixedNumber = function(t, r) {
            var e = Math.pow(r || 10, t);
            return Math.round(this * e) / e
        }
        ,
        Number.tryParseInt = function(t) {
            const r = parseInt(t);
            return isNaN(r) ? null : r
        }
        ;

    }
    , {}],
    14: [function(require, module, exports) {
        "use strict";
        Set.prototype.toArray = function(t) {
            if (null != t && "function" != typeof t)
                throw new TypeError("Callback at Set.prototype.toArray must be null or function");
            const o = [];
            return this.forEach(r=>o.push(null == t ? r : t(r))),
            o
        }
        ,
        Set.prototype.map = function(t) {
            if ("function" != typeof t)
                throw new TypeError("Callback at Set.prototype.map must be function");
            const o = new Set;
            return this.forEach(r=>o.add(t(r))),
            o
        }
        ,
        Set.prototype.filter = function(t) {
            if ("function" != typeof t)
                throw new TypeError("Callback at Set.prototype.map must be function");
            const o = new Set;
            return this.forEach(r=>{
                t(r) && o.add(r)
            }
            ),
            o
        }
        ;

    }
    , {}],
    15: [function(require, module, exports) {
        "use strict";
        if ("localStorage"in window || null !== window.localStorage) {
            const t = Storage.prototype.setItem;
            Storage.prototype.setItem = function(e, o) {
                try {
                    t.apply(this, arguments)
                } catch (e) {
                    if (-1 === e.message.indexOf("quota"))
                        throw wb.spa.logError(e),
                        e;
                    let o, r, a = {
                        len: 0
                    }, l = 0;
                    for (r in localStorage)
                        localStorage.hasOwnProperty(r) && (l += o = 2 * (localStorage[r].length + r.length),
                        a.len < o && (a = {
                            len: o,
                            key: r
                        }));
                    if (a.key)
                        if (a.len > 307200) {
                            this.removeItem(a.key);
                            const o = `localstorage delkey:${a.key}, len:${a.len / 1024} KB, key:${arguments[0]}, exp:${e.message}`;
                            console.log(o),
                            wb.spa.logError(new Error(o)),
                            t.apply(this, arguments)
                        } else {
                            const t = `localstorage exception key:${arguments[0]}, exp:${e.message}, storageKeys:${localStorage.length}, storageLen:${l / 1024} KB`;
                            console.log(t),
                            wb.spa.logError(new Error(t))
                        }
                }
            }
            ,
            Storage.prototype.trySetItem = function(t, e) {
                try {
                    this.setItem(t, e)
                } catch (t) {}
            }
            ,
            Storage.prototype.clearStartsWith = function(t, e) {
                if (t)
                    try {
                        Object.entries(this).filter(o=>0 === o[0].indexOf(t) && o[0] !== e).forEach(t=>{
                            this.removeItem(t[0])
                        }
                        )
                    } catch (t) {}
            }
            ,
            Storage.prototype.putObject = function(t, e, {tryCatch: o}={}) {
                if (o)
                    try {
                        this.setItem(t, JSON.stringify(e))
                    } catch (t) {}
                else
                    this.setItem(t, JSON.stringify(e))
            }
            ,
            Storage.prototype.getObject = function(t) {
                var e = this.getItem(t);
                try {
                    return e && JSON.parse(e)
                } catch (e) {
                    this.removeItem(t)
                }
                return null
            }
            ,
            Storage.prototype.hasItem = function(t) {
                return null != this.getItem(t)
            }
        }

    }
    , {}],
    16: [function(require, module, exports) {
        "use strict";
        String.prototype.capitalizeIf = function(t) {
            return t ? this.charAt(0).toUpperCase() + this.slice(1) : this
        }
        ,
        String.prototype.trimRight = function() {
            return this.replace(/\s+$/g, "")
        }
        ,
        String.prototype.trimLeft = function() {
            return this.replace(/^\s+/g, "")
        }
        ,
        String.prototype.trim = function() {
            return this.trimRight().trimLeft()
        }
        ,
        String.prototype.trimMiddle = function() {
            return this.trim().replace(/\s\s+/g, " ")
        }
        ,
        String.prototype.cleanTrashBetweenTd = function() {
            return this.replace(new RegExp(">[ \t\r\n\v\f]*<","g"), "><")
        }
        ,
        String.format = function() {
            for (var t = arguments[0], r = 0; r < arguments.length - 1; r++) {
                var e = new RegExp("\\{" + r + "\\}","gm");
                t = t.replace(e, arguments[r + 1])
            }
            return t
        }
        ,
        String.prototype.capitalize = function() {
            return this.charAt(0).toUpperCase() + this.slice(1)
        }
        ,
        String.prototype.endsWith = function(t) {
            return -1 !== this.indexOf(t, this.length - t.length)
        }
        ,
        String.prototype.toSafeString = function() {
            return encodeURIComponent(this.replace(/<\/?[^>]+>/gi, "").trim())
        }
        ,
        String.prototype.hashCode = function() {
            let t, r, e = 0;
            if (0 === this.length)
                return e;
            for (t = 0; t < this.length; t++)
                e = (e << 5) - e + (r = this.charCodeAt(t)),
                e |= 0;
            return e
        }
        ;

    }
    , {}],
    17: [function(require, module, exports) {
        "use strict";
        let HttpClient = function() {
            function e() {}
            var t = e.prototype;
            return t.fetchJSON = async function(e, t={}, r={}) {
                let o;
                try {
                    if (r.timeout) {
                        const e = new AbortController;
                        setTimeout(()=>e.abort(), r.timeout),
                        t.signal = e.signal
                    }
                    let s;
                    switch (o = await fetch(e, t),
                    this._wrapTimeout(o, r),
                    o.status) {
                    case 401:
                    case 403:
                        throw new UnauthorizeError({
                            jwtDrop: o.headers.has("X-Jwt-Drop")
                        });
                    case 404:
                        throw new NotFoundError;
                    case 204:
                        s = null;
                        break;
                    default:
                        if (!o.ok) {
                            const e = new Error(`Fetch failed with status code ${o.status}`);
                            throw e.status = o.status,
                            r.keepRespData && (e.data = await o.json()),
                            e
                        }
                        s = await o.json()
                    }
                    return r.noProcessResponse || null == s ? r.includeResponse ? {
                        response: o,
                        responseData: s,
                        headers: o.headers
                    } : s : new Promise((e,t)=>{
                        $.processResponse(s, t=>r.includeResponse ? e({
                            response: o,
                            responseData: t,
                            headers: o.headers
                        }) : e(t), e=>t(new KnownServerError(e)), t=>r.includeResponse ? e({
                            response: o,
                            responseData: t,
                            headers: o.headers
                        }) : e(t))
                    }
                    )
                } catch (s) {
                    let n = s;
                    if ("AbortError" == s.name && r.throwAbortError)
                        throw s;
                    const i = !s.isCustomError && s instanceof TypeError && ("Failed to fetch" === s.message || "NetworkError when attempting to fetch resource." === s.message || "Cancelled" === s.message);
                    if (i && (n = new CancelledRequestError(s.message)),
                    (i || "AbortError" == s.name) && r.tryResend)
                        return WbSpaModel.prototype.$services.retryFetchService.saveRequest(e, t, r),
                        Promise.resolve({});
                    if (r.hasOwnProperty("defaultValue"))
                        return r.includeResponse ? {
                            response: o,
                            responseData: r.defaultValue
                        } : r.defaultValue;
                    var a;
                    if (n.isCustomError || "AbortError" !== s.name && console.error(`Unknown server error, msg=${s.message}, requested_url=${e}`),
                    n.isUnauthorize)
                        n.jwtDrop && WbSpaModel.prototype.$auth.setToken(null),
                        r.redirectUnauth && wb.spa.signIn({
                            query: {
                                returnUrl: window.location.href
                            }
                        }, null !== (a = r.replaceState) && void 0 !== a && a);
                    throw n
                }
            }
            ,
            t.fetchBasicJSON = async function(e, t={}, r={}) {
                var o;
                if (r.timeout) {
                    const e = new AbortController;
                    setTimeout(()=>e.abort(), r.timeout),
                    t.signal = e.signal
                }
                if (!t.headers && (t.headers = new Headers),
                r.addUserHeader) {
                    const e = WbSpaModel.prototype.$user.getIdInt();
                    e && t.headers.set("X-Userid", e)
                }
                if (r.addAuthHeader) {
                    const e = WbSpaModel.prototype.$auth.jwt;
                    e && t.headers.set("Authorization", `Bearer ${e}`)
                }
                const a = null !== (o = r.retry) && void 0 !== o ? o : 1;
                let s;
                for (let o = 1; o <= a; o++)
                    try {
                        return await fetch(e, t).then(async t=>204 === t.status ? Promise.resolve(r.return204 ? t : null) : t.ok ? s = await t.json() : void (r.logOff || wb.spa.logError(new Error(`Failed fetch. status:${t.status}; type:${t.type}`), {
                            url: e
                        })))
                    } catch (t) {
                        if ("AbortError" === t.name && r.throwAbortError)
                            throw t;
                        if (t instanceof TypeError && "Cancelled" === t.message)
                            return null;
                        if (r.logOff || wb.spa.logError(t, {
                            url: e,
                            attempt: o
                        }),
                        o === a && r.nullOnError)
                            return null;
                        if (o === a && t instanceof TypeError && ("Failed to fetch" === t.message || "NetworkError when attempting to fetch resource." === t.message))
                            throw new NetworkError
                    }
                return null
            }
            ,
            t.fetchText = async function(e, t, r={}) {
                let o;
                if (r.timeout) {
                    const e = new AbortController;
                    setTimeout(()=>e.abort(), r.timeout),
                    t.signal = e.signal
                }
                try {
                    let s;
                    if (401 === (o = await fetch(e, t)).status)
                        throw new UnauthorizeError;
                    return o.ok && (s = await o.text()),
                    this._wrapTimeout(o, r),
                    s
                } catch (t) {
                    let o = t;
                    var a;
                    if (!t.isCustomError && t instanceof TypeError && ("Failed to fetch" === t.message || "NetworkError when attempting to fetch resource." === t.message || "Cancelled" === t.message) && (o = new CancelledRequestError),
                    o.isCustomError || (console.log(t.message),
                    o = new KnownServerError("Unknown server error, msg=" + t.message + ", requested_url=" + e)),
                    o.isUnauthorize)
                        o.jwtDrop && WbSpaModel.prototype.$auth.setToken(null),
                        r.redirectUnauth && wb.spa.signIn({
                            query: {
                                returnUrl: window.location.href
                            }
                        }, null !== (a = r.replaceState) && void 0 !== a && a);
                    throw o
                }
            }
            ,
            t.fetchStaticDataV2 = async function(e, t=3e4, r="json") {
                var o, a;
                return "text" === r ? null !== (o = await this.fetchText(wb.helpers.url.urlStaticData("data/" + e), {}, {
                    timeout: t,
                    nullOnError: !0
                })) && void 0 !== o ? o : await this.fetchText(wb.helpers.url.urlStaticDataObsolete(e), {
                    cache: "no-cache"
                }, {
                    timeout: t,
                    nullOnError: !0
                }) : null !== (a = await this.fetchBasicJSON(wb.helpers.url.urlStaticData("data/" + e), {}, {
                    timeout: t,
                    nullOnError: !0
                })) && void 0 !== a ? a : await this.fetchBasicJSON(wb.helpers.url.urlStaticDataObsolete(e), {
                    cache: "no-cache"
                }, {
                    timeout: t,
                    nullOnError: !0
                })
            }
            ,
            t.fetchStaticV2 = async function(e, t=3e4, r="json") {
                var o, a;
                return "text" === r ? null !== (o = await this.fetchText(wb.helpers.url.urlStaticData(e), {}, {
                    timeout: t,
                    nullOnError: !0
                })) && void 0 !== o ? o : await this.fetchText(e, {
                    cache: "no-cache"
                }, {
                    timeout: t,
                    nullOnError: !0
                }) : null !== (a = await this.fetchBasicJSON(wb.helpers.url.urlStaticData(e), {}, {
                    timeout: t,
                    nullOnError: !0
                })) && void 0 !== a ? a : await this.fetchBasicJSON(e, {
                    cache: "no-cache"
                }, {
                    timeout: t,
                    nullOnError: !0
                })
            }
            ,
            t._wrapTimeout = function(e, t) {
                return t && e.headers.has("X-Timeout") && (t.modified = {
                    timeout: !0
                }),
                t
            }
            ,
            e
        }();
        module.exports = new HttpClient;

    }
    , {}],
    18: [function(require, module, exports) {
        "use strict";
        require("./extensions");
        const HOST_AUTH_ALLOW = ["ru-basket-api.wildberries.ru", "uz-basket-api.wildberries.ru", "localhost", "wbxoofex.wildberries.ru", "logistics.wb.ru", "user-geo-data.wildberries.ru"]
          , HOST_SITE = ["www.wildberries.ru", "uz.wildberries.ru", "ru-basket-api.wildberries.ru", "uz-basket-api.wildberries.ru", "localhost"];
        !function(e) {
            window.fetch = function(t, r={}) {
                var o;
                const {headers: n={}, ...s} = r
                  , a = new Headers(n)
                  , i = null === (o = document.querySelector("input[name=__RequestVerificationToken]")) || void 0 === o ? void 0 : o.value;
                try {
                    const e = new URL(t.startsWith("//") ? `${document.location.protocol}${t}` : t);
                    e.hostname === window.location.host && i && a.set("X-RequestVerificationToken", i),
                    (e.hostname === window.location.host && e.port === window.location.port || HOST_AUTH_ALLOW.includes(e.hostname)) && (HOST_SITE.includes(e.hostname) && (a.set("X-Spa-Version", WbSpaModel.appVersion),
                    a.set("X-Requested-With", "XMLHttpRequest")),
                    !a.has("Authorization") && WbSpaModel.prototype.$auth.jwt && a.set("Authorization", `Bearer ${WbSpaModel.prototype.$auth.jwt}`))
                } catch (e) {
                    a.set("X-Requested-With", "XMLHttpRequest"),
                    a.set("X-Spa-Version", WbSpaModel.appVersion),
                    !a.has("Authorization") && WbSpaModel.prototype.$auth.jwt && a.set("Authorization", `Bearer ${WbSpaModel.prototype.$auth.jwt}`)
                }
                return r.body instanceof URLSearchParams && (a.set("Content-Type", "application/x-www-form-urlencoded; charset=UTF-8"),
                s.body = s.body.toString()),
                e(t, {
                    credentials: "same-origin",
                    headers: a,
                    ...s
                })
            }
        }(window.fetch);
        const WbSpa = require("./spaConfiguration")
          , MainLayoutSpa = require("./mainLayout")
          , CatalogMenu = require("./services/catalog/catalogMenu");
        require("../statistic"),
        require("../view"),
        require("../xnm"),
        require("./utils/errors"),
        require("../localize"),
        require("./modules/spa.popup"),
        wb.namespace("spa", function() {
            let e = {}
              , t = new MainLayoutSpa;
            const r = new WbSpa
              , o = {}
              , n = {};
            async function s() {
                var e, t;
                if (!(null !== (e = wb.global.settings) && void 0 !== e && null !== (e = e.variables) && void 0 !== e && e.resourseStatSettings && "PerformanceObserver"in window && null !== (t = PerformanceObserver) && void 0 !== t && null !== (t = t.supportedEntryTypes) && void 0 !== t && t.includes("resource")))
                    return;
                const r = await wb.user.getShardAsync();
                for (const e in wb.global.settings.variables.resourseStatSettings) {
                    const [t,o] = wb.global.settings.variables.resourseStatSettings[e].split(";")
                      , n = parseInt(o)
                      , [s,i] = t.split("-")
                      , l = parseInt(s)
                      , c = parseInt(i);
                    if (r >= l && r <= c && n > 0) {
                        let t = 0;
                        new PerformanceObserver(async r=>{
                            if (r.getEntries) {
                                const l = r.getEntries();
                                for (const r of l.filter(t=>t.initiatorType === e)) {
                                    if (t % n == 0 && !a(r)) {
                                        var o, s, i;
                                        const e = {
                                            url: r.name,
                                            ok: r.responseStatus > 300 ? 1 : 0,
                                            error: r.responseStatus >= 300 ? r.responseStatus : 0,
                                            dns: parseInt(r.domainLookupEnd - r.domainLookupStart),
                                            connect: parseInt(r.connectEnd - r.connectStart),
                                            ttfb: parseInt(r.responseStart - r.requestStart),
                                            load: r.responseStart > 0 ? parseInt(r.responseEnd - r.fetchStart) : 0,
                                            full: parseInt(r.duration),
                                            cache: "HIT" === (null === (o = r.serverTiming) || void 0 === o || null === (o = o.find(e=>"cache" === e.name)) || void 0 === o ? void 0 : o.description) ? 1 : 0,
                                            srv: null !== (s = null === (i = r.serverTiming) || void 0 === i || null === (i = i.find(e=>"srv" === e.name)) || void 0 === i ? void 0 : i.description) && void 0 !== s ? s : "",
                                            size: r.transferSize
                                        };
                                        wb.analitics.sendEvent("performance_static_download", e)
                                    }
                                    t++
                                }
                            }
                        }
                        ).observe({
                            type: "resource",
                            buffered: !0
                        });
                        let r = 0;
                        new PerformanceObserver(e=>{
                            if (e.getEntries) {
                                const t = e.getEntries();
                                for (const e of t.filter(e=>"img-load-error" === e.name))
                                    r % n == 0 && wb.analitics.sendEvent("performance_static_download", {
                                        url: e.detail.url,
                                        ok: 0
                                    }),
                                    r++
                            }
                        }
                        ).observe({
                            type: "mark",
                            buffered: !0
                        })
                    }
                }
            }
            function a(e) {
                return !(e.transferSize > 0) && (e.decodedBodySize > 0 || e.duration < 3)
            }
            return $.views.loadTemplateAsync = async function(e, t="") {
                if ($.templates[e])
                    return $.templates[e];
                if (!o[e]) {
                    let s;
                    if (window._debug)
                        s = e;
                    else {
                        var n;
                        const o = r.$helper.currentCulture || "ru"
                          , a = `${e}-${wb.settings.currentLocale}-${o}.json`.toLowerCase()
                          , i = null === (n = r.$router.tmplHashes) || void 0 === n ? void 0 : n[a];
                        s = t ? `${e}-ru-${o}.${i}.json`.toLowerCase() : a.replace(".json", `.${i}.json`)
                    }
                    const a = t ? `${t}${s}` : $.views.converters.urlForJsTmpl(s);
                    o[e] = window._debug ? r.$httpClient.fetchText(a) : r.$httpClient.fetchStaticV2(a, void 0, "text")
                }
                try {
                    const t = await o[e];
                    try {
                        const r = JSON.parse(t);
                        $.templates(r)
                    } catch (r) {
                        $.templates(e, t)
                    }
                    return o[e] = null,
                    $.templates[e]
                } catch (t) {
                    throw o[e] = null,
                    t
                }
            }
            ,
            $.views.loadTemplateDictionaryAsync = function(e) {
                if (null == n[e]) {
                    let o;
                    if (window._debug)
                        o = e;
                    else {
                        var t;
                        const n = `${e}-${wb.settings.currentLocale}-${r.$helper.currentCulture || "ru"}.json`.toLowerCase()
                          , s = null === (t = r.$router.tmplHashes) || void 0 === t ? void 0 : t[n];
                        o = n.replace(".json", `.${s}.json`)
                    }
                    const s = $.views.converters.urlForJsTmpl(o);
                    n[e] = (window._debug ? r.$httpClient.fetchJSON(s) : r.$httpClient.fetchStaticV2(s)).then(e=>($.templates(e),
                    Promise.resolve())).catch(t=>(console.error(t),
                    n[e] = null,
                    Promise.reject(t)))
                }
                return n[e]
            }
            ,
            $.views.converters({
                formatString: function() {
                    let[e,t,r,o] = arguments;
                    if ("string" != typeof e)
                        throw new Error("Template must be a string");
                    return r && (e = e.replace(/\[(\d+)\]/gm, "{$1}")),
                    o && (t = $.views.converters.encode(t)),
                    String.format.apply(null, [e, t])
                },
                dateFormat: function(e, t) {
                    return e.format(t)
                }
            }),
            {
                init: async function(e) {
                    var o;
                    const {router: n, seoHelper: a, menuLkHelper: i} = e;
                    Object.defineProperty(WbSpa, "appVersion", {
                        value: n.appVersion,
                        writable: !1
                    }),
                    r.$moduleLoader.setModules(n.modules),
                    r.$moduleLoader.setServices(n.services);
                    const l = [];
                    if ("AbortController"in window || l.push(r.$moduleLoader.loadModuleAsync("abortControllerPolyfill", !0)),
                    "FormData"in window && "get"in (null === (o = FormData) || void 0 === o ? void 0 : o.prototype) || l.push(r.$moduleLoader.loadModuleAsync("formDataPolyfill", !0)),
                    "undefined" == typeof navigator || navigator.locks || l.push(r.$moduleLoader.loadModuleAsync("navigatorLocksPolyfill", !0)),
                    l.length > 0 && await Promise.all(l),
                    await wb.global.loadSettingAsync(),
                    r.$seoHelper.init(a.items, a.updateUrl, a.defaultTitle),
                    r.$menuLk.setStatic(i),
                    wb.displayModeSettings.init(),
                    wb.network.init(),
                    wb.analitics.getSplitInfo(),
                    WbSpaModel.prototype.$user.getBannersClusters(),
                    await r.$router.init(n.routes, n.routesDictionary, n.ssrModel, n.tmplHashes),
                    -1 === document.location.hostname.indexOf("wildberries.ru") && -1 === document.location.hostname.indexOf("wildberries.by") && "localhost" !== document.location.hostname)
                        return wb.spa.logError({
                            message: `fishing from ${document.location}`
                        }, {
                            referrer: wb.spa.getReferrer(),
                            cookie: document.cookie
                        }),
                        wb.popup.renderModalError("Вы находитесь на фишинговом сайте!"),
                        void (wb.spa = null);
                    wb.displayModeSettings.init(),
                    t.init(),
                    document.body.addEventListener("load", e=>{
                        var t;
                        "IMG" === e.target.tagName && e.target.complete && (null === (t = e.target.closest(".img-plug")) || void 0 === t || t.classList.remove("img-plug--error"))
                    }
                    , !0),
                    navigator.userAgent.indexOf("MSIE ") > 0 || navigator.userAgent.indexOf("Trident/") > 0 || document.body.addEventListener("error", e=>{
                        var t;
                        if (null !== (t = wb.global.settings) && void 0 !== t && null !== (t = t.switches) && void 0 !== t && t.enableErrorImagePlug && "IMG" === e.target.tagName && -1 === e.target.src.indexOf("/i/blank.gif")) {
                            var r;
                            const t = e.target.closest(".img-plug");
                            null == t || t.classList.add("img-plug--error"),
                            null == t || t.classList.remove("load"),
                            null === (r = performance) || void 0 === r || r.mark("img-load-error", {
                                detail: {
                                    url: e.target.src
                                }
                            })
                        }
                    }
                    , !0),
                    setTimeout(s, 2e3)
                },
                registerViewModel: function(t) {
                    const o = Object.getPrototypeOf(t.prototype);
                    o === Object.prototype ? Object.setPrototypeOf(t.prototype, WbSpa.prototype) : Object.setPrototypeOf(o, WbSpa.prototype),
                    r.$router.getAppliedEntries().forEach(r=>{
                        e[r] = t
                    }
                    )
                },
                getViewModelByName: function(t) {
                    return e[t]
                },
                redirect: function(e, t, o=!1) {
                    r.$router.moveTo(e, t, !1, o)
                },
                setUserStatus: function({userIsAuth: e, userUid: t, userIsEmp: o, userId: n}) {
                    $.observable(r.$router).setProperty({
                        userIsAuth: e,
                        userUid: t,
                        userId: n
                    }),
                    r.$auth.refreshToken(e),
                    r.$eventBus.dispatchEvent(new CustomEvent(e ? "onUserAuth" : "onUserUnAuth")),
                    r.$services.favsService.setKey(e, t),
                    r.$services.userData.setKey(e, t),
                    r.$services.orderService.startSync(r.$services.cartService.publicBasketApiUrl),
                    r.$services.wbxOrderService.startSync(r.$services.cartService.publicBasketApiUrl),
                    e || r.$services.refundService.clear(),
                    o && r.$router.$menuLk.updateMenuItemsVisibility(!0)
                },
                setUserExternalIdentified: function() {
                    r.$services.userData.userData && $.observable(r.$services.userData.userData).setProperty({
                        isIdentityVerified: !0
                    })
                },
                refresh: function() {
                    r.$router.refresh()
                },
                getMainLayout: function() {
                    return t
                },
                getCatalogMenu: async function() {
                    return this._catalogMenuTask || (this._catalogMenuTask = new Promise(async(e,t)=>{
                        const r = new CatalogMenu;
                        await r.initMenu(),
                        r.isInited ? e(r) : (t(),
                        this._catalogMenuTask = null)
                    }
                    )),
                    this._catalogMenuTask
                },
                clearCatalogMenu: function() {
                    this._catalogMenuTask = null
                },
                getReferrer: function() {
                    return r.$router.referrer
                },
                logError: function(e, t, r=!1) {
                    try {
                        const o = {
                            msg: e.message
                        };
                        r && (o.stk = e.stack),
                        t && (o.data = t);
                        const n = "/webapi/logging/jserror"
                          , s = {
                            method: "POST",
                            headers: {
                                "Content-Type": "application/json"
                            },
                            body: JSON.stringify(o)
                        };
                        fetch(n, s).catch(()=>{
                            WbSpaModel.prototype.$services.retryFetchService.saveRequest(n, s)
                        }
                        )
                    } catch (e) {}
                },
                orderMetrics: function(e) {
                    try {
                        fetch(`/webapi/logging/orders/metrics?status=${e}`, {
                            method: "POST"
                        })
                    } catch (e) {}
                },
                signIn: function(e, t) {
                    r.$router.moveToSignIn(e, t)
                },
                afterSignOut: function() {
                    wb.spa.signIn({
                        query: {
                            returnUrl: window.location.href
                        }
                    }),
                    t.updateAfterLogin()
                }
            }
        }()),
        wb.namespace("global", function() {
            const e = "user-settings"
              , t = "global-settings-v2"
              , r = {
                switches: {},
                variables: {},
                counters: {}
            };
            let o, n, s, a = [], i = !0, l = 200, c = 0;
            function u() {
                return n || ((n = localStorage.getObject(e)) || (n = {}),
                n.closed || (n.closed = []),
                n.confirmed || (n.confirmed = []),
                n)
            }
            return window.addEventListener("storage", e=>{
                if (e.key === t) {
                    if (window._debug && e.newValue)
                        try {
                            const {hash: t, data: r} = JSON.parse(e.newValue);
                            o = r,
                            console.log("[globalsettings] changed external")
                        } catch (e) {
                            console.error("[globalsettings] changed external failed")
                        }
                    a.forEach(e=>e(o))
                }
            }
            ),
            {
                get settings() {
                    const e = o || (o = null !== (n = null === (s = localStorage.getObject(t)) || void 0 === s ? void 0 : s.data) && void 0 !== n ? n : r);
                    var n, s;
                    return e.switches.enableWbxOrder = !0,
                    e
                },
                get userSettings() {
                    return u()
                },
                saveUserSettings: function() {
                    localStorage.putObject(e, u()),
                    WbSpa.prototype.$eventBus.dispatchEvent(new CustomEvent("UserSettingsSaved"))
                },
                subscribe(e) {
                    a.push(e)
                },
                loadSettingAsync: function e() {
                    s || (s = setInterval(e, 12e4)),
                    i ? i = !1 : l = 2e3;
                    const r = c >= 2 ? "/webapi/settings/global/hash" : wb.helpers.url.urlStaticData(`data/settings-front-${wb.settings.currentLocale}.json.hash`);
                    return WbSpa.prototype.$httpClient.fetchText(r, {
                        method: "GET",
                        cache: "no-cache"
                    }, {
                        noProcessResponse: !0,
                        timeout: l
                    }).then(e=>{
                        var r;
                        if (void 0 === e)
                            throw new Error;
                        if (e !== (null === (r = localStorage.getObject(t)) || void 0 === r ? void 0 : r.hash)) {
                            const r = c >= 2 ? "/webapi/settings/global/get" : wb.helpers.url.urlStaticData(`data/settings-front-${wb.settings.currentLocale}.json`);
                            return WbSpa.prototype.$httpClient.fetchJSON(r, {
                                method: "GET",
                                cache: "no-cache",
                                headers: {
                                    "Content-Type": "application/json"
                                }
                            }, {
                                noProcessResponse: !0,
                                timeout: l
                            }).then(r=>(o = r,
                            localStorage.putObject(t, {
                                hash: e,
                                data: o
                            }),
                            c = 0,
                            window._debug && console.log("[globalsettings] changed"),
                            a.forEach(e=>e(o)),
                            function(e) {
                                if (!e || !WbSpaModel.appVersion)
                                    return;
                                const t = e.split(".")
                                  , r = WbSpaModel.appVersion.split(".");
                                if (t.length < 3 || r.length < 3)
                                    return;
                                const o = +((parseInt(r[0]) || 0) + ("000" + (parseInt(r[1]) || 0)).slice(-3) + ("000" + (parseInt(r[2]) || 0)).slice(-3))
                                  , n = +(t[0] + ("000" + t[1]).slice(-3) + ("000" + t[2]).slice(-3));
                                o < n && window.location.reload()
                            }(o.variables.siteMinVersion),
                            Promise.resolve())).catch(()=>Promise.resolve())
                        }
                        return Promise.resolve()
                    }
                    ).catch(()=>(c++,
                    Promise.resolve()))
                }
            }
        }());

    }
    , {
        "../localize": 4,
        "../statistic": 161,
        "../view": 162,
        "../xnm": 164,
        "./extensions": 5,
        "./mainLayout": 31,
        "./modules/spa.popup": 39,
        "./services/catalog/catalogMenu": 103,
        "./spaConfiguration": 140,
        "./utils/errors": 146
    }],
    19: [function(require, module, exports) {
        "use strict";
        let ChangeCurrency = function() {
            function e(e) {
                this.mainLayout = e,
                $.observable(e.$userEnv).setProperty({
                    currency: e.$user.getCurrency()
                }),
                this.currentCurrency = e.$user.getCurrency(),
                this.changeCurrency = this.changeCurrency.bind(this),
                $.templates({
                    changeCurrencyTmpl: '\n               <h2 class="popup__header">Выберите валюту</h2>\n                <div class="country">\n                    <div class="country__wrap" data-link="{on \'click\' \'.j-currency-item\' changeCurrency}">\n                    {^{radiogroup currentCurrency}}\n                        {^{props ~wbCurrencies sort=sort ^~current=currentCurrency}}\n                            <label class="radio-with-text{{if key == ~current}} radio-with-text--current{{/if}}">\n                                <input class="j-currency-item" type="radio" name="currency" value=\'{{:key}}\' ">\n                                <span class="radio-with-text__text radio-with-text__text--flag">\n                                    <span class="radio-with-text__language"><span class="radio-with-text__flag flag-{{:prop.locale}}"></span>{{:key}}</span>\n                                    <span class="radio-with-text__name">{{:prop.name}}</span>\n                                </span>\n                            </label>\n                        {{/props}}\n                    {{/radiogroup}}\n                    </div>\n                </div>\n        '
                }),
                document.addEventListener("click", e.$helper.delegator(".j-currency-show-popup", (e,r)=>this.showPopup()))
            }
            var r = e.prototype;
            return r.showPopup = function() {
                this.currentPopup = wb.popup.showCustomPopup({
                    useHtml: !0,
                    popupClassesList: ["popup-country", "j-popup-country", "shown"],
                    contentClasses: ["popup__content"],
                    useCenteredFunction: !0,
                    modal: !0,
                    closeClass: ["j-close", "popup__close"],
                    closeSelector: ".j-close",
                    onShow: e=>$.templates.changeCurrencyTmpl.link(e.querySelector(".popup__content"), this)
                })
            }
            ,
            r.sort = function(e, r) {
                return e.key === this.view.data.currentCurrency ? -1 : r.key === this.view.data.currentCurrency ? 1 : 0
            }
            ,
            r.changeCurrency = function(e) {
                const r = e.target.value;
                this.mainLayout.$user.setCurrency(r).then(()=>{
                    var e;
                    $.observable(this.mainLayout.$userEnv).setProperty({
                        currency: r
                    }),
                    this.mainLayout.$eventBus.dispatchEvent(new CustomEvent("CurrencyChanged",{
                        detail: {
                            currency: r
                        }
                    })),
                    null === (e = this.currentPopup) || void 0 === e || e.close()
                }
                )
            }
            ,
            r.refresh = function(e) {
                wb.currencies.info[e] && $.observable(this).setProperty("currentCurrency", e)
            }
            ,
            e
        }();
        module.exports = ChangeCurrency;

    }
    , {}],
    20: [function(require, module, exports) {
        "use strict";
        function _assertThisInitialized(e) {
            if (void 0 === e)
                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }
        function _inheritsLoose(e, t) {
            e.prototype = Object.create(t.prototype),
            e.prototype.constructor = e,
            _setPrototypeOf(e, t)
        }
        function _setPrototypeOf(e, t) {
            return (_setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                return e.__proto__ = t,
                e
            }
            )(e, t)
        }
        let Footer = function(e) {
            function t() {
                var t;
                return (t = e.call(this) || this).bannersLoaded = !1,
                t.footerBanners = [],
                t._onChangeDisplayMode = t._onChangeDisplayMode.bind(_assertThisInitialized(t)),
                t._loadBanners = t._loadBanners.bind(_assertThisInitialized(t)),
                t.$eventBus.addEventListener("GeoUpdated", ()=>t._loadBanners(!0)),
                t
            }
            _inheritsLoose(t, e);
            var n = t.prototype;
            return n.init = async function() {
                await this.$helper.loadJsAsync(wb.settings.scripts.bannersTag);
                const e = document.querySelector(".j-footer");
                $.link(!0, e, this),
                this.showFooterObserver = WbSpaModel.prototype.$observerHelper.getVerticalObserver(e),
                e.addEventListener(this.showFooterObserver.elementInViewportEventName, ()=>{
                    this._loadBanners(),
                    WbSpaModel.prototype.$analitic.sendEvent("Footer_S")
                }
                ),
                this.showFooterObserver.observe()
            }
            ,
            n.onMenuSelected = function(e) {
                if ("m" !== wb.settings.displayMode)
                    return;
                e.currentTarget.parentNode.classList.toggle("dropdown-open")
            }
            ,
            n.sendStatEvent = function(e) {
                const t = e.currentTarget;
                t && WbSpaModel.prototype.$analitic.sendEvent("Footer_T", {
                    name: t.dataset.wbaFooterName
                })
            }
            ,
            n._onChangeDisplayMode = function() {
                this._setBanners()
            }
            ,
            n._setBanners = function() {
                if (!this.banners)
                    return;
                const e = "phone" == wb.settings.displayType;
                $.observable(this).setProperty({
                    footerBanners: e ? this.banners.mobileBanners : this.banners.desktopBanners
                })
            }
            ,
            n._loadBanners = async function(e) {
                if (this.bannersLoaded && !e)
                    return;
                this.bannersLoaded = !0;
                const [t] = await Promise.all([this.$services.bannersService.getBannersForFooterAsync(), this.$helper.loadJsAsync(wb.settings.scripts.swiper)]);
                this.banners = t,
                this._onChangeDisplayMode(),
                !e && $.observe(wb.settings, "displayType", this._onChangeDisplayMode)
            }
            ,
            t
        }(WbSpaModel);
        module.exports = Footer;

    }
    , {}],
    21: [function(require, module, exports) {
        "use strict";
        let GeoLocation = function() {
            function e() {
                this.$eventBus.addEventListener("CurrencyChanged", this._onChangeCurrency.bind(this))
            }
            var t = e.prototype;
            return t.initPreferredLocation = async function() {
                await this.updateLocation(),
                document.querySelectorAll(".j-geocity-link").forEach(e=>{
                    e.addEventListener("click", this.doOnGeoBtnClick.bind(this))
                }
                )
            }
            ,
            t.updateLocation = async function() {
                this.location = await this.$user.getLocationData(),
                this.setCityName(this.location.address)
            }
            ,
            t.setCityName = function(e) {
                const t = document.querySelectorAll(".j-geocity-link")
                  , s = decodeURI(e);
                t.forEach(e=>{
                    e.textContent !== s && (e.textContent = s)
                }
                )
            }
            ,
            t.doOnGeoBtnClick = function(e) {
                const t = e.currentTarget;
                e.preventDefault(),
                t.classList.contains("_click") || (t.classList.add("_click"),
                this.openDeliveryPointsPopup().then(e=>t.classList.remove("_click")))
            }
            ,
            t.findCurrentAddress = function(e, t=!1) {
                return this.location ? null == e ? void 0 : e.find(e=>e.lat == this.location.latitude && e.lon == this.location.longitude && (e.address == this.location.address || !t)) : null
            }
            ,
            t.openDeliveryPointsPopup = async function(e) {
                const t = await this.$moduleLoader.loadModuleAsync("deliveryPointsChoosePopup");
                this.dpPopup || (this.dpPopup = new t),
                await this.dpPopup.init({
                    source: "geo",
                    selectAddress: (e,t,s,i)=>{
                        const d = s || this.$services.userAddressService.get(t, e);
                        this._submitGeo(d, i)
                    }
                    ,
                    updateSelectedAddresses: t=>{
                        const s = this.findCurrentAddress(t.courier.list, !0)
                          , i = this.findCurrentAddress(t.self.list);
                        t.courier.selected = null == s ? void 0 : s.addressId,
                        t.self.selected = null == i ? void 0 : i.addressId,
                        t.preferred = "courier" === e || "self" === e ? e : s ? "courier" : "self"
                    }
                    ,
                    beforeSelectDw: (e,t)=>{
                        "self" != $.view(e.target).ctxPrm("selectedDeliveryWay") && (this.dpPopup.deliveryWays.length < 2 || "self" === $.view(e.target).data.code && this.$moduleLoader.loadModuleAsync("basketProductModel").then(t=>{
                            var s;
                            const i = (null === (s = this.$services.cartService.get(!0).basketItems) || void 0 === s ? void 0 : s.map(e=>new t(e)).filter(e=>e.onlyCourier)) || [];
                            i.length > 0 && (e.preventDefault(),
                            this.$moduleLoader.loadModuleAsync("productCourierOnlyPopup").then(e=>{
                                var t;
                                e.show(e.template, i, null === (t = this.dpPopup.selectedAddresses) || void 0 === t ? void 0 : t.preferred, this.openDeliveryPointsPopup.bind(this))
                            }
                            ),
                            this.dpPopup.close())
                        }
                        ))
                    }
                }),
                this.dpPopup.show()
            }
            ,
            t._onChangeCurrency = function() {
                "SpaBasketEntrypoint" !== this.$router.currentRoute.name && this.$services.cartService.localBasket.enrichProductsIfNeedAsync({
                    force: !0
                })
            }
            ,
            t._submitGeo = function(e, t) {
                var s, i;
                let d, o = this.map;
                if ((null != e && e.id || null != e && e.addressId) && (d = e),
                d || (d = null != o && o.selectedPointId ? ("courier" === o.deliveryType ? o.courierList : o.visiblePoints).find(e=>e.id === o.selectedPointId) : o.selectedPoint),
                !d)
                    return;
                const n = d.id || d.addressId || (null == o ? void 0 : o.selectedPointId);
                this.saveLastAddressAsync(n, d.deliveryType, e.address, t, null !== (s = d.officeId) && void 0 !== s ? s : d.addressId),
                this.$user.setGeo(d.lat, d.lon, d.address, null !== (i = d.officeId) && void 0 !== i ? i : d.addressId, d.dest, d.sign).then(()=>{
                    this.$eventBus.dispatchEvent(new CustomEvent("ExternalSelectAddress",{
                        detail: {
                            selectedAddressId: n,
                            dWay: d.deliveryType
                        }
                    }))
                }
                ),
                this.dpPopup.close()
            }
            ,
            t.saveLastAddressAsync = async function(e, t, s, i, d) {
                this.$services.cartService.localBasket.setAddress(e, t, s, i),
                this.$router.userIsAuth && this.$httpClient.fetchJSON(this.$services.cartService.publicBasketApiUrl + "/spa/address/select", {
                    credentials: "include",
                    method: "POST",
                    body: this.$helper.objectSerializer({
                        addressId: e,
                        deliveryWay: t
                    })
                }),
                this.$analitic.setCurrentAddress(t, d),
                this.$analitic.sendAddressSelection({
                    source: "Header",
                    deliveryType: t,
                    addressId: e,
                    address: s,
                    isChanged: i
                })
            }
            ,
            e
        }();
        module.exports = GeoLocation;

    }
    , {}],
    22: [function(require, module, exports) {
        "use strict";
        const ShortBasketInfo = require("./shortBasketInfo")
          , Search = require("./search")
          , UserBalance = require("./userBalance")
          , ChangeCurrency = require("./changecurrency");
        let Header = function() {
            function e(e) {
                this.layoutModel = e.layoutModel,
                this.shortBasketInfo = new ShortBasketInfo(e),
                this.search = new Search,
                this.userBalance = new UserBalance(this.layoutModel),
                this.changeCurrency = new ChangeCurrency(this.layoutModel),
                this.chatStartedRefunds = new this.layoutModel.$helper.Deferred
            }
            var t = e.prototype;
            return t._initOnlineChat = function(e) {
                setTimeout(()=>{
                    this.layoutModel.$moduleLoader.loadModuleAsync("onlineChatPopup").then(t=>{
                        var n;
                        this.onlineChat = new t({
                            auth: e.isAuth,
                            uid: e.isAuth ? e.uid : e.basketUid,
                            startedRefunds: this.chatStartedRefunds
                        }).init(),
                        wb.displayModeSettings.removeObserver(this.onlineChat.onBreakpoint),
                        null !== (n = wb.global.settings) && void 0 !== n && null !== (n = n.switches) && void 0 !== n && n.enableOnlineChat ? (wb.displayModeSettings.addObserver(this.onlineChat.onBreakpoint, !0),
                        this.layoutModel.$eventBus.dispatchEvent(new CustomEvent("OnlineChatInited"))) : wb.global.subscribe(()=>{
                            !this.onlineChat.inited && wb.global.settings.switches.enableOnlineChat && (wb.displayModeSettings.addObserver(this.onlineChat.onBreakpoint, !0),
                            this.layoutModel.$eventBus.dispatchEvent(new CustomEvent("OnlineChatInited")))
                        }
                        ),
                        wb.global.subscribe(e=>{
                            const t = e.switches.enableSellersChat;
                            this.layoutModel.$eventBus.dispatchEvent(new CustomEvent("SellersChatSwitched",{
                                detail: t
                            }))
                        }
                        )
                    }
                    )
                }
                , 5e3)
            }
            ,
            t.init = async function() {
                const e = this.shortBasketInfo.init()
                  , t = WbSpaModel.prototype.$geoLocation.initPreferredLocation()
                  , n = this.search.init();
                return this.bindSignOut(),
                this.bindStat(),
                this.layoutModel.$user.getUserInfo().then(e=>{
                    !e.isAuth || this.layoutModel.$auth.jwt ? this._initOnlineChat(e) : this.layoutModel.$auth.getToken().then(()=>this._initOnlineChat(e)),
                    this.userBalance.init(e.isAuth)
                }
                ),
                Promise.all([e, t, n])
            }
            ,
            t.bindSignOut = function() {
                document.addEventListener("click", e=>{
                    const t = e.target.closest("a");
                    null == t || e._preventRouterTransition || t.href.endsWith("/security/exit") && (e.preventDefault(),
                    this.signOut())
                }
                )
            }
            ,
            t.signOut = function(e) {
                this.layoutModel.$eventBus.dispatchEvent(new CustomEvent("onBeforeSignOut")),
                this.layoutModel.$user.clearLocalUserData(),
                this.layoutModel.$auth.signOut(e)
            }
            ,
            t.bindStat = function() {
                const e = this.layoutModel.$analitic;
                const t = document.querySelector(".j-header");
                null == t || t.addEventListener("click", this.layoutModel.$helper.delegator(".j-wba-header-item", function(t) {
                    const n = t.target.closest(".j-wba-header-item");
                    n && e.sendEvent("Header_T", {
                        name: n.dataset.wbaHeaderName
                    })
                }));
                const n = document.querySelector(".j-country");
                null == n || n.addEventListener("click", this.layoutModel.$helper.delegator(".j-country-item input", function(t) {
                    const n = t.target.closest(".j-country-item input");
                    n && e.sendEvent("Header_Country_Apl", {
                        name: n.value
                    })
                }))
            }
            ,
            e
        }();
        module.exports = Header;

    }
    , {
        "./changecurrency": 19,
        "./search": 27,
        "./shortBasketInfo": 29,
        "./userBalance": 30
    }],
    23: [function(require, module, exports) {
        "use strict";
        let FirstLvlMenuUpdater = function() {
            function e(e) {
                this.delay = e.delay,
                this.menuContainer = e.menuContainer,
                this.getAbsoluteUrl = e.getAbsoluteUrl,
                this.timerId = null,
                this.updateFirstLvlMenuTask = null,
                this.success = !1,
                this.menuItemsUpdated = null
            }
            var t = e.prototype;
            return t.lazyUpdateMenu = function() {
                this.timerId = setTimeout(this._setUpdateFirstLvlMenuTask.bind(this), this.delay)
            }
            ,
            t.forceUpdateMenu = async function() {
                this._setUpdateFirstLvlMenuTask();
                try {
                    const e = await this.updateFirstLvlMenuTask;
                    return Promise.resolve(e)
                } catch (e) {
                    return Promise.reject(!1)
                }
            }
            ,
            t.reloadMenu = function() {
                this.updateFirstLvlMenuTask = null,
                this.forceUpdateMenu()
            }
            ,
            t._stopUpdatingMenu = function() {
                this.timerId && clearTimeout(this.timerId)
            }
            ,
            t._setUpdateFirstLvlMenuTask = function() {
                this.updateFirstLvlMenuTask && this.success || (this.updateFirstLvlMenuTask = this._updateFirstLvlMenu()),
                this._stopUpdatingMenu()
            }
            ,
            t._updateFirstLvlMenu = async function() {
                const [e] = await Promise.all([wb.spa.getCatalogMenu(), $.views.loadTemplateDictionaryAsync("menuTopTmpl")])
                  , t = e.fullMenu;
                return this.menuItemsUpdated = await this._addMenuItemsFirstLvl(t, this.menuContainer),
                this.success = !0,
                Promise.resolve(e)
            }
            ,
            t._addMenuItemsFirstLvl = async function(e, t) {
                const n = t.querySelector(".menu-burger__main-list");
                let s = n.querySelectorAll(".j-menu-main-item")
                  , i = null
                  , u = !0
                  , l = 0;
                for (let t = 0; t < e.length; t++) {
                    var r, a;
                    const o = e[t];
                    if (u && (i = null === (r = s) || void 0 === r ? void 0 : r[l]),
                    o.id == (null === (a = i) || void 0 === a || null === (a = a.dataset) || void 0 === a ? void 0 : a.menuId)) {
                        u = !0,
                        l++;
                        continue
                    }
                    u = !1;
                    const d = $.templates.menuFirstLvlTmpl.render(o, {
                        getAbsoluteUrl: this.getAbsoluteUrl
                    });
                    i ? i.insertAdjacentHTML("beforebegin", d) : n.insertAdjacentHTML("beforeend", d)
                }
                if (s = t.querySelectorAll(".j-menu-main-item"),
                e.length < s.length)
                    for (let t = e.length; t < s.length; t++)
                        s[t].remove();
                return Promise.resolve(s)
            }
            ,
            e
        }();
        module.exports = FirstLvlMenuUpdater;

    }
    , {}],
    24: [function(require, module, exports) {
        "use strict";
        function _defineProperties(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1,
                i.configurable = !0,
                "value"in i && (i.writable = !0),
                Object.defineProperty(e, _toPropertyKey(i.key), i)
            }
        }
        function _createClass(e, t, n) {
            return t && _defineProperties(e.prototype, t),
            n && _defineProperties(e, n),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            e
        }
        function _toPropertyKey(e) {
            var t = _toPrimitive(e, "string");
            return "symbol" == typeof t ? t : String(t)
        }
        function _toPrimitive(e, t) {
            if ("object" != typeof e || !e)
                return e;
            var n = e[Symbol.toPrimitive];
            if (void 0 !== n) {
                var i = n.call(e, t || "default");
                if ("object" != typeof i)
                    return i;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === t ? String : Number)(e)
        }
        function _assertThisInitialized(e) {
            if (void 0 === e)
                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }
        function _inheritsLoose(e, t) {
            e.prototype = Object.create(t.prototype),
            e.prototype.constructor = e,
            _setPrototypeOf(e, t)
        }
        function _setPrototypeOf(e, t) {
            return (_setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                return e.__proto__ = t,
                e
            }
            )(e, t)
        }
        const MobileMenu = require("./mobileMenu")
          , FirstLvlMenuUpdater = require("./firstLvlMenuUpdater")
          , MobilePageType = require("./mobilePageType");
        let MenuTop = function(e) {
            function t(t) {
                var n;
                return (n = e.call(this) || this).mobileMenu = new MobileMenu,
                n.layoutModel = t.layoutModel,
                n.menuBtn = document.querySelector(".j-menu-burger-btn"),
                n.menuContainer = document.querySelector(".j-menu-burger"),
                n.mainMenuContainer = n.menuContainer.querySelector(".j-menu-burger-main"),
                n.header = document.querySelector(".j-header"),
                n.widthScrollbar = Math.abs(window.innerWidth - document.documentElement.clientWidth),
                n.bodyOverflowClass = "body--overflow",
                n.menuContainerActiveClass = "menu-burger--active",
                n.innerMenuContainerActiveClass = "menu-burger__drop--active",
                n.innerMenuItemActiveClass = "menu-burger__drop-list-item--active",
                n.menuActiveClass = "j-menu-active",
                n.mainMenuItemActiveClass = "menu-burger__main-list-item--active",
                n.headerFixedClass = "header--fixed",
                n.headerFixedAnimateClass = "header--fixed-animate",
                n.menuItemActiveClass = "menu-burger__drop-list-item--active",
                n.menuBtnCloseClass = "nav-element__burger--close",
                n.menuOverlay = n._getMenuOverlay(document.body.querySelector(".j-menu-burger")),
                n._menuOpenHandler = n._menuOpenHandler.bind(_assertThisInitialized(n)),
                n._menuCloseHandler = n._menuCloseHandler.bind(_assertThisInitialized(n)),
                n.firstLvlMenuUpdater = new FirstLvlMenuUpdater({
                    menuContainer: n.menuContainer,
                    getAbsoluteUrl: n.getAbsoluteUrl,
                    delay: 12e3
                }),
                n.firstLvlMenuUpdater.lazyUpdateMenu(),
                n
            }
            _inheritsLoose(t, e);
            var n = t.prototype;
            return n.isMenuOpened = function() {
                return this.menuContainer.classList.contains(this.menuContainerActiveClass)
            }
            ,
            n.init = function() {
                this.mobileMenu.init(),
                this._bindEvents(),
                this._initMobileSearchbar(!this.$isDesktop)
            }
            ,
            n._initMobileSearchbar = function(e) {
                const t = this.mobileMenu.types;
                let n = 0
                  , i = !1
                  , s = "";
                function r() {
                    i || (window.requestAnimationFrame(function() {
                        const e = window.scrollY;
                        if (Math.abs(e - n) < 0)
                            return void (i = !1);
                        if (e <= this.headerFixedScrollTop)
                            return o(!1, !0),
                            void (i = !1);
                        const t = e > n;
                        t && "down" != s ? (this.$isDesktop ? o(!0) : o(!1),
                        s = "down") : t || "up" == s || (o(!0),
                        s = "up");
                        n = e > 0 ? e : 0,
                        i = !1
                    }
                    .bind(this)),
                    i = !0)
                }
                r = r.bind(this);
                const o = (e,t)=>{
                    e ? (this.header.classList.add(this.headerFixedClass),
                    window.requestAnimationFrame(()=>this.header.classList.add(this.headerFixedAnimateClass))) : (t && this.header.classList.remove(this.headerFixedClass),
                    window.requestAnimationFrame(()=>this.header.classList.remove(this.headerFixedAnimateClass)))
                }
                ;
                const a = e=>{
                    const {currentType: n} = e.detail;
                    n == t.HOME || n == t.SERVICES ? window.addEventListener("scroll", r) : (this.header.classList.remove(this.headerFixedClass, this.headerFixedAnimateClass),
                    window.removeEventListener("scroll", r))
                }
                ;
                this.$eventBus.addEventListener("MobileMenuTypeChange", a),
                a({
                    detail: {
                        currentType: MobilePageType.getType()
                    }
                })
            }
            ,
            n.getAbsoluteUrl = function(e) {
                return location.origin.indexOf("www.wildberries.by") >= 0 ? `${location.origin}${e}` : -1 == e.indexOf("http") || -1 == e.indexOf("//") ? `${wb.settings.origin}${e}` : e
            }
            ,
            n._renderInnerMenu = async function() {
                var e;
                const [t,n,i] = await Promise.all([this.layoutModel.$moduleLoader.loadModuleAsync("sideMenu"), this.firstLvlMenuUpdater.forceUpdateMenu()])
                  , s = this.layoutModel.$services.bannersService.getMenuBanners()
                  , r = new t(this.menuContainer,n,s,this.getAbsoluteUrl);
                return r.checkMenuItemForHide(r.menuItems, null === (e = this.$geoLocation) || void 0 === e || null === (e = e.location) || void 0 === e ? void 0 : e.destinations),
                r.relinkModel(),
                r.onSearchImage = (()=>this._onMenuHide()),
                r
            }
            ,
            n._bindEvents = function() {
                var e, t;
                this.menuBtn.addEventListener("mousedown", this._menuOpenHandler),
                null === (e = this.mobileMenu) || void 0 === e || null === (e = e.menuLink) || void 0 === e || e.addEventListener("mousedown", this._menuOpenHandler),
                null === (t = wb.displayModeSettings) || void 0 === t || t.addObserver(()=>{
                    this._onMenuHide(),
                    this._initMobileSearchbar(!this.$isDesktop)
                }
                ),
                window.addEventListener("spaTransition", e=>{
                    e.detail.isFinished && this._onMenuHide()
                }
                ),
                this.$eventBus.addEventListener("HideSideMenu", ()=>{
                    this.isMenuOpened() && (document.body.classList.remove(this.bodyOverflowClass),
                    document.body.style.paddingRight = "")
                }
                ),
                this.$eventBus.addEventListener("SelectedSideMenuItemUpdated", e=>{
                    const {menuId: t} = e.detail;
                    this.mainMenuItems.forEach(e=>e.classList.toggle(this.mainMenuItemActiveClass, e.dataset.menuId == t))
                }
                )
            }
            ,
            n._bindMenuCloseHandlers = function() {
                document.addEventListener("mousedown", this._menuCloseHandler)
            }
            ,
            n._unbindMenuCloseHandlers = function() {
                document.removeEventListener("mousedown", this._menuCloseHandler)
            }
            ,
            n._menuOpenHandler = function(e) {
                if (this.isMenuOpened() || !this.$isDesktop && this.mobileMenu.isCatalog())
                    return;
                e.stopPropagation(),
                e.preventDefault();
                const t = e.currentTarget;
                let n = "touchstart" === e.type ? "touchend" : "mouseup";
                const i = ()=>{
                    t.removeEventListener(n, i),
                    this.layoutModel.$helper.loadCssAsync(wb.settings.styles.menuBurger).then(()=>this._onMenuShow())
                }
                ;
                t.addEventListener(n, i)
            }
            ,
            n._menuCloseHandler = function(e) {
                const t = e.target
                  , n = this;
                if (!(this.$isDesktop && t.closest(`.${this.menuActiveClass}`) || !this.$isDesktop && !this.mobileMenu.isNavbarLink(t) && !this.menuBtn.contains(t)))
                    if (this.$isDesktop) {
                        const t = e.currentTarget
                          , n = "touchstart" === e.type ? "touchend" : "mouseup";
                        t.addEventListener(n, function e() {
                            t.removeEventListener(n, e),
                            s()
                        })
                    } else {
                        var i;
                        null === (i = this.sideMenu) || void 0 === i || i.touchHandlerHelper(e, s)
                    }
                function s() {
                    n._onMenuHide()
                }
            }
            ,
            n.refreshMenu = function(e) {
                e && (wb.spa.clearCatalogMenu(),
                this.firstLvlMenuUpdater.reloadMenu()),
                this.menuRendered = !1,
                !this.$isDesktop && this.isMenuOpened() && this._onMenuShow()
            }
            ,
            n._onMenuShow = async function() {
                if (document.body.classList.add(this.bodyOverflowClass),
                document.body.style.paddingRight = `${this.widthScrollbar}px`,
                "d" === wb.settings.displayMode && scrollY <= this.header.offsetHeight && document.documentElement.style.setProperty("--scroll-top", window.scrollY + "px"),
                this.menuContainer.classList.add(this.menuContainerActiveClass),
                this.mainMenuContainer.classList.add(this.menuActiveClass),
                this.menuBtn.classList.add(this.menuBtnCloseClass),
                this.menuOverlay.show(),
                !this.$isDesktop && this.mobileMenu.setCatalog(),
                this._bindMenuCloseHandlers(),
                this.menuRendered) {
                    var e;
                    null === (e = this.sideMenu) || void 0 === e || e.clearShownBanners()
                } else {
                    const e = await this._renderInnerMenu();
                    this.sideMenu = e,
                    this.mainMenuItems.forEach(e=>{
                        var t, n, i;
                        if (!this.$isDesktop && ("2192" === e.dataset.id || "4853" === e.dataset.id))
                            return;
                        const s = this.sideMenu.findItem(e.dataset.menuId);
                        s && (((null === (t = s.childs) || void 0 === t ? void 0 : t.length) > 0 || (null === (n = s.banners) || void 0 === n ? void 0 : n.length) > 0) && e.classList.add("menu-burger__main-list-item--subcategory"),
                        e.classList.toggle("hide", null !== (i = s.hide) && void 0 !== i && i))
                    }
                    ),
                    this.menuRendered = !0
                }
                this._menuMainHoverHandler()
            }
            ,
            n._onMenuHide = function() {
                var e, t;
                null === (e = this.sideMenu) || void 0 === e || e.changeSelectedMenuItem(null),
                null === (t = this.sideMenu) || void 0 === t || t.innerMenuHide(),
                document.body.classList.remove(this.bodyOverflowClass),
                document.body.style.paddingRight = "",
                this.menuContainer.classList.remove(this.menuContainerActiveClass),
                this.mainMenuContainer.classList.remove(this.menuActiveClass),
                this.menuBtn.classList.remove(this.menuBtnCloseClass),
                this.menuOverlay.hide(),
                !this.$isDesktop && this.mobileMenu.revertActive(),
                this._unbindMenuCloseHandlers()
            }
            ,
            n._menuMainHoverHandler = function() {
                !this.hoverintentActivated && this.$isDesktop && (this.layoutModel.$moduleLoader.loadModuleAsync("hoverIntent").then(e=>new e(this.mainMenuItems,{
                    over: e=>{
                        if (!this.$isDesktop)
                            return;
                        const t = e.target.closest(".j-menu-main-item");
                        this.sideMenu.onMenuSelected(t)
                    }
                    ,
                    out: ()=>{}
                    ,
                    timeout: 30,
                    interval: 10,
                    sensitivity: 4
                })),
                this.hoverintentActivated = !0)
            }
            ,
            n._getMenuOverlay = function(e) {
                const t = e;
                let n;
                function i() {
                    n && n.remove(),
                    n = null
                }
                return {
                    show: function() {
                        "m" != wb.settings.displayMode ? n || (t.insertAdjacentHTML("beforebegin", '<div class="overlay overlay--menu-burger j-overlay"></div>'),
                        n = e.parentElement.querySelector(".j-overlay")) : i()
                    },
                    hide: i
                }
            }
            ,
            _createClass(t, [{
                key: "headerFixedScrollTop",
                get: function() {
                    return this.$isDesktop ? 24 : 400
                }
            }, {
                key: "mainMenuItems",
                get: function() {
                    var e;
                    return null !== (e = this.firstLvlMenuUpdater) && void 0 !== e && e.menuItemsUpdated ? this.firstLvlMenuUpdater.menuItemsUpdated : this.menuContainer.querySelectorAll(".menu-burger__main-list-item")
                }
            }]),
            t
        }(WbSpaModel);
        module.exports = MenuTop;

    }
    , {
        "./firstLvlMenuUpdater": 23,
        "./mobileMenu": 25,
        "./mobilePageType": 26
    }],
    25: [function(require, module, exports) {
        "use strict";
        function _defineProperties(e, t) {
            for (var n = 0; n < t.length; n++) {
                var o = t[n];
                o.enumerable = o.enumerable || !1,
                o.configurable = !0,
                "value"in o && (o.writable = !0),
                Object.defineProperty(e, _toPropertyKey(o.key), o)
            }
        }
        function _createClass(e, t, n) {
            return t && _defineProperties(e.prototype, t),
            n && _defineProperties(e, n),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            e
        }
        function _toPropertyKey(e) {
            var t = _toPrimitive(e, "string");
            return "symbol" == typeof t ? t : String(t)
        }
        function _toPrimitive(e, t) {
            if ("object" != typeof e || !e)
                return e;
            var n = e[Symbol.toPrimitive];
            if (void 0 !== n) {
                var o = n.call(e, t || "default");
                if ("object" != typeof o)
                    return o;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === t ? String : Number)(e)
        }
        function _inheritsLoose(e, t) {
            e.prototype = Object.create(t.prototype),
            e.prototype.constructor = e,
            _setPrototypeOf(e, t)
        }
        function _setPrototypeOf(e, t) {
            return (_setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                return e.__proto__ = t,
                e
            }
            )(e, t)
        }
        const MobilePageType = require("./mobilePageType");
        let MobileMenu = function(e) {
            function t() {
                var t, n;
                return (n = e.call(this) || this).navbarContainer = document.querySelector(".j-navbar-mobile"),
                n.navbarMenuLink = null === (t = n.navbarContainer) || void 0 === t ? void 0 : t.querySelector("#catalogNavbarLink"),
                n.currentType = MobilePageType.getType(),
                n.menuModel = {
                    type: n.currentType,
                    catalogState: !1,
                    router: n.$router
                },
                n.catalogState = !1,
                n
            }
            _inheritsLoose(t, e);
            var n = t.prototype;
            return n.init = function() {
                this._bindEvents(),
                $.link(!0, this.navbarContainer, this.menuModel, {
                    sendAnalytics: e=>{
                        const t = e.target.closest(".navbar-mobile__link");
                        t && this.$analitic.sendEvent("Header_T", {
                            name: t.dataset.wbaHeaderName
                        })
                    }
                    ,
                    showPopupLoginMobile: e=>{
                        !1 === this.$router.userIsAuth && (e.preventDefault(),
                        wb.popup.showCustomPopup({
                            useHtml: !0,
                            popupClassesList: ["popup-login-mobile", "shown"],
                            contentClasses: ["popup__content"],
                            useCenteredFunction: !0,
                            onShow: e=>{
                                $.views.templates.popupLoginMobile.link(e.querySelector(".popup__content"), this)
                            }
                        }))
                    }
                })
            }
            ,
            n.setType = function(e) {
                this.catalogState = e == this.types.CATALOG,
                this.catalogState ? e = null : this.currentType = e,
                $.observable(this.menuModel).setProperty({
                    catalogState: this.catalogState,
                    type: e
                })
            }
            ,
            n.setCatalog = function() {
                this.setType("catalog")
            }
            ,
            n.isCatalog = function() {
                return this.catalogState
            }
            ,
            n.isNavbarLink = function(e) {
                return !!e.closest(".navbar-mobile__link")
            }
            ,
            n.revertActive = function() {
                this.setType(this.currentType)
            }
            ,
            n.updateBasket = function(e) {
                $.observable(this.menuModel).setProperty({
                    basketCount: e
                })
            }
            ,
            n.updateEvents = function(e) {
                $.observable(this.menuModel).setProperty({
                    eventsModel: e
                })
            }
            ,
            n._bindEvents = function() {
                window.addEventListener("spaTransition", e=>{
                    e.detail.isFinished || (this.currentType = MobilePageType.getType(),
                    this.$eventBus.dispatchEvent(new CustomEvent("MobileMenuTypeChange",{
                        detail: {
                            currentType: this.currentType
                        }
                    })))
                }
                ),
                this.$eventBus.addEventListener("OnlineChatInited", e=>{
                    this.$eventBus.dispatchEvent(new CustomEvent("MobileMenuTypeChange",{
                        detail: {
                            currentType: this.currentType,
                            isInit: !0
                        }
                    }))
                }
                ),
                this.$eventBus.addEventListener("MobileMenuTypeChange", e=>{
                    const {currentType: t} = e.detail;
                    let n = "";
                    switch (t) {
                    case MobilePageType.types.HOME:
                    case MobilePageType.types.BASKET:
                    case MobilePageType.types.PONED:
                    case MobilePageType.types.ARCHIVE:
                    case MobilePageType.types.ORDERS:
                    case MobilePageType.types.PROFILE:
                        n = t;
                        break;
                    case MobilePageType.types.SECURITY:
                        n = MobilePageType.types.PROFILE
                    }
                    this.setType(n)
                }
                )
            }
            ,
            _createClass(t, [{
                key: "menuLink",
                get: function() {
                    return this.navbarMenuLink
                }
            }, {
                key: "types",
                get: function() {
                    return MobilePageType.types
                }
            }]),
            t
        }(WbSpaModel);
        module.exports = MobileMenu;

    }
    , {
        "./mobilePageType": 26
    }],
    26: [function(require, module, exports) {
        "use strict";
        function _defineProperties(t, e) {
            for (var r = 0; r < e.length; r++) {
                var i = e[r];
                i.enumerable = i.enumerable || !1,
                i.configurable = !0,
                "value"in i && (i.writable = !0),
                Object.defineProperty(t, _toPropertyKey(i.key), i)
            }
        }
        function _createClass(t, e, r) {
            return e && _defineProperties(t.prototype, e),
            r && _defineProperties(t, r),
            Object.defineProperty(t, "prototype", {
                writable: !1
            }),
            t
        }
        function _toPropertyKey(t) {
            var e = _toPrimitive(t, "string");
            return "symbol" == typeof e ? e : String(e)
        }
        function _toPrimitive(t, e) {
            if ("object" != typeof t || !t)
                return t;
            var r = t[Symbol.toPrimitive];
            if (void 0 !== r) {
                var i = r.call(t, e || "default");
                if ("object" != typeof i)
                    return i;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === e ? String : Number)(t)
        }
        const types = Object.freeze({
            UNKNOWN: "unknown",
            HOME: "home",
            CATALOG: "catalog",
            SECURITY: "security",
            BASKET: "basket",
            PONED: "poned",
            PROFILE: "profile",
            ARCHIVE: "archive",
            ORDERS: "orders",
            SERVICES: "services",
            CLAIMS: "claims"
        });
        let MobilePageType = function() {
            function t() {}
            return t.getType = function() {
                const t = location.pathname.toLowerCase();
                return "/" == t ? types.HOME : t.startsWith("/catalog") ? types.CATALOG : t.startsWith("/security") ? types.SECURITY : t.startsWith("/lk/basket") ? types.BASKET : t.startsWith("/lk/favorites") ? types.PONED : t.startsWith("/lk/myorders/archive") ? types.ARCHIVE : t.startsWith("/lk/myorders/delivery") ? types.ORDERS : t.startsWith("/lk/claims") ? types.CLAIMS : t.startsWith("/lk") ? types.PROFILE : t.startsWith("/services/") || t.startsWith("/promo/") || t.startsWith("/presscenter") ? types.SERVICES : types.UNKNOWN
            }
            ,
            _createClass(t, null, [{
                key: "types",
                get: function() {
                    return types
                }
            }]),
            t
        }();
        module.exports = MobilePageType;

    }
    , {}],
    27: [function(require, module, exports) {
        "use strict";
        function _defineProperties(e, t) {
            for (var s = 0; s < t.length; s++) {
                var i = t[s];
                i.enumerable = i.enumerable || !1,
                i.configurable = !0,
                "value"in i && (i.writable = !0),
                Object.defineProperty(e, _toPropertyKey(i.key), i)
            }
        }
        function _createClass(e, t, s) {
            return t && _defineProperties(e.prototype, t),
            s && _defineProperties(e, s),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            e
        }
        function _toPropertyKey(e) {
            var t = _toPrimitive(e, "string");
            return "symbol" == typeof t ? t : String(t)
        }
        function _toPrimitive(e, t) {
            if ("object" != typeof e || !e)
                return e;
            var s = e[Symbol.toPrimitive];
            if (void 0 !== s) {
                var i = s.call(e, t || "default");
                if ("object" != typeof i)
                    return i;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === t ? String : Number)(e)
        }
        function _assertThisInitialized(e) {
            if (void 0 === e)
                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }
        function _inheritsLoose(e, t) {
            e.prototype = Object.create(t.prototype),
            e.prototype.constructor = e,
            _setPrototypeOf(e, t)
        }
        function _setPrototypeOf(e, t) {
            return (_setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                return e.__proto__ = t,
                e
            }
            )(e, t)
        }
        const IGNORE_KEYS = [34, 42]
          , UP_DOWN_KEYS = [38, 40]
          , SUGGESTS_TYPE_ORDER_HELPER = Object.freeze({
            6: 0,
            0: 1,
            1: 2,
            5: 3
        })
          , GroupedSuggestionsSettings = require("./search/searchInputGroupedSettings");
        let BaseSearch = function(e) {
            function t() {
                var t;
                return (t = e.call(this) || this).searchText = "",
                t.searchQueryText = "",
                t.showImageSearch = !1,
                t.uploadingPhoto = !1,
                t.suggestions = [],
                t.allSuggestions = [],
                t.suggestionsQueue = [],
                t.prohibitSuggestions = !0,
                t.searchTagClick = !1,
                t.onlyTags = !1,
                t.showSuggestionsDebouncer = t.showSuggestionsDebouncer(),
                t.showSuggestionsDebounced = t.showSuggestionsDebouncer.debounce(t.showSuggestionsOuter.bind(_assertThisInitialized(t)), 300),
                t._hideSuggestionsByClick = t._hideSuggestionsByClick.bind(_assertThisInitialized(t)),
                t
            }
            _inheritsLoose(t, e);
            var s = t.prototype;
            return s.clearSearch = function() {
                this.searchTagClick = !1,
                this.onlyTags = !1,
                $.observable(this).setProperty({
                    searchText: ""
                }),
                this.$isDesktop && this.inputEl.focus()
            }
            ,
            s.onSearchInputKeypress = function(e) {
                if (IGNORE_KEYS.indexOf(e.which) > -1)
                    return !1;
                if (13 === e.which)
                    return this.showSuggestionsDebouncer.stop(),
                    this.applySearch(),
                    !1;
                if (this.onlyTags = !1,
                this.$isDesktop && UP_DOWN_KEYS.indexOf(e.which) > -1 && this.allSuggestions.length) {
                    e.preventDefault();
                    const s = 38 === e.which
                      , i = this.allSuggestions.filter(e=>1 !== e.type || 1 === e.type && !e.hasOwnProperty("pos"));
                    let r = i.findIndex(e=>e.selected);
                    s && -1 === r && (r = 0),
                    r += s ? -1 : 1,
                    (r %= i.length) < 0 && (r += i.length);
                    const n = i[r];
                    var t;
                    if (null != n)
                        $.observable(this).setProperty({
                            searchText: n.name
                        }),
                        null === (t = this._markSuggestAsSelected) || void 0 === t || t.call(this, n)
                }
            }
            ,
            s.onSearchSubmit = function(e) {
                e.preventDefault()
            }
            ,
            s.applySearch = function() {
                this.searchText.length && (this.inputEl.blur(),
                this._hideSuggestionsByClick(),
                this._loadSearchPage())
            }
            ,
            s.searchByImage = async function(e) {
                const [t] = await Promise.all([this.$moduleLoader.loadModuleAsync("imageChip"), this.$moduleLoader.loadServiceAsync("searchByImageService")])
                  , s = new t;
                s.uploading = !0,
                $.observable(this).setProperty({
                    imageChipData: s
                });
                try {
                    this.$analitic.saveState({
                        l: "SPA"
                    });
                    const t = e.currentTarget.files[0]
                      , s = await this.$services.searchByImageService.searchByImage(t)
                      , i = this.$analitic.getQueryIdForSearch();
                    this.$analitic.saveQueryIdForSearch(i),
                    this.$analitic.sendEvent("Search_Request_Send", {
                        type: "Photo",
                        query_id: i
                    }),
                    this.$router.moveTo(s)
                } catch (e) {
                    console.error(e)
                } finally {
                    $.observable(this).setProperty({
                        showImageSearch: !1
                    }),
                    e.currentTarget.form.reset()
                }
            }
            ,
            s.enableSuggestions = function(e) {
                if (!this.imageChipData)
                    return $.observable(this).setProperty({
                        prohibitSuggestions: !1
                    }),
                    this.showSuggestions(e);
                e.preventDefault()
            }
            ,
            s.showSuggestionsDebouncer = function() {
                let e = null;
                function t() {
                    e && clearTimeout(e)
                }
                return {
                    debounce: (s,i)=>(...r)=>{
                        t(),
                        e = setTimeout(()=>{
                            s.apply(this, r),
                            e = null
                        }
                        , i)
                    }
                    ,
                    stop: t
                }
            }
            ,
            s.showSuggestionsOuter = function(e) {
                return this.prohibitSuggestions ? this.enableSuggestions(e) : this.showSuggestions(e)
            }
            ,
            s.showSuggestions = function(e) {
                if (this.imageChipData)
                    return void (null == e || e.preventDefault());
                clearTimeout(this._hideSuggestionsTimer);
                const t = this.suggestionsHelper.loadSuggestionsAsync(this.searchText, null)
                  , s = this.$isDesktop ? $.views.loadTemplateDictionaryAsync("searchSuggestionsTmpl") : Promise.resolve();
                this.suggestionsQueue.push(t),
                Promise.all([t, s]).then(([e])=>{
                    if (this.prohibitSuggestions)
                        return void $.observable(this.suggestions).refresh([]);
                    const s = this.suggestionsQueue.findIndex(e=>e == t);
                    if (s < 0)
                        return;
                    this.suggestionsQueue = this.suggestionsQueue.slice(s + 1);
                    const i = JSON.parse(JSON.stringify(e));
                    this._removeRepeats(i),
                    this._sortSuggests(i),
                    $.observable(this.suggestions).refresh(i),
                    this.allSuggestions = i.reduce((e,t)=>e.concat(t.suggestions), []),
                    document.removeEventListener("click", this._hideSuggestionsByClick),
                    document.addEventListener("click", this._hideSuggestionsByClick),
                    this.toggleBackgroundBlur(!0)
                }
                ).catch(e=>{
                    console.error(e)
                }
                )
            }
            ,
            s.toggleBackgroundBlur = function(e) {
                if (e && this.$isDesktop) {
                    if (!document.querySelector(".overlay--search")) {
                        const e = document.createElement("div");
                        e.classList.add("overlay", "overlay--search", "hide-mobile"),
                        document.querySelector("body").appendChild(e)
                    }
                } else {
                    var t;
                    null === (t = document.querySelector(".overlay--search")) || void 0 === t || t.remove()
                }
            }
            ,
            s._hideSuggestionsByClick = function(e) {
                if ("m" == wb.settings.displayMode || null != e && e.target.closest(".search-catalog__btn--clear"))
                    return;
                (e ? !e.target.closest(".j-menu-burger-btn") && this.inputEl == document.activeElement || e.target.closest(".j-clear-history") || e.target.closest(".j-clear-history-all") || e.target.closest(".j-suggest-tag") : null) ? this.inputEl.focus() : (clearTimeout(this._hideSuggestionsTimer),
                $.observable(this).setProperty({
                    prohibitSuggestions: !0
                }),
                this._hideSuggestionsTimer = setTimeout(()=>{
                    $.observable(this.suggestions).refresh([]),
                    document.removeEventListener("click", this._hideSuggestionsByClick),
                    this.toggleBackgroundBlur(!1)
                }
                , 150))
            }
            ,
            s.clearAllSearchHistories = function(e) {
                this._clearSearchHistory(null, !0)
            }
            ,
            s.clearSearchHistory = function(e) {
                const {data: t} = $.view(e.currentTarget);
                this._clearSearchHistory(t.name)
            }
            ,
            s._clearSearchHistory = function(e, t) {
                this.suggestionsHelper.removeFromHistorySearch(e, t),
                "m" === wb.settings.displayMode && this.showSuggestions(),
                this.inputEl.focus()
            }
            ,
            s.fillWithTag = function(e) {
                var t, s, i;
                if (this.searchTagClick = !0,
                e.target.closest(".j-clear-history"))
                    return;
                const {data: r} = $.view(e.currentTarget);
                if (!r)
                    return;
                const n = null !== (t = r.name) && void 0 !== t ? t : ""
                  , o = (this.searchText,
                this.searchText.trimLeft().split(/\s+/));
                o[r.pos] = n,
                this.onlyTags = !0,
                this.$analitic.sendEvent("Search_Tag_Suggest_T", {
                    text: n,
                    text_typed: null !== (s = this.searchText) && void 0 !== s ? s : ""
                }),
                $.observable(this).setProperty({
                    searchText: o.join(" ") + " "
                }),
                null === (i = this.inputEl) || void 0 === i || i.focus()
            }
            ,
            s.followSuggest = function(e) {
                var t, s;
                if (e.target.closest(".j-clear-history"))
                    return;
                const {data: i} = $.view(e.currentTarget);
                if (null == i)
                    return;
                const r = this.allSuggestionsAnalitics;
                $.observable(this).setProperty({
                    searchText: i.name
                }),
                this.suggestionsHelper.saveHistorySearch(i.name);
                const n = this._getAnalyticsFromSuggest(i)
                  , o = {
                    type: this.onlyTags ? "Tag_Suggest" : n.type,
                    l: n.location,
                    t: this.searchText,
                    t1: null === (t = i.searchParams) || void 0 === t ? void 0 : t.get("xParams"),
                    t2: null === (s = i.searchParams) || void 0 === s ? void 0 : s.get("xShard"),
                    t4: this.searchTagClick
                };
                this.onlyTags && (n.type = "Tag_Suggest");
                const a = n.type;
                this.$analitic.saveLastSearchAnaliticsData("Tag_Suggest", this.searchText, r);
                const c = this.$analitic.getQueryIdForSearch();
                this.$analitic.saveQueryIdForSearch(c),
                this.$analitic.saveState(o);
                const h = {
                    type: a,
                    text: i.search,
                    text_typed: i.typedText,
                    text_suggest: r,
                    query_id: c
                };
                i.isBrand || i.isHistory || (h.group = "new"),
                this.$analitic.sendEvent("Search_Request_Send", h),
                this._getUrlToFollow(i).then(e=>{
                    if (null != wb.spa)
                        return wb.spa.redirect(e);
                    window.location.href = e
                }
                )
            }
            ,
            s.removeImageChip = function() {
                $.observable(this).setProperty({
                    imageChipData: null
                })
            }
            ,
            s._loadSearchPage = function() {
                var e, t;
                if (/^\s+$/.test(this.searchText)) {
                    var s;
                    switch (wb.analitics.getState().l) {
                    case "SNT":
                    case "STA":
                        this.typeSearch = "Text";
                        break;
                    case "STH":
                        this.typeSearch = "Suggest";
                        break;
                    case "SNH":
                    case "SHS":
                        this.typeSearch = "Hist";
                        break;
                    case "STC":
                        this.typeSearch = "Category";
                        break;
                    case "STB":
                        this.typeSearch = "Brand";
                        break;
                    case "SPA":
                        this.typeSearch = "Photo";
                        break;
                    case "SIS":
                        this.typeSearch = "Tag_Suggest"
                    }
                    let e = {
                        type: null !== (s = this.typeSearch) && void 0 !== s ? s : "",
                        text: this.searchText,
                        text_typed: this.searchText,
                        reason: "search",
                        query: "",
                        shardKey: "",
                        text_suggest: ""
                    };
                    wb.analitics.sendEvent("Search_Empty_Respon", e)
                }
                this.suggestionsHelper.saveHistorySearch(this.searchText);
                const i = this.allSuggestionsAnalitics;
                this.$analitic.saveState({
                    l: "SNT",
                    t: this.searchText,
                    t1: null === (e = this.xData) || void 0 === e ? void 0 : e.xcatalogQuery,
                    t2: null === (t = this.xData) || void 0 === t ? void 0 : t.xcatalogShard,
                    t4: this.searchTagClick
                });
                const r = this.$analitic.getQueryIdForSearch();
                this.$analitic.saveQueryIdForSearch(r),
                this.$analitic.sendEvent("Search_Request_Send", {
                    text: this.searchText,
                    type: this.onlyTags ? "Tag_Suggest" : "Text",
                    group: "new",
                    text_typed: this.searchText,
                    text_suggest: i,
                    query_id: r
                }),
                $.observable(this).setProperty({
                    searchQueryText: this.searchText
                });
                let n = this._makeSafeString(this.searchText);
                const o = `${wb.settings.fullDomainName}${wb.urlHelper.xSearchBase}?search=${n}`;
                if (null != wb.spa)
                    return wb.spa.redirect(o);
                window.location.href = o
            }
            ,
            s._makeSafeString = function(e) {
                return e.toSafeString()
            }
            ,
            s._getUrlToFollow = async function(e) {
                if (e.url)
                    return Promise.resolve(e.url.startsWith("/") ? wb.settings.fullDomainName + e.url : e.url);
                if (2 === e.type) {
                    const t = await $.views.helpers.brandUrlById(e.brandId);
                    if (t)
                        return t
                }
                return Promise.resolve(`${wb.urlHelper.xSearchBase}?search=${this._makeSafeString(e.search)}`)
            }
            ,
            s.markSelected = function(e, t) {
                let s = e.trim();
                if (t) {
                    const e = t.trim().replace(wb.settings.regexp.escapingRegExp, "\\$&")
                      , i = $.views.converters.encode(s.replace(new RegExp(e,"i"), "")).replace(wb.settings.regexp.escapingRegExp, "\\$&");
                    return (s = $.views.converters.encode(s.replace(new RegExp(`(${i})$`,"i"), "[b]$&[/b]"))).replace(new RegExp("\\[b\\](" + $.views.converters.encode(i) + ")\\[\\/b\\]","gi"), "<b>$1</b>")
                }
                return $.views.converters.encode(s)
            }
            ,
            s._removeRepeats = function(e) {
                const {history: t, common: s} = e.reduce((e,t)=>{
                    switch (t.type) {
                    case 0:
                        e.history = t;
                        break;
                    case 1:
                        e.common = t
                    }
                    return e
                }
                , {
                    history: null,
                    common: null
                });
                if (!t || !s)
                    return;
                const i = t.suggestions.reduce((e,t)=>(e.add(t.name),
                e), new Set);
                s.suggestions = s.suggestions.filter(e=>!i.has(e.name))
            }
            ,
            s._sortSuggests = function(e) {
                e.sort((e,t)=>SUGGESTS_TYPE_ORDER_HELPER[e.type] - SUGGESTS_TYPE_ORDER_HELPER[t.type])
            }
            ,
            s._getAnalyticsFromSuggest = function(e) {
                switch (e.type) {
                case 0:
                    return {
                        location: "SNH",
                        type: "Hist"
                    };
                case 1:
                    return {
                        location: "STH",
                        type: "Suggest"
                    };
                case 2:
                    return {
                        location: "STB",
                        type: "Brand"
                    };
                case 3:
                    return {
                        location: "STC",
                        type: "Category"
                    };
                case 4:
                    return {
                        location: "SIS",
                        type: "Item"
                    };
                case 7:
                    return {
                        location: "STS",
                        type: "Supplier"
                    };
                default:
                    return {
                        location: "",
                        type: "Unknown"
                    }
                }
            }
            ,
            _createClass(t, [{
                key: "allSuggestionsAnalitics",
                get: function() {
                    return this.allSuggestions.map(e=>e.name).join("|")
                }
            }]),
            t
        }(WbSpaModel)
          , Search = function(e) {
            function t() {
                var t;
                return (t = e.call(this) || this).imageChipData = null,
                t._hideSuggestionsTimer = null,
                t.inputEl = document.getElementById("searchInput"),
                t.applySearchEl = document.getElementById("applySearchBtn"),
                t.searchByImageBtnEl = document.getElementById("searchByImageBtn"),
                t.searchByImageContainerEl = document.getElementById("searchByImageContainer"),
                t.searchInputMobileEl = document.querySelector(".j-search-input-mobile"),
                t._checkImageFormClick = t._checkImageFormClick.bind(_assertThisInitialized(t)),
                t.hasAnySuggestions.depends = ["suggestions"],
                t
            }
            _inheritsLoose(t, e);
            var s = t.prototype;
            return s.init = async function() {
                await this._prepareSuggestionsHelper(),
                this._observeProperties(),
                this._bindEvents(),
                $.link(!0, "#searchBlock", this)
            }
            ,
            s.hasAnySuggestions = function() {
                return this.suggestions.some(e=>e.suggestions.length > 0)
            }
            ,
            s.toggleImageSearch = function() {
                this.toggleProperty("showImageSearch")
            }
            ,
            s.markSuggest = function(e) {
                const {data: t} = $.view(e.currentTarget);
                null != t && this._markSuggestAsSelected(t)
            }
            ,
            s.unmarkSuggests = function() {
                this.allSuggestions.forEach(e=>{
                    $.observable(e).setProperty({
                        selected: !1
                    })
                }
                )
            }
            ,
            s._markSuggestAsSelected = function(e) {
                this.allSuggestions.forEach(t=>{
                    $.observable(t).setProperty({
                        selected: t == e
                    })
                }
                )
            }
            ,
            s._observeProperties = function() {
                $.observe(this, "showImageSearch", (e,{value: t})=>{
                    t ? this._addImageSearchHandlers() : this._removeImageSearchHandlers()
                }
                )
            }
            ,
            s._bindEvents = function() {
                window.addEventListener("spaTransition", e=>{
                    var t;
                    "SpaSearchEntrypoint" !== (null === (t = e.detail.dest) || void 0 === t ? void 0 : t.name) && ($.observable(this).setProperty({
                        searchText: ""
                    }),
                    $.observable(this).setProperty({
                        searchQueryText: ""
                    }))
                }
                ),
                this.inputEl.addEventListener("focus", ()=>{
                    this.$isDesktop || this._showMobileSearchPopup()
                }
                ),
                this.$eventBus.addEventListener("NeedSearchUpdate", e=>{
                    const {searchText: t} = e.detail;
                    $.observable(this).setProperty({
                        searchText: t
                    }),
                    $.observable(this).setProperty({
                        searchQueryText: t
                    })
                }
                ),
                this.$eventBus.addEventListener("RenderImageChip", e=>{
                    const {imageChipData: t} = e.detail;
                    $.observable(this).setProperty({
                        imageChipData: t
                    })
                }
                ),
                this._bindDisplayEvents()
            }
            ,
            s._bindDisplayEvents = function() {
                var e;
                const t = this
                  , s = this._showMobileSearchPopup.bind(this);
                function i() {
                    var e, i;
                    "m" == wb.settings.displayMode ? null === (e = t.searchInputMobileEl) || void 0 === e || e.addEventListener("click", s) : null === (i = t.searchInputMobileEl) || void 0 === i || i.removeEventListener("click", s)
                }
                i(),
                null === (e = wb.displayModeSettings) || void 0 === e || e.addObserver(()=>{
                    i()
                }
                )
            }
            ,
            s._addImageSearchHandlers = function() {
                document.documentElement.addEventListener("click", this._checkImageFormClick)
            }
            ,
            s._removeImageSearchHandlers = function() {
                document.documentElement.removeEventListener("click", this._checkImageFormClick)
            }
            ,
            s._checkImageFormClick = function(e) {
                e.target == this.searchByImageBtnEl || this.searchByImageContainerEl.contains(e.target) || $.observable(this).setProperty({
                    showImageSearch: !1
                })
            }
            ,
            s._showMobileSearchPopup = async function() {
                await $.views.loadTemplateDictionaryAsync("searchSuggestionsTmpl");
                const e = wb.popup.showCustomPopup({
                    showCross: !1,
                    useCenteredFunction: !0,
                    useHtml: !0,
                    lockScroll: !0,
                    popupClassesList: ["popup-search", "shown"],
                    contentClasses: ["popup__content", "popup-search__content"],
                    onShow: async(t,s)=>{
                        const i = new MobilePopupSearch(this);
                        i.searchByImage = (t=>{
                            this.searchByImage(t),
                            e.close()
                        }
                        ),
                        $.templates.searchMobilePopupTmpl.link(t.querySelector(".popup__content"), i, {
                            close: ()=>e.close()
                        }),
                        await s,
                        i.onAfterShown()
                    }
                })
            }
            ,
            s._prepareSuggestionsHelper = async function() {
                const e = await this.$moduleLoader.loadModuleAsync("suggestionsHelper");
                let t = [[{
                    cacheKey: "historySearch",
                    historiesLimit: 20
                }, e.suggestionsTypes.history]];
                t.push([GroupedSuggestionsSettings, e.suggestionsTypes.grouped]),
                this.suggestionsHelper = e.createSuggestionsHelper(t)
            }
            ,
            t
        }(BaseSearch)
          , MobilePopupSearch = function(e) {
            function t(t) {
                var s;
                return (s = e.call(this) || this).suggestionsHelper = t.suggestionsHelper,
                s.searchText = t.searchText,
                s
            }
            return _inheritsLoose(t, e),
            t.prototype.onAfterShown = function() {
                this.inputEl = document.getElementById("mobileSearchInput"),
                this.inputEl.focus()
            }
            ,
            t
        }(BaseSearch);
        module.exports = Search;

    }
    , {
        "./search/searchInputGroupedSettings": 28
    }],
    28: [function(require, module, exports) {
        "use strict";
        const SuggestionsTypes = require("../../modules/searchInput/suggestionsTypes");
        module.exports = {
            urlCreator: async()=>"https://search.wb.ru/suggests/api/v5/hint",
            async dataProceeder(e, t) {
                const s = [];
                if (!Array.isArray(e) && !t)
                    return s;
                if (!Array.isArray(e) && t.trim())
                    return [{
                        type: SuggestionsTypes.catalog,
                        suggestions: [{
                            name: t,
                            search: t,
                            type: 1,
                            typedText: t
                        }]
                    }];
                menuHelper.isInited || await menuHelper.initMenu();
                const r = e.filter(e=>"tag" === e.type).map(e=>({
                    name: e.name,
                    type: SuggestionsTypes.catalog,
                    typeStr: e.type,
                    pos: e.pos
                }));
                s.push({
                    type: SuggestionsTypes.tags,
                    suggestions: r
                });
                const a = e.filter(e=>"category" === e.type || "brand" === e.type || "supplier" === e.type || "redirect" === e.type || "external_redirect" === e.type).map(e=>{
                    switch (e.type) {
                    case "category":
                        const s = parseInt(e.menu_id);
                        if (menuHelper.hasItem(s)) {
                            const r = menuHelper.menu.menuById.get(s);
                            return {
                                typeStr: e.type,
                                name: r.name,
                                search: r.name,
                                typedText: t,
                                type: SuggestionsTypes.subjects,
                                xParams: r.query,
                                xShard: r.shard,
                                url: menuHelper.getCatalogLink(s),
                                breadCrumbs: menuHelper.getParents(s),
                                src: $.views.converters.imgForPromoCategory(s, !0),
                                imgWidth: 36,
                                imgHeight: 48
                            }
                        }
                        break;
                    case "brand":
                        return {
                            typeStr: e.type,
                            typeName: "Бренд",
                            name: e.brand_name,
                            search: e.brand_name,
                            brandId: e.brand_id,
                            typedText: t,
                            type: SuggestionsTypes.brands,
                            src: $.views.helpers.forBrandLogoFromId(e.brand_id),
                            imgOnError: `${wb.settings.staticSiteUrl}/i/v3/broken-img/brands.jpg`,
                            imgWidth: 67,
                            imgHeight: 28
                        };
                    case "supplier":
                        return {
                            typeStr: e.type,
                            typeName: "Магазин",
                            name: $.views.converters.trimWord(e.supplier_name, $.views.helpers.suppliersOrgForms),
                            search: e.supplier_name,
                            supplierId: e.supplier_id,
                            typedText: t,
                            type: SuggestionsTypes.supplier,
                            url: `/seller/${e.supplier_id}`,
                            src: $.views.helpers.forSellerLogo(e.supplier_id),
                            imgOnError: `${wb.settings.staticSiteUrl}/i/v3/catalog/seller-logo-new.jpg`,
                            imgWidth: 67,
                            imgHeight: 28
                        };
                    case "redirect":
                    case "external_redirect":
                        return {
                            typeStr: e.type,
                            typeName: "Раздел",
                            name: e.name,
                            search: e.name,
                            id: e.id,
                            typedText: t,
                            type: SuggestionsTypes.redirect,
                            url: "external_redirect" === e.type ? e.url : redirectMap.get(e.id),
                            src: "//static-basket-01.wb.ru/vol0/interface/shops/wb.png",
                            imgWidth: 67,
                            imgHeight: 28
                        }
                    }
                }
                ).filter(e=>e);
                s.push({
                    type: SuggestionsTypes.grouped,
                    suggestions: a
                });
                const n = e.filter(e=>"suggest" === e.type).map(e=>({
                    name: e.name,
                    search: e.name,
                    type: SuggestionsTypes.catalog,
                    typedText: t,
                    typeStr: e.type,
                    xParams: e.query,
                    xShard: e.shard_key
                })).slice(0, 7);
                return 0 === n.length && 0 === r.length && t.trim() && n.push({
                    name: t,
                    search: t,
                    type: SuggestionsTypes.catalog,
                    typedText: t,
                    typeStr: "self"
                }),
                s.push({
                    type: SuggestionsTypes.catalog,
                    suggestions: n
                }),
                s
            }
        };
        let MenuMap = function() {
            function e() {
                this.isInited = !1
            }
            var t = e.prototype;
            return t.initMenu = async function() {
                this.menu = await wb.spa.getCatalogMenu(),
                this.isInited = this.menu.isInited
            }
            ,
            t.hasItem = function(e) {
                return !!e && this.menu.menuById.has(e)
            }
            ,
            t.getCatalogLink = function(e) {
                return this.menu.menuById.get(e).url
            }
            ,
            t.getParents = function(e) {
                const t = [];
                let s = this.menu.menuById.get(e).parentId;
                for (; null != s; ) {
                    const e = this.menu.menuById.get(s);
                    t.push(e.name),
                    s = e.parentId
                }
                return t.reverse()
            }
            ,
            e
        }();
        const menuHelper = new MenuMap
          , redirectMap = Object.freeze(new Map([["home", "/"], ["faq", "/services/voprosy-i-otvety"], ["lk", "/lk"], ["notifications", "/lk/newsfeed/events"], ["basket", "/lk/basket"], ["delivery", "/lk/myorders/delivery"], ["orders", "/lk/myorders/archive"], ["favorites", "/lk/favorites"], ["favorite_brands", "/lk/favoritebrands"], ["communications", "/lk/communications"], ["claims", "/lk/claims"], ["feedback", "/lk/discussion/feedback?type=Comments"], ["cards", "/lk/details#bankCard"], ["sessions", "/lk/details#personal-safety"], ["balance", "/lk/mywallet/purchases"], ["refunds", "/lk/myrefunds"], ["receipts", "/lk/receipts/get"], ["pickups", "/services/besplatnaya-dostavka"], ["make_refund", "/lk/refund"], ["make_order", "/services/kak-sdelat-zakaz"], ["payment_options", "/services/sposoby-oplaty"], ["goods_refund", "/services/vozvrat-tovara"], ["money_refund", "/services/vozvrat-denezhnyh-sredstv"], ["sale_rules", "/services/pravila-prodazhi"], ["market_rules", "/services/pravila-polzovaniya-torgovoy-ploshchadkoy"], ["about_us", "/services/o-nas"], ["requisites", "/services/rekvizity"], ["press", "/presscenter"], ["contacts", "/services/kontakty"], ["bug_bounty", "/services/bug-bounty"]]));

    }
    , {
        "../../modules/searchInput/suggestionsTypes": 38
    }],
    29: [function(require, module, exports) {
        "use strict";
        let ShortBasketInfo = function() {
            function e(e) {
                this.layoutModel = e.layoutModel,
                this.tmpl = "shortBasketInfoTmpl",
                this.control = document.querySelector("#basketContent"),
                this.basketInfo = {},
                this.addressesInfo = null,
                this.eventsModels = this.layoutModel.$services.notifications.eventsModel,
                this.profileMenu = null,
                this.lkMenuMouseEnterHandler = this.lkMenuMouseEnterHandler.bind(this),
                this.deliveriesPreviewEnterHandler = this.deliveriesPreviewEnterHandler.bind(this),
                this.layoutModel.$eventBus.addEventListener("LocalBasketUpdateCount", this._updateLocalBasketCount.bind(this)),
                this.layoutModel.$eventBus.addEventListener("UserReset", this.update.bind(this)),
                this.toggleControl = this.toggleControl.bind(this),
                this.controlState = {
                    hide: !1
                }
            }
            var t = e.prototype;
            return t.init = function() {
                this.layoutModel.$user.getBasketShortInfo().then(e=>{
                    var t, o;
                    e.BasketQuantity = this.layoutModel.$services.cartService.localCount,
                    e.IsAuthenticated && this.control.classList.add("is-authenticated");
                    const s = this.layoutModel.$services.cartService.currentDeliveryType;
                    s && this.layoutModel.$analitic.setCurrentAddress(s.deliveryType, null !== (t = s.officeId) && void 0 !== t ? t : s.addressId),
                    null !== (o = this.layoutModel) && void 0 !== o && null !== (o = o.menuTop) && void 0 !== o && o.mobileMenu && this.layoutModel.menuTop.mobileMenu.updateBasket(e.BasketQuantity),
                    (e.IsAuthenticated ? this.layoutModel.$services.notifications.checkNotificationCountAsync() : Promise.resolve(this.eventsModels)).then(t=>{
                        var o;
                        null !== (o = this.layoutModel) && void 0 !== o && null !== (o = o.menuTop) && void 0 !== o && o.mobileMenu && this.layoutModel.menuTop.mobileMenu.updateEvents(t),
                        this.eventsModel = t,
                        this.basketInfo = e,
                        $.templates[this.tmpl].link(this.control, this, {
                            controlState: this.controlState
                        }),
                        e.IsAuthenticated || this.initAddresses(),
                        window.addEventListener("spaTransition", e=>{
                            e.detail.isFinished && this.toggleControl(!1)
                        }
                        )
                    }
                    )
                }
                )
            }
            ,
            t.update = function() {
                this.layoutModel.$user.getBasketShortInfo().then(e=>(e.BasketQuantity = this.layoutModel.$services.cartService.localCount,
                e.IsAuthenticated && this.control.classList.add("is-authenticated"),
                $.observable(this.basketInfo).setAllProperty(e),
                e.IsAuthenticated ? this.layoutModel.$services.notifications.checkNotificationCountAsync() : Promise.resolve({
                    eventsCount: 0
                }))).then(e=>{
                    var t;
                    null !== (t = this.layoutModel) && void 0 !== t && null !== (t = t.menuTop) && void 0 !== t && t.mobileMenu && this.layoutModel.menuTop.mobileMenu.updateEvents(e),
                    $.observable(this.eventsModel).setAllProperty(e)
                }
                )
            }
            ,
            t._updateLocalBasketCount = function(e) {
                var t, o, s;
                const i = null !== (t = null === (o = e.detail) || void 0 === o ? void 0 : o.count) && void 0 !== t ? t : 0;
                $.observable(this.basketInfo).setProperty({
                    BasketQuantity: i
                }),
                null !== (s = this.layoutModel) && void 0 !== s && null !== (s = s.menuTop) && void 0 !== s && s.mobileMenu && this.layoutModel.menuTop.mobileMenu.updateBasket(i)
            }
            ,
            t.deliveriesPreviewEnterHandler = function() {
                if (this.deliveriesPreview)
                    return this.toggleControl(!0);
                this.layoutModel.$moduleLoader.loadModuleAsync("deliveriesPreview").then(e=>{
                    const t = this.control.querySelector(".j-tooltip-delivery");
                    this.deliveriesPreview = new e,
                    e.template.link(t, this.deliveriesPreview, {
                        controlState: this.controlState
                    }),
                    this.toggleControl(!0)
                }
                )
            }
            ,
            t.lkMenuMouseEnterHandler = function() {
                if (this.lkMenuPreview)
                    return this.toggleControl(!0);
                const e = WbSpaModel.prototype;
                Promise.all([e.$moduleLoader.loadModuleAsync("cabinetMenuPreview"), e.$user.getBalance().catch(e=>Promise.resolve({
                    isNetworkError: !0
                })), e.$services.userData.getUserDataAsync(!0)]).then(([e,t])=>{
                    const o = this.control.querySelector(".j-tooltip-profile");
                    this.lkMenuPreview = new e(t),
                    this.lkMenuPreview.template.link(o, this.lkMenuPreview, {
                        controlState: this.controlState
                    }),
                    this.toggleControl(!0)
                }
                )
            }
            ,
            t.toggleControl = function(e) {
                $.observable(this.controlState).setProperty({
                    hide: !e
                })
            }
            ,
            t.initAddresses = function() {
                const e = this
                  , t = document.querySelector(".j-item-addresses");
                t.addEventListener("mouseenter", function o() {
                    t.removeEventListener("mouseenter", o);
                    if (e.addressesInfo)
                        return;
                    let s = e.layoutModel.$services.userAddressService.pooCount;
                    s > 0 ? $.observable(e).setProperty("addressesInfo", {
                        pickupCount: s,
                        postamatCount: 0
                    }) : e.layoutModel.fetch("/webapi/delivery/poo/count", {
                        method: "POST"
                    }).then(t=>{
                        const o = parseInt(t.headers.get("Pickup-Count"), 10) || 0;
                        $.observable(e).setProperty("addressesInfo", {
                            pickupCount: o,
                            postamatCount: 0
                        })
                    }
                    )
                })
            }
            ,
            e
        }();
        module.exports = ShortBasketInfo;

    }
    , {}],
    30: [function(require, module, exports) {
        "use strict";
        let UserBalance = function() {
            function e(e) {
                var t;
                this.layoutModel = e,
                this.container = document.getElementById("balanceBlock"),
                this.updateBalance = this.updateBalance.bind(this),
                this.model = {
                    balance: 0
                },
                this._setWalletInfo(null === (t = e.$user.balance) || void 0 === t ? void 0 : t.walletTypeCode)
            }
            var t = e.prototype;
            return t.init = async function(e) {
                e && await this._fetchBalanceAndLink().catch(e=>Promise.resolve()),
                this.layoutModel.$eventBus.addEventListener("BalanceReset", this._fetchBalanceAndLink.bind(this)),
                this.layoutModel.$eventBus.addEventListener("CurrencyChanged", this._fetchBalanceAndLink.bind(this)),
                this.layoutModel.$eventBus.addEventListener("BalanceUpdated", this.updateBalance.bind(this))
            }
            ,
            t._fetchBalanceAndLink = async function() {
                if ("0" === this.layoutModel.$user.getId())
                    return;
                let e = await this.layoutModel.$user.getBalance();
                this._link(e.totalBalance || 0, (null == e ? void 0 : e.balanceCurrency) || "RUB")
            }
            ,
            t._link = function(e, t) {
                void 0 !== e && null != e && this.layoutModel.$router.userIsAuth && !this._isLinked && (this._isLinked = !0,
                this.model.balance = e,
                this.model.balanceCurrency = t,
                $.link(!0, this.container, this.model))
            }
            ,
            t.updateBalance = function(e) {
                const {totalBalance: t, balanceCurrency: n, walletTypeCode: a} = e.detail;
                this._isLinked ? $.observable(this.model).setProperty({
                    balance: t,
                    balanceCurrency: n
                }) : this._link(t),
                this._setWalletInfo(a)
            }
            ,
            t._setWalletInfo = function(e) {
                $.observable(wb.settings).setProperty({
                    balanceTitle: this._getBalanceTitle(e),
                    walletTypeCode: e
                })
            }
            ,
            t._getBalanceTitle = function(e=0) {
                return e > 0 ? "WB Кошелёк" : "Баланс"
            }
            ,
            e
        }();
        module.exports = UserBalance;

    }
    , {}],
    31: [function(require, module, exports) {
        "use strict";
        function _inheritsLoose(t, e) {
            t.prototype = Object.create(e.prototype),
            t.prototype.constructor = t,
            _setPrototypeOf(t, e)
        }
        function _setPrototypeOf(t, e) {
            return (_setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
                return t.__proto__ = e,
                t
            }
            )(t, e)
        }
        const Header = require("./layout/header")
          , Footer = require("./layout/footer")
          , MenuTop = require("./layout/menuTop/menuTop");
        let MainLayoutSpa = function(t) {
            function e() {
                var e;
                return (e = t.call(this) || this).initTask = new e.$helper.Deferred,
                e
            }
            _inheritsLoose(e, t);
            var o = e.prototype;
            return o.fetch = function(t) {
                function e(e, o) {
                    return t.apply(this, arguments)
                }
                return e.toString = function() {
                    return t.toString()
                }
                ,
                e
            }(function(t, e) {
                return fetch(t, e)
            }),
            o.fetchJSON = function(t, e) {
                return this.$httpClient.fetchJSON(t, e)
            }
            ,
            o.fetchText = function(t, e) {
                return this.$httpClient.fetchText(t, e)
            }
            ,
            o.init = function() {
                const t = {
                    layoutModel: this
                };
                this.footer = new Footer(t),
                this.header = new Header(t),
                this.menuTop = new MenuTop(t);
                const e = this.menuTop.init(t)
                  , o = this.footer.init()
                  , n = this.header.init();
                Promise.all([e, o, n]).then(()=>this.initTask.resolve())
            }
            ,
            o.updateAfterLogin = function() {
                this.$user.reset(),
                this.header.shortBasketInfo.update(),
                this.$geoLocation.updateLocation(),
                this.$router.clearNotActiveContainer()
            }
            ,
            e
        }(WbSpaModel);
        Object.defineProperties(window, {
            MainLayoutSpa: {
                value: MainLayoutSpa
            }
        }),
        module.exports = MainLayoutSpa;

    }
    , {
        "./layout/footer": 20,
        "./layout/header": 22,
        "./layout/menuTop/menuTop": 24
    }],
    32: [function(require, module, exports) {
        "use strict";
        let LkMenuHelper = function() {
            function t() {}
            var e = t.prototype;
            return e.init = function() {
                const t = {}
                  , e = document.querySelector(".j-lk-menu-top")
                  , i = [{
                    type: "top",
                    selector: document.querySelector(".j-lk-menu-top")
                }];
                return i.forEach(e=>e.selector.querySelectorAll("a").forEach(e=>{
                    let i;
                    try {
                        i = new URL(e.href).pathname
                    } catch (t) {
                        return
                    }
                    const n = "true" == e.dataset.main
                      , s = "true" == e.dataset.sub
                      , o = e.parentElement;
                    t.hasOwnProperty(i) || (t[i] = {
                        links: [],
                        elements: []
                    });
                    const l = e.closest(n ? "li" : "ul");
                    t[i].elements.push(l),
                    t[i].links.push({
                        el: o,
                        isMainMenu: n,
                        isSubMenu: s,
                        path: i,
                        switch: o.dataset.switch,
                        empOnly: "1" == o.dataset.emp
                    }),
                    "6" === l.dataset.attr && (this.walletWrapperEl = l,
                    this.walletEl = e)
                }
                )),
                this.menuDictionary = t,
                this.menuDictionaryKeys = Object.keys(this.menuDictionary),
                this.root = e,
                this.roots = i.map(t=>t.selector),
                this.nextAnimationFrame = null,
                this._initDropDownMenu(),
                this.toggleVisibilityNodes(),
                wb.global.subscribe(this.toggleVisibilityNodes.bind(this)),
                $.observe(wb.settings, "balanceTitle", ()=>{
                    this.walletEl.innerText = wb.settings.balanceTitle,
                    this.walletWrapperEl.classList.add(wb.settings.walletTypeCode > 0 ? "lk-menu-main__item--wallet" : "lk-menu-main__item--balance")
                }
                ),
                this
            }
            ,
            e.setStatic = function(t) {
                this.stylesLink = t.stylesLink
            }
            ,
            e.updateMenu = function(t, e, i, n, s) {
                if (s || this.toggleVisibility(e, i),
                "/" != t[0] && (t = "/" + t),
                null == this.root)
                    return;
                const o = this.menuDictionary[t];
                if (null == o)
                    return;
                const l = o.links.find(t=>!0 === t.isSubMenu);
                this._scrollIntoView(l);
                const a = o.elements.length > 0 ? o.elements[0].dataset.attr : "";
                this.menuDictionaryKeys.forEach(e=>{
                    const i = this.menuDictionary[e].elements;
                    if (i.length > 0) {
                        const t = i[0].dataset.attr == a;
                        i.forEach(e=>e.classList.toggle("active", t))
                    }
                    this.menuDictionary[e].links.forEach(e=>{
                        !e.isMainMenu && e.el.classList.toggle("active", e.path == t)
                    }
                    )
                }
                )
            }
            ,
            e.updateMenuItemsVisibility = function(t) {
                this.menuDictionaryKeys.forEach(e=>{
                    this.menuDictionary[e].links.forEach(e=>{
                        e.empOnly && void 0 !== t && t && e.el.classList.remove("hide")
                    }
                    )
                }
                )
            }
            ,
            e.toggleVisibility = function(t, e) {
                if (!t || !t.visible || t.authOnly && void 0 !== e && !e)
                    return this.hide();
                this.show()
            }
            ,
            e.toggleVisibilityNodes = function() {
                this.menuDictionaryKeys.forEach(t=>{
                    this.menuDictionary[t].links.forEach(t=>{
                        t.switch && t.el.classList.toggle("hide", !wb.global.settings.switches[t.switch])
                    }
                    )
                }
                )
            }
            ,
            e.show = async function() {
                await this.$helper.loadCssAsync(this.stylesLink),
                this.roots.forEach(t=>t.classList.remove("hide")),
                "ru" == wb.settings.currentLocale || wb.global.userSettings.closed.includes("new_fin_oper_loc") || (wb.global.userSettings.closed.push("new_fin_oper_loc"),
                wb.global.saveUserSettings(),
                this._showFinOperationsTooltip())
            }
            ,
            e.hide = function() {
                this.roots.forEach(t=>t.classList.add("hide"))
            }
            ,
            e._scrollIntoView = function(t) {
                window.cancelAnimationFrame(this.nextAnimationFrame);
                const e = null == t ? void 0 : t.el;
                if (!e || "m" != wb.settings.displayMode)
                    return;
                const i = ()=>{
                    null != this.$router.currentView ? e.scrollIntoView({
                        block: "nearest",
                        inline: "center"
                    }) : this.nextAnimationFrame = window.requestAnimationFrame(i)
                }
                ;
                this.nextAnimationFrame = window.requestAnimationFrame(i)
            }
            ,
            e._initDropDownMenu = function() {
                const t = ["mouseleave", "click"];
                this.menuDictionaryKeys.forEach(e=>{
                    this.menuDictionary[e].links.forEach(e=>{
                        e.isMainMenu && e.el.addEventListener("mouseover", ()=>{
                            e.isMainMenu && e.el.classList.add("open")
                        }
                        ),
                        t.forEach(function(t) {
                            e.isMainMenu && e.el.addEventListener(t, function() {
                                e.isMainMenu && e.el.classList.remove("open")
                            })
                        })
                    }
                    )
                }
                ),
                this._addClickStat()
            }
            ,
            e._addClickStat = function() {
                this.roots.forEach(t=>{
                    t.addEventListener("click", t=>{
                        var e, i;
                        const n = null === (e = t.target) || void 0 === e ? void 0 : e.closest("a")
                          , s = null == n || null === (i = n.dataset) || void 0 === i ? void 0 : i.lkHeaderWba;
                        if (!s)
                            return;
                        const o = `${s}_T`;
                        this.$analitic.sendEvent(o)
                    }
                    )
                }
                )
            }
            ,
            e._showFinOperationsTooltip = function() {
                const t = document.getElementById("menuTooltipTarget");
                if (!t)
                    return;
                const e = t.querySelector(".j-tooltip-close")
                  , i = ()=>t.classList.remove("lk-menu-main__item--tooltip-active");
                null == e || e.addEventListener("click", i),
                setTimeout(i, 6e3),
                t.classList.add("lk-menu-main__item--tooltip-active")
            }
            ,
            t
        }();
        module.exports = LkMenuHelper;

    }
    , {}],
    33: [function(require, module, exports) {
        "use strict";
        var _wb$settings;
        const SELLER_STORE_NAME = "by" === (null === (_wb$settings = wb.settings) || void 0 === _wb$settings ? void 0 : _wb$settings.currentLocale) ? "Склад поставщика" : "Склад продавца"
          , STORE_NAMES = {
            0: SELLER_STORE_NAME,
            507: "Коледино WB",
            686: "Новосибирск WB",
            1193: "Хабаровск WB",
            1733: "Екатеринбург WB",
            2737: "Уткина Заводь WB",
            117442: "Калуга WB",
            117501: "Подольск WB",
            117866: "Тамбов WB",
            117986: "Казань WB",
            120762: "Электросталь WB",
            121709: "Электросталь WB",
            130744: "Краснодар WB",
            159402: "Шушары WB",
            161812: "Санкт-Петербург WB",
            172430: "Барнаул WB",
            204615: "Томск WB",
            204939: "Астана WB",
            205104: "Ульяновск WB",
            205205: "Киров WB",
            205228: "Белая дача WB",
            206236: "Белые Столбы WB",
            206348: "Алексин WB",
            206708: "Новокузнецк WB",
            206844: "Калининград WB",
            206968: "Новосёлки WB",
            208277: "Невинномысск WB",
            208941: "Домодедово WB",
            209513: "Домодедово WB",
            210001: "Новосёлки-2 WB",
            210515: "Вёшки WB",
            208768: SELLER_STORE_NAME + " Абакан",
            209649: SELLER_STORE_NAME + " Алексин",
            208769: SELLER_STORE_NAME + " Алматы",
            212038: SELLER_STORE_NAME + " Алматы-2",
            209902: SELLER_STORE_NAME + " Артём",
            214110: SELLER_STORE_NAME + " Архангельск",
            122495: SELLER_STORE_NAME + " Астана",
            204492: SELLER_STORE_NAME + " Астрахань",
            204493: SELLER_STORE_NAME + " Барнаул",
            206239: SELLER_STORE_NAME + " Белая Дача (Москва)",
            213892: SELLER_STORE_NAME + " Белгород",
            214112: SELLER_STORE_NAME + " Белогорск",
            209112: SELLER_STORE_NAME + " Белые Столбы",
            208814: SELLER_STORE_NAME + " Бишкек",
            204494: SELLER_STORE_NAME + " Брянск",
            204495: SELLER_STORE_NAME + " Владикавказ",
            117392: SELLER_STORE_NAME + " Владимир",
            152588: SELLER_STORE_NAME + " Волгоград",
            204496: SELLER_STORE_NAME + " Вологда",
            211895: SELLER_STORE_NAME + " Воронеж",
            209111: SELLER_STORE_NAME + " Гольяново (Москва)",
            208771: SELLER_STORE_NAME + " Гомель (Беларусь)",
            210967: SELLER_STORE_NAME + " Домодедово",
            208815: SELLER_STORE_NAME + " Екатеринбург",
            211790: SELLER_STORE_NAME + " Екатеринбург-2",
            208816: SELLER_STORE_NAME + " Ереван",
            208772: SELLER_STORE_NAME + " Иваново",
            172073: SELLER_STORE_NAME + " Ижевск",
            131643: SELLER_STORE_NAME + " Иркутск",
            208817: SELLER_STORE_NAME + " Казань",
            208761: SELLER_STORE_NAME + " Калининград",
            144046: SELLER_STORE_NAME + " Калуга",
            208773: SELLER_STORE_NAME + " Киров",
            119261: SELLER_STORE_NAME + " Коледино",
            209109: SELLER_STORE_NAME + " Комсомольский (Москва)",
            208818: SELLER_STORE_NAME + " Краснодар",
            118365: SELLER_STORE_NAME + " Красноярск",
            208774: SELLER_STORE_NAME + " Крыловская (Краснодар)",
            172075: SELLER_STORE_NAME + " Курск",
            209108: SELLER_STORE_NAME + " Курьяновская (Москва)",
            208776: SELLER_STORE_NAME + " Липецк",
            168826: SELLER_STORE_NAME + " Лобня (Москва)",
            121700: SELLER_STORE_NAME + " Минск",
            211672: SELLER_STORE_NAME + " Минск-2",
            212032: SELLER_STORE_NAME + " Вешки",
            211730: SELLER_STORE_NAME + " Внуково",
            117673: SELLER_STORE_NAME + " Москва",
            122259: SELLER_STORE_NAME + " Москва",
            208777: SELLER_STORE_NAME + " Мурманск",
            208778: SELLER_STORE_NAME + " Набережные Челны",
            209107: SELLER_STORE_NAME + " Нахабино (Москва)",
            209601: SELLER_STORE_NAME + " Невинномысск",
            118535: SELLER_STORE_NAME + " Нижний Новгород",
            213651: SELLER_STORE_NAME + " Нижний Тагил",
            208789: SELLER_STORE_NAME + " Новокузнецк",
            117419: SELLER_STORE_NAME + " Новосибирск",
            209591: SELLER_STORE_NAME + " Омск",
            208780: SELLER_STORE_NAME + " Оренбург",
            157848: SELLER_STORE_NAME + " Пенза",
            209592: SELLER_STORE_NAME + " Пермь",
            208781: SELLER_STORE_NAME + " Печатники",
            214111: SELLER_STORE_NAME + " Псков",
            208782: SELLER_STORE_NAME + " Пушкино (Москва)",
            204497: SELLER_STORE_NAME + " Пятигорск",
            118019: SELLER_STORE_NAME + " Ростов-на-Дону",
            152594: SELLER_STORE_NAME + " Рязань",
            146666: SELLER_STORE_NAME + " Самара",
            132043: SELLER_STORE_NAME + " Санкт-Петербург",
            117414: SELLER_STORE_NAME + " Санкт-Петербург (Уткина Заводь)",
            208819: SELLER_STORE_NAME + " Санкт-Петербург (Шушары)",
            158929: SELLER_STORE_NAME + " Саратов",
            204498: SELLER_STORE_NAME + " Серов",
            144154: SELLER_STORE_NAME + " Симферополь",
            208783: SELLER_STORE_NAME + " Смоленск",
            204212: SELLER_STORE_NAME + " Солнцево",
            158448: SELLER_STORE_NAME + " Ставрополь",
            208784: SELLER_STORE_NAME + " Сургут",
            115651: SELLER_STORE_NAME + " Тамбов",
            152610: SELLER_STORE_NAME + " Тверь",
            208785: SELLER_STORE_NAME + " Темрюк (Краснодарский край)",
            208786: SELLER_STORE_NAME + " Томск",
            146725: SELLER_STORE_NAME + " Тюмень",
            209950: SELLER_STORE_NAME + " Ульяновск",
            152700: SELLER_STORE_NAME + " Уфа",
            208820: SELLER_STORE_NAME + " Хабаровск",
            210815: SELLER_STORE_NAME + " Хоргос",
            204499: SELLER_STORE_NAME + " Чебоксары",
            152611: SELLER_STORE_NAME + " Челябинск",
            209113: SELLER_STORE_NAME + " Черная грязь (Москва)",
            209106: SELLER_STORE_NAME + " Чертановский (Москва)",
            208787: SELLER_STORE_NAME + " Чита",
            209510: SELLER_STORE_NAME + " Электросталь",
            209110: SELLER_STORE_NAME + " Южные ворота (Москва)",
            152612: SELLER_STORE_NAME + " Ярославль"
        };
        module.exports = STORE_NAMES;

    }
    , {}],
    34: [function(require, module, exports) {
        "use strict";
        module.exports = Object.freeze({
            main: 1,
            goods: 2,
            search: 3,
            brand: 4,
            brandConstructor: 5,
            brandConstructorCatalog: 6,
            seller: 7,
            sellerCustomMain: 9,
            promoEntry: 11,
            categoryDenyLink: 12,
            recommendationsSearch: 13
        });

    }
    , {}],
    35: [function(require, module, exports) {
        "use strict";
        const COOKIE_VALIDITY = 86400
          , CATALOG_COOKIE_NAME = "__catalogOptions"
          , DEFAULT_CARD_SIZE = "c516x688"
          , DEFAULT_SORT = "popular";
        let CatalogCookieHelper = function() {
            function o() {}
            return o.updateCookie = function(o, e) {
                const t = wb.cookieHelper.getCookie("__catalogOptions");
                if (null != t) {
                    const i = t.split("&").map(t=>t.indexOf(o) > -1 ? `${o}:${e[0].toUpperCase()}${e.slice(1)}` : t).join("&");
                    wb.cookieHelper.setCookie("__catalogOptions", i, {
                        "max-age": 86400,
                        domain: "localhost" === window.location.host ? "" : ".wildberries.ru"
                    })
                } else {
                    const o = "c516x688"
                      , e = "popular"
                      , t = `CardSize:${o[0].toUpperCase()}${o.slice(1)}&Sort:${e[0].toUpperCase()}${e.slice(1)}`;
                    wb.cookieHelper.setCookie("__catalogOptions", t, {
                        "max-age": 86400,
                        domain: "localhost" === window.location.host ? "" : ".wildberries.ru"
                    })
                }
            }
            ,
            o.getCookie = function(o) {
                let e;
                const t = wb.cookieHelper.getCookie("__catalogOptions");
                return null != t && t.split("&").forEach(t=>{
                    t.indexOf(o) > -1 && (e = t.split(":")[1].toLowerCase())
                }
                ),
                e
            }
            ,
            o
        }();
        module.exports = CatalogCookieHelper;

    }
    , {}],
    36: [function(require, module, exports) {
        "use strict";
        const RidStatus = Object.freeze({
            Accepted: 0,
            Assembling: 1,
            Rejected: 2,
            Processing: 3,
            Completed: 5,
            ValidateFail: 6,
            Validated: 7
        })
          , PayStatus = Object.freeze({
            Unknown: -1,
            NotPaid: 1,
            PaySent: 2,
            PayFail: 3,
            Paid: 4,
            Refunded: 5
        })
          , OrderStatus = Object.freeze({
            Accepted: 0,
            New: 1,
            Failed: 2,
            Processing: 4,
            Completed: 5
        })
          , CompletedOrderDays = 22
          , UnpaidStatuses = [PayStatus.NotPaid, PayStatus.PaySent, PayStatus.PayFail]
          , ActiveStatuses = [RidStatus.Accepted, RidStatus.Assembling, RidStatus.Processing]
          , ArchiveStatuses = [RidStatus.Rejected, RidStatus.Completed];
        module.exports = {
            RidStatus: RidStatus,
            PayStatus: PayStatus,
            OrderStatus: OrderStatus,
            ActiveStatuses: ActiveStatuses,
            ArchiveStatuses: ArchiveStatuses,
            UnpaidStatuses: UnpaidStatuses,
            CompletedOrderDays: 22,
            ExpirationDays: 14,
            ExpirationCostDays: 4,
            ExpirationCost: 100,
            CalcFailedPaymentExpire: t=>{
                var e, a;
                const s = null !== (e = null === (a = wb.global) || void 0 === a || null === (a = a.settings) || void 0 === a || null === (a = a.variables) || void 0 === a ? void 0 : a.failedPaymentsDisplayMinutes) && void 0 !== e ? e : 0;
                return Math.floor(Math.max(0, new Date(t).addMinutes(s) - new Date) / 1e3)
            }
        };

    }
    , {}],
    37: [function(require, module, exports) {
        "use strict";
        function _defineProperty(e, r, t) {
            return (r = _toPropertyKey(r))in e ? Object.defineProperty(e, r, {
                value: t,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[r] = t,
            e
        }
        function _toPropertyKey(e) {
            var r = _toPrimitive(e, "string");
            return "symbol" == typeof r ? r : String(r)
        }
        function _toPrimitive(e, r) {
            if ("object" != typeof e || !e)
                return e;
            var t = e[Symbol.toPrimitive];
            if (void 0 !== t) {
                var i = t.call(e, r || "default");
                if ("object" != typeof i)
                    return i;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === r ? String : Number)(e)
        }
        let STORE_TYPE = function() {};
        _defineProperty(STORE_TYPE, "isMp", e=>2 == (2 & e)),
        _defineProperty(STORE_TYPE, "isCargoStore", e=>4 == (4 & e)),
        _defineProperty(STORE_TYPE, "isDbs", e=>8 == (8 & e)),
        _defineProperty(STORE_TYPE, "isForeign", e=>16 == (16 & e)),
        module.exports = STORE_TYPE;

    }
    , {}],
    38: [function(require, module, exports) {
        "use strict";
        module.exports = Object.freeze({
            history: 0,
            catalog: 1,
            brands: 2,
            subjects: 3,
            goods: 4,
            grouped: 5,
            tags: 6,
            supplier: 7,
            redirect: 8
        });

    }
    , {}],
    39: [function(require, module, exports) {
        "use strict";
        function _inheritsLoose(e, o) {
            e.prototype = Object.create(o.prototype),
            e.prototype.constructor = e,
            _setPrototypeOf(e, o)
        }
        function _setPrototypeOf(e, o) {
            return (_setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, o) {
                return e.__proto__ = o,
                e
            }
            )(e, o)
        }
        let onlyOnePopup = null;
        function createCenteredFunction(e) {
            return ()=>{
                e.style.top = Math.max(document.documentElement.clientHeight / 2 + window.pageYOffset - e.clientHeight / 2, window.pageYOffset) + "px",
                e.style.left = Math.max(document.documentElement.clientWidth / 2 - e.clientWidth / 2, 0) + "px"
            }
        }
        function createPopup(e) {
            const o = document.createElement("div");
            return o.classList.addMany(e),
            o
        }
        function setCross(e, o) {
            const t = document.createElement("a");
            t.href = "#",
            o.push("close"),
            t.classList.addMany(o),
            e.appendChild(t)
        }
        function setCloseBtn(e, o) {
            const t = document.createElement("button");
            t.innerText = "Закрыть",
            !o.length && o.push("close"),
            t.classList.addMany(o),
            e.appendChild(t)
        }
        function setMessage(e, o, t, n, s, l) {
            const i = document.createElement("div");
            if (null != n && Array.isArray(n) && i.classList.addMany(n),
            t)
                i.innerHTML = o;
            else if (l) {
                let o = document.querySelector(l)
                  , t = document.createElement("span");
                t.id = "popup_pc",
                o.parentElement.insertBefore(t, o),
                e.placeholder = document.getElementById(t.id),
                i.appendChild(o)
            } else
                i.textContent = o;
            null != s && Object.entries(s).forEach(([e,o])=>i.setAttribute(e, o)),
            e.appendChild(i)
        }
        function setBtn(e, o, t) {
            const n = document.createElement("button");
            n.classList.addMany(t || []),
            n.textContent = o,
            e.appendChild(n)
        }
        function showPopup(e, o, t, n) {
            var s, l, i;
            let r;
            const c = e=>{
                null == e || e.preventDefault(),
                o.classList.remove("shown"),
                !n.keepOpenOnTransition && window.removeEventListener("spaTransition", r),
                Promise.resolve().then(()=>{
                    var o;
                    null === (o = n.onHide) || void 0 === o || o.call(n, e)
                }
                )
            }
            ;
            r = (()=>{
                c()
            }
            ),
            !n.keepOpenOnTransition && window.addEventListener("spaTransition", r);
            const p = e=>{
                27 == e.keyCode && (c(e),
                window.removeEventListener("keydown", p, !0))
            }
            ;
            (n.modal || null == n.modal) && (window.addEventListener("keydown", p, !0),
            null == t || t.addEventListener("click", c)),
            (null === (s = n.closeSelector) || void 0 === s ? void 0 : s.length) > 0 && o.addEventListener("click", this.$helper.delegator(n.closeSelector, c)),
            null != onlyOnePopup && (onlyOnePopup.close(),
            onlyOnePopup = null);
            const a = t ? document.querySelectorAll(".j-custom-overlay") : [];
            t && (t.style.zIndex = 300 * (a.length + 1)),
            o.style.zIndex = 300 * (a.length + 1) + 1,
            e.appendChild(o),
            t && e.appendChild(t),
            null === (l = n.onBeforeShow) || void 0 === l || l.call(n, o),
            document.body.insertBefore(e, document.body.firstChild),
            null === (i = n.onShow) || void 0 === i || i.call(n, o);
            const d = {
                popup: o,
                overlay: t,
                close: ()=>{
                    var e;
                    return null === (e = n.onHide) || void 0 === e ? void 0 : e.call(n, o)
                }
                ,
                centered: n.centeredFunction
            };
            return n.onlyOne && (onlyOnePopup = d),
            d
        }
        function _renderModalError(e, o, t, n=!0, s=!1) {
            e instanceof Error ? e = e.isCustomError && !e.isCancelled && e.message ? e.message : this.$localziation.serverError : e || (e = this.$localziation.serverError);
            const l = document.createDocumentFragment();
            let i = ["popup", "popup-alert", "shown"];
            o && (Array.isArray(o) ? i = i.concat(o) : i.push(o));
            const r = createPopup(i);
            l.appendChild(r),
            s && setCross(r, ["popup__close"]),
            setMessage(r, e, !0),
            null !== t && setBtn(r, t || this.$localziation.close, ["popup__btn-main", "popup-alert__close"]);
            const c = document.createElement("div");
            c.classList.addMany(["overlay", "initially-hidden", "j-custom-overlay"]);
            const p = createCenteredFunction(r);
            window.addEventListener("resize", p),
            showPopup.call(this, l, r, c, {
                onlyOne: !0,
                closeSelector: ".popup-alert__close, .popup__close",
                modal: n,
                onShow: function() {
                    r.style.display = "block",
                    p()
                },
                onHide: function() {
                    window.removeEventListener("resize", p),
                    r.remove(),
                    c.remove()
                }
            })
        }
        function _renderModalAdaptive(e, o={}) {
            const t = {
                msg: e,
                lockScroll: !0,
                modal: !1,
                showCloseBtn: !0,
                useHtml: !0,
                contentClasses: ["content"],
                popupClassesList: ["shown", "tooltip", "tooltip--mobile", ...(null == o ? void 0 : o.classes) || []],
                useCenteredFunction: !0,
                onShow: e=>e.classList.remove("popup")
            };
            return wb.popup.showCustomPopup(t)
        }
        function _showSizePickerPopup(e, o, t, n) {
            const s = document.createDocumentFragment()
              , l = createPopup(o);
            setCross(l, ["j-close"]),
            setMessage(l, e, !0, ["content", "quick-order-popup-content", "j-sizepicker-content"], null);
            const i = document.createElement("div");
            i.classList.addMany(["overlay", "initially-hidden", "j-custom-overlay"]),
            l.id = "size-picker-popup",
            l.style.opacity = "0";
            const r = createCenteredFunction(l);
            window.addEventListener("resize", r),
            showPopup.call(this, s, l, i, {
                closeSelector: ".j-close",
                onHide: function() {
                    window.removeEventListener("resize", r),
                    l.remove(),
                    i.remove(),
                    null == n || n()
                },
                onShow: function() {
                    l.style.display = "block",
                    r(),
                    l.style.opacity = "1",
                    null == t || t(l)
                }
            })
        }
        function _showCustomPopup(e) {
            const o = this.$helper.deepMerge({}, {
                overlay: !0,
                showCross: !0,
                useHtml: !1,
                popupClassesList: [],
                contentClasses: [],
                overlayClasses: [],
                contentAttributeDictionary: {},
                msg: "",
                closeClass: ["j-close", "popup__close"],
                modal: !0,
                closeSelector: ".j-close",
                useCenteredFunction: !1,
                lockScroll: !1,
                onlyOne: !1
            }, e)
              , t = document.createDocumentFragment()
              , n = createPopup(["popup"].concat(o.popupClassesList));
            o.showCross && setCross(n, o.closeClass),
            setMessage(n, o.msg, o.useHtml, o.contentClasses, o.contentAttributeDictionary, o.srcElem),
            o.showCloseBtn && setCloseBtn(n, o.closeClass);
            const s = o.overlay ? document.createElement("div") : null;
            if (s) {
                const e = ["overlay", "initially-hidden", "j-custom-overlay"].concat(o.overlayClasses);
                s.classList.addMany(e)
            }
            let l;
            return o.useCenteredFunction && (l = createCenteredFunction(n),
            window.addEventListener("resize", l)),
            showPopup.call(this, t, n, s, {
                onHide: function(e) {
                    var t, i, r;
                    (o.lockScroll && (document.body.classList.remove("body--overflow"),
                    document.body.style.paddingRight = ""),
                    o.useCenteredFunction && window.removeEventListener("resize", l),
                    o.srcElem) && (null === (i = n.placeholder) || void 0 === i || null === (i = i.parentElement) || void 0 === i || i.insertBefore(document.querySelector(o.srcElem), n.placeholder),
                    null === (r = n.placeholder) || void 0 === r || r.remove());
                    null === (t = o.onHide) || void 0 === t || t.call(o, n, e),
                    n.remove(),
                    null == s || s.remove()
                },
                onShow: ()=>{
                    var e;
                    if (o.lockScroll) {
                        const e = Math.abs(window.innerWidth - document.documentElement.clientWidth);
                        document.body.classList.add("body--overflow"),
                        document.body.style.paddingRight = `${e}px`
                    }
                    const t = ()=>{
                        n.style.opacity = 1,
                        o.useCenteredFunction && l()
                    }
                      , s = this.$helper.nextTick().then(()=>(t(),
                    Promise.resolve()));
                    Object.defineProperty(n, "contentEl", {
                        get: ()=>n.querySelector(".popup__content")
                    }),
                    o.onShowAsync ? o.onShowAsync(n).then(t) : null === (e = o.onShow) || void 0 === e || e.call(o, n, s)
                }
                ,
                onBeforeShow: function() {
                    var e;
                    n.style.opacity = 0,
                    n.style.display = "block",
                    null === (e = o.onBeforeShow) || void 0 === e || e.call(o, n)
                },
                modal: o.modal,
                closeSelector: o.closeSelector,
                centeredFunction: l,
                onlyOne: o.onlyOne,
                keepOpenOnTransition: o.keepOpenOnTransition
            })
        }
        function showVideoPlayer(e, o) {
            let t;
            const n = this.$helper
              , s = wb.popup.showCustomPopup({
                useHtml: !0,
                popupClassesList: ["popup-video", "shown"],
                contentClasses: ["content"],
                useCenteredFunction: !0,
                msg: $.templates('<h2 class="popup__header">{{>title}}</h2><div class="video"><video id="videoPlayer" class="video-js vjs-default-skin vjs-big-play-centered vjs-waiting" width="855" controls autoplay preload></video></div>')({
                    title: o
                }),
                onBeforeShow: e=>{
                    e.style.opacity = 0,
                    e.style.display = "block"
                }
                ,
                onShow: o=>{
                    (t = videojs("videoPlayer", {
                        html5: {
                            nativeAudioTracks: !1,
                            nativeVideoTracks: !1,
                            hls: {
                                overrideNative: !0
                            }
                        }
                    })).ready(function() {
                        this.src({
                            src: e,
                            type: "application/x-mpegURL",
                            withCredentials: !0
                        })
                    }),
                    n.nextTick().then(()=>{
                        o.style.opacity = 1,
                        s.centered()
                    }
                    )
                }
                ,
                onHide: ()=>{
                    t.isDisposed() || (t.isInPictureInPicture() && t.exitPictureInPicture(),
                    t.dispose())
                }
            })
        }
        function showVideoReviewPlayer(e, o, t, n) {
            let s;
            const l = this.$helper
              , i = wb.popup.showCustomPopup({
                useHtml: !0,
                popupClassesList: ["i-popup-video-review", "j-popup-video-review", "shown"],
                contentClasses: ["content"],
                useCenteredFunction: !0,
                msg: o,
                onBeforeShow: e=>{
                    e.style.opacity = 0,
                    e.style.display = "block"
                }
                ,
                onShow: o=>{
                    (s = videojs("videoPlayer", {
                        html5: {
                            nativeAudioTracks: !1,
                            nativeVideoTracks: !1,
                            hls: {
                                overrideNative: !0
                            }
                        }
                    })).ready(function() {
                        this.src({
                            src: e,
                            type: "application/x-mpegURL",
                            withCredentials: !0
                        })
                    }),
                    l.nextTick().then(()=>{
                        o.style.opacity = 1,
                        i.centered()
                    }
                    ),
                    null == t || t(o)
                }
                ,
                onHide: ()=>{
                    s.isDisposed() || (s.isInPictureInPicture() && s.exitPictureInPicture(),
                    s.dispose(),
                    null == n || n())
                }
            })
        }
        function _confirm(e, o={}) {
            return new Promise(t=>{
                var n, s, l;
                const i = document.createDocumentFragment();
                let r = ["popup", "popup-confirm", "shown"];
                o.classList && (r = r.concat(o.classList));
                let c = ["popup__btn-main", "j-yes"]
                  , p = ["popup__btn-base", "j-no"];
                o.yesBtnClassList && (c = o.yesBtnClassList),
                o.noBtnClassList && (p = o.noBtnClassList);
                const a = createPopup(r);
                a.style.display = "block",
                o.contentClasses = o.contentClasses || [],
                o.contentClasses.push("popup__msg"),
                setMessage(a, e, !0, o.contentClasses);
                let d = document.createElement("div");
                d.classList.add("popup__btn", "btn-block"),
                a.appendChild(d),
                (null === (n = o.showYesBtn) || void 0 === n || n) && setBtn(d, o.yes || $.localize("Да"), c),
                (null === (s = o.showNoBtn) || void 0 === s || s) && setBtn(d, o.no || $.localize("Нет"), p),
                o.showCross && setCross(a, ["popup__close"]);
                const u = document.createElement("div");
                u.classList.addMany(["overlay", "initially-hidden", "j-custom-overlay"]);
                const h = showPopup.call(this, i, a, u, {
                    onHide: function() {
                        a.remove(),
                        u.remove(),
                        t(!1)
                    },
                    onShow: function() {
                        var e;
                        createCenteredFunction(a)(),
                        a.querySelector(c.map(e=>"." + e).join("")).addEventListener("click", e=>{
                            t(!0),
                            h.close()
                        }
                        ),
                        null === (e = a.querySelector(p.map(e=>"." + e).join(""))) || void 0 === e || e.addEventListener("click", e=>{
                            t(!1),
                            h.close()
                        }
                        )
                    },
                    modal: null !== (l = o.modal) && void 0 !== l && l,
                    closeSelector: o.showCross ? ".popup__close" : null
                })
            }
            )
        }
        function _browserPopup(e, {width: o=600, height: t=500}={}) {
            const n = [`top=${Math.floor((window.screenY || window.screenTop || 0) + (window.outerHeight - t) / 2) || 0}`, `left=${Math.floor((window.screenX || window.screenLeft || 0) + (window.outerWidth - o) / 2) || 0}`, `width=${o}`, `height=${t}`, "status=0", "toolbar=0"];
            return null != window.open(e, "", n.join(","))
        }
        let SpaPopup = function(e) {
            function o() {
                return e.apply(this, arguments) || this
            }
            _inheritsLoose(o, e);
            var t = o.prototype;
            return t.renderModalError = function() {
                return _renderModalError.apply(this, arguments)
            }
            ,
            t.renderModalAdaptive = function() {
                return _renderModalAdaptive.apply(this, arguments)
            }
            ,
            t.showCustomPopup = function() {
                return _showCustomPopup.apply(this, arguments)
            }
            ,
            t.confirm = function() {
                return _confirm.apply(this, arguments)
            }
            ,
            t.videoPlayer = function() {
                return showVideoPlayer.apply(this, arguments)
            }
            ,
            t.videoReviewPlayer = function() {
                return showVideoReviewPlayer.apply(this, arguments)
            }
            ,
            t.showSizePickerPopup = function() {
                return _showSizePickerPopup.apply(this, arguments)
            }
            ,
            t.browserPopup = function() {
                return _browserPopup.apply(this, arguments)
            }
            ,
            t.showFeedbackError = function(e) {
                return $.views.loadTemplateAsync("popuperrorunbuy").then(o=>{
                    wb.popup.showCustomPopup({
                        useHtml: !0,
                        msg: o.render({
                            errorMessage: e.isCancelled ? null : e.message
                        }),
                        popupClassesList: ["popup-error-unbuy", "shown"],
                        contentClasses: ["popup__content"],
                        useCenteredFunction: !0,
                        modal: !0
                    })
                }
                )
            }
            ,
            o
        }(WbSpaModel);
        wb.popup = new SpaPopup;

    }
    , {}],
    40: [function(require, module, exports) {
        "use strict";
        const STORAGE_KEY = "spa_history"
          , USED_IDS = new Set;
        let CustomHistory = function() {
            function t() {
                this.history = new HistoryLinkedList
            }
            var e = t.prototype;
            return e.addItem = function(t) {
                this.history.push(t),
                this._updateCache()
            }
            ,
            e.tryInitFromCache = function(t) {
                const e = sessionStorage.getObject(STORAGE_KEY);
                return e && t && this.history.tryRevokeFromCache(e) && this.history.findCurrent(t),
                this
            }
            ,
            e.updateCurrent = function(t) {
                this.history.findCurrent(t)
            }
            ,
            e.updateCurrentItem = function(t) {
                this.history.tryUpdateCurrrent(t) || this.history.push(t),
                this._updateCache()
            }
            ,
            e.canMove = function(t) {
                return this.history.canMove(t)
            }
            ,
            e._updateCache = function() {
                sessionStorage.putObject(STORAGE_KEY, this.history)
            }
            ,
            t.generateId = function() {
                return WbSpaModel.prototype.$generateGuid()
            }
            ,
            t
        }()
          , HistoryLinkedList = function() {
            function t() {
                this.head = null,
                this.current = null
            }
            var e = t.prototype;
            return e.push = function(t) {
                const e = new HistoryLinkedListItem(t,this.current);
                null == this.head || null == this.current ? this.head = e : this.current.updateNext(e),
                this.current = e
            }
            ,
            e.tryUpdateCurrrent = function(t) {
                return null != this.current && (this.current.update(t),
                !0)
            }
            ,
            e.findCurrent = function(t) {
                const {id: e} = t;
                let n = this.head;
                for (; n; ) {
                    if (n.state.id == e) {
                        this.current = n;
                        break
                    }
                    n = n.next
                }
            }
            ,
            e.tryRevokeFromCache = function(t) {
                const e = t.reduce((t,e)=>(t.set(e.state, new HistoryLinkedListItem(e.state)),
                t), new Map);
                t.forEach(t=>{
                    const n = e.get(t.state);
                    if (t.next) {
                        const i = e.find(e=>e.state.id == t.next);
                        n.updateNext(i)
                    }
                    if (t.previous) {
                        const i = e.find(e=>e.state.id == t.previous);
                        n.updatePrevious(i)
                    }
                }
                );
                const n = e.find(t=>null == t.previous);
                return !!n && (this.head = n,
                !0)
            }
            ,
            e.toJSON = function() {
                let t = this.head;
                const e = [];
                for (; t; ) {
                    var n, i;
                    e.push({
                        state: t.state,
                        next: null === (n = t.next) || void 0 === n ? void 0 : n.state.id,
                        previous: null === (i = t.previous) || void 0 === i ? void 0 : i.state.id
                    }),
                    t = t.next
                }
                return e
            }
            ,
            e.canMove = function(t) {
                let e = this.current
                  , n = t > 0 ? -1 : 1
                  , i = t > 0 ? "next" : "previous"
                  , r = t;
                for (; 0 != r; )
                    if (r += n,
                    null == (e = e[i]))
                        return;
                return !0
            }
            ,
            t
        }()
          , HistoryLinkedListItem = function() {
            function t(t, e) {
                this.state = t,
                this.previous = e,
                this.next = null
            }
            var e = t.prototype;
            return e.updateNext = function(t) {
                this.next = t
            }
            ,
            e.updatePrevious = function(t) {
                this.previous = t
            }
            ,
            e.update = function(t) {
                this.state = t
            }
            ,
            t
        }();
        module.exports = CustomHistory;

    }
    , {}],
    41: [function(require, module, exports) {
        "use strict";
        const UserInfoPipeline = require("../pipelines/userInfoPipeline")
          , NotUseRoutePipeline = require("../pipelines/notUseRoutePipeline")
          , NotUseRoutePipelineAsync = require("../pipelines/notUseRoutePipelineAsync")
          , EmailConfirmedPipeline = require("../pipelines/emailConfirmedPipeline")
          , BasketDataPipeline = require("../pipelines/basketDataPipeline")
          , BankCardsPipeline = require("../pipelines/bankCardsPipeline")
          , ProductCardPipeline = require("../pipelines/productCardPipeline")
          , NewlyArrivedWatinglistPipeline = require("../pipelines/newlyArrivedWaitingListPipeline")
          , FavoriteGoodsPipeline = require("../pipelines/favoriteGoodsPipeline")
          , CatalogXdataPipeline = require("../pipelines/catalogXdataPipeline")
          , CatalogMainPipeline = require("../pipelines/catalogMainPipeline")
          , CatalogDenyPipeline = require("../pipelines/catalogDenyPipeline")
          , SearchXdataPipeline = require("../pipelines/searchXDataPipeline")
          , PromoCatalogXdataPipeline = require("../pipelines/promoCatalogXdataPipeline")
          , BrandCatalogPipeline = require("../pipelines/brandCatalogPipeline")
          , SellerCatalogXdataPipeline = require("../pipelines/sellerCatalogXdataPipeline")
          , HomeDataPipeline = require("../pipelines/homeDataPipeline")
          , TimeoutPipeline = require("../pipelines/timeoutPipeline")
          , ProductCardOtherSellersPipeline = require("../pipelines/productCardOtherSellersPipeline")
          , ProductFeedbacksPipeline = require("../pipelines/productFeedbacksPipeline")
          , ProductQuestionsPipeline = require("../pipelines/productQuestionsPipeline")
          , MiniProductCardPipeline = require("../pipelines/miniProductCardPipeline")
          , SearchByImagePipeline = require("../pipelines/searchByImagePipeline")
          , RecommendationsSearchCatalogPipeline = require("../pipelines/recommendationsSearchCatalogPipeline")
          , RecommendationsCatalogPipeline = require("../pipelines/recommendationsCatalogPipeline")
          , RecentCatalogPipeline = require("../pipelines/recentCatalogPipeline")
          , RefundDataPipeline = require("../pipelines/refundDataPipeline")
          , DefaultValuePipeline = require("../pipelines/defaultValuePipeline")
          , AuthorizedOnlyConstraint = require("../pipelines/authorizedOnlyConstraint")
          , LotteryPipeline = require("../pipelines/lotteryPipeline")
          , PromotionsPipeline = require("../pipelines/promotionsPipeline")
          , VideoReviewPipeline = require("../pipelines/videoReviewPipeline")
          , OrderConfirmedPipeline = require("../pipelines/orderConfirmedPipeline")
          , CurrencyPipeline = require("../pipelines/currencyPipeline")
          , SignInConstraint = require("../pipelines/signInConstraint")
          , userInfoPipeline = new UserInfoPipeline
          , basicNotUseRoutePipeline = new NotUseRoutePipeline
          , miniProductCardPipeline = new MiniProductCardPipeline
          , networkErrorPipeline = new DefaultValuePipeline({
            isNetworkError: !0
        })
          , authorizedOnlyConstraint = new AuthorizedOnlyConstraint;
        let RouteExtensions = function() {
            function e() {
                const e = new Map;
                e.set("SpaHomeData", {
                    pipelines: [new HomeDataPipeline]
                }),
                e.set("SpaPromotionsData", {
                    pipelines: [new PromotionsPipeline]
                }),
                e.set("SpaSignInData", {
                    pipelines: [new SignInConstraint, networkErrorPipeline, new TimeoutPipeline(1e3)]
                }),
                e.set("SpaRefundData", {
                    pipelines: [new RefundDataPipeline, networkErrorPipeline]
                }),
                e.set("SpaProductCardData", {
                    pipelines: [basicNotUseRoutePipeline, new ProductCardPipeline]
                }),
                e.set("SpaGetGroupedDeliveries", {
                    pipelines: [authorizedOnlyConstraint, basicNotUseRoutePipeline, new TimeoutPipeline(1e3)],
                    fallback: ()=>({
                        options: {}
                    })
                }),
                e.set("SpaHeadArchivePositions", {
                    pipelines: [authorizedOnlyConstraint, networkErrorPipeline],
                    fallback: ()=>({
                        limit: 150,
                        filters: {
                            type: "all",
                            status: 0
                        }
                    })
                }),
                e.set("SpaBasketData", {
                    maxTriesCount: 0,
                    pipelines: [networkErrorPipeline, userInfoPipeline, new BasketDataPipeline, new TimeoutPipeline(4e3)]
                }),
                e.set("SpaEmailedConfirmData", {
                    pipelines: [new EmailConfirmedPipeline, new NotUseRoutePipeline(()=>{
                        const {targetRoute: e} = WbSpaModel.prototype.$router;
                        return "SpaConfirmEmailedEntrypoint" != e && "SpaChangeEmailEntrypoint" != e
                    }
                    )]
                }),
                e.set("SpaAccountData", {
                    pipelines: [authorizedOnlyConstraint, userInfoPipeline, new BankCardsPipeline, networkErrorPipeline],
                    fallback: ()=>({
                        broken: !0,
                        data: {
                            subscriptions: {
                                subscribtionsByType: {}
                            },
                            discountTable: {},
                            mySafety: {},
                            deleteAccountSettings: {},
                            settings: {},
                            calendarSettings: {}
                        }
                    })
                }),
                e.set("SpaWalletPurchaseData", {
                    pipelines: [authorizedOnlyConstraint, userInfoPipeline, networkErrorPipeline, new CurrencyPipeline]
                }),
                e.set("SpaCustomerReceiptData", {
                    pipelines: [userInfoPipeline, networkErrorPipeline]
                }),
                e.set("SpaPersonalCabinetData", {
                    pipelines: [basicNotUseRoutePipeline, userInfoPipeline, authorizedOnlyConstraint]
                }),
                e.set("SpaTravelLkData", {
                    pipelines: [basicNotUseRoutePipeline]
                }),
                e.set("SpaProfileData", {
                    pipelines: [userInfoPipeline]
                }),
                e.set("SpaBasketBuyItNowData", {
                    maxTriesCount: 0,
                    pipelines: [userInfoPipeline, new BasketDataPipeline, networkErrorPipeline, new TimeoutPipeline(3e3)]
                }),
                e.set("SpaSearchData", {
                    pipelines: [new SearchXdataPipeline]
                }),
                e.set("SpaRecommendationsSearchCatalogData", {
                    pipelines: [basicNotUseRoutePipeline, new RecommendationsSearchCatalogPipeline]
                }),
                e.set("SpaRecommendationsCatalogData", {
                    pipelines: [basicNotUseRoutePipeline, new RecommendationsCatalogPipeline]
                }),
                e.set("SpaRecentCatalogData", {
                    pipelines: [basicNotUseRoutePipeline, new RecentCatalogPipeline]
                }),
                e.set("SpaVideoReviewCartData", {
                    pipelines: [basicNotUseRoutePipeline]
                }),
                e.set("SpaWlArrivedData", {
                    pipelines: [basicNotUseRoutePipeline, new NewlyArrivedWatinglistPipeline, authorizedOnlyConstraint]
                }),
                e.set("SpaCatalogData", {
                    pipelines: [new CatalogXdataPipeline, new CatalogMainPipeline, new CatalogDenyPipeline]
                }),
                e.set("SpaPromotionsCatalogData", {
                    pipelines: [new PromoCatalogXdataPipeline]
                }),
                e.set("SpaSellerCatalogData", {
                    pipelines: [new SellerCatalogXdataPipeline]
                }),
                e.set("SpaBrandsData", {
                    pipelines: [new BrandCatalogPipeline]
                }),
                e.set("SpaBrandsPreviewData", {
                    pipelines: [new BrandCatalogPipeline(!0)]
                }),
                e.set("SpaFavoritesData", {
                    pipelines: [basicNotUseRoutePipeline, new FavoriteGoodsPipeline, authorizedOnlyConstraint]
                }),
                e.set("SpaProductCardOtherSellersData", {
                    pipelines: [basicNotUseRoutePipeline, userInfoPipeline, miniProductCardPipeline, new ProductCardOtherSellersPipeline]
                }),
                e.set("SpaProductCardFeedbacksData", {
                    pipelines: [basicNotUseRoutePipeline, userInfoPipeline, miniProductCardPipeline, new ProductFeedbacksPipeline]
                }),
                e.set("SpaProductCardQuestionsData", {
                    pipelines: [basicNotUseRoutePipeline, userInfoPipeline, miniProductCardPipeline, new ProductQuestionsPipeline]
                }),
                e.set("SpaSearchByImageData", {
                    pipelines: [basicNotUseRoutePipeline, new SearchByImagePipeline]
                }),
                e.set("SpaOrderConfirmedData", {
                    fallback: e=>{
                        if (e) {
                            const i = e.url.searchParams.get("orderId");
                            if (i) {
                                const e = sessionStorage.getItem(`confirmed_order_${i}`);
                                if (e)
                                    return {
                                        data: JSON.parse(e)
                                    }
                            }
                        }
                        return {
                            data: {
                                broken: !0,
                                order: {}
                            }
                        }
                    }
                    ,
                    pipelines: [userInfoPipeline, new OrderConfirmedPipeline]
                }),
                e.set("SpaOrderThankYouEntrypoint", {
                    fallback: ()=>({})
                }),
                e.set("SpaPaymentFailData", {
                    fallback: ()=>({})
                }),
                e.set("SpaFavoriteBrandsData", {
                    pipelines: [authorizedOnlyConstraint, networkErrorPipeline]
                }),
                e.set("SpaHistoryRefundsData", {
                    pipelines: [authorizedOnlyConstraint, networkErrorPipeline]
                }),
                e.set("SpaMyCommunicationsData", {
                    pipelines: [authorizedOnlyConstraint, networkErrorPipeline]
                }),
                e.set("SpaMyClaimsData", {
                    pipelines: [authorizedOnlyConstraint, networkErrorPipeline]
                }),
                e.set("SpaMyFeedbacksData", {
                    pipelines: [authorizedOnlyConstraint, networkErrorPipeline]
                }),
                e.set("SpaNotificationsData", {
                    pipelines: [authorizedOnlyConstraint, networkErrorPipeline]
                }),
                e.set("SpaDeliveryServiceData", {
                    pipelines: [basicNotUseRoutePipeline, networkErrorPipeline]
                }),
                e.set("SpaLotteryData", {
                    pipelines: [basicNotUseRoutePipeline, new LotteryPipeline]
                }),
                e.set("SpaVideoReviewData", {
                    pipelines: [basicNotUseRoutePipeline, new VideoReviewPipeline]
                }),
                e.set("SpaGiftCertificatesData", {
                    pipelines: [basicNotUseRoutePipeline]
                }),
                e.set("SpaGiftCertificatesThankYouData", {
                    pipelines: [basicNotUseRoutePipeline]
                }),
                this.map = e
            }
            return e.prototype.extend = function(e) {
                return this.map.get(e)
            }
            ,
            e
        }();
        module.exports = RouteExtensions;

    }
    , {
        "../pipelines/authorizedOnlyConstraint": 42,
        "../pipelines/bankCardsPipeline": 43,
        "../pipelines/basketDataPipeline": 44,
        "../pipelines/brandCatalogPipeline": 45,
        "../pipelines/catalogDenyPipeline": 49,
        "../pipelines/catalogMainPipeline": 50,
        "../pipelines/catalogXdataPipeline": 51,
        "../pipelines/currencyPipeline": 52,
        "../pipelines/defaultValuePipeline": 53,
        "../pipelines/emailConfirmedPipeline": 54,
        "../pipelines/favoriteGoodsPipeline": 55,
        "../pipelines/homeDataPipeline": 56,
        "../pipelines/lotteryPipeline": 57,
        "../pipelines/miniProductCardPipeline": 58,
        "../pipelines/newlyArrivedWaitingListPipeline": 59,
        "../pipelines/notUseRoutePipeline": 60,
        "../pipelines/notUseRoutePipelineAsync": 61,
        "../pipelines/orderConfirmedPipeline": 62,
        "../pipelines/productCardOtherSellersPipeline": 63,
        "../pipelines/productCardPipeline": 64,
        "../pipelines/productFeedbacksPipeline": 65,
        "../pipelines/productQuestionsPipeline": 66,
        "../pipelines/promoCatalogXdataPipeline": 67,
        "../pipelines/promotionsPipeline": 68,
        "../pipelines/recentCatalogPipeline": 69,
        "../pipelines/recommendationsCatalogPipeline": 70,
        "../pipelines/recommendationsSearchCatalogPipeline": 71,
        "../pipelines/refundDataPipeline": 72,
        "../pipelines/searchByImagePipeline": 73,
        "../pipelines/searchXDataPipeline": 74,
        "../pipelines/sellerCatalogXdataPipeline": 75,
        "../pipelines/signInConstraint": 76,
        "../pipelines/timeoutPipeline": 77,
        "../pipelines/userInfoPipeline": 78,
        "../pipelines/videoReviewPipeline": 79
    }],
    42: [function(require, module, exports) {
        "use strict";
        function _defineProperties(e, t) {
            for (var r = 0; r < t.length; r++) {
                var o = t[r];
                o.enumerable = o.enumerable || !1,
                o.configurable = !0,
                "value"in o && (o.writable = !0),
                Object.defineProperty(e, _toPropertyKey(o.key), o)
            }
        }
        function _createClass(e, t, r) {
            return t && _defineProperties(e.prototype, t),
            r && _defineProperties(e, r),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            e
        }
        function _toPropertyKey(e) {
            var t = _toPrimitive(e, "string");
            return "symbol" == typeof t ? t : String(t)
        }
        function _toPrimitive(e, t) {
            if ("object" != typeof e || !e)
                return e;
            var r = e[Symbol.toPrimitive];
            if (void 0 !== r) {
                var o = r.call(e, t || "default");
                if ("object" != typeof o)
                    return o;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === t ? String : Number)(e)
        }
        let AuthorizedOnlyConstraint = function() {
            function e() {}
            return e.prototype.onActionExecuting = async function(e, t, r) {
                const {userInfo: o} = await this.$services.userData.getUserDataAsync();
                o.isAuthenticated || (r.redirected = !0,
                this.$router.moveToSignIn({
                    query: {
                        returnUrl: window.location.href
                    }
                }, !0))
            }
            ,
            _createClass(e, [{
                key: "$router",
                get: function() {
                    return WbSpaModel.prototype.$router
                }
            }, {
                key: "$services",
                get: function() {
                    return WbSpaModel.prototype.$services
                }
            }]),
            e
        }();
        module.exports = AuthorizedOnlyConstraint;

    }
    , {}],
    43: [function(require, module, exports) {
        "use strict";
        let BankCardsPipeline = function() {
            function e() {}
            var t = e.prototype;
            return t.onBeforeActionExecuting = async function(e) {
                this.isCardBinding = !!e.searchParams.get("bc")
            }
            ,
            t.onActionExecuted = async function(e) {
                if (!e.responseData)
                    return;
                let t;
                try {
                    t = await WbSpaModel.prototype.$services.cartService.getBankCards(6e3, WbSpaModel.prototype.$user.getCurrency(), this.isCardBinding),
                    this.isCardBinding && window.history.replaceState({}, "", location.pathname),
                    this.isCardBinding && WbSpaModel.prototype.$moduleLoader.execModule("bottomNotificationPanel", "showNotification", [0, "Карта успешно привязана"])
                } catch (e) {
                    t = []
                } finally {
                    e.responseData.maskedCards = t
                }
            }
            ,
            e
        }();
        module.exports = BankCardsPipeline;

    }
    , {}],
    44: [function(require, module, exports) {
        "use strict";
        let BasketDataPipeline = function() {
            function e() {}
            var t = e.prototype;
            return t.onBeforeActionExecuting = async function(e, t, a, r, s) {
                WbSpaModel.prototype.$services.favsService.syncFromServerAsync();
                const o = WbSpaModel.prototype.$services.cartService
                  , [i,n] = await Promise.all([WbSpaModel.prototype.$user.getUserInfo(), WbSpaModel.prototype.$user.getCurrencyAsync()]);
                this.getBalanceTask = i.isAuth && "RUB" === n ? WbSpaModel.prototype.$user.getBalance({
                    timeout: 1e3
                }).catch(e=>Promise.resolve()) : Promise.resolve(),
                await o.sync({
                    timeout: 3e3
                });
                const d = o.publicBasketApiUrl;
                t.credentials = "include",
                e.host = d.replace("//", ""),
                t.body || (t.body = new URLSearchParams);
                const c = o.getItems();
                0 === c.length && (a.cancelRequest = (()=>!0));
                const [l,u,p] = await Promise.all([WbSpaModel.prototype.$user.getXinfoSignedV1(), this.getBalanceTask, WbSpaModel.prototype.$user.getUserGrade(n)]);
                let y;
                if (this.userBalanceSigned = u,
                this.userGradeSigned = p,
                WbSpaModel.prototype.$services.userAddressService.getByCoordinates(l.latitude, l.longitude, l.address),
                !!e.searchParams.get("bc") && (await o.getBankCards(2e3, WbSpaModel.prototype.$user.getCurrency(), !0),
                WbSpaModel.prototype.$moduleLoader.execModule("bottomNotificationPanel", "showNotification", [0, "Карта успешно привязана"]),
                window.history.replaceState({}, "", location.pathname)),
                i.isAuth) {
                    const e = await WbSpaModel.prototype.$services.groupedDeliveriesService.getPurchaseInfo();
                    y = null == e ? void 0 : e.unpaid
                }
                const S = e.searchParams.get("includeInOrderStr")
                  , g = c.find(e=>e.characteristicId == S);
                this.isBuyItNowMode = !!g,
                g ? g.includeInOrder = !0 : 1 === c.length && (c[0].includeInOrder = !0),
                t.body = WbSpaModel.prototype.$helper.objectSerializer({
                    isBuyItNowMode: this.isBuyItNowMode,
                    items: g ? [g] : c,
                    includeInOrderStr: this.isBuyItNowMode ? null : c.filter(e=>e.includeInOrder).map(e=>e.characteristicId).join(";") || "1",
                    currency: n,
                    xInfo: l.xinfo,
                    cityLatitude: l.latitude,
                    cityLongitude: l.longitude,
                    address: l.address,
                    userBalanceSigned: this.userBalanceSigned,
                    unpaidAmount: y,
                    userDataSigned: l.userDataSign,
                    addressDataSign: l.addressDataSign,
                    userGradeSigned: p
                }, t.body, !0, !0)
            }
            ,
            t.onActionExecuted = async function(e) {
                var t;
                e.responseData || (e.responseData = {}),
                e.responseData.isNetworkError ? await WbSpaModel.prototype.$services.cartService.localBasket.enrichProductsIfNeedAsync() : null !== (t = e.responseData.data) && void 0 !== t && t.basket && !this.isBuyItNowMode && WbSpaModel.prototype.$services.cartService.save(e.responseData.data.basket),
                e.responseData.userBalanceSigned = this.userBalanceSigned,
                e.responseData.userGradeSigned = this.userGradeSigned,
                e.responseData.isBuyItNowMode = this.isBuyItNowMode
            }
            ,
            e
        }();
        module.exports = BasketDataPipeline;

    }
    , {}],
    45: [function(require, module, exports) {
        "use strict";
        const BrandMenu = require("../../services/catalog/brandMenu")
          , BrandCatalogXdataPipeline = require("./brandCatalogXdataPipeline")
          , BrandConstructorCatalogPipeline = require("./brandConstructorCatalogPipeline")
          , BrandConstructorPipeline = require("./brandConstructorPipeline");
        let brandCatalogPipeline = function() {
            function e(e) {
                this.initialized = !1,
                this.catalogMenu = null,
                this.modules = {},
                this.preview = e,
                this.pipeline = null
            }
            var t = e.prototype;
            return t.onBeforeActionExecuting = async function(e, t, n) {
                var i, a;
                if (this.xData = this.xInfo = this.currentMenuItem = this.products = this.sort = this.pipeline = this.brandScheme = null,
                n.cancelRequest)
                    return;
                let r = new URL(e);
                r.pathname = r.pathname.replace("/webapi", "").toLowerCase();
                const o = r.pathname.split("/")[this.preview ? 4 : 3];
                if (this.brand !== o && (this.initialized = !1,
                this.brand = this.catalogMenu = null),
                this.brand === o && this.initialized || await this._initAsync(this.preview),
                this.xInfo = await WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync(),
                this.brand !== o && await this._loadBrandMenu(o, r.pathname),
                this.brand) {
                    if (this.preview && !this.catalogMenu.isConstructor && ((r = new URL(e.href.replace("/preview", ""))).pathname = r.pathname.replace("/webapi", "").toLowerCase()),
                    this.currentMenuItem = this.catalogMenu.getCurrentMenuItem(r),
                    !this.currentMenuItem)
                        return n.cancelRequest = !1,
                        void (n.cancelRequest || (t.body = await WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync()));
                    if (this.catalogMenu.isConstructor) {
                        const e = this.brandConstructorService.getPageInfo(r.pathname)
                          , t = null == e ? void 0 : e.pageType
                          , n = null == e ? void 0 : e.infoUrl;
                        this.brandScheme = await this.brandConstructorService.getBrandSchemeAsync(this.catalogMenu.brandData, t, n, e.previewMode),
                        this.brandScheme || (this.ids = [],
                        await this._loadBrandMenu(o, r.pathname, !0))
                    }
                    return this.catalogMenu.isConstructor ? this.brandScheme.pageType == this.brandConstructorService.enums.pageType.catalog ? this.pipeline = new BrandConstructorCatalogPipeline(this) : this.pipeline = new BrandConstructorPipeline(this) : this.pipeline = new BrandCatalogXdataPipeline(this),
                    null === (i = (a = this.pipeline).onBeforeActionExecuting) || void 0 === i ? void 0 : i.call(a, e, t, n)
                }
                n.cancelRequest = !1
            }
            ,
            t.onActionExecuting = async function(e, t, n) {
                var i, a;
                return null === (i = this.pipeline) || void 0 === i || null === (a = i.onActionExecuting) || void 0 === a ? void 0 : a.call(i, e, t, n)
            }
            ,
            t.onActionExecuted = function(e) {
                var t, n;
                return null === (t = this.pipeline) || void 0 === t || null === (n = t.onActionExecuted) || void 0 === n ? void 0 : n.call(t, e)
            }
            ,
            t._initAsync = async function(e) {
                const t = this._initConstructorServiceAndGetBrands(e)
                  , [n,i,a,r] = await Promise.all([WbSpaModel.prototype.$moduleLoader.loadModuleAsync("xCatalogData"), WbSpaModel.prototype.$moduleLoader.loadModuleAsync("queryHelper"), WbSpaModel.prototype.$moduleLoader.loadModuleAsync("xCatalogProvider"), WbSpaModel.prototype.$moduleLoader.loadModuleAsync("sorterModel")]);
                this.modules = {
                    XCatalogData: n.XCatalogData,
                    QueryHelper: i,
                    xCatalogProvider: a,
                    SorterModel: r.CatalogSorterModel
                },
                this.ids = await t,
                this.catalogMenu = new BrandMenu(this.modules,this.brandConstructorService),
                this.initialized = !0
            }
            ,
            t._initConstructorServiceAndGetBrands = async function(e) {
                var t;
                return await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("brandConstructorService"),
                this.brandConstructorService = WbSpaModel.prototype.$services.brandConstructorService,
                null !== (t = await this.brandConstructorService.getConstructorBrands(e)) && void 0 !== t ? t : []
            }
            ,
            t._loadBrandMenu = async function(e, t) {
                await this.catalogMenu.initMenu(e, this.ids, this.xInfo, t),
                this.brand = this.catalogMenu.brandData ? e : null
            }
            ,
            e
        }();
        module.exports = brandCatalogPipeline;

    }
    , {
        "../../services/catalog/brandMenu": 102,
        "./brandCatalogXdataPipeline": 46,
        "./brandConstructorCatalogPipeline": 47,
        "./brandConstructorPipeline": 48
    }],
    46: [function(require, module, exports) {
        "use strict";
        const CATALOG_TYPES = require("../../modules/catalog_v2/catalogTypes");
        let BrandCatalogXdataPipeline = function() {
            function t(t) {
                Object.assign(this, t)
            }
            var e = t.prototype;
            return e.onBeforeActionExecuting = async function(t, e, n) {
                this.xData = new this.modules.XCatalogData(this.currentMenuItem.query,this.currentMenuItem.shard,"Brand"),
                n.cancelRequest = null != this.xData
            }
            ,
            e.onActionExecuting = async function(t, e, n) {
                if (this.xData && this.xInfo) {
                    const t = this.modules.QueryHelper.getInitialParams();
                    let {sort: e=this.modules.SorterModel.getSortFromCookie, page: a, sle: o, ...r} = t;
                    if ("adidas" === this.brand && o)
                        return n.redirected = !0,
                        void this.$router.moveTo404Async();
                    const s = new this.modules.QueryHelper({
                        sort: e,
                        page: a,
                        filters: this.modules.QueryHelper.checkOnlyFilterParams(r)
                    });
                    e = s.checkAndchangeSort(e);
                    const i = s.getQueryStringForCatalog()
                      , u = this.modules.xCatalogProvider.createGoodsProvider(this.xData)
                      , {goods: l=[]} = await u.loadGoodsAsync(i);
                    this.products = l,
                    this.sort = e
                }
            }
            ,
            e.onActionExecuted = function(t) {
                var e;
                if (null == this.xData)
                    return;
                t.responseData || (t.responseData = {});
                const n = this.catalogMenu.getSitePathItems(this.currentMenuItem)
                  , a = {
                    mainVersion: 0,
                    type: CATALOG_TYPES.brand,
                    model: {
                        brandInfo: this.catalogMenu.getBrandInfo(),
                        xData: this.xData,
                        currentMenuItem: this.currentMenuItem,
                        rootMenuItem: this.catalogMenu.getRootNode(this.currentMenuItem),
                        selectedHasChild: !1,
                        sitePathItems: n,
                        catalogMenu: this.catalogMenu.getCatalogMenu(null == n ? void 0 : n.slice(1)),
                        emptyCatalogLink: this.currentMenuItem.url,
                        tagsUrl: this.currentMenuItem.url,
                        products: this.products,
                        promoMenuV2: !1,
                        targetUrl: "BP",
                        title: null !== (e = this.currentMenuItem.seo) && void 0 !== e ? e : this.currentMenuItem.name,
                        containerClass: "catalog-page",
                        needAdultProtection: !wb.adult.isConfirmed,
                        sorterModel: new this.modules.SorterModel(this.sort,this.currentMenuItem.url)
                    }
                };
                Object.assign(t.responseData, {
                    data: a
                })
            }
            ,
            t
        }();
        module.exports = BrandCatalogXdataPipeline;

    }
    , {
        "../../modules/catalog_v2/catalogTypes": 34
    }],
    47: [function(require, module, exports) {
        "use strict";
        const CATALOG_TYPES = require("../../modules/catalog_v2/catalogTypes");
        let BrandConstructorCatalogPipeline = function() {
            function t(t) {
                Object.assign(this, t)
            }
            var e = t.prototype;
            return e.onBeforeActionExecuting = async function(t, e, a) {
                this.xData = new this.modules.XCatalogData(this.currentMenuItem.query,this.currentMenuItem.shard,"Brand"),
                a.cancelRequest = null != this.xData
            }
            ,
            e.onActionExecuting = async function() {
                if (this.xData && this.xData.xcatalogShard && this.xInfo) {
                    const t = this.modules.QueryHelper.getInitialParams();
                    let {sort: e=this.modules.SorterModel.getSortFromCookie, page: a, sle: r, ...o} = t;
                    if ("adidas" === this.brand && r)
                        return options.redirected = !0,
                        void this.$router.moveTo404Async();
                    const n = new this.modules.QueryHelper({
                        sort: e,
                        page: a,
                        filters: this.modules.QueryHelper.checkOnlyFilterParams(o)
                    });
                    e = n.checkAndchangeSort(e);
                    const s = n.getQueryStringForCatalog()
                      , i = this.modules.xCatalogProvider.createGoodsProvider(this.xData)
                      , {goods: u=[]} = await i.loadGoodsAsync(s);
                    this.products = u,
                    this.sort = e
                }
            }
            ,
            e.onActionExecuted = async function(t) {
                if (null == this.xData)
                    return;
                t.responseData || (t.responseData = {});
                const e = this.catalogMenu.getSitePathItems(this.currentMenuItem)
                  , a = this.catalogMenu.getCatalogMenu(null == e ? void 0 : e.slice(1))
                  , r = this.brandConstructorService.convertSchemeToViewModel(this.brandScheme, this.catalogMenu, this.currentMenuItem);
                await WbSpaModel.prototype.$moduleLoader.loadModuleAsync("brandConstructorConfig");
                const o = await this._getMetaTags(this.currentMenuItem)
                  , n = {
                    brandInfo: this.catalogMenu.getBrandInfo(),
                    currentMenuItem: this.currentMenuItem,
                    rootMenuItem: this.catalogMenu.getRootNode(this.currentMenuItem),
                    containerClass: "brand-constructor-catalog",
                    isCatalog: !0,
                    needAdultProtection: !wb.adult.isConfirmed,
                    sitePathItems: e,
                    catalogMenu: a,
                    brandScheme: r,
                    title: this.currentMenuItem.seo,
                    metaTags: o,
                    tagsUrl: this.currentMenuItem.url,
                    sorterModel: new this.modules.SorterModel(this.sort,this.currentMenuItem.url),
                    products: this.products,
                    xData: this.xData,
                    targetUrl: "BP",
                    emptyCatalogLink: this.currentMenuItem.url
                }
                  , s = {
                    mainVersion: 0,
                    type: CATALOG_TYPES.brandConstructorCatalog,
                    model: n
                };
                Object.assign(t.responseData, {
                    data: s
                })
            }
            ,
            e._getMetaTags = async function(t) {
                try {
                    var e;
                    const a = t.url.split("?")[0].replace("brands/", "brands/metatags/")
                      , r = await WbSpaModel.prototype.$httpClient.fetchJSON(`https://www.wildberries.ru/webapi/spa${a}?${new URLSearchParams({
                        name: t.name
                    })}`, {}, {
                        timeout: 3e3,
                        nullOnError: !0
                    });
                    return null !== (e = null == r ? void 0 : r.metaTags) && void 0 !== e ? e : []
                } catch (t) {
                    return []
                }
            }
            ,
            t
        }();
        module.exports = BrandConstructorCatalogPipeline;

    }
    , {
        "../../modules/catalog_v2/catalogTypes": 34
    }],
    48: [function(require, module, exports) {
        "use strict";
        const CATALOG_TYPES = require("../../modules/catalog_v2/catalogTypes");
        let BrandConstructorPipeline = function() {
            function t(t) {
                Object.assign(this, t)
            }
            var n = t.prototype;
            return n.onBeforeActionExecuting = async function(t, n, e) {
                e.cancelRequest = null != this.currentMenuItem
            }
            ,
            n.onActionExecuting = async function() {}
            ,
            n.onActionExecuted = async function(t) {
                t.responseData || (t.responseData = {});
                const n = this.catalogMenu.getSitePathItems(this.currentMenuItem)
                  , e = this.catalogMenu.getCatalogMenu(null == n ? void 0 : n.slice(1))
                  , o = this.brandConstructorService.convertSchemeToViewModel(this.brandScheme, this.catalogMenu, this.currentMenuItem)
                  , a = await this.brandConstructorService.getMainBanners(this.catalogMenu);
                await WbSpaModel.prototype.$moduleLoader.loadModuleAsync("brandConstructorConfig");
                const r = {
                    brandInfo: this.catalogMenu.getBrandInfo(),
                    brandDirections: {},
                    containerClass: "brand-constructor-ordinary",
                    isCatalog: !1,
                    needAdultProtection: !wb.adult.isConfirmed,
                    sitePathItems: n,
                    catalogMenu: e,
                    brandScheme: o,
                    mainBanners: a
                }
                  , s = {
                    mainVersion: 0,
                    type: CATALOG_TYPES.brandConstructor,
                    model: r
                };
                Object.assign(t.responseData, {
                    data: s
                })
            }
            ,
            t
        }();
        module.exports = BrandConstructorPipeline;

    }
    , {
        "../../modules/catalog_v2/catalogTypes": 34
    }],
    49: [function(require, module, exports) {
        "use strict";
        function _defineProperties(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1,
                i.configurable = !0,
                "value"in i && (i.writable = !0),
                Object.defineProperty(e, _toPropertyKey(i.key), i)
            }
        }
        function _createClass(e, t, n) {
            return t && _defineProperties(e.prototype, t),
            n && _defineProperties(e, n),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            e
        }
        function _toPropertyKey(e) {
            var t = _toPrimitive(e, "string");
            return "symbol" == typeof t ? t : String(t)
        }
        function _toPrimitive(e, t) {
            if ("object" != typeof e || !e)
                return e;
            var n = e[Symbol.toPrimitive];
            if (void 0 !== n) {
                var i = n.call(e, t || "default");
                if ("object" != typeof i)
                    return i;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === t ? String : Number)(e)
        }
        const CATALOG_TYPES = require("../../modules/catalog_v2/catalogTypes");
        let CatalogDenyPipeline = function() {
            function e() {
                this.initialized = !1,
                this.requestCancelled = !1,
                this.cancelled = !1,
                this.catalogMenu = null,
                this.currentMenuItem = null
            }
            var t = e.prototype;
            return t.onBeforeActionExecuting = async function(e, t, n) {
                var i;
                this.requestCancelled = this.cancelled = !1,
                this.initialized || await this._initAsync();
                const r = new URL(e);
                r.pathname = r.pathname.replace("/webapi", ""),
                this.currentMenuItem = this.catalogMenu.getCurrentMenuItem(r),
                null !== (i = this.currentMenuItem) && void 0 !== i && i.isDenyLink ? n.cancelRequest = this.requestCancelled = null != this.currentMenuItem : this.cancelled = !0
            }
            ,
            t.onActionExecuted = async function(e) {
                var t;
                if (this.cancelled)
                    return;
                e.responseData || (e.responseData = {});
                const n = this.catalogMenu.getSitePathItems(this.currentMenuItem)
                  , i = {
                    mainVersion: 0,
                    type: CATALOG_TYPES.categoryDenyLink,
                    model: {
                        menuId: this.currentMenuItem.id,
                        currentMenuItem: this.currentMenuItem,
                        rootMenuItem: this.catalogMenu.getRootNode(this.currentMenuItem),
                        children: this.currentMenuItem.childs,
                        sitePathItems: n,
                        title: null !== (t = this.currentMenuItem.seo) && void 0 !== t ? t : this.currentMenuItem.name,
                        needAdultProtection: !wb.adult.isConfirmed,
                        catalogMenu: this.catalogMenu,
                        catalogPromoLeftMenu: this.catalogMenu.getCatalogDenyMenu(this.currentMenuItem, n)
                    }
                };
                Object.assign(e.responseData, {
                    data: i
                })
            }
            ,
            t._initAsync = async function() {
                this.catalogMenu = await wb.spa.getCatalogMenu(),
                this.initialized = this.catalogMenu.isInited
            }
            ,
            _createClass(e, [{
                key: "$services",
                get: function() {
                    return WbSpaModel.prototype.$services
                }
            }, {
                key: "$moduleLoader",
                get: function() {
                    return WbSpaModel.prototype.$moduleLoader
                }
            }, {
                key: "$isDesktop",
                get: function() {
                    return WbSpaModel.prototype.$isDesktop
                }
            }]),
            e
        }();
        module.exports = CatalogDenyPipeline;

    }
    , {
        "../../modules/catalog_v2/catalogTypes": 34
    }],
    50: [function(require, module, exports) {
        "use strict";
        function _defineProperties(e, n) {
            for (var t = 0; t < n.length; t++) {
                var r = n[t];
                r.enumerable = r.enumerable || !1,
                r.configurable = !0,
                "value"in r && (r.writable = !0),
                Object.defineProperty(e, _toPropertyKey(r.key), r)
            }
        }
        function _createClass(e, n, t) {
            return n && _defineProperties(e.prototype, n),
            t && _defineProperties(e, t),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            e
        }
        function _toPropertyKey(e) {
            var n = _toPrimitive(e, "string");
            return "symbol" == typeof n ? n : String(n)
        }
        function _toPrimitive(e, n) {
            if ("object" != typeof e || !e)
                return e;
            var t = e[Symbol.toPrimitive];
            if (void 0 !== t) {
                var r = t.call(e, n || "default");
                if ("object" != typeof r)
                    return r;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === n ? String : Number)(e)
        }
        const CATALOG_TYPES = require("../../modules/catalog_v2/catalogTypes");
        let CatalogMainPipeline = function() {
            function e() {
                this.initialized = !1,
                this.requestCancelled = !1,
                this.cancelled = !1,
                this.catalogMenu = null,
                this.currentMenuItem = null
            }
            var n = e.prototype;
            return n.onBeforeActionExecuting = async function(e, n, t) {
                var r;
                this.requestCancelled = this.cancelled = !1,
                this.initialized || await this._initAsync();
                const a = new URL(e);
                a.pathname = a.pathname.replace("/webapi", ""),
                this.currentMenuItem = this.catalogMenu.getCurrentMenuItem(a),
                null !== (r = this.currentMenuItem) && void 0 !== r && r.landing ? t.cancelRequest = this.requestCancelled = null != this.currentMenuItem : this.cancelled = !0
            }
            ,
            n.onActionExecuted = async function(e) {
                if (this.cancelled)
                    return;
                if (!this.requestCancelled)
                    return this._modifyServerResult(e.responseData);
                e.responseData || (e.responseData = {});
                const n = this.catalogMenu.getSitePathItems(this.currentMenuItem)
                  , t = this.currentMenuItem.id
                  , [r,a] = await Promise.all([this.$moduleLoader.loadModuleAsync("mainCatalogConfig"), this._getCarouselsFromSearchService(t)])
                  , s = new r(r.template,this.menuIdEnum).getConfig(this.currentMenuItem)
                  , o = this.bannersTask(s, t)
                  , i = this.catalogMenu.menuById.get(t).childs
                  , l = JSON.parse(JSON.stringify(i))
                  , u = {
                    menuId: t,
                    bannersTask: o,
                    brandCatalogCode: s.brandCatalogCode,
                    pageTitle: this.currentMenuItem.name,
                    sitePathItems: n,
                    catalogMenu: this._transformMenu(l),
                    needAdultProtection: t == this.menuIdEnum.forAdults && !wb.adult.isConfirmed,
                    promoMenuV2: !1,
                    reqiredCss: s.reqiredCss,
                    requiredJs: [],
                    topMenu: s.useTopMenu ? this._buildTopMenu(l) : null,
                    topBrandsUrl: this._getUrlForTopBrands(t, s),
                    carouselsData: a
                }
                  , c = {
                    mainVersion: t === this.menuIdEnum.sport ? 2 : 3,
                    type: CATALOG_TYPES.main,
                    model: u
                };
                Object.assign(e.responseData, {
                    data: c
                })
            }
            ,
            n._modifyServerResult = function(e) {
                const {data: n} = e;
                if (!n)
                    return;
                const {model: t} = n;
                t && (t.bannersTask = Promise.resolve({
                    mainBannersFirst: this.$isDesktop ? t.firstBannersDesk : t.firstBannersMob,
                    mainBannersSecond: this.$isDesktop ? t.secondBannersDesk : t.secondBannersMob,
                    seasonBanners: t.seasonBanners,
                    verticalBanners: t.verticalBanners,
                    smallBanners: t.smallBanners
                }))
            }
            ,
            n.bannersTask = async function(e, n) {
                const t = await this.$services.bannersService.getCatalogBanners(n, this.menuIdEnum)
                  , r = this._buildBannersRows(t.smallBanners, e.bannersSort)
                  , a = this._buildBannersRows(t.verticalBanners, e.verticaBannerSort);
                return {
                    mainBannersFirst: t.mainBannersFirst,
                    mainBannersSecond: t.mainBannersSecond,
                    seasonBanners: t.seasonBanners,
                    verticalBanners: a,
                    smallBanners: r
                }
            }
            ,
            n._getUrlForTopBrands = function(e, n) {
                const t = new URLSearchParams({
                    menuId: e,
                    brandCode: n.brandCatalogCode
                });
                return n.topBrandsCount && t.append("count", n.topBrandsCount),
                `/webapi/maincatalog/topBrands?${t}`
            }
            ,
            n._buildTopMenu = function(e) {
                if (!e || 0 == e.length)
                    return;
                const n = e.slice(0, 7)
                  , t = this._toChunks(e, 10)
                  , r = [];
                return n.forEach(e=>{
                    const n = this._toChunks(e.childs, 10)
                      , t = {
                        node: this._toTopMenuItem(e),
                        childNodes: n
                    };
                    r.push(t)
                }
                ),
                [{
                    node: this._allCategoriesMenuItem(e[0]),
                    childNodes: t
                }].concat(r)
            }
            ,
            n._toTopMenuItem = function(e) {
                return {
                    name: e.name,
                    link: e.url
                }
            }
            ,
            n._allCategoriesMenuItem = function(e) {
                return e.name = "Все категории",
                this._toTopMenuItem(e)
            }
            ,
            n._toChunks = function(e, n) {
                const t = [];
                for (let r = 0; r < e.length; r += n) {
                    const a = e.slice(r, r + n).map(e=>this._toTopMenuItem(e));
                    a.length > 0 && t.push(a)
                }
                return t
            }
            ,
            n._buildBannersRows = function(e, n) {
                if (!e || 0 == e.length || !n)
                    return null;
                var t = {}
                  , r = 0;
                return n.forEach((n,a)=>{
                    let s = [];
                    a < 9 && this._isAllBannersExist(n, e) && n.forEach(n=>{
                        var t;
                        (null === (t = e[n]) || void 0 === t ? void 0 : t.length) > 0 && s.push(e[n][0])
                    }
                    ),
                    t[r] = s,
                    r++
                }
                ),
                t
            }
            ,
            n._isAllBannersExist = function(e, n) {
                return e.forEach(e=>{
                    var t;
                    if (!((null === (t = n[e]) || void 0 === t ? void 0 : t.length) > 0))
                        return !1
                }
                ),
                !0
            }
            ,
            n._initAsync = async function() {
                this.catalogMenu = await wb.spa.getCatalogMenu(),
                this.initialized = this.catalogMenu.isInited
            }
            ,
            n._transformMenu = function(e) {
                return null == e ? void 0 : e.map(e=>{
                    var n, t;
                    return {
                        childNodes: this._transformMenu(null !== (n = e.childs) && void 0 !== n ? n : []),
                        entity: {
                            pageUrl: e.url,
                            name: e.name,
                            isDenyLink: null !== (t = e.isDenyLink) && void 0 !== t && t
                        },
                        parent: {}
                    }
                }
                )
            }
            ,
            n._getCarouselsFromSearchService = async function(e) {
                const n = async()=>{
                    const [e,n,{XSeachData: t}] = await Promise.all([WbSpaModel.prototype.$getUserGender(), WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync(), this.$moduleLoader.loadModuleAsync("xCatalogData")])
                      , r = new t(null,null,null,null,e)
                      , a = new URL(r.dataUrl);
                    return wb.helpers.appendToParamsFromQuery(a.searchParams, n),
                    a.searchParams.set("resultset", "catalog"),
                    WbSpaModel.prototype.$analitic.appendSplitInfoV2(a.searchParams, "search"),
                    a
                }
                ;
                try {
                    const [t,r] = await Promise.all([WbSpaModel.prototype.$httpClient.fetchStaticDataV2(`main-catalog-carousels-${e}.json`, 3e3), n()])
                      , a = null == t ? void 0 : t.filter(e=>{
                        var n;
                        return (null == e || null === (n = e.query) || void 0 === n ? void 0 : n.length) > 0
                    }
                    ).map(e=>((e,n)=>(wb.helpers.appendToParamsFromQuery(n.searchParams, e.query),
                    n.searchParams.sort(),
                    {
                        fetchUrl: n.toString(),
                        firstTitle: e.name,
                        showAllURL: n.toString(),
                        sort: e.sort,
                        targetURL: "TG"
                    }))(e, r));
                    return null == a || a.sort((e,n)=>e.sort - n.sort),
                    a
                } catch (e) {
                    return console.error(e),
                    null
                }
            }
            ,
            _createClass(e, [{
                key: "$services",
                get: function() {
                    return WbSpaModel.prototype.$services
                }
            }, {
                key: "$moduleLoader",
                get: function() {
                    return WbSpaModel.prototype.$moduleLoader
                }
            }, {
                key: "$isDesktop",
                get: function() {
                    return WbSpaModel.prototype.$isDesktop
                }
            }, {
                key: "menuIdEnum",
                get: function() {
                    return this.catalogMenu.menuIdEnum
                }
            }]),
            e
        }();
        module.exports = CatalogMainPipeline;

    }
    , {
        "../../modules/catalog_v2/catalogTypes": 34
    }],
    51: [function(require, module, exports) {
        "use strict";
        function _defineProperties(e, t) {
            for (var r = 0; r < t.length; r++) {
                var a = t[r];
                a.enumerable = a.enumerable || !1,
                a.configurable = !0,
                "value"in a && (a.writable = !0),
                Object.defineProperty(e, _toPropertyKey(a.key), a)
            }
        }
        function _createClass(e, t, r) {
            return t && _defineProperties(e.prototype, t),
            r && _defineProperties(e, r),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            e
        }
        function _toPropertyKey(e) {
            var t = _toPrimitive(e, "string");
            return "symbol" == typeof t ? t : String(t)
        }
        function _toPrimitive(e, t) {
            if ("object" != typeof e || !e)
                return e;
            var r = e[Symbol.toPrimitive];
            if (void 0 !== r) {
                var a = r.call(e, t || "default");
                if ("object" != typeof a)
                    return a;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === t ? String : Number)(e)
        }
        const CATALOG_TYPES = require("../../modules/catalog_v2/catalogTypes")
          , CatalogCookieHelper = require("../../modules/catalog_v2/goodsCatalog/core/catalogCookieHelper")
          , SeoTagsService = require("../../services/seoTags/seoTagsService");
        let CatalogXdataPipeline = function() {
            function e() {
                this.initialized = !1,
                this.cancelled = !1,
                this.catalogMenu = null,
                this.currentMenuItem = null,
                this.modules = {}
            }
            var t = e.prototype;
            return t.onBeforeActionExecuting = async function(e, t, r) {
                var a, o;
                this.xData = this.xInfo = this.products = this.sort = null,
                this.cancelled = !1,
                this.searchSeoTag = !1,
                this.initialized || await this._initAsync();
                const n = new URL(e);
                if (n.pathname = n.pathname.replace("/webapi", ""),
                this.currentMenuItem = this.catalogMenu.getCurrentMenuItem(n),
                null !== (a = this.currentMenuItem) && void 0 !== a && a.landing || null !== (o = this.currentMenuItem) && void 0 !== o && o.isDenyLink)
                    return void (this.cancelled = !0);
                this.currentMenuItem ? this.currentMenuItem.seoTagInfo = null : this.currentMenuItem = await this._tryGetMenuItemFromTags(n);
                const [s,i] = await Promise.all([this._getXDataAsync(), WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync()]);
                this.xData = s,
                this.xInfo = i,
                r.cancelRequest = null != this.xData,
                r.cancelRequest || (t.body = this.xInfo)
            }
            ,
            t._tryGetMenuItemFromTags = async function(e) {
                const t = e.pathname
                  , r = await this.seoTagsService.getSeoTags(t);
                if (!r)
                    return null;
                this.searchSeoTag = !!r.searchQuery,
                e.pathname = r.link;
                const a = this.searchSeoTag ? this.catalogMenu.getCurrentMenuItem(e) : this._selectedMenuItemFinder(e);
                return a ? (this.searchSeoTag || (r.xQuery = 0 == a.query.indexOf("preset") ? `${a.query}&${r.parameters}` : r.parameters),
                a.seoTagInfo = r,
                a) : null
            }
            ,
            t._selectedMenuItemFinder = function(e) {
                let t, r = null;
                for (; 0 != (t = e.pathname.lastIndexOf("/")) && null == r; )
                    r = this.catalogMenu.getCurrentMenuItem(e),
                    e.pathname = e.pathname.substring(0, t);
                return r
            }
            ,
            t.onActionExecuting = async function() {
                if (this.xData && this.xInfo && !this.cancelled) {
                    var e;
                    const t = this.modules.QueryHelper.getInitialParams();
                    let {sort: r=this.modules.SorterModel.getSortFromCookie, page: a, ...o} = t;
                    r != this.modules.SorterModel.getSortFromCookie && CatalogCookieHelper.updateCookie("Sort", r);
                    const n = new this.modules.QueryHelper({
                        sort: r,
                        page: a,
                        filters: this.modules.QueryHelper.checkOnlyFilterParams(o)
                    });
                    r = n.checkAndchangeSort(r);
                    const s = n.getQueryStringForCatalog()
                      , i = this.modules.CatalogProvider.createAdvertProvider({
                        menuId: this.currentMenuItem.id
                    })
                      , l = this.modules.CatalogProvider.createGoodsProvider(this.xData)
                      , [{goods: u=[], resp: c},d] = await Promise.all([this._loadGoodsAsync(l, s), "popular" == r ? i.loadAdvData() : Promise.resolve(null)]);
                    this.products = i.mixInAdvertGoods(d, u, n, null === (e = u[0]) || void 0 === e ? void 0 : e.deliveryHours),
                    this.sort = r,
                    this.searchSeoTag && (this.xData = this._updateXDataIfSearchTag(this.xData, c))
                }
            }
            ,
            t._updateXDataIfSearchTag = function(e, t) {
                var r;
                const a = null != t && t.metadata ? null == t ? void 0 : t.metadata : t;
                return null != a && a.name || (e.gender = null),
                null != a && a.name && e.search !== (null == a ? void 0 : a.name) && (e.search = a.name),
                null != a && a.catalog_value && (e.xcatalogQuery = a.catalog_value),
                null != a && a.catalog_type && (e.xcatalogShard = a.catalog_type),
                null != a && a.context && (e.xcatalogContext = a.context),
                e.originalSearch = null !== (r = null == a ? void 0 : a.original) && void 0 !== r ? r : null,
                e
            }
            ,
            t._loadGoodsAsync = async function(e, t) {
                try {
                    const {goods: r=[], resp: a} = await e.loadGoodsAsync(t);
                    return {
                        goods: r,
                        resp: a
                    }
                } catch (e) {
                    return {
                        goods: [],
                        resp: null
                    }
                }
            }
            ,
            t.onActionExecuted = function(e) {
                var t;
                if (null == this.xData || this.cancelled)
                    return;
                e.responseData || (e.responseData = {});
                const r = this.catalogMenu.getSitePathItems(this.currentMenuItem)
                  , a = {
                    xData: this.xData,
                    menuId: this.currentMenuItem.id,
                    currentMenuItem: this.currentMenuItem,
                    rootMenuItem: this.catalogMenu.getRootNode(this.currentMenuItem),
                    selectedHasChild: !!this.currentMenuItem.childs,
                    sitePathItems: r,
                    emptyCatalogLink: this.currentMenuItem.url,
                    tagsUrl: this.currentMenuItem.url,
                    products: this.products,
                    targetUrl: "GP",
                    title: null !== (t = this.currentMenuItem.seo) && void 0 !== t ? t : this.currentMenuItem.name,
                    containerClass: "catalog-page",
                    needAdultProtection: !wb.adult.isConfirmed,
                    sorterModel: new this.modules.SorterModel(this.sort,this.currentMenuItem.url)
                };
                this.currentMenuItem.seoTagInfo && this._updateModelIfSeoTagUrl(a, this.currentMenuItem.seoTagInfo);
                const o = {
                    mainVersion: 0,
                    type: CATALOG_TYPES.goods,
                    model: a
                };
                Object.assign(e.responseData, {
                    data: o
                })
            }
            ,
            t._updateModelIfSeoTagUrl = async function(e, t) {
                t.seo && (e.title = t.seo),
                e.tagsUrl = t.url
            }
            ,
            t._initAsync = async function() {
                const [e,t,r,a,o] = await Promise.all([this.$moduleLoader.loadModuleAsync("xCatalogData"), this.$moduleLoader.loadModuleAsync("queryHelper"), this.$moduleLoader.loadModuleAsync("xCatalogProvider"), this.$moduleLoader.loadModuleAsync("sorterModel"), wb.spa.getCatalogMenu()]);
                this.modules = {
                    XCatalogData: e.XCatalogData,
                    XSearchCatalogData: e.XSeachData,
                    QueryHelper: t,
                    CatalogProvider: r,
                    SorterModel: a.CatalogSorterModel
                },
                this.catalogMenu = o,
                this.seoTagsService = new SeoTagsService
            }
            ,
            t._getXDataAsync = async function() {
                var e;
                const t = null === (e = this.currentMenuItem) || void 0 === e ? void 0 : e.seoTagInfo;
                if (this.searchSeoTag && t) {
                    const e = await WbSpaModel.prototype.$getUserGender();
                    return new this.modules.XSearchCatalogData(t.searchQuery,t.searchQuery,null,null,e,1)
                }
                const r = this.currentMenuItem && ((null == t ? void 0 : t.xQuery) || this.currentMenuItem.query);
                return this.currentMenuItem && this.currentMenuItem.shard ? new this.modules.XCatalogData(r,this.currentMenuItem.shard) : null
            }
            ,
            _createClass(e, [{
                key: "$router",
                get: function() {
                    return WbSpaModel.prototype.$router
                }
            }, {
                key: "$moduleLoader",
                get: function() {
                    return WbSpaModel.prototype.$moduleLoader
                }
            }, {
                key: "$services",
                get: function() {
                    return WbSpaModel.prototype.$services
                }
            }]),
            e
        }();
        module.exports = CatalogXdataPipeline;

    }
    , {
        "../../modules/catalog_v2/catalogTypes": 34,
        "../../modules/catalog_v2/goodsCatalog/core/catalogCookieHelper": 35,
        "../../services/seoTags/seoTagsService": 126
    }],
    52: [function(require, module, exports) {
        "use strict";
        let CurrencyPipeline = function() {
            function e() {}
            return e.prototype.onBeforeActionExecuting = function(e, n, r) {
                n.body || (n.body = new URLSearchParams),
                n.body.append("currency", WbSpaModel.prototype.$user.getCurrency())
            }
            ,
            e
        }();
        module.exports = CurrencyPipeline;

    }
    , {}],
    53: [function(require, module, exports) {
        "use strict";
        let DefaultValuePipeline = function() {
            function e(e) {
                this.defaultValue = e
            }
            return e.prototype.onBeforeActionExecuting = function(e, t, u) {
                u.defaultValue = this.defaultValue
            }
            ,
            e
        }();
        module.exports = DefaultValuePipeline;

    }
    , {}],
    54: [function(require, module, exports) {
        "use strict";
        let EmailConfirmedPipeline = function() {
            function e() {}
            return e.prototype.onBeforeActionExecuting = function(e, o, t) {
                o.body || (o.body = new URLSearchParams),
                o.body.set("changeEmail", "SpaChangeEmailEntrypoint" == WbSpaModel.prototype.$router.targetRoute)
            }
            ,
            e
        }();
        module.exports = EmailConfirmedPipeline;

    }
    , {}],
    55: [function(require, module, exports) {
        "use strict";
        let FavoriteGoodsPipeline = function() {
            function t() {
                this.data = null
            }
            var e = t.prototype;
            return e.onActionExecuting = async function(t) {
                this.data = await WbSpaModel.prototype.$services.favsService.getFavsDataAsync(t.searchParams)
            }
            ,
            e.onActionExecuted = function(t) {
                null != this.data && (t.responseData || (t.responseData = {}),
                Object.assign(t.responseData, this.data))
            }
            ,
            t
        }();
        module.exports = FavoriteGoodsPipeline;

    }
    , {}],
    56: [function(require, module, exports) {
        "use strict";
        let HomeDataPipeline = function() {
            function n() {
                this.bannersTask = null
            }
            var e = n.prototype;
            return e.onBeforeActionExecuting = async function(n, e, t) {
                this.bannersTask = null,
                t.cancelRequest = !0
            }
            ,
            e.onActionExecuting = async function(n) {
                this.bannersTask = WbSpaModel.prototype.$services.bannersService.getBannersForHomePageAsync(),
                this.splitInfoTask = WbSpaModel.prototype.$analitic.getSplitInfo()
            }
            ,
            e.onActionExecuted = async function(n) {
                n.responseData || (n.responseData = {});
                const e = await this._getBanners();
                Object.assign(n.responseData, {
                    bannersTask: this.bannersTask,
                    banners: e,
                    splitInfoTask: this.splitInfoTask
                })
            }
            ,
            e._getBanners = async function() {
                let n = 2e3
                  , e = null;
                return this.bannersTask.then(n=>{
                    e = n
                }
                ),
                new Promise(t=>{
                    let s = setTimeout(function a() {
                        if (!(n >= 0 && null == e))
                            return clearTimeout(s),
                            t(e);
                        n -= 200,
                        s = setTimeout(a, 200)
                    }, 200)
                }
                )
            }
            ,
            n
        }();
        module.exports = HomeDataPipeline;

    }
    , {}],
    57: [function(require, module, exports) {
        "use strict";
        let LotteryPipeline = function() {
            function t() {}
            var e = t.prototype;
            return e.onActionExecuting = async function() {}
            ,
            e.onActionExecuted = function(t) {
                var e;
                t.responseData || (t.responseData = {}),
                t.responseData.lotteries = null !== (e = this.lotteries) && void 0 !== e ? e : []
            }
            ,
            t
        }();
        module.exports = LotteryPipeline;

    }
    , {}],
    58: [function(require, module, exports) {
        "use strict";
        let MiniProductCardPipeline = function() {
            function t() {}
            var e = t.prototype;
            return e.onBeforeActionExecuting = function() {
                this.data = null
            }
            ,
            e.onActionExecuting = async function() {
                const t = WbSpaModel.prototype
                  , e = parseInt(t.$router.routeParameters.cod1S);
                try {
                    this.data = await wb.xnm.getMiniProductCard(e)
                } catch (t) {
                    console.error(t)
                }
            }
            ,
            e.onActionExecuted = function(t) {
                var e, i;
                if (null == this.data)
                    return;
                t.responseData || (t.responseData = {});
                let n = parseInt(WbSpaModel.prototype.$router.queryParams.get("size"));
                const o = this.data;
                var r;
                if (!isNaN(n) && null !== (e = o.sizes) && void 0 !== e && e.some(t=>t.ch == n))
                    o.characteristicId = n,
                    o.sizeName = null === (r = o.sizes.find(t=>t.ch == n)) || void 0 === r ? void 0 : r.nm;
                else if (1 == (null === (i = o.sizes) || void 0 === i ? void 0 : i.length)) {
                    const t = o.sizes[0];
                    o.characteristicId = t.ch,
                    o.sizeName = null == t ? void 0 : t.nm
                }
                t.responseData.miniCard = o
            }
            ,
            t
        }();
        module.exports = MiniProductCardPipeline;

    }
    , {}],
    59: [function(require, module, exports) {
        "use strict";
        function _defineProperties(e, t) {
            for (var r = 0; r < t.length; r++) {
                var o = t[r];
                o.enumerable = o.enumerable || !1,
                o.configurable = !0,
                "value"in o && (o.writable = !0),
                Object.defineProperty(e, _toPropertyKey(o.key), o)
            }
        }
        function _createClass(e, t, r) {
            return t && _defineProperties(e.prototype, t),
            r && _defineProperties(e, r),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            e
        }
        function _toPropertyKey(e) {
            var t = _toPrimitive(e, "string");
            return "symbol" == typeof t ? t : String(t)
        }
        function _toPrimitive(e, t) {
            if ("object" != typeof e || !e)
                return e;
            var r = e[Symbol.toPrimitive];
            if (void 0 !== r) {
                var o = r.call(e, t || "default");
                if ("object" != typeof o)
                    return o;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === t ? String : Number)(e)
        }
        let NewlyArrivedWatinglistPipeline = function() {
            function e() {
                this.data = null
            }
            var t = e.prototype;
            return t.onBeforeActionExecuting = function() {
                this.data = null
            }
            ,
            t.onActionExecuting = async function(e, t, r) {
                var o;
                const i = await this.$services.favsService.getWlArrivedCatalogModelAsync();
                if (0 == (null !== (o = null == i ? void 0 : i.goods) && void 0 !== o ? o : []).length)
                    return r.redirected = !0,
                    this.$router.moveTo404Async();
                this.data = i
            }
            ,
            t.onActionExecuted = function(e) {
                var t;
                if (null == this.data)
                    return;
                const r = this._adaptGoods(null !== (t = this.data.goods) && void 0 !== t ? t : []);
                e.responseData = {
                    goods: r,
                    goodsCount: r.length
                }
            }
            ,
            t._adaptGoods = function(e) {
                return e.map(e=>{
                    var t;
                    return {
                        ...e,
                        pics: 1,
                        brand: e.brandName,
                        name: e.goodsName,
                        canQuickOrder: !e.digitalGood,
                        sale: Math.max(e.sale, null !== (t = null == e ? void 0 : e.personalSale) && void 0 !== t ? t : 0)
                    }
                }
                )
            }
            ,
            _createClass(e, [{
                key: "$services",
                get: function() {
                    return WbSpaModel.prototype.$services
                }
            }, {
                key: "$router",
                get: function() {
                    return WbSpaModel.prototype.$router
                }
            }]),
            e
        }();
        module.exports = NewlyArrivedWatinglistPipeline;

    }
    , {}],
    60: [function(require, module, exports) {
        "use strict";
        let NotUseRoutePipeline = function() {
            function e(e) {
                this.checkFunction = null != e ? e : ()=>!0
            }
            return e.prototype.onBeforeActionExecuting = function(e, t, n) {
                n.cancelRequest = this.checkFunction()
            }
            ,
            e
        }();
        module.exports = NotUseRoutePipeline;

    }
    , {}],
    61: [function(require, module, exports) {
        "use strict";
        let NotUseRoutePipelineAsync = function() {
            function e(e) {
                this.checkFunction = null != e ? e : ()=>!0
            }
            return e.prototype.onBeforeActionExecuting = async function(e, t, n) {
                n.cancelRequest = await this.checkFunction()
            }
            ,
            e
        }();
        module.exports = NotUseRoutePipelineAsync;

    }
    , {}],
    62: [function(require, module, exports) {
        "use strict";
        let OrderConfirmedPipeline = function() {
            function e() {}
            return e.prototype.onBeforeActionExecuting = async function(e, r) {
                const t = WbSpaModel.prototype.$services.cartService.publicBasketApiUrl;
                r.credentials = "include",
                e.host = t.replace("//", "")
            }
            ,
            e
        }();
        module.exports = OrderConfirmedPipeline;

    }
    , {}],
    63: [function(require, module, exports) {
        "use strict";
        let ProductCardOtherSellersPipeline = function() {
            function e() {}
            var t = e.prototype;
            return t.onBeforeActionExecuting = async function() {
                this.data = null,
                await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("multipleSellersService")
            }
            ,
            t.onActionExecuting = async function() {
                const e = WbSpaModel.prototype
                  , t = parseInt(e.$router.routeParameters.cod1S)
                  , {nmIds: r} = await this._getNmsForOtherSellers(t);
                if (null != r && r.length)
                    try {
                        const t = await e.$services.multipleSellersService.loadSellersInfoAsync(r);
                        this.data = t.filter(e=>e.salePrice > 0 && e.deliveryModel)
                    } catch (e) {
                        console.error(e)
                    }
            }
            ,
            t._getNmsForOtherSellers = async function(e) {
                const t = await WbSpaModel.prototype.$moduleLoader.loadModuleAsync("productSelectionManager");
                this.productSelectionManager = new t(null,{
                    nmId: e
                });
                let r = await this.productSelectionManager.getNmsForOtherSellers(e);
                return r.length > 0 ? {
                    nmIds: r
                } : await WbSpaModel.prototype.$services.multipleSellersService.loadOtherSellersNmIds(e)
            }
            ,
            t.onActionExecuted = function(e) {
                var t;
                e.responseData || (e.responseData = {});
                const r = {
                    otherSellers: null !== (t = this.data) && void 0 !== t ? t : []
                };
                Object.assign(e.responseData, r)
            }
            ,
            e
        }();
        module.exports = ProductCardOtherSellersPipeline;

    }
    , {}],
    64: [function(require, module, exports) {
        "use strict";
        let ProductCardPipeline = function() {
            function t() {}
            var e = t.prototype;
            return e.onActionExecuting = async function(t, e, r) {
                const a = WbSpaModel.prototype.$router
                  , o = parseInt(a.routeParameters.cod1S)
                  , n = a.queryParams.has("size") && parseInt(a.queryParams.get("size")) || null
                  , s = await WbSpaModel.prototype.$services.productCard.loadProductCardAsync(o, n);
                if (null === s)
                    return r.redirected = !0,
                    a.moveTo404Async();
                this.data = s
            }
            ,
            e.onActionExecuted = async function(t) {
                t.responseData ? Object.assign(t.responseData, this.data) : t.responseData = this.data
            }
            ,
            t
        }();
        module.exports = ProductCardPipeline;

    }
    , {}],
    65: [function(require, module, exports) {
        "use strict";
        let ProductFeedbacksPipeline = function() {
            function t() {}
            var e = t.prototype;
            return e.onBeforeActionExecuting = async function() {
                this.data = null,
                await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("productFeedbacksService")
            }
            ,
            e.onActionExecuting = async function() {
                const t = WbSpaModel.prototype
                  , e = parseInt(t.$router.routeParameters.cod1S);
                let o = parseInt(t.$router.queryParams.get("imtId"));
                isNaN(o) && (o = await this._loadImtIdAsync(e));
                try {
                    var r;
                    const a = await t.$services.productCard.loadStaticProductAsync(e)
                      , n = !(null !== (r = a.colors) && void 0 !== r && r.length) || 1 == a.colors.length
                      , s = await this._setDefaultSort()
                      , {summary: c, votes: i} = await t.$services.productFeedbacksService.loadSummaryAndVotes(o, e, 10, s, null);
                    this.data = {
                        imtId: o,
                        summary: c,
                        votes: i,
                        sortValue: s,
                        nmId: e,
                        isOneColor: n,
                        staticProduct: a
                    }
                } catch (t) {
                    return {
                        imtId: o
                    }
                }
            }
            ,
            e.onActionExecuted = function(t) {
                var e;
                t.responseData || (t.responseData = {}),
                Object.assign(t.responseData, null !== (e = this.data) && void 0 !== e ? e : {})
            }
            ,
            e._loadImtIdAsync = async function(t) {
                if (isNaN(t))
                    return null;
                try {
                    const e = await WbSpaModel.prototype.$httpClient.fetchJSON(wb.helpers.url.urlProductStatic(t), {}, {
                        noProcessResponse: !0
                    });
                    return null == e ? void 0 : e.imt_id
                } catch (t) {
                    return console.error(t),
                    0
                }
            }
            ,
            e._setDefaultSort = async function() {
                return await WbSpaModel.prototype.$analitic.isAbTest133Approved() ? "rankDesc" : null
            }
            ,
            t
        }();
        module.exports = ProductFeedbacksPipeline;

    }
    , {}],
    66: [function(require, module, exports) {
        "use strict";
        let ProductFeedbacksPipeline = function() {
            function t() {}
            var e = t.prototype;
            return e.onBeforeActionExecuting = async function() {
                this.data = null,
                await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("productQuestionsService")
            }
            ,
            e.onActionExecuting = async function() {
                const t = WbSpaModel.prototype
                  , e = parseInt(t.$router.routeParameters.cod1S);
                let o = parseInt(t.$router.queryParams.get("imtId"));
                isNaN(o) && (o = await this._loadImtIdAsync(e));
                try {
                    const e = await t.$services.productQuestionsService.loadQuestionsFromCache(o, 10);
                    this.data = {
                        imtId: o,
                        questionsModel: e
                    }
                } catch (t) {
                    return {
                        imtId: o
                    }
                }
            }
            ,
            e.onActionExecuted = function(t) {
                var e;
                t.responseData || (t.responseData = {}),
                Object.assign(t.responseData, null !== (e = this.data) && void 0 !== e ? e : {})
            }
            ,
            e._loadImtIdAsync = async function(t) {
                if (isNaN(t))
                    return 0;
                try {
                    const e = await WbSpaModel.prototype.$httpClient.fetchJSON(wb.helpers.url.urlProductStatic(t), {}, {
                        noProcessResponse: !0
                    });
                    return null == e ? void 0 : e.imt_id
                } catch (t) {
                    return console.error(t),
                    0
                }
            }
            ,
            t
        }();
        module.exports = ProductFeedbacksPipeline;

    }
    , {}],
    67: [function(require, module, exports) {
        "use strict";
        const CATALOG_TYPES = require("../../modules/catalog_v2/catalogTypes")
          , PromoMenu = require("../../services/catalog/promoMenu");
        let PromoCatalogXdataPipeline = function() {
            function t() {
                this.initialized = !1,
                this.catalogMenu = null,
                this.currentPromoMenu = null,
                this.modules = {}
            }
            var e = t.prototype;
            return e.onBeforeActionExecuting = async function(t, e, o) {
                if (this.xData = this.xInfo = this.currentMenuItem = this.products = this.type = this.sort = null,
                o.cancelRequest)
                    return;
                this.initialized || await this._initAsync();
                const a = new URL(t);
                a.pathname = a.pathname.replace("/webapi", "");
                const n = a.pathname.split("/")[2];
                if (this.promo !== n && await this._loadPromoMenu(n),
                !(this.catalogMenu.promoId > 0))
                    return o.redirected = !0,
                    WbSpaModel.prototype.$router.moveTo404Async();
                var r;
                this.currentMenuItem = this.catalogMenu.getCurrentMenuItem(a),
                this.showCategories = null === (r = this.currentMenuItem) || void 0 === r ? void 0 : r.isTop,
                this.xData = this.currentMenuItem ? new this.modules.XCatalogData(this.currentMenuItem.query,this.currentMenuItem.shardKey) : null,
                this.xData.isPromo = !0,
                this.enableEntryPromoPage = this.showCategories,
                this.bannersTask = this.showCategories ? this._bannersTask(this.catalogMenu.promoId) : Promise.resolve(null),
                this.xInfo = await WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync(),
                o.cancelRequest = null != this.xData
            }
            ,
            e.onActionExecuting = async function() {
                if (this.xData && this.xInfo && !this.enableEntryPromoPage) {
                    var t;
                    const e = this.modules.QueryHelper.getInitialParams();
                    let {sort: o=this.modules.SorterModel.getSortFromCookie, page: a, ...n} = e;
                    const r = new this.modules.QueryHelper({
                        sort: o,
                        page: a,
                        filters: this.modules.QueryHelper.checkOnlyFilterParams(n)
                    });
                    o = r.checkAndchangeSort(o);
                    const s = r.getQueryStringForCatalog()
                      , i = this.modules.xCatalogProvider.createAdvertProvider({
                        promoId: this.catalogMenu.promoId
                    })
                      , u = this.modules.xCatalogProvider.createGoodsProvider(this.xData)
                      , [{goods: l=[]},c] = await Promise.all([u.loadGoodsAsync(s), Promise.resolve(null)]);
                    this.products = this.products = i.mixInAdvertGoods(c, l, r, null === (t = l[0]) || void 0 === t ? void 0 : t.deliveryHours),
                    this.sort = o
                }
            }
            ,
            e.onActionExecuted = function(t) {
                if (null == this.xData)
                    return;
                t.responseData || (t.responseData = {});
                const e = this.catalogMenu.getSitePathItems(this.currentMenuItem)
                  , o = this.enableEntryPromoPage ? this._getEntryModel(e) : this._getCatalogModel(e);
                Object.assign(t.responseData, {
                    data: o
                })
            }
            ,
            e._initAsync = async function() {
                const [t,e,o,a] = await Promise.all([WbSpaModel.prototype.$moduleLoader.loadModuleAsync("xCatalogData"), WbSpaModel.prototype.$moduleLoader.loadModuleAsync("queryHelper"), WbSpaModel.prototype.$moduleLoader.loadModuleAsync("xCatalogProvider"), WbSpaModel.prototype.$moduleLoader.loadModuleAsync("sorterModel")]);
                this.modules = {
                    XCatalogData: t.XCatalogData,
                    QueryHelper: e,
                    xCatalogProvider: o,
                    SorterModel: a.CatalogSorterModel
                },
                this.catalogMenu = new PromoMenu,
                this.initialized = !0
            }
            ,
            e._loadPromoMenu = async function(t) {
                await this.catalogMenu.initMenu(t),
                this.promo = this.catalogMenu ? t : null
            }
            ,
            e._getEntryModel = function(t) {
                var e;
                return {
                    mainVersion: 0,
                    type: CATALOG_TYPES.promoEntry,
                    model: {
                        xData: this.xData,
                        menuId: this.currentMenuItem.id,
                        currentMenuItem: this.catalogMenu.menuById.get(this.currentMenuItem.id),
                        rootMenuItem: this.catalogMenu.getRootNode(this.currentMenuItem),
                        children: this.currentMenuItem.childNodes,
                        sitePathItems: t,
                        title: null !== (e = this.currentMenuItem.seo) && void 0 !== e ? e : this.currentMenuItem.name,
                        needAdultProtection: !wb.adult.isConfirmed,
                        catalogMenu: this.catalogMenu,
                        promoId: this.catalogMenu.promoId,
                        catalogPromoLeftMenu: this.catalogMenu.getCatalogMenu(this.currentMenuItem, t),
                        bannersTask: this.bannersTask,
                        isSpecial: this.catalogMenu.isSpecial,
                        catalogType: CATALOG_TYPES.promoEntry
                    }
                }
            }
            ,
            e._getCatalogModel = function(t) {
                var e;
                return {
                    mainVersion: 0,
                    type: CATALOG_TYPES.goods,
                    model: {
                        xData: this.xData,
                        menuId: this.currentMenuItem.id,
                        currentMenuItem: this.catalogMenu.menuById.get(this.currentMenuItem.id),
                        rootMenuItem: this.catalogMenu.getRootNode(this.currentMenuItem),
                        selectedHasChild: !!this.currentMenuItem.childs,
                        sitePathItems: t,
                        promoMenuV2: !0,
                        catalogPromoLeftMenu: this.catalogMenu.getCatalogMenu(this.currentMenuItem, t),
                        emptyCatalogLink: this.currentMenuItem.url,
                        tagsUrl: this.currentMenuItem.url,
                        products: this.products,
                        targetUrl: "GP",
                        title: null !== (e = this.currentMenuItem.seo) && void 0 !== e ? e : this.currentMenuItem.name,
                        containerClass: "catalog-page",
                        needAdultProtection: !wb.adult.isConfirmed,
                        sorterModel: new this.modules.SorterModel(this.sort,this.currentMenuItem.url),
                        promoId: this.catalogMenu.promoId,
                        isSpecial: this.catalogMenu.isSpecial
                    }
                }
            }
            ,
            e._bannersTask = async function(t) {
                return WbSpaModel.prototype.$services.bannersService.getPromoCatalogBanners(t)
            }
            ,
            t
        }();
        module.exports = PromoCatalogXdataPipeline;

    }
    , {
        "../../modules/catalog_v2/catalogTypes": 34,
        "../../services/catalog/promoMenu": 104
    }],
    68: [function(require, module, exports) {
        "use strict";
        let PromotionsPipeline = function() {
            function n() {
                this.bannersTask = null
            }
            var e = n.prototype;
            return e.onBeforeActionExecuting = async function(n, e, s) {
                this.bannersTask = null,
                s.cancelRequest = !0
            }
            ,
            e.onActionExecuting = async function(n) {
                this.bannersTask = WbSpaModel.prototype.$services.bannersService.getPromoBanners()
            }
            ,
            e.onActionExecuted = function(n) {
                n.responseData || (n.responseData = {}),
                Object.assign(n.responseData, {
                    bannersTask: this.bannersTask
                })
            }
            ,
            n
        }();
        module.exports = PromotionsPipeline;

    }
    , {}],
    69: [function(require, module, exports) {
        "use strict";
        function _defineProperties(t, e) {
            for (var r = 0; r < e.length; r++) {
                var o = e[r];
                o.enumerable = o.enumerable || !1,
                o.configurable = !0,
                "value"in o && (o.writable = !0),
                Object.defineProperty(t, _toPropertyKey(o.key), o)
            }
        }
        function _createClass(t, e, r) {
            return e && _defineProperties(t.prototype, e),
            r && _defineProperties(t, r),
            Object.defineProperty(t, "prototype", {
                writable: !1
            }),
            t
        }
        function _toPropertyKey(t) {
            var e = _toPrimitive(t, "string");
            return "symbol" == typeof e ? e : String(e)
        }
        function _toPrimitive(t, e) {
            if ("object" != typeof t || !t)
                return t;
            var r = t[Symbol.toPrimitive];
            if (void 0 !== r) {
                var o = r.call(t, e || "default");
                if ("object" != typeof o)
                    return o;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === e ? String : Number)(t)
        }
        let RecentCatalogPipeline = function() {
            function t() {}
            var e = t.prototype;
            return e.onActionExecuted = async function(t) {
                t.responseData || (t.responseData = {});
                const e = await this._loadNms();
                if (0 == e.length)
                    return this.$router.moveTo404Async();
                const r = await this._loadGoods(e);
                if (0 == r.length)
                    return this.$router.moveTo404Async();
                const o = {
                    title: "Вы смотрели",
                    products: r,
                    type: "recent",
                    targetInfo: {
                        targetUrl: "RG"
                    },
                    statistic: {
                        recommendationsCount: e.length,
                        productsCount: r.length
                    }
                };
                Object.assign(t.responseData, o)
            }
            ,
            e._loadNms = async function() {
                var t, e;
                let r = null !== (t = null === (e = this.$recentViews.get()) || void 0 === e ? void 0 : e.nm) && void 0 !== t ? t : [];
                try {
                    var o;
                    const t = await this.$httpClient.fetchBasicJSON("/webapi/goods/visited-nm", {
                        method: "POST",
                        body: null
                    }, {
                        timeout: 2e3
                    });
                    (null == t || null === (o = t.value) || void 0 === o || null === (o = o.nmsArr) || void 0 === o ? void 0 : o.length) > 0 && (r = t.value.nmsArr)
                } catch (t) {
                    console.error(t)
                }
                return r
            }
            ,
            e._loadGoods = async function(t) {
                try {
                    const e = await wb.xnm.getCatalogCards(t, !0, !0);
                    return t.reduce((t,r)=>{
                        var o;
                        return null !== (o = e[r]) && void 0 !== o && o.id && t.push(wb.xnm.convertXProductToSpaCatalogProduct(e[r])),
                        t
                    }
                    , [])
                } catch (t) {
                    return []
                }
            }
            ,
            _createClass(t, [{
                key: "$recentViews",
                get: function() {
                    return WbSpaModel.prototype.$recentViews
                }
            }, {
                key: "$httpClient",
                get: function() {
                    return WbSpaModel.prototype.$httpClient
                }
            }, {
                key: "$router",
                get: function() {
                    return WbSpaModel.prototype.$router
                }
            }]),
            t
        }();
        module.exports = RecentCatalogPipeline;

    }
    , {}],
    70: [function(require, module, exports) {
        "use strict";
        function _defineProperties(t, e) {
            for (var o = 0; o < e.length; o++) {
                var r = e[o];
                r.enumerable = r.enumerable || !1,
                r.configurable = !0,
                "value"in r && (r.writable = !0),
                Object.defineProperty(t, _toPropertyKey(r.key), r)
            }
        }
        function _createClass(t, e, o) {
            return e && _defineProperties(t.prototype, e),
            o && _defineProperties(t, o),
            Object.defineProperty(t, "prototype", {
                writable: !1
            }),
            t
        }
        function _toPropertyKey(t) {
            var e = _toPrimitive(t, "string");
            return "symbol" == typeof e ? e : String(e)
        }
        function _toPrimitive(t, e) {
            if ("object" != typeof t || !t)
                return t;
            var o = t[Symbol.toPrimitive];
            if (void 0 !== o) {
                var r = o.call(t, e || "default");
                if ("object" != typeof r)
                    return r;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === e ? String : Number)(t)
        }
        let RecommendationsCatalogPipeline = function() {
            function t() {}
            var e = t.prototype;
            return e.onActionExecuting = async function(t, e, o) {
                var r, n;
                this.goods = this.type = this.forproduct = this.result = null,
                await this.$moduleLoader.loadServiceAsync("recommendationsCatalogService");
                const i = this.$router.queryParams.get("type")
                  , a = this.$router.queryParams.get("forproduct")
                  , s = this.$services.recommendationsCatalogService
                  , u = s.getType(i)
                  , l = await s.getRecommendations(u.id, a);
                let d;
                if (null != l && null !== (r = l.goods) && void 0 !== r && r.length ? d = l.goods : null != l && null !== (n = l.nms) && void 0 !== n && n.length && (d = await this._loadGoods(l.nms)),
                !(Array.isArray(d) && d.length > 0))
                    return o.redirected = !0,
                    void this.$router.moveTo404Async();
                this.type = u,
                this.goods = d,
                this.result = l,
                this.forproduct = a
            }
            ,
            e.onActionExecuted = async function(t) {
                var e, o, r, n;
                t.responseData || (t.responseData = {});
                const {type: i, goods: a, result: s, forproduct: u} = this
                  , l = {
                    type: i.id,
                    targetInfo: {
                        targetUrl: i.targetUrl
                    },
                    products: a,
                    statistic: {
                        type: i.id,
                        source: null == s ? void 0 : s.source,
                        recommendationsCount: null !== (e = null !== (o = null == s || null === (r = s.goods) || void 0 === r ? void 0 : r.length) && void 0 !== o ? o : null == s || null === (n = s.nms) || void 0 === n ? void 0 : n.length) && void 0 !== e ? e : 0,
                        productsCount: a.length,
                        parentProduct: u
                    },
                    nmId: u,
                    title: i.title
                };
                Object.assign(t.responseData, l)
            }
            ,
            e._loadGoods = async function(t) {
                try {
                    const e = await wb.xnm.getCatalogCards(t, !1, !1);
                    return t.reduce((t,o)=>{
                        var r;
                        return null !== (r = e[o]) && void 0 !== r && r.id && t.push(wb.xnm.convertXProductToSpaCatalogProduct(e[o])),
                        t
                    }
                    , [])
                } catch (t) {
                    return []
                }
            }
            ,
            _createClass(t, [{
                key: "$moduleLoader",
                get: function() {
                    return WbSpaModel.prototype.$moduleLoader
                }
            }, {
                key: "$services",
                get: function() {
                    return WbSpaModel.prototype.$services
                }
            }, {
                key: "$router",
                get: function() {
                    return WbSpaModel.prototype.$router
                }
            }]),
            t
        }();
        module.exports = RecommendationsCatalogPipeline;

    }
    , {}],
    71: [function(require, module, exports) {
        "use strict";
        function _defineProperties(e, t) {
            for (var r = 0; r < t.length; r++) {
                var o = t[r];
                o.enumerable = o.enumerable || !1,
                o.configurable = !0,
                "value"in o && (o.writable = !0),
                Object.defineProperty(e, _toPropertyKey(o.key), o)
            }
        }
        function _createClass(e, t, r) {
            return t && _defineProperties(e.prototype, t),
            r && _defineProperties(e, r),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            e
        }
        function _toPropertyKey(e) {
            var t = _toPrimitive(e, "string");
            return "symbol" == typeof t ? t : String(t)
        }
        function _toPrimitive(e, t) {
            if ("object" != typeof e || !e)
                return e;
            var r = e[Symbol.toPrimitive];
            if (void 0 !== r) {
                var o = r.call(e, t || "default");
                if ("object" != typeof o)
                    return o;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === t ? String : Number)(e)
        }
        const CATALOG_TYPES = require("../../modules/catalog_v2/catalogTypes");
        let RecommendationsSearchCatalogPipeline = function() {
            function e() {}
            var t = e.prototype;
            return t.onActionExecuted = async function(e) {
                e.responseData || (e.responseData = {});
                const t = WbSpaModel.prototype.$router.queryParams.get("searchQuery")
                  , r = WbSpaModel.prototype.$router.queryParams.get("targetUrl")
                  , o = this._getSearchCatalogLink(t)
                  , a = `/recommendationssearch?searchQuery?searchQuery=${new URLSearchParams({
                    searchQuery: t,
                    targetUrl: r
                })}`
                  , n = await this._loadGoods(t);
                if (!Array.isArray(n) || 0 == n.length)
                    return this.$router.moveTo404Async();
                const i = {
                    type: CATALOG_TYPES.recommendationsSearch,
                    searchQuery: t,
                    targetUrl: r,
                    linkToSearchCatalog: o,
                    originalUrl: a,
                    products: n
                };
                Object.assign(e.responseData, i)
            }
            ,
            t._getSearchCatalogLink = function(e) {
                let t = encodeURIComponent(e.replace(/<\/?[^>]+>/gi, "").trim());
                return `${wb.settings.fullDomainName}${wb.urlHelper.xSearchBase}?search=${t}`
            }
            ,
            t._loadGoods = async function(e) {
                try {
                    const t = `https://search-goods.wildberries.ru/search?query=${encodeURIComponent(e)}`
                      , r = await WbSpaModel.prototype.$analitic.getRecomendationsSplitterHeaders()
                      , o = await this.$httpClient.fetchBasicJSON(t, {
                        credentials: "omit",
                        headers: r
                    }, {
                        timeout: 5e3
                    });
                    if (!((null == o ? void 0 : o.length) > 0))
                        return null;
                    const a = await wb.xnm.getCatalogCards(o, !1, !1);
                    return o.reduce((e,t)=>{
                        var r;
                        return null !== (r = a[t]) && void 0 !== r && r.id && e.push(wb.xnm.convertXProductToSpaCatalogProduct(a[t])),
                        e
                    }
                    , [])
                } catch (e) {
                    return null
                }
            }
            ,
            _createClass(e, [{
                key: "$httpClient",
                get: function() {
                    return WbSpaModel.prototype.$httpClient
                }
            }, {
                key: "$router",
                get: function() {
                    return WbSpaModel.prototype.$router
                }
            }, {
                key: "$user",
                get: function() {
                    return WbSpaModel.prototype.$user
                }
            }]),
            e
        }();
        module.exports = RecommendationsSearchCatalogPipeline;

    }
    , {
        "../../modules/catalog_v2/catalogTypes": 34
    }],
    72: [function(require, module, exports) {
        "use strict";
        let RefundDataPipeline = function() {
            function e() {}
            return e.prototype.onBeforeActionExecuting = async function(e, o, t) {
                o.body || (o.body = new URLSearchParams),
                o.body = WbSpaModel.prototype.$helper.objectSerializer({
                    rids: WbSpaModel.prototype.$services.refundService.getRids()
                }, o.body, !0)
            }
            ,
            e
        }();
        module.exports = RefundDataPipeline;

    }
    , {}],
    73: [function(require, module, exports) {
        "use strict";
        function _defineProperties(e, t) {
            for (var r = 0; r < t.length; r++) {
                var o = t[r];
                o.enumerable = o.enumerable || !1,
                o.configurable = !0,
                "value"in o && (o.writable = !0),
                Object.defineProperty(e, _toPropertyKey(o.key), o)
            }
        }
        function _createClass(e, t, r) {
            return t && _defineProperties(e.prototype, t),
            r && _defineProperties(e, r),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            e
        }
        function _toPropertyKey(e) {
            var t = _toPrimitive(e, "string");
            return "symbol" == typeof t ? t : String(t)
        }
        function _toPrimitive(e, t) {
            if ("object" != typeof e || !e)
                return e;
            var r = e[Symbol.toPrimitive];
            if (void 0 !== r) {
                var o = r.call(e, t || "default");
                if ("object" != typeof o)
                    return o;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === t ? String : Number)(e)
        }
        let SearchByImagePipeline = function() {
            function e() {}
            var t = e.prototype;
            return t.onBeforeActionExecuting = function() {
                this.model = this.imageId = null
            }
            ,
            t.onActionExecuting = async function() {
                var e;
                await this.$moduleLoader.loadServiceAsync("searchByImageService");
                const t = this.$router.routeParameters.imageId
                  , r = this.$services.searchByImageService.getSearchResult(t);
                !r.invalidPhoto && !r.error && (null === (e = r.recommendationsNms) || void 0 === e ? void 0 : e.length) > 0 && (r.products = await this._loadGoods(r.recommendationsNms),
                r.statistic && (r.statistic.foundByImageOnStock = r.products.length)),
                r.imageId = t,
                this.model = r,
                this.imageId = t
            }
            ,
            t.onActionExecuted = function(e) {
                e.responseData || (e.responseData = {}),
                Object.assign(e.responseData, this.model)
            }
            ,
            t._loadGoods = async function(e) {
                try {
                    const t = await wb.xnm.getCatalogCards(e, !1, !1);
                    return e.reduce((e,r)=>{
                        var o;
                        return null !== (o = t[r]) && void 0 !== o && o.id && e.push(wb.xnm.convertXProductToSpaCatalogProduct(t[r])),
                        e
                    }
                    , [])
                } catch (e) {
                    return []
                }
            }
            ,
            _createClass(e, [{
                key: "$moduleLoader",
                get: function() {
                    return WbSpaModel.prototype.$moduleLoader
                }
            }, {
                key: "$services",
                get: function() {
                    return WbSpaModel.prototype.$services
                }
            }, {
                key: "$router",
                get: function() {
                    return WbSpaModel.prototype.$router
                }
            }]),
            e
        }();
        module.exports = SearchByImagePipeline;

    }
    , {}],
    74: [function(require, module, exports) {
        "use strict";
        function _defineProperties(e, t) {
            for (var r = 0; r < t.length; r++) {
                var o = t[r];
                o.enumerable = o.enumerable || !1,
                o.configurable = !0,
                "value"in o && (o.writable = !0),
                Object.defineProperty(e, _toPropertyKey(o.key), o)
            }
        }
        function _createClass(e, t, r) {
            return t && _defineProperties(e.prototype, t),
            r && _defineProperties(e, r),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            e
        }
        function _toPropertyKey(e) {
            var t = _toPrimitive(e, "string");
            return "symbol" == typeof t ? t : String(t)
        }
        function _toPrimitive(e, t) {
            if ("object" != typeof e || !e)
                return e;
            var r = e[Symbol.toPrimitive];
            if (void 0 !== r) {
                var o = r.call(e, t || "default");
                if ("object" != typeof o)
                    return o;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === t ? String : Number)(e)
        }
        const CATALOG_TYPES = require("../../modules/catalog_v2/catalogTypes")
          , SearchMenu = require("../../services/catalog/searchMenu");
        let SearchXDataPipeline = function() {
            function e() {}
            var t = e.prototype;
            return t.onBeforeActionExecuting = async function(e, t, r) {
                r.cancelRequest = !0,
                this.initialized || await this._initAsync()
            }
            ,
            t.onActionExecuting = async function(e, t, r) {
                var o, a;
                const i = this.modules.QueryHelper.getInitialParams();
                this.catalogMenu = this.xData = this.products = this.targetUrl = this.isEmpty = null,
                this.isNetworkError = !1;
                let {brand: n, page: s, sort: l="popular", cardsize: c, search: u, targeturl: d, nocorrection: h, ssubject: p, ...y} = i;
                const g = new this.modules.QueryHelper({
                    sort: l,
                    page: s,
                    ssubject: p,
                    filters: this.modules.QueryHelper.checkOnlyFilterParams(y)
                });
                l = g.checkAndchangeSort(l);
                const m = g.getQueryStringForCatalog()
                  , f = await this._getXDataAsync(i);
                if (null == f.search || "" === f.search)
                    return r.redirected = !0,
                    this.$router.moveTo404Async();
                const {redirect: v, isProductRedirect: S} = await this._checkPossibleRedirects(i, f);
                if (v && !S)
                    return r.redirected = !0,
                    this.$router.moveTo(v, !0);
                const w = await WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync()
                  , P = this.modules.CatalogProvider.createAdvertProvider({
                    searchtext: f.search
                })
                  , b = this.modules.CatalogProvider.createGoodsProvider(f)
                  , _ = new SearchMenu(this.modules)
                  , [{goods: $=[], resp: C, isNetworkError: M=!1},A] = await Promise.all([this._loadGoodsAsync(b, m), "popular" == l ? P.loadAdvData() : Promise.resolve(null), this._prepareMenu(_, w, f)])
                  , x = null != C && C.metadata ? null == C ? void 0 : C.metadata : C;
                if (this.isEmpty = void 0 !== (null == x ? void 0 : x.is_empty) ? x.is_empty : null,
                null != x && x.name || (f.gender = null),
                "redirect" === (null == x ? void 0 : x.catalog_type) && null != x && x.catalog_value) {
                    const e = await this._checkRedirectUrl(x.catalog_value);
                    if (e)
                        return r.redirected = !0,
                        this.$router.moveTo(e, !0)
                }
                if (null != x && x.name && f.search !== (null == x ? void 0 : x.name) && (f.search = x.name),
                null != x && x.catalog_value && (f.xcatalogQuery = x.catalog_value),
                null != x && x.catalog_type && (f.xcatalogShard = x.catalog_type),
                null != x && x.context && (f.xcatalogContext = x.context),
                f.originalSearch = null !== (o = null == x ? void 0 : x.original) && void 0 !== o ? o : null,
                this.products = M ? [] : P.mixInAdvertGoods(A, $, g, null === (a = $[0]) || void 0 === a ? void 0 : a.deliveryHours),
                this.emptySearch = 0 === this.products.length && 0 === g.getFiltersQuery().toString().length,
                this.isNetworkError = M,
                S && this.emptySearch)
                    return r.redirected = !0,
                    this.$router.moveTo(v, !0);
                this.emptySearchRecom = [],
                this.emptySearch && (this.emptySearchRecom = await this._getEmptySearchRecommendations(f)),
                this.xData = f,
                this.targetUrl = d,
                this.xInfo = w,
                this.catalogMenu = _,
                this.sort = l
            }
            ,
            t.onActionExecuted = function(e) {
                e.responseData || (e.responseData = {});
                const t = this.$router.queryParams.get("ssubject")
                  , r = this.catalogMenu.getCurrentMenuItem(t)
                  , o = String.format(this.xData.search)
                  , a = {
                    type: CATALOG_TYPES.search,
                    model: {
                        title: o,
                        xData: this.xData,
                        tagsUrl: `${this.xData.search.toSafeString()}&lang=ru&${this.xInfo}&locale=${WbSpaModel.prototype.$user.getLocale()}`,
                        emptySearch: this.emptySearch,
                        products: this.products,
                        emptySearchRecom: this.emptySearchRecom,
                        targetUrl: this.targetUrl,
                        needAdultProtection: !wb.adult.isConfirmed,
                        sorterModel: new this.modules.SorterModel(this.sort,window.location.href),
                        currentMenuItem: r,
                        rootMenuItem: this.catalogMenu.getRootNode(r),
                        isNetworkError: this.isNetworkError,
                        isEmpty: this.isEmpty,
                        selectedHasChild: !1
                    }
                };
                Object.assign(e.responseData, {
                    data: a
                })
            }
            ,
            t._loadGoodsAsync = async function(e, t) {
                try {
                    const {goods: r=[], resp: o} = await e.loadGoodsAsync(t);
                    return {
                        goods: r,
                        resp: o
                    }
                } catch (e) {
                    return {
                        goods: [],
                        resp: null,
                        isNetworkError: !0
                    }
                }
            }
            ,
            t._prepareMenu = async function(e, t, r) {
                try {
                    await e.initMenu(t, r)
                } catch (e) {}
            }
            ,
            t._initAsync = async function() {
                const [e,t,r,o] = await Promise.all([this.$moduleLoader.loadModuleAsync("xCatalogData"), this.$moduleLoader.loadModuleAsync("queryHelper"), this.$moduleLoader.loadModuleAsync("xCatalogProvider"), this.$moduleLoader.loadModuleAsync("sorterModel")]);
                this.modules = {
                    XCatalogData: e.XSeachData,
                    QueryHelper: t,
                    CatalogProvider: r,
                    SorterModel: o.CatalogSorterModel
                },
                this.initialized = !0
            }
            ,
            t._getXDataAsync = async function(e) {
                const t = await WbSpaModel.prototype.$getUserGender();
                return new this.modules.XCatalogData(e.search,e.search,null,null,t,e.nocorrection,e.ssubject)
            }
            ,
            t._checkPossibleRedirects = async function(e, t) {
                try {
                    const [r,o] = await Promise.all([this._getBrandsRedirect(e), this._tryGetUrlToProductCard(e, t)]);
                    return {
                        redirect: null != r ? r : o,
                        isProductRedirect: null != o
                    }
                } catch (e) {
                    return console.error(`Error checking redirect ${e.message}`),
                    {
                        redirect: null
                    }
                }
            }
            ,
            t._getBrandsRedirect = async function(e) {
                try {
                    var t;
                    const r = await this.$httpClient.fetchBasicJSON(`https://brand-suggestions.wildberries.ru/api/v1/redirect?query=${encodeURIComponent(e.search)}`, {}, {
                        timeout: 2e3
                    });
                    return "" === (null !== (t = null == r ? void 0 : r.url) && void 0 !== t ? t : "") ? null : r.url
                } catch (e) {
                    return null
                }
            }
            ,
            t._checkRedirectUrl = async function(e) {
                try {
                    const r = new URL(e.startsWith("http") ? e : "https://" + e);
                    if (r.host.endsWith(".wildberries.ru")) {
                        var t;
                        const e = !r.pathname.startsWith("/recent") && r.pathname.startsWith("/catalog");
                        if (e && null !== (t = await wb.spa.getCatalogMenu()) && void 0 !== t && t.menuByUrl.get(r.pathname) || !e)
                            return r.toString()
                    }
                    return r.toString()
                } catch (e) {
                    return null
                }
            }
            ,
            t._tryGetUrlToProductCard = async function(e, t) {
                if (!t.isValid || "merger" === t.shardKey)
                    return null;
                const r = e.search;
                if (!this.$helper.isNumber(r))
                    return null;
                if (r <= 1e3 || r >= 1e9)
                    return null;
                try {
                    var o;
                    const e = await wb.xnm.getXnmProducts([r]);
                    if (!((null == e || null === (o = e[r]) || void 0 === o ? void 0 : o.pics) > 0))
                        return null;
                    const t = new URL(`/catalog/${r}/detail.aspx`,window.location.origin);
                    return t.searchParams.set("targetUrl", "SP"),
                    t
                } catch (e) {
                    return null
                }
            }
            ,
            t._getEmptySearchRecommendations = async function(e) {
                const t = `https://search-goods.wildberries.ru/search?query=${encodeURIComponent(e.search)}`;
                try {
                    const e = await this.$httpClient.fetchBasicJSON(t, {}, {
                        timeout: 2e3
                    });
                    if (!(Array.isArray(e) && e.length > 0))
                        return [];
                    const r = await wb.xnm.getCatalogCards(e);
                    return Object.values(r).reduce((e,t)=>(t.id && e.push(wb.xnm.convertXProductToSpaCatalogProduct(t)),
                    e), [])
                } catch (e) {
                    return console.error(e.message),
                    []
                }
            }
            ,
            _createClass(e, [{
                key: "$router",
                get: function() {
                    return WbSpaModel.prototype.$router
                }
            }, {
                key: "$moduleLoader",
                get: function() {
                    return WbSpaModel.prototype.$moduleLoader
                }
            }, {
                key: "$services",
                get: function() {
                    return WbSpaModel.prototype.$services
                }
            }, {
                key: "$httpClient",
                get: function() {
                    return WbSpaModel.prototype.$httpClient
                }
            }, {
                key: "$helper",
                get: function() {
                    return WbSpaModel.prototype.$helper
                }
            }]),
            e
        }();
        module.exports = SearchXDataPipeline;

    }
    , {
        "../../modules/catalog_v2/catalogTypes": 34,
        "../../services/catalog/searchMenu": 105
    }],
    75: [function(require, module, exports) {
        "use strict";
        const CATALOG_TYPES = require("../../modules/catalog_v2/catalogTypes")
          , SellerMenu = require("../../services/catalog/sellerMenu");
        let SellerCatalogXdataPipeline = function() {
            function e() {
                this.initialized = !1,
                this.catalogMenu = null,
                this.modules = {}
            }
            var t = e.prototype;
            return t.onBeforeActionExecuting = async function(e, t, a) {
                if (this.xData = this.xInfo = this.currentMenuItem = this.products = this.type = this.sort = null,
                a.cancelRequest)
                    return;
                this.initialized || await this._initAsync();
                let o = new URL(e);
                o.pathname = o.pathname.replace("/webapi", "");
                const s = o.pathname.split("/")[3];
                this.xInfo = await WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync(),
                this.seller !== s && await this._loadBrandMenu(s),
                this.catalogMenu.isConstructor ? t.body = this.xInfo : (this.seller && (this.currentMenuItem = this.catalogMenu.getCurrentMenuItem(o),
                this.xData = new this.modules.XCatalogData(this.currentMenuItem.query,this.currentMenuItem.shard,"Seller")),
                a.cancelRequest = null != this.xData)
            }
            ,
            t.onActionExecuting = async function() {
                if (this.xData && this.xInfo) {
                    const e = this.modules.QueryHelper.getInitialParams();
                    let {sort: t=this.modules.SorterModel.getSortFromCookie, page: a, ...o} = e;
                    const s = new this.modules.QueryHelper({
                        sort: t,
                        page: a,
                        filters: this.modules.QueryHelper.checkOnlyFilterParams(o)
                    });
                    t = s.checkAndchangeSort(t);
                    const l = s.getQueryStringForCatalog()
                      , r = this.modules.xCatalogProvider.createGoodsProvider(this.xData)
                      , {goods: n} = await r.loadGoodsAsync(l);
                    this.products = n,
                    this.sort = t
                }
            }
            ,
            t.onActionExecuted = function(e) {
                if (null == this.xData)
                    return;
                e.responseData || (e.responseData = {});
                const t = this.catalogMenu.getSitePathItems(this.currentMenuItem)
                  , a = {
                    mainVersion: 0,
                    type: CATALOG_TYPES.seller,
                    model: {
                        sellerId: this.catalogMenu.sellerData.id,
                        sellerInfo: this.catalogMenu.getSellerInfo(),
                        xData: this.xData,
                        rootMenuItem: this.catalogMenu.getRootNode(this.currentMenuItem),
                        currentMenuItem: this.currentMenuItem,
                        selectedHasChild: !1,
                        sitePathItems: t,
                        catalogMenu: this.catalogMenu.getCatalogMenu(t),
                        emptyCatalogLink: this.currentMenuItem.url,
                        tagsUrl: this.currentMenuItem.url,
                        products: this.products,
                        promoMenuV2: !1,
                        title: this.currentMenuItem.title,
                        containerClass: "catalog-page catalog-page--brand",
                        needAdultProtection: !wb.adult.isConfirmed,
                        sorterModel: new this.modules.SorterModel(this.sort,this.currentMenuItem.url)
                    }
                };
                Object.assign(e.responseData, {
                    data: a
                })
            }
            ,
            t._initAsync = async function() {
                const [e,t,a,o,s] = await Promise.all([WbSpaModel.prototype.$moduleLoader.loadModuleAsync("xCatalogData"), WbSpaModel.prototype.$moduleLoader.loadModuleAsync("queryHelper"), WbSpaModel.prototype.$moduleLoader.loadModuleAsync("xCatalogProvider"), WbSpaModel.prototype.$moduleLoader.loadModuleAsync("sorterModel"), WbSpaModel.prototype.$moduleLoader.loadServiceAsync("suppliersService")]);
                this.modules = {
                    XCatalogData: e.XCatalogData,
                    QueryHelper: t,
                    xCatalogProvider: a,
                    SorterModel: o.CatalogSorterModel
                },
                this.catalogMenu = new SellerMenu(this.modules),
                this.initialized = !0
            }
            ,
            t._loadBrandMenu = async function(e) {
                await this.catalogMenu.initMenu(e, this.xInfo),
                this.seller = this.catalogMenu.sellerData ? e : null
            }
            ,
            e
        }();
        module.exports = SellerCatalogXdataPipeline;

    }
    , {
        "../../modules/catalog_v2/catalogTypes": 34,
        "../../services/catalog/sellerMenu": 106
    }],
    76: [function(require, module, exports) {
        "use strict";
        function _defineProperties(e, t) {
            for (var r = 0; r < t.length; r++) {
                var o = t[r];
                o.enumerable = o.enumerable || !1,
                o.configurable = !0,
                "value"in o && (o.writable = !0),
                Object.defineProperty(e, _toPropertyKey(o.key), o)
            }
        }
        function _createClass(e, t, r) {
            return t && _defineProperties(e.prototype, t),
            r && _defineProperties(e, r),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            e
        }
        function _toPropertyKey(e) {
            var t = _toPrimitive(e, "string");
            return "symbol" == typeof t ? t : String(t)
        }
        function _toPrimitive(e, t) {
            if ("object" != typeof e || !e)
                return e;
            var r = e[Symbol.toPrimitive];
            if (void 0 !== r) {
                var o = r.call(e, t || "default");
                if ("object" != typeof o)
                    return o;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === t ? String : Number)(e)
        }
        let SignInConstraint = function() {
            function e() {}
            return e.prototype.onActionExecuting = async function(e, t, r) {
                if (this.$router.userIsAuth && WbSpaModel.prototype.$auth.jwt) {
                    var o;
                    const e = null !== (o = this.$router.queryParams.get("ReturnUrl") || this.$router.queryParams.get("returnUrl")) && void 0 !== o ? o : "/lk";
                    r.redirected = !0,
                    this.$router.moveTo(e)
                }
            }
            ,
            _createClass(e, [{
                key: "$router",
                get: function() {
                    return WbSpaModel.prototype.$router
                }
            }, {
                key: "$services",
                get: function() {
                    return WbSpaModel.prototype.$services
                }
            }]),
            e
        }();
        module.exports = SignInConstraint;

    }
    , {}],
    77: [function(require, module, exports) {
        "use strict";
        let TimeoutPipeline = function() {
            function t(t) {
                this.timeout = t
            }
            return t.prototype.onBeforeActionExecuting = function(t, e, i) {
                i.timeout = this.timeout
            }
            ,
            t
        }();
        module.exports = TimeoutPipeline;

    }
    , {}],
    78: [function(require, module, exports) {
        "use strict";
        let UserInfoPipeline = function() {
            function e() {}
            return e.prototype.onActionExecuting = async function() {
                let e = WbSpaModel.prototype.$user.getId();
                WbSpaModel.prototype.$services.userData.setKey("0" != e, e),
                await WbSpaModel.prototype.$services.userData.getUserDataAsync()
            }
            ,
            e
        }();
        module.exports = UserInfoPipeline;

    }
    , {}],
    79: [function(require, module, exports) {
        "use strict";
        function _defineProperties(e, t) {
            for (var i = 0; i < t.length; i++) {
                var o = t[i];
                o.enumerable = o.enumerable || !1,
                o.configurable = !0,
                "value"in o && (o.writable = !0),
                Object.defineProperty(e, _toPropertyKey(o.key), o)
            }
        }
        function _createClass(e, t, i) {
            return t && _defineProperties(e.prototype, t),
            i && _defineProperties(e, i),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            e
        }
        function _toPropertyKey(e) {
            var t = _toPrimitive(e, "string");
            return "symbol" == typeof t ? t : String(t)
        }
        function _toPrimitive(e, t) {
            if ("object" != typeof e || !e)
                return e;
            var i = e[Symbol.toPrimitive];
            if (void 0 !== i) {
                var o = i.call(e, t || "default");
                if ("object" != typeof o)
                    return o;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === t ? String : Number)(e)
        }
        let VideoReviewPipeline = function() {
            function e() {}
            var t = e.prototype;
            return t.onstructor = function() {
                this.initialized = !1,
                this.cancelled = !1,
                this.modules = {}
            }
            ,
            t.onBeforeActionExecuting = async function() {
                var e, t;
                this.xData = this.xInfo = this.products = this.sort = null,
                this.enableVideoReviews = null !== (e = null === (t = wb.global.settings) || void 0 === t || null === (t = t.switches) || void 0 === t ? void 0 : t.enableVideoReviews) && void 0 !== e && e,
                this.enableVideoReviews && (this.initialized || await this._initAsync())
            }
            ,
            t.onActionExecuting = async function() {
                if (!this.enableVideoReviews)
                    return;
                const e = this.modules.QueryHelper.getInitialParams();
                let {sort: t="new", q: i, ...o} = e;
                const r = new this.modules.QueryHelper({
                    sort: t,
                    q: i,
                    filters: this.modules.QueryHelper.checkOnlyFilterParams(o)
                }).getQueryStringForCatalog()
                  , n = new this.modules.XCatalogData(i ? `q=${i}` : null,null)
                  , s = this.modules.Provider.createGoodsProvider(n)
                  , {goods: a} = await s.loadGoodsAsync(r);
                this.products = a,
                this.sort = t,
                this.xData = n
            }
            ,
            t.onActionExecuted = function(e) {
                e.responseData || (e.responseData = {});
                const t = {
                    videos: this.products,
                    xData: this.xData,
                    nothingToSeeThere: !this.enableVideoReviews,
                    sorterModel: this.enableVideoReviews ? new this.modules.SorterModel(this.sort) : null,
                    sitePathItems: [{
                        id: 0,
                        pageUrl: "/video-reviews",
                        name: "Видеообзоры"
                    }]
                };
                Object.assign(e.responseData, {
                    ...t
                })
            }
            ,
            t._initAsync = async function() {
                const [e,t,i,o] = await Promise.all([this.$moduleLoader.loadModuleAsync("xCatalogData"), this.$moduleLoader.loadModuleAsync("queryHelper"), this.$moduleLoader.loadModuleAsync("sorterModel"), this.$moduleLoader.loadModuleAsync("videoReviewProvider")]);
                this.modules = {
                    XCatalogData: e.VideoReviewData,
                    QueryHelper: t,
                    SorterModel: i.VideoReviewSorterModel,
                    Provider: o
                }
            }
            ,
            _createClass(e, [{
                key: "$moduleLoader",
                get: function() {
                    return WbSpaModel.prototype.$moduleLoader
                }
            }]),
            e
        }();
        module.exports = VideoReviewPipeline;

    }
    , {}],
    80: [function(require, module, exports) {
        "use strict";
        function _defineProperties(e, t) {
            for (var o = 0; o < t.length; o++) {
                var i = t[o];
                i.enumerable = i.enumerable || !1,
                i.configurable = !0,
                "value"in i && (i.writable = !0),
                Object.defineProperty(e, _toPropertyKey(i.key), i)
            }
        }
        function _createClass(e, t, o) {
            return t && _defineProperties(e.prototype, t),
            o && _defineProperties(e, o),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            e
        }
        function _toPropertyKey(e) {
            var t = _toPrimitive(e, "string");
            return "symbol" == typeof t ? t : String(t)
        }
        function _toPrimitive(e, t) {
            if ("object" != typeof e || !e)
                return e;
            var o = e[Symbol.toPrimitive];
            if (void 0 !== o) {
                var i = o.call(e, t || "default");
                if ("object" != typeof i)
                    return i;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === t ? String : Number)(e)
        }
        const CustomHistory = require("./customHistory/customHistory")
          , DEFAULT_PREVIEW = "preview_General"
          , APP_CONTAINERS = Object.freeze([{
            containerId: 0,
            viewModel: null
        }, {
            containerId: 1,
            viewModel: null
        }, {
            containerId: 2,
            viewModel: null
        }])
          , VIEW_MODEL_STATUSES = Object.freeze({
            prepearing: 0,
            readyToInstall: 1,
            installed: 2,
            destroyed: 3
        })
          , VALID_EXTERNAL_DOMAINS = Object.freeze(["vmeste.wildberries.ru", "vmeste-stage.wildberries.ru", "digital.wildberries.ru", "vsemrabota.ru", "guru.wildberries.ru", "guru-stage.wildberries.ru", "travel.wildberries.ru", "digital.wb.ru", "seller.wildberries.ru"]);
        let Router = function() {
            function Router() {}
            var _proto = Router.prototype;
            return _proto.init = async function(e, t, o, i) {
                var r;
                this.routes = e,
                this.customHistory = (new CustomHistory).tryInitFromCache(window.history.state),
                this.abortController = new AbortController,
                this.routesDictionary = t,
                this.tmplHashes = i,
                this.routeParameters = {},
                this.clientRenderInited = !1,
                this.referrer = document.referrer,
                Object.defineProperty(document, "referrer", {
                    get: function() {
                        return WbSpaModel.prototype.$router.referrer
                    }
                });
                let n = null === (r = this._findRoute(window.location.pathname)) || void 0 === r ? void 0 : r.name;
                if (!n) {
                    try {
                        const e = await this.$httpClient.fetchJSON(`/webapi/check-redirect${window.location.pathname}${window.location.search}`);
                        var a;
                        if (null != e && e.redirect)
                            n = null === (a = this._findRoute(window.location.pathname)) || void 0 === a ? void 0 : a.name
                    } catch (e) {}
                    if (!n)
                        return this.moveTo404Async()
                }
                this.currentRoute = this.routesDictionary[n],
                this.targetRoute = n,
                this._bindEvents();
                const s = t[n].useSSR;
                return s || (this.current = $.templates["preview_" + n] ? "preview_" + n : DEFAULT_PREVIEW),
                this._replaceState({
                    name: n
                }, document.title, window.location.href),
                this.loadingTemplate = n,
                s && null != o ? this._initSSR(o, n) : this._routerTransitionAsync(n, window.location, !0).then(({needStateUpdate: e})=>Promise.resolve(e)).catch(e=>(console.log(e),
                e.isCancelled || this.moveTo500Async(),
                Promise.resolve()))
            }
            ,
            _proto.refresh = function() {
                const e = this.currentRoute;
                this.clearNotActiveContainer(),
                this.goToRoute(e, window.location, !0)
            }
            ,
            _proto.clearNotActiveContainer = function() {
                this.appContainers.filter(e=>e.containerId !== this.activeContainer).forEach(e=>{
                    var t, o;
                    null !== e.viewModel && ((null === (t = e.viewModel) || void 0 === t ? void 0 : t.__modelStatus__) != VIEW_MODEL_STATUSES.destroyed && (null === (o = e.viewModel) || void 0 === o || o.onBeforeUnrender()),
                    e.viewModel = null)
                }
                )
            }
            ,
            _proto.move = function(e, t) {
                var o;
                null == (null == t || null === (o = t.currentTarget) || void 0 === o ? void 0 : o.href) ? window.history.go(e) : this.customHistory.canMove(e) && (t.preventDefault(),
                window.history.go(e))
            }
            ,
            _proto.moveTo = function(e, t=!1, o=!1, i=!1) {
                var r;
                let n;
                try {
                    n = new URL(e,window.location.origin)
                } catch (e) {
                    return !1
                }
                if (VALID_EXTERNAL_DOMAINS.includes(n.host))
                    return window.location = n.toString(),
                    !1;
                const a = this._findRoute(n.pathname);
                if (null == a || null == this.routesDictionary[a.name] || n.hostname !== window.location.host)
                    return this.isLeaving = !0,
                    t ? window.location.replace(encodeURIComponent(e)) : window.location = e;
                var s, l;
                (this.isLeaving = !1,
                (null === (r = this.currentRoute) || void 0 === r ? void 0 : r.name) === a.name && window.dispatchEvent(new CustomEvent("spaTransition",{
                    detail: {
                        isFinished: !0,
                        dest: a
                    }
                })),
                n.pathname !== window.location.pathname || window.location.search !== n.search || o) ? (this.targetRoute = a.name,
                this.referrer = window.location.href,
                t ? this._replaceState({
                    name: a.name
                }, document.title, n.href) : this._pushState({
                    name: a.name
                }, document.title, n.href),
                this.goToRoute(a, n, i).then(e=>{
                    e && this._replaceState({
                        name: a.name
                    }, document.title, n.href)
                }
                ).catch(()=>{}
                )) : null === (s = this.viewModel) || void 0 === s || null === (l = s.onSamePageNavigation) || void 0 === l || l.call(s, e)
            }
            ,
            _proto.goToRoute = function(e, t, o=!1) {
                return window.dispatchEvent(new CustomEvent("spaTransition",{
                    detail: {
                        isFinished: !1,
                        dest: e
                    }
                })),
                this._routerTransitionAsync(e.name, t, !1, o)
            }
            ,
            _proto.getAppliedEntries = function() {
                var e;
                let t;
                return t = "currentScript"in document && null !== (e = document.currentScript) && void 0 !== e && e.src ? document.currentScript.src.replace(/https?:/, "") : this.routesDictionary[this.loadingTemplate].requiredModel,
                Object.keys(this.routesDictionary).filter(e=>this.routesDictionary[e].requiredModel === t)
            }
            ,
            _proto.getChildRouteByName = function(e) {
                return this.currentRoute.childRoutes.find(t=>t.name == e)
            }
            ,
            _proto.prepareUrl = function(e) {
                if (null == e.routePathSegments)
                    return e.path;
                const t = e.routePathSegments.reduce((e,t)=>{
                    for (let o = 0; o < t.parts.length; o++) {
                        const i = t.parts[o];
                        e += 0 === o ? "/" : "",
                        i.isParameter ? (!i.isOptional || i.isOptional && null != this.routeParameters[i.name]) && (e += this.routeParameters[i.name]) : e += i.content
                    }
                    return e
                }
                , "").replace(/[\/\?]$/, "");
                return e.externalPath ? e.externalPath + t : t
            }
            ,
            _proto.addState = function(e, t, o) {
                this._pushState({
                    isLocalHandler: !0,
                    name: this.currentRoute.name,
                    ...e
                }, t, o)
            }
            ,
            _proto.replaceState = function(e, t, o) {
                this._replaceState({
                    isLocalHandler: !0,
                    name: this.currentRoute.name,
                    ...e
                }, t, o)
            }
            ,
            _proto._pushState = function(e, t, o) {
                const i = CustomHistory.generateId();
                e.id = i,
                window.history.pushState(e, t, o),
                this.customHistory.addItem(e)
            }
            ,
            _proto._replaceState = function(e, t, o) {
                e.id = CustomHistory.generateId(),
                e.title = t,
                window.history.replaceState(e, "", o),
                this.customHistory.updateCurrentItem(e)
            }
            ,
            _proto.initCSR = function() {
                const e = Object.create(WbSpaModel.prototype, {
                    router: {
                        value: this
                    }
                });
                $.link.appTemplate("#app", e),
                this.clientRenderInited = !0
            }
            ,
            _proto.updateRouteDataExternal = async function(e, t=this.currentRoute.name) {
                await this._updateRouteData(t, e)
            }
            ,
            _proto.moveTo404Async = async function() {
                const e = await this.$moduleLoader.loadModuleAsync("error404")
                  , t = new e(e.data,e.template);
                await t.showErrorPage(),
                window.dispatchEvent(new CustomEvent("spaTransition",{
                    detail: {
                        isFinished: !0
                    }
                }))
            }
            ,
            _proto.moveTo500Async = async function(e, t) {
                try {
                    await Promise.all([this.$helper.loadCssAsync(wb.settings.styles.error500), this.$helper.loadJsAsync(wb.settings.scripts.spaRecommendationCarousel)]),
                    this._updateRouteData("criticalError")
                } catch (e) {
                    console.error(e),
                    this._updateRouteData("absoluteCriticalError")
                } finally {
                    wb.spa.logError(e, t, !0)
                }
            }
            ,
            _proto.loadRouteDataAsync = async function(e, t=0, o=!1, i=!1) {
                const r = this.$routeExtensions.extend(null == e ? void 0 : e.name);
                let n;
                try {
                    var a, s, l, u;
                    if (!e)
                        return {
                            viewData: {},
                            needStateUpdate: !1
                        };
                    n = {
                        url: new URL(`${this.prepareUrl(e)}?${this.queryParams.toString()}`,window.location.origin),
                        params: {
                            method: "POST"
                        },
                        options: {
                            redirectUnauth: !0,
                            replaceState: !0,
                            includeResponse: !0
                        }
                    },
                    await Promise.all((null !== (a = null == r ? void 0 : r.pipelines) && void 0 !== a ? a : []).map(e=>{
                        var o;
                        return null === (o = e.onBeforeActionExecuting) || void 0 === o ? void 0 : o.call(e, n.url, n.params, n.options, i, t)
                    }
                    ));
                    const c = [];
                    n.options.cancelRequest || n.options.redirected ? c.push(Promise.resolve({})) : c.push(this.$httpClient.fetchJSON(n.url.toString(), n.params, n.options)),
                    c.push(...(null !== (s = null == r ? void 0 : r.pipelines) && void 0 !== s ? s : []).map(e=>{
                        var o;
                        return null === (o = e.onActionExecuting) || void 0 === o ? void 0 : o.call(e, n.url, n.params, n.options, i, t)
                    }
                    ));
                    const [h] = await Promise.all(c);
                    n.options.redirected || await Promise.all((null !== (l = null == r ? void 0 : r.pipelines) && void 0 !== l ? l : []).map(e=>{
                        var t;
                        return null === (t = e.onActionExecuted) || void 0 === t ? void 0 : t.call(e, h, i)
                    }
                    ));
                    let p = h.responseData;
                    return n.options.cancelRequest && null != r && r.fallback && (p = null == r ? void 0 : r.fallback(n)),
                    {
                        viewData: p,
                        needStateUpdate: !1,
                        needRouteUpdate: !(null !== (u = n.options.redirected) && void 0 !== u && u)
                    }
                } catch (i) {
                    var d;
                    const a = null !== (d = r.maxTriesCount) && void 0 !== d ? d : 3;
                    if (i.isNotFound || i.isUnauthorize || i.isCancelled || t >= a || o) {
                        if (null != r && r.fallback && (i.isCancelled || t >= a))
                            return {
                                viewData: null == r ? void 0 : r.fallback(n),
                                needStateUpdate: !1
                            };
                        throw i
                    }
                    return await this.loadRouteDataAsync(e, ++t)
                }
            }
            ,
            _proto.moveToSignIn = function(e, t) {
                let o = $.views.helpers.urlSignIn(e && e.query && e.query.returnUrl);
                this.moveTo(new URL(o,window.location.href).href, t)
            }
            ,
            _proto._bindEvents = function() {
                window.addEventListener("popstate", e=>{
                    this.$analitic.updateStatInfo(!1);
                    const {name: t, isLocalHandler: o, title: i} = history.state;
                    if (i && (document.title = i),
                    null != this.routesDictionary[t]) {
                        var r, n;
                        if (this.customHistory.updateCurrent(history.state),
                        window.dispatchEvent(new CustomEvent("spaTransition",{
                            detail: {
                                isFinished: !1,
                                dest: {
                                    name: t
                                }
                            }
                        })),
                        o && this.currentRoute.name == t)
                            return this._updateRouteParametres(window.location.pathname.substring(1), this.currentRoute),
                            this._updateQueryModel(),
                            null === (r = this.viewModel) || void 0 === r || null === (n = r.onHistoryChange) || void 0 === n || n.call(r, history.state, null, {
                                fromPopstate: !0
                            }, this.abortController.signal),
                            void window.dispatchEvent(new CustomEvent("spaTransition",{
                                detail: {
                                    isFinished: !0,
                                    dest: {
                                        name: t
                                    }
                                }
                            }));
                        this.targetRoute = t,
                        this._routerTransitionAsync(t)
                    } else
                        window.location.reload()
                }
                ),
                window.addEventListener("click", e=>{
                    const t = e.target.closest("a");
                    if (null != t && t.classList.contains("BDC_ReloadLink") || e.defaultPrevented || e.ctrlKey)
                        return !1;
                    null == t || e._preventRouterTransition || (t.hasAttribute("target") && "_blank" === t.getAttribute("target") ? this.$analitic.updateStatInfo(!0) : (this.$analitic.updateStatInfo(!1),
                    e.preventDefault(),
                    this.moveTo(t.href)))
                }
                )
            }
            ,
            _proto._routerTransitionAsync = async function(e, t=window.location, o=!1, i=!1) {
                window.scrollTo(0, 0),
                this.abortController.abort(),
                this.abortController = new AbortController;
                const r = this.abortController.signal;
                this.currentRoute = this.routesDictionary[e],
                wb.stat.sendPageView(),
                this.$analitic.sendEvent("pageview");
                try {
                    const {viewData: n, needStateUpdate: a, needRouteUpdate: s} = await this._loadRouteData(e, t, o, i, r);
                    return s && this._updateRouteData(e, n, r),
                    window.dispatchEvent(new CustomEvent("spaTransition",{
                        detail: {
                            isFinished: !0,
                            dest: this.currentRoute
                        }
                    })),
                    a
                } catch (t) {
                    if (t.isNotFound)
                        return this.moveTo404Async(),
                        !1;
                    if (!t.isCancelled && !t.isUnauthorize && null != t.message && "" != t.message)
                        return console.log(t.message),
                        this.moveTo500Async(t, {
                            method: "_routerTransitionAsync",
                            destRoute: e,
                            current: window.location.toString(),
                            initial: o,
                            forced: i
                        }),
                        !1;
                    throw t
                }
            }
            ,
            _proto._findRoute = function(e) {
                var t, o;
                const i = e.substring(1).split("/")
                  , r = e.substring(1);
                let n = null !== (t = null === (o = this.routes) || void 0 === o ? void 0 : o.filter(e=>null == e.pathSegments ? e.path == r : ("SpaCatalogEntrypoint" != e.name || ".aspx" != r.slice(-5)) && e.pathSegments.every((e,t)=>{
                    const o = e.parts[0];
                    return o.isParameter || o.content == i[t]
                }
                ))) && void 0 !== t ? t : [];
                if (n.length > 1) {
                    const e = e=>{
                        var t, o;
                        return null !== (t = null === (o = e.pathSegments) || void 0 === o ? void 0 : o.some(e=>e.parts.some(e=>e.isCatchAll))) && void 0 !== t && t
                    }
                    ;
                    n.sort((t,o)=>e(t) - e(o)),
                    n = n.filter(e=>"SpaCatalogEntrypoint" !== e.name)
                }
                return n[0]
            }
            ,
            _proto._initSSR = async function(e, t) {
                this.currentRoute = this.routesDictionary[t];
                const o = this.currentRoute.requiredModel ? this.$helper.loadJsAsync(this.currentRoute.requiredModel) : Promise.resolve()
                  , i = this._loadTemplateAsync(this.currentRoute.requiredTemplates.path, t);
                this._updateQueryModel(),
                this._updateRouteParametres(window.location.pathname.substring(1), this.routesDictionary[t]);
                try {
                    var r, n, a, s, l, u, d, c;
                    await Promise.all([i, o]);
                    const h = wb.spa.getViewModelByName(t)
                      , p = h ? new h(e,t) : Object.create(WbSpaModel.prototype, {});
                    p.fromSSR = !0;
                    const v = null !== (r = null === (n = this.currentRoute) || void 0 === n ? void 0 : n.targetContainer) && void 0 !== r ? r : 0
                      , m = this.appContainers.find(e=>e.containerId == v);
                    $.observable(m).setProperty({
                        viewModel: p
                    }),
                    $.observable(this).setProperty({
                        activeContainer: v
                    });
                    const w = new this.$helper.Deferred;
                    await (null === (a = (s = this.viewModel).onBeforeRender) || void 0 === a ? void 0 : a.call(s, e, w.promise)),
                    $.link(!0, "#app", this.viewModel),
                    await this.$helper.nextTick(),
                    null === (l = (u = this.viewModel).onAfterRender) || void 0 === l || l.call(u, {
                        data: e
                    }),
                    wb.stat.sendPageView();
                    const _ = null === (d = (c = this.viewModel).getScreenName) || void 0 === d ? void 0 : d.call(c);
                    _ && this.$analitic.sendEvent("Screen_V", {
                        name: _
                    })
                } catch (e) {
                    console.error(e.message)
                }
            }
            ,
            _proto._loadRouteData = async function(e, t, o, i, r) {
                var n, a, s;
                this._updateRouteParametres(t.pathname.substring(1), this.routesDictionary[e]),
                this._updateQueryModel(t);
                const l = this.prepareUrl(this.currentRoute);
                this.$menuLk.updateMenu(l, this.currentRoute.lkMenuOptions, this.userIsAuth, o);
                const u = null !== (n = null === (a = this.currentRoute) || void 0 === a ? void 0 : a.targetContainer) && void 0 !== n ? n : 0
                  , d = null === (s = this.appContainers.find(e=>e.containerId == u)) || void 0 === s ? void 0 : s.viewModel
                  , c = !i && null != d && d.__modelStatus__ != VIEW_MODEL_STATUSES.destroyed && d.__routeName__ == e && null != d.onHistoryChange;
                if (this.clientRenderInited || c)
                    if (c || o) {
                        if (c) {
                            var h, p, v;
                            return this.activeContainer == u || $.observable(this).setProperty({
                                showPreview: !0
                            }),
                            null === (h = this.viewModel) || void 0 === h || null === (p = h.onActiveViewChanged) || void 0 === p || p.call(h, !1),
                            await (null === (v = d.onHistoryChange) || void 0 === v ? void 0 : v.call(d, window.history.state, i, {}, r)),
                            r.aborted || $.observable(this).setProperty({
                                activeContainer: u,
                                showPreview: !1
                            }),
                            {
                                viewData: null,
                                needStateUpdate: !1,
                                needRouteUpdate: !1
                            }
                        }
                    } else
                        $.observable(this).setProperty({
                            showPreview: !0
                        });
                else
                    !o && (this.current = $.templates["preview_" + e] ? "preview_" + e : DEFAULT_PREVIEW);
                !this.currentRoute.metaTagsUrl && this.$seoHelper.update(l, null);
                const m = await this._loadRequiredResoursesAsync(e);
                return {
                    needRouteUpdate: !r.aborted,
                    ...m
                }
            }
            ,
            _proto._loadRequiredResoursesAsync = function(e, t=0) {
                this.loadingTemplate = e;
                const o = this.routesDictionary[e]
                  , i = null == $.templates[e] && o.requiredTemplates ? this._loadTemplateAsync(o.requiredTemplates.path, e) : Promise.resolve()
                  , r = this.loadRouteDataAsync(o.requiredData, t, !0)
                  , n = o.requiredCss ? Promise.all(o.requiredCss.map(this.$helper.loadCssAsync)) : Promise.resolve()
                  , a = o.requiredJs ? Promise.all(o.requiredJs.map(this.$helper.loadJsAsync)) : Promise.resolve()
                  , s = o.requiredModel ? this.$helper.loadJsAsync(o.requiredModel) : Promise.resolve();
                return Promise.all([r, a, n, s, i]).then(([e])=>Promise.resolve(e)).catch(o=>o.isNotFound || o.isUnauthorize || o.isCancelled || t >= 3 ? Promise.reject(o) : this._loadRequiredResoursesAsync(e, ++t))
            }
            ,
            _proto._updateRouteData = async function(e, t, o=this.abortController.signal) {
                var i, r, n, a, s, l, u;
                if (o.aborted)
                    return;
                if (e.indexOf("preview_") > -1)
                    return $.observable(this).setProperty({
                        showPreview: !0
                    });
                const d = wb.spa.getViewModelByName(e)
                  , c = d ? new d(t,e) : Object.assign(Object.create(WbSpaModel.prototype), null != t ? t : {})
                  , h = null !== (i = null === (r = this.currentRoute) || void 0 === r ? void 0 : r.targetContainer) && void 0 !== i ? i : 0
                  , p = c.onBeforeRender
                  , v = c.onAfterRender
                  , m = c.onBeforeUnrender;
                Object.defineProperties(c, {
                    __routeName__: {
                        value: e
                    },
                    __targetContainer__: {
                        value: h
                    },
                    __modelStatus__: {
                        value: VIEW_MODEL_STATUSES.prepearing,
                        writable: !0
                    },
                    routeTemplate: {
                        value: e
                    },
                    onBeforeRender: {
                        value: async function(e, t) {
                            o.aborted || (await (null == p ? void 0 : p.call(c, e, t)),
                            this.__modelStatus__ = VIEW_MODEL_STATUSES.readyToInstall)
                        }
                    },
                    onAfterRender: {
                        value: async function(e, t) {
                            o.aborted || (await (null == v ? void 0 : v.call(c, e, o, t)),
                            this.__modelStatus__ = VIEW_MODEL_STATUSES.installed)
                        }
                    },
                    onBeforeUnrender: {
                        value: async function(e) {
                            await (null == m ? void 0 : m.call(c, e)),
                            this.__modelStatus__ = VIEW_MODEL_STATUSES.destroyed
                        }
                    }
                });
                const w = null == this ? void 0 : this.viewModel;
                var _, f, y, R;
                null == w || w.__targetContainer__ != h && null != w.onHistoryChange ? null == this || null === (_ = this.viewModel) || void 0 === _ || null === (f = _.onActiveViewChanged) || void 0 === f || f.call(_, !1) : await (null == this || null === (y = this.viewModel) || void 0 === y || null === (R = y.onBeforeUnrender) || void 0 === R ? void 0 : R.call(y));
                if (o.aborted)
                    return;
                const g = new this.$helper.Deferred;
                await (null === (n = c.onBeforeRender) || void 0 === n ? void 0 : n.call(c, t, g.promise));
                let S = window._debug && performance.now();
                const b = this.appContainers.find(e=>e.containerId == h);
                (null === (a = b.viewModel) || void 0 === a ? void 0 : a.__modelStatus__) != VIEW_MODEL_STATUSES.destroyed && (null === (s = b.viewModel) || void 0 === s || s.onBeforeUnrender(t)),
                o.aborted || ($.observable(b).setProperty({
                    viewModel: c
                }),
                $.observable(this).setProperty({
                    showPreview: !1,
                    activeContainer: h
                })),
                this.clientRenderInited || this.initCSR(),
                S && console.log("[INITIAL MODEL RENDER]: ", performance.now() - S, e),
                await this.$helper.nextTick(),
                g.resolve(),
                null === (l = c.onAfterRender) || void 0 === l || l.call(c, t, o);
                const P = null === (u = c.getScreenName) || void 0 === u ? void 0 : u.call(c);
                P && this.$analitic.sendEvent("Screen_V", {
                    name: P
                })
            }
            ,
            _proto._updateRouteParametres = function(e, t) {
                if (null == t.routePathSegments)
                    return void (this.routeParameters = {});
                const o = e.split("/")
                  , i = t.routePathSegments.reduce((e,t,i)=>{
                    const r = t.parts.find(e=>e.isParameter);
                    return null != r && (r.isCatchAll ? e[r.name] = o.slice(i).join("/") : e[r.name] = o[i]),
                    e
                }
                , {});
                this.routeParameters = i
            }
            ,
            _proto._updateQueryModel = function(e) {
                this.queryParams = new URLSearchParams((null != e ? e : window.location).search)
            }
            ,
            _proto._loadTemplateAsync = function _loadTemplateAsync(path, routeName) {
                const tmplName = String.format(path, wb.settings.currentLocale, this.$helper.currentCulture)
                  , hash = this.tmplHashes[tmplName.split("/").pop()];
                return (window._debug ? this.$httpClient.fetchJSON(`${tmplName}?${hash}`) : this.$httpClient.fetchStaticV2(tmplName.replace(".json", `.${hash}.json`), void 0)).then(tmpl=>{
                    const {main: main, localization: localization, ...templates} = tmpl;
                    if (localization)
                        try {
                            Object.assign(this.$localziation, {
                                [routeName]: eval(localization)
                            })
                        } catch (e) {}
                    return $.templates({
                        [routeName]: main,
                        ...templates
                    }),
                    Promise.resolve()
                }
                ).catch(e=>Promise.reject(e))
            }
            ,
            _proto._hardReload = function() {
                return location.reload()
            }
            ,
            _createClass(Router, [{
                key: "appContainers",
                get: function() {
                    return APP_CONTAINERS
                }
            }, {
                key: "previewTemplate",
                get: function() {
                    return DEFAULT_PREVIEW
                }
            }, {
                key: "viewModel",
                get: function() {
                    var e;
                    return null === (e = this.appContainers.find(e=>e.containerId == this.activeContainer)) || void 0 === e ? void 0 : e.viewModel
                }
            }, {
                key: "urls",
                get: function() {
                    var e = {};
                    return this.currentRoute.childRoutes ? (this.currentRoute.childRoutes.forEach((t,o)=>{
                        var i = t.name.replace("Spa", "")
                          , r = t.path.split("{")[0];
                        e[i.charAt(0).toLowerCase() + i.slice(1)] = r
                    }
                    ),
                    e) : e
                }
            }]),
            Router
        }();
        module.exports = Router;

    }
    , {
        "./customHistory/customHistory": 40
    }],
    81: [function(require, module, exports) {
        "use strict";
        let BannersApi = function() {
            function e(e, t) {
                this.publicUrl = "https://banners-website.wildberries.ru/public/v1/banners",
                this.enums = e,
                this.helper = t
            }
            var t = e.prototype;
            return t.getBannersFromApi = async function(e) {
                var t;
                const n = null !== (t = e.appType) && void 0 !== t ? t : this._getAppType();
                let r = await this._getBannersFromApi(e.urlType, n, e.menuId, e.brandId);
                return (r = r.filter(e=>null != e).map(e=>this.helper.convertToBannerItem(e))).sort((e,t)=>{
                    var n, r;
                    return (null !== (n = e.placementOptions.sort) && void 0 !== n ? n : 0) - (null !== (r = t.placementOptions.sort) && void 0 !== r ? r : 0)
                }
                ),
                r
            }
            ,
            t._getBannersFromApi = async function(e, t, n, r) {
                var p, i, s;
                let[o,a] = await Promise.all([WbSpaModel.prototype.$user.getLocationData(), WbSpaModel.prototype.$user.getUserInfo()]);
                const l = WbSpaModel.prototype.$user.getBannersClusters()
                  , u = this._getDisplayType(a)
                  , c = this._getCountry()
                  , y = WbSpaModel.prototype.$helper.currentCulture
                  , h = {
                    urltype: e,
                    apptype: t,
                    displaytype: u,
                    longitude: o.longitude,
                    latitude: o.latitude,
                    country: c,
                    culture: y
                };
                null != l && l.length && (h.clusterids = l),
                n && (h.menuid = n),
                r && (h.brandId = r);
                const d = `${this.publicUrl}?${new URLSearchParams(h)}`;
                let m = await WbSpaModel.prototype.$httpClient.fetchBasicJSON(d, {}, {
                    timeout: 1e4,
                    nullOnError: !0
                });
                if (m && null !== (p = m) && void 0 !== p && p.length || (m = await this._getDefaultBannersFromStatic(e, t, n)),
                m && WbSpaModel.prototype.$apiSupport.webpImage && null !== (i = wb.global.settings) && void 0 !== i && null !== (i = i.switches) && void 0 !== i && i.bannerWebp)
                    for (const e of m)
                        e.Src && (e.Src = e.Src.replace(".jpg", ".webp")),
                        e.src && (e.src = e.src.replace(".jpg", ".webp"));
                return (null === (s = m) || void 0 === s ? void 0 : s.length) > 0 ? m : []
            }
            ,
            t._getDefaultBannersFromStatic = async function(e, t, n) {
                const r = this._getBannersTypeForStatic(e);
                if (!r)
                    return null;
                const p = n ? `banners-${r}-${wb.settings.currentLocale}-${n}-v1.json` : `banners-${r}-${wb.settings.currentLocale}-v1.json`;
                try {
                    var i, s, o;
                    let n = await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(p, 3e3);
                    return t == this.enums.appType.desktop ? n = null === (i = n) || void 0 === i ? void 0 : i.filter(e=>e.applicationType == this.enums.appType.desktop || 225 == e.applicationType || 227 == e.applicationType) : t == this.enums.appType.mobile && (n = null === (s = n) || void 0 === s ? void 0 : s.filter(e=>e.applicationType == this.enums.appType.mobile || 227 == e.applicationType)),
                    e == this.enums.urlType.promotion && t == this.enums.appType.desktop && (null === (o = n) || void 0 === o || o.forEach(e=>{
                        e.src = this.helper.createBannerPathByResolution(e.src, "c660x210")
                    }
                    )),
                    n
                } catch (e) {
                    return null
                }
            }
            ,
            t._getBannersTypeForStatic = function(e) {
                switch (e) {
                case this.enums.urlType.main:
                    return "main";
                case this.enums.urlType.promotion:
                    return "promo";
                case this.enums.urlType.cataloger:
                    return "catalog"
                }
            }
            ,
            t._getAppType = function() {
                return "d" == wb.settings.displayMode ? this.enums.appType.desktop : this.enums.appType.mobile
            }
            ,
            t._getDisplayType = function(e) {
                return e.isAuth ? this.enums.bannerDisplayType.forAuth : this.enums.bannerDisplayType.forNotAuth
            }
            ,
            t._getCountry = function() {
                var e;
                return 1 << (null !== (e = this.enums.country[wb.settings.currentLocale]) && void 0 !== e ? e : 0) - 1
            }
            ,
            e
        }();
        module.exports = BannersApi;

    }
    , {}],
    82: [function(require, module, exports) {
        "use strict";
        function _defineProperties(e, t) {
            for (var r = 0; r < t.length; r++) {
                var n = t[r];
                n.enumerable = n.enumerable || !1,
                n.configurable = !0,
                "value"in n && (n.writable = !0),
                Object.defineProperty(e, _toPropertyKey(n.key), n)
            }
        }
        function _createClass(e, t, r) {
            return t && _defineProperties(e.prototype, t),
            r && _defineProperties(e, r),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            e
        }
        function _toPropertyKey(e) {
            var t = _toPrimitive(e, "string");
            return "symbol" == typeof t ? t : String(t)
        }
        function _toPrimitive(e, t) {
            if ("object" != typeof e || !e)
                return e;
            var r = e[Symbol.toPrimitive];
            if (void 0 !== r) {
                var n = r.call(e, t || "default");
                if ("object" != typeof n)
                    return n;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === t ? String : Number)(e)
        }
        const BANNERS_HOME_CACHE_KEY = "home-banners-cache-new"
          , BANNERS_MENU_CACHE_KEY = "menu-banners-cache"
          , BANNERS_MAIN_CATALOG_CACHE_KEY = "main-catalog-banners-cache"
          , BANNERS_PROMOTIONS_CACHE_KEY = "promotions-banners-cache"
          , BANNERS_PROMOTIONS_CATALOG_CACHE_KEY = "promotions-catalog-banners-cache"
          , BANNERS_FOOTER_CACHE_KEY = "footer-banners-cache"
          , CACHE_TTL = 3e5;
        let BannersCache = function() {
            function e() {
                WbSpaModel.prototype.$eventBus.addEventListener("GeoUpdated", ()=>this._refreshCache()),
                this.cacheVers = 5
            }
            var t = e.prototype;
            return t.getCachedResults = async function(e, t, r, n) {
                const a = (await WbSpaModel.prototype.$user.getUserInfo()).uid
                  , o = this._getCacheKey(e);
                return o ? (n || (n = 1),
                await this._getCachedResults(o, t, a, r, n)) : Promise.resolve(null)
            }
            ,
            t._getCachedResults = async function(e, t, r, n, a) {
                const o = this._tryGetCachedData(e, r)
                  , s = this._getResultsFromCachedData(o, n, a);
                if (s)
                    return Promise.resolve(s);
                const c = await t();
                if (!c)
                    return Promise.resolve(null);
                if (this._checkBannersExist(c)) {
                    const t = this._toCacheResult(r, n, a, o, c);
                    localStorage.putObject(e, t)
                }
                return Promise.resolve(c)
            }
            ,
            t._tryGetCachedData = function(e, t) {
                const r = localStorage.getObject(e);
                return r && this.cacheVers == r.version && r.userId == t ? r : null
            }
            ,
            t._getResultsFromCachedData = function(e, t, r) {
                var n;
                const a = this._getDisplayName(t)
                  , o = null == e || null === (n = e[a]) || void 0 === n ? void 0 : n[r];
                return !o || Date.now() - o.updateTs > 3e5 ? null : o.data
            }
            ,
            t._toCacheResult = function(e, t, r, n, a) {
                return n || (n = {}),
                n.version = this.cacheVers,
                n.userId = e,
                n.desktop = this._getCleanedCachedData(n.desktop),
                n.mobile = this._getCleanedCachedData(n.mobile),
                n[this._getDisplayName(t)][r] = {
                    updateTs: Date.now(),
                    data: a
                },
                n
            }
            ,
            t._checkBannersExist = function(e) {
                let t = !1;
                if (Array.isArray(e))
                    return !0;
                for (let r in e) {
                    const n = e[r];
                    if (n && (Array.isArray(n) ? t = n.length > 0 : "object" == typeof n && (t = this._checkBannersExist(n)),
                    t))
                        break
                }
                return t
            }
            ,
            t._getCleanedCachedData = function(e) {
                const t = {};
                for (let r in null != e ? e : {})
                    !r || Date.now() - e[r].updateTs > 3e5 || (t[r] = e[r]);
                return t
            }
            ,
            t._getDisplayName = function(e) {
                return e ? "mobile" : "desktop"
            }
            ,
            t._getCacheKey = function(e) {
                switch (e) {
                case this.bannersCacheType.main:
                    return BANNERS_HOME_CACHE_KEY;
                case this.bannersCacheType.menu:
                    return "menu-banners-cache";
                case this.bannersCacheType.catalog:
                    return "main-catalog-banners-cache";
                case this.bannersCacheType.promotion:
                    return "promotions-banners-cache";
                case this.bannersCacheType.promotionCatalog:
                    return "promotions-catalog-banners-cache";
                case this.bannersCacheType.footer:
                    return "footer-banners-cache";
                default:
                    return null
                }
            }
            ,
            t._refreshCache = function() {
                [BANNERS_HOME_CACHE_KEY, "menu-banners-cache", "main-catalog-banners-cache", "promotions-banners-cache", "footer-banners-cache"].forEach(e=>{
                    localStorage.removeItem(e)
                }
                )
            }
            ,
            _createClass(e, [{
                key: "bannersCacheType",
                get: function() {
                    return {
                        main: 1,
                        menu: 2,
                        catalog: 3,
                        promotion: 4,
                        promotionCatalog: 5,
                        footer: 6
                    }
                }
            }]),
            e
        }();
        module.exports = BannersCache;

    }
    , {}],
    83: [function(require, module, exports) {
        "use strict";
        let BannersEnums = function() {
            function t() {
                this.appType = this._getAppType(),
                this.locationType = this._getLocationType(),
                this.urlType = this._getUrlType(),
                this.bannerDisplayType = this._getBannerDisplayType(),
                this.country = this._getCountry(),
                this.ownerType = this._getOwnerType()
            }
            var e = t.prototype;
            return e._getAppType = function() {
                return {
                    desktop: 1,
                    mobile: 2,
                    desktopAndMobile: 3
                }
            }
            ,
            e._getLocationType = function() {
                return {
                    main: 42,
                    small: 38,
                    strip: 39,
                    _352x428: 60,
                    _305x245: 57,
                    _770x245: 59,
                    big: 41,
                    vertical: 36,
                    promo_strip: 61,
                    _1440x168: 62,
                    _215x168: 63,
                    _705x394: 64,
                    _460x394: 65,
                    _364x668: 66,
                    footerSocial: 80
                }
            }
            ,
            e._getUrlType = function() {
                return {
                    main: 1024,
                    default: 0,
                    promotion: 16384,
                    cataloger: 1 << 22,
                    promotionCatalog: 62
                }
            }
            ,
            e._getBannerDisplayType = function() {
                return {
                    forAuth: 2,
                    forNotAuth: 3
                }
            }
            ,
            e._getCountry = function() {
                return {
                    ru: 1,
                    by: 2,
                    kz: 3,
                    am: 4,
                    kg: 5,
                    uz: 13
                }
            }
            ,
            e._getOwnerType = function() {
                return {
                    marketing: 0,
                    supplier: 1
                }
            }
            ,
            t
        }();
        module.exports = BannersEnums;

    }
    , {}],
    84: [function(require, module, exports) {
        "use strict";
        let BannerItem = function() {
            function t(t) {
                var e, n, i, o, r, l, s, a, p, u, d, h, c, v, f, m, S, T, g, y, w;
                this.id = null !== (e = t.UID) && void 0 !== e ? e : t.uID,
                this.href = null !== (n = t.Href) && void 0 !== n ? n : t.href,
                this.applicationType = null !== (i = t.ApplicationType) && void 0 !== i ? i : t.applicationType,
                this.locationType = null !== (o = t.LocationType) && void 0 !== o ? o : t.locationType,
                this.placementOptions = {
                    sort: null !== (r = null === (l = t.PlacementOptions) || void 0 === l ? void 0 : l.Sort) && void 0 !== r ? r : null === (s = t.placementOptions) || void 0 === s ? void 0 : s.sort,
                    menuID: null !== (a = null === (p = t.PlacementOptions) || void 0 === p ? void 0 : p.MenuID) && void 0 !== a ? a : null === (u = t.placementOptions) || void 0 === u ? void 0 : u.menuID
                },
                this.src = null !== (d = t.Src) && void 0 !== d ? d : t.src,
                this.alt = null !== (h = t.Alt) && void 0 !== h ? h : t.alt,
                this.noFollow = null !== (c = t.NoFollow) && void 0 !== c ? c : t.noFollow,
                this.noIndex = null !== (v = t.NoIndex) && void 0 !== v ? v : t.noIndex,
                this.target = null !== (f = t.Target) && void 0 !== f ? f : t.target,
                this.ordBannerMark = null !== (m = t.OrdBannerMark) && void 0 !== m ? m : t.ordBannerMark;
                const B = null !== (S = t.AdditionalSections) && void 0 !== S ? S : t.additionalSections;
                this.bannerSelections = null !== (T = null == B ? void 0 : B.map(t=>new BannerSection(t))) && void 0 !== T ? T : [],
                this.promoText = null !== (g = t.PromoText) && void 0 !== g ? g : t.promoText,
                this.promoTextLines = null !== (y = t.PromoTextLines) && void 0 !== y ? y : t.promoTextLines,
                this.owner = null !== (w = t.Provider) && void 0 !== w ? w : t.provider,
                this.statisticFields = new BannerStatisticFields(t),
                this.absoluteUrl = this.getAbsoluteUrl(),
                this.link = this.getLink()
            }
            var e = t.prototype;
            return e.getLink = function() {
                const t = 0 == this.href.indexOf("https:")
                  , e = t ? new URL(this.href) : new URL(this.href,window.location);
                return e.searchParams.append("bid", this.id),
                t ? e.href : `${e.pathname}${e.search}`
            }
            ,
            e.getAbsoluteUrl = function() {
                return -1 !== this.src.toLowerCase().indexOf("wildberries") ? this.src : wb.helpers.url.urlToExternalStatic(`/vol1/crm-bnrs${this.src}`)
            }
            ,
            t
        }()
          , BannerSection = function(t) {
            var e, n, i, o, r;
            this.href = null !== (e = t.Href) && void 0 !== e ? e : t.href,
            this.relativeXPos = null !== (n = t.RelativeXPos) && void 0 !== n ? n : t.relativeXPos,
            this.relativeYPos = null !== (i = t.RelativeYPos) && void 0 !== i ? i : t.relativeYPos,
            this.relativeHeight = null !== (o = t.RelativeHeight) && void 0 !== o ? o : t.relativeHeight,
            this.relativeWidth = null !== (r = t.RelativeWidth) && void 0 !== r ? r : t.relativeWidth
        }
          , BannerStatisticFields = function(t) {
            var e, n, i, o, r, l;
            this.urlType = null !== (e = t.URLType) && void 0 !== e ? e : t.uRLType,
            this.displayType = null !== (n = t.DisplayType) && void 0 !== n ? n : t.displayType,
            this.locationType = null !== (i = t.LocationType) && void 0 !== i ? i : t.locationType,
            this.sort = null !== (o = null === (r = t.PlacementOptions) || void 0 === r ? void 0 : r.Sort) && void 0 !== o ? o : null === (l = t.placementOptions) || void 0 === l ? void 0 : l.sort
        }
          , BannersHelper = function() {
            function t(t) {
                this.enums = t,
                this.fillingGapsSortStart = 300
            }
            var e = t.prototype;
            return e.convertToBannerItem = function(t) {
                return new BannerItem(t)
            }
            ,
            e.createBannerPathByResolution = function(t, e) {
                const n = e
                  , i = t.split("/").slice(-1);
                return `/poster/${WbSpaModel.prototype.$helper.currentCulture}/action2/${n}/${i}`
            }
            ,
            e.dividePromotionBanners = function(t) {
                const e = this._getBannersSoldToSuppliers(t, 100, 20)
                  , n = null == t ? void 0 : t.filter(t=>t.owner == this.enums.ownerType.marketing)
                  , i = n.filter(t=>t.placementOptions.sort < 100);
                let {leftBanners: o, rightBanners: r} = this._createTwoSidesWithTheSameSize(n, i, e);
                return {
                    leftBanners: o = o.map(t=>t),
                    rightBanners: r = r.map(t=>t)
                }
            }
            ,
            e.getBannersBySort = function(t, e) {
                const n = t.filter(t=>t.owner == this.enums.ownerType.marketing && t.placementOptions.sort > e.onlyMarketingSortStart && t.placementOptions.sort < e.onlyMarketingSortEnd)
                  , i = this._getBannersSoldToSuppliers(t, e.suppliersSortStart, e.suppliersSortCount);
                return n.concat(i)
            }
            ,
            e._getBannersSoldToSuppliers = function(t, e, n) {
                if (!WbSpaModel.prototype.$helper.isNumber(e) || !n)
                    return [];
                const i = t.filter(t=>t.owner == this.enums.ownerType.supplier)
                  , o = t.filter(t=>t.owner == this.enums.ownerType.marketing && t.placementOptions.sort > 200 && t.placementOptions.sort < this.fillingGapsSortStart).reduce((t,e)=>{
                    const n = e.placementOptions.sort;
                    return t.set(n, [...t.get(n) || [], e])
                }
                , new Map)
                  , r = i.reduce((t,e)=>t.add(e.placementOptions.sort), new Set);
                for (let t = 1; t <= n; t++) {
                    const n = e + t;
                    if (!r.has(n)) {
                        const e = o.get(200 + t);
                        if ((null == e ? void 0 : e.length) > 0) {
                            const t = e[0];
                            t.placementOptions.sort = n,
                            i.push(t)
                        }
                    }
                }
                return i
            }
            ,
            e._createTwoSidesWithTheSameSize = function(t, e, n) {
                const i = t.filter(t=>t.placementOptions.sort >= this.fillingGapsSortStart);
                if (0 == i.length)
                    return n;
                var o = Math.max(e.length, n.length);
                return this._fillGapsIfNeeded(e, o, i),
                this._fillGapsIfNeeded(n, o, i),
                {
                    leftBanners: e,
                    rightBanners: n
                }
            }
            ,
            e._fillGapsIfNeeded = function(t, e, n) {
                let i = e - t.length;
                for (; i > 0 && n.length > 0; ) {
                    {
                        const e = n[0];
                        n.splice(0, 1),
                        t.push(e)
                    }
                    i--
                }
                t.sort((t,e)=>t.placementOptions.sort - e.placementOptions.sort)
            }
            ,
            t
        }();
        module.exports = BannersHelper;

    }
    , {}],
    85: [function(require, module, exports) {
        "use strict";
        const BannersApi = require("./bannersApi");
        let BannersApiParams = function(n, e, t, s) {
            this.urlType = n,
            this.menuId = t,
            this.brandId = s,
            this.appType = e
        }
          , BannersMiddleService = function() {
            function n(n, e) {
                this.enums = n,
                this.helper = e,
                this.api = new BannersApi(this.enums,this.helper)
            }
            var e = n.prototype;
            return e.getBannersForHomePageAsync = async function() {
                const n = await this.api.getBannersFromApi(new BannersApiParams(this.enums.urlType.main,this.enums.appType.desktopAndMobile))
                  , e = [this.enums.locationType._215x168, this.enums.locationType._705x394, this.enums.locationType._460x394, this.enums.locationType._364x668]
                  , t = []
                  , s = [];
                let a = [];
                return null == n || n.forEach(n=>{
                    n.locationType == this.enums.locationType._1440x168 ? n.applicationType == this.enums.appType.desktop ? t.push(n) : n.applicationType == this.enums.appType.mobile && a.push(n) : -1 != e.indexOf(n.locationType) && s.push(n)
                }
                ),
                a.length || (a = t),
                {
                    mainBanners: t,
                    mainMobileBanners: a,
                    contentBanners: s
                }
            }
            ,
            e.getBannersForFooterAsync = async function() {
                const n = await this.api.getBannersFromApi(new BannersApiParams(this.enums.urlType.main,this.enums.appType.desktopAndMobile))
                  , e = []
                  , t = [];
                return null == n || n.forEach(n=>{
                    n.locationType === this.enums.locationType.footerSocial && (n.applicationType == this.enums.appType.desktop ? e.push(n) : n.applicationType == this.enums.appType.mobile && t.push(n))
                }
                ),
                {
                    desktopBanners: e,
                    mobileBanners: t.length ? t : e
                }
            }
            ,
            e.getPromoBanners = function() {
                return this._getPromotionBanners()
            }
            ,
            e._getPromotionBanners = async function() {
                const n = (await this.api.getBannersFromApi(new BannersApiParams(this.enums.urlType.promotion,this.enums.appType.desktop))).filter(n=>n.locationType == this.enums.locationType._770x245);
                return this.helper.dividePromotionBanners(n)
            }
            ,
            e.getPromoCatalogBanners = async function(n, e=!1) {
                return (await this.api.getBannersFromApi(new BannersApiParams(this.enums.urlType.promotionCatalog,e ? this.enums.appType.mobile : this.enums.appType.desktop,n))).filter(n=>n.locationType === this.enums.locationType.promo_strip)
            }
            ,
            e.getTopMenuBanners = async function() {
                const n = await this.api.getBannersFromApi(new BannersApiParams(this.enums.urlType.default,this.enums.appType.desktop))
                  , e = this._menuSingleBanners(n)
                  , t = await this._getMenuPromotionBanners()
                  , s = e;
                return (null == t ? void 0 : t.length) > 0 && (s[2192] = t),
                s
            }
            ,
            e._menuSingleBanners = function(n) {
                return n.reduce((n,e)=>{
                    var t;
                    if (e.locationType != this.enums.locationType._352x428)
                        return n;
                    const s = null !== (t = e.placementOptions.menuID) && void 0 !== t ? t : 0;
                    return (!n.hasOwnProperty(s) || n[s][0].placementOptions.sort > e.placementOptions.sort) && (n[s] = [e]),
                    n
                }
                , {})
            }
            ,
            e._getMenuPromotionBanners = async function() {
                const n = await this._getPromotionBanners()
                  , e = n.leftBanners.slice(0, 5).concat(n.rightBanners.slice(0, 5));
                return null == e || e.forEach(n=>{
                    n.src = this.helper.createBannerPathByResolution(n.src, "t305x245q"),
                    n.absoluteUrl = n.getAbsoluteUrl()
                }
                ),
                e
            }
            ,
            e.getCatalogBanners = async function(n, e, t=!1) {
                this.menuIdEnum || (this.menuIdEnum = e);
                const s = await this.api.getBannersFromApi(new BannersApiParams(this.enums.urlType.cataloger,this.enums.appType.desktop,n))
                  , a = this._getBannersForCatalog(s, n);
                let r = a.firstCarousel
                  , o = a.secondCarousel;
                if (t) {
                    var i, p;
                    const e = await this.api.getBannersFromApi(new BannersApiParams(this.enums.urlType.cataloger,this.enums.appType.mobile,n))
                      , t = this._getCatalogBigBanners(e);
                    r = (null === (i = t.firstCarousel) || void 0 === i ? void 0 : i.length) > 0 ? t.firstCarousel : a.firstCarousel,
                    o = (null === (p = t.secondCarousel) || void 0 === p ? void 0 : p.length) > 0 ? t.secondCarousel : a.secondCarousel
                }
                return {
                    mainBannersFirst: r,
                    mainBannersSecond: o,
                    verticalBanners: a.verticalBanners,
                    smallBanners: a.commonBanners,
                    seasonBanners: a.seasonBanners
                }
            }
            ,
            e._getBannersForCatalog = function(n, e) {
                if (!n)
                    return [];
                const {firstCarousel: t, secondCarousel: s} = this._getCatalogBigBanners(n)
                  , a = this._getCatalogVerticalBanners(n)
                  , r = n.filter(n=>n.locationType == this.enums.locationType.small);
                return {
                    firstCarousel: t,
                    secondCarousel: s,
                    verticalBanners: a,
                    commonBanners: this._getCommonBanners(r, e),
                    seasonBanners: this._getSeasonBanners(r, e)
                }
            }
            ,
            e._getCommonBanners = function(n, e) {
                const t = this._getCatalogBannersSortParams(e, !0);
                return this.helper.getBannersBySort(n, t).reduce((n,e)=>{
                    const t = e.placementOptions.sort;
                    return n[t] = [...n[t] || [], e],
                    n
                }
                , {})
            }
            ,
            e._getSeasonBanners = function(n, e) {
                const t = this._getCatalogBannersSortParams(e);
                return this.helper.getBannersBySort(n, t)
            }
            ,
            e._getCatalogVerticalBanners = function(n) {
                return n.filter(n=>n.locationType == this.enums.locationType.vertical).reduce((n,e)=>{
                    const t = e.placementOptions.sort;
                    return n[t] = [...n[t] || [], e],
                    n
                }
                , {})
            }
            ,
            e._getCatalogBigBanners = function(n) {
                const e = n.filter(n=>n.locationType == this.enums.locationType.big)
                  , t = []
                  , s = [];
                return e.forEach(n=>{
                    n.placementOptions.sort < 100 && t.push(n),
                    n.placementOptions.sort > 100 && n.placementOptions.sort < 110 && s.push(n)
                }
                ),
                {
                    firstCarousel: t,
                    secondCarousel: s
                }
            }
            ,
            e._getCatalogBannersSortParams = function(n, e) {
                const t = {
                    onlyMarketingSortStart: null,
                    onlyMarketingSortEnd: null,
                    suppliersSortStart: null,
                    suppliersSortCount: null
                }
                  , s = [this.menuIdEnum.sport, this.menuIdEnum.monocity];
                return e ? -1 != s.indexOf(n) ? (t.suppliersSortStart = 0,
                t.suppliersSortCount = 3) : (t.onlyMarketingSortStart = 0,
                t.onlyMarketingSortEnd = 100,
                t.suppliersSortStart = 100,
                t.suppliersSortCount = 3) : (t.onlyMarketingSortStart = 50,
                t.onlyMarketingSortEnd = 99),
                t
            }
            ,
            n
        }();
        module.exports = BannersMiddleService;

    }
    , {
        "./bannersApi": 81
    }],
    86: [function(require, module, exports) {
        "use strict";
        const MiddleService = require("./bannersMiddleService")
          , BannersEnums = require("./bannersEnums")
          , BannersHelper = require("./bannersHelper")
          , BannersCache = require("./bannersCache")
          , bannersEnums = new BannersEnums
          , bannersHelper = new BannersHelper(bannersEnums);
        let BannersService = function() {
            function e() {
                this.service = new MiddleService(bannersEnums,bannersHelper),
                this.cache = new BannersCache
            }
            var n = e.prototype;
            return n.getBannersForHomePageAsync = async function() {
                return await this.cache.getCachedResults(this.cache.bannersCacheType.main, ()=>this.service.getBannersForHomePageAsync())
            }
            ,
            n.getBannersForFooterAsync = async function() {
                return await this.cache.getCachedResults(this.cache.bannersCacheType.footer, ()=>this.service.getBannersForFooterAsync())
            }
            ,
            n.getMenuBanners = async function() {
                return await this.cache.getCachedResults(this.cache.bannersCacheType.menu, ()=>this.service.getTopMenuBanners())
            }
            ,
            n.getCatalogBanners = async function(e, n) {
                this.menuIdEnum || (this.menuIdEnum = n);
                const s = "m" == wb.settings.displayMode;
                return await this.cache.getCachedResults(this.cache.bannersCacheType.catalog, ()=>this.service.getCatalogBanners(e, this.menuIdEnum, s), s, e)
            }
            ,
            n.getPromoBanners = async function() {
                return await this.cache.getCachedResults(this.cache.bannersCacheType.promotion, ()=>this.service.getPromoBanners())
            }
            ,
            n.getPromoCatalogBanners = async function(e) {
                const n = "m" == wb.settings.displayMode;
                return await this.cache.getCachedResults(this.cache.bannersCacheType.promotionCatalog, ()=>this.service.getPromoCatalogBanners(e, n), n, e)
            }
            ,
            e
        }();
        module.exports = BannersService;

    }
    , {
        "./bannersCache": 82,
        "./bannersEnums": 83,
        "./bannersHelper": 84,
        "./bannersMiddleService": 85
    }],
    87: [function(require, module, exports) {
        "use strict";
        let BasketItemViewModel = function() {
            function t() {
                this.maxQuantity = 10,
                this.canBeOrdered = !0,
                this.includeInOrder = !0
            }
            return t.fromWbBasketProduct = function(e) {
                const i = new t
                  , o = +e.quantity;
                i.characteristicId = i.id = +e.chrt_id,
                i.quantity = o > 0 ? o : 1,
                i.cod1S = e.cod_1s;
                try {
                    i.meta = e.meta_data ? JSON.parse(e.meta_data) : null
                } catch (t) {}
                return i.targetUrl = e.target_url,
                i.isDeleted = e.is_deleted,
                i.timestamp = e.client_ts,
                i
            }
            ,
            t.fromWbxBasketProduct = function(e) {
                const i = new t
                  , o = +e.count;
                return i.characteristicId = i.id = +e.product_option_id,
                i.quantity = o > 0 ? o : 1,
                i.cod1S = e.product_id,
                i.targetUrl = e.target_url,
                i.timestamp = e.added_timestamp,
                i
            }
            ,
            t.fromOldBasket = function(e) {
                const i = new t
                  , o = +e.quantity;
                return i.characteristicId = i.id = +e.chrtId,
                i.quantity = o > 0 ? o : 1,
                i.cod1S = e.cod1S,
                i.targetUrl = e.targetUrl,
                i.timestamp = Date.now() / 1e3 | 0,
                i
            }
            ,
            t.fromCardModel = function(e, i, o) {
                const a = new t
                  , n = +e.quantity
                  , s = WbSpaModel.prototype.$analitic.analiticsInfoToListName({
                    l: "AAA",
                    lw: "IT",
                    ...e
                });
                if (a.characteristicId = a.id = +e.characteristicId,
                a.quantity = n > 0 ? n : 1,
                a.maxQuantity = 10,
                a.cod1S = e.cod1S,
                a.targetUrl = `EX|${e.iid || "1"}|${s}`,
                a.priceWithCoupon = a.priceWithCouponAndDiscount = a.priceWithCouponAndSpp = a.priceWithSale = a.price = e.priceWithCouponAndDiscount,
                a.subjectId = e.subjectId,
                a.subjectParentId = e.subjectParentId,
                a.reviewRating = e.reviewRating,
                a.feedbacks = e.feedbacks || e.commentsCount,
                a.timestamp = Date.now() / 1e3 | 0,
                i) {
                    var r;
                    a.brandName = i.brand,
                    a.goodsName = i.name,
                    a.colorName = i.colorName || i.color,
                    a.promos = i.promotions,
                    a.isUnrefusable = i.isUnrefusable,
                    a.isPrepaid = i.isPrepaid,
                    a.isUnreturnable = i.isUnreturnable,
                    a.isVerificationReturn = i.isVerificationReturn,
                    a.logisticsCost = i.logisticsCost,
                    a.payloadV2 = i.payloadV2,
                    a.whDtype = i.dtype,
                    a.catalogReturnCost = i.returnCost,
                    a.saleConditions = i.saleConditions,
                    a.feedbacks && (a.feedbacks = i.feedbacks),
                    a.priceWithSale = i.salePrice,
                    a.sale = i.sale;
                    const t = null === (r = i.sizes) || void 0 === r ? void 0 : r.find(t=>t.ch === a.id);
                    t && (a.sizeName = t.nm,
                    a.stocks = t.stocks,
                    a.deliveryHours = t.deliveryHours,
                    a.payloadV2 = t.payloadV2,
                    a.whDtype = t.dtype,
                    a.catalogReturnCost = t.returnCost,
                    a.logisticsCost = t.logisticsCost,
                    a.saleConditions = t.saleConditions,
                    t.salePrice && t.salePrice != a.priceWithCouponAndDiscount && (a.priceWithCoupon = a.priceWithCouponAndDiscount = a.priceWithCouponAndSpp = a.priceWithSale = a.price = t.salePrice),
                    wb.xnm.expandSaleConditions(a, t))
                }
                return o && (a.stocks = o),
                a.stocks && (a.maxQuantity = a.stocks.sumBy(t=>t.qty)),
                a.canBeOrdered = a.maxQuantity > 0,
                a
            }
            ,
            t.fromBasketInputExtended = function(e) {
                const i = t.fromCardModel(e, null, e.stocks);
                return i.price = e.price,
                i.colorName = e.colorName,
                i.goodsName = e.goodsName,
                i.sizeName = e.sizeName,
                i
            }
            ,
            t.enrichCatalogGood = function(t, e={}) {
                var i, o, a, n, s, r;
                if (!t)
                    return;
                const c = null === (i = e.sizes) || void 0 === i ? void 0 : i.find(e=>e.optionId === t.characteristicId)
                  , d = null !== (o = null == c || null === (a = c.stocks) || void 0 === a ? void 0 : a.some(t=>t.qty > 0)) && void 0 !== o && o
                  , l = null !== (n = null == c ? void 0 : c.price) && void 0 !== n ? n : e.price;
                return t.brandName = e.brand,
                t.goodsName = e.name,
                t.colorName = null === (s = e.colors) || void 0 === s || null === (s = s[0]) || void 0 === s ? void 0 : s.name,
                t.canBeOrdered = d,
                t.price = d ? l.basic / 100 : 0,
                t.priceWithSale = d ? l.total / 100 : 0,
                t.priceWithCoupon = d ? l.basic / 100 : 0,
                t.priceWithCouponAndDiscount = l.total / 100,
                t.sale = d ? l.sale : 0,
                t.totalSale = d ? l.sale : 0,
                t.salePrice = d ? l.total / 100 : 0,
                t.sizeName = null !== (r = null == c ? void 0 : c.origName) && void 0 !== r ? r : "",
                t.stocks = null == c ? void 0 : c.stocks,
                t.stocks && (t.maxQuantity = t.stocks.sumBy(t=>t.qty)),
                t.subjectId = e.subjectId,
                t.subjectParentId = e.subjectParentId,
                t.volume = e.volume,
                t.reviewRating = e.reviewRating,
                t.feedbacks = e.feedbacks || e.commentsCount,
                t.promos = e.promotions,
                t.isUnrefusable = e.isUnrefusable,
                t.isPrepaid = e.isPrepaid,
                t.isUnreturnable = e.isUnreturnable,
                t.isVerificationReturn = e.isVerificationReturn,
                t.priceWithCouponAndSpp = t.priceWithCouponAndDiscount,
                t.catalogReturnCost = l.return,
                t.logisticsCost = l.logistics,
                t.priceBasic = l.basic,
                t.priceTotal = l.total,
                t.whDtype = null == c ? void 0 : c.dtype,
                t.payloadV2 = null == c ? void 0 : c.payload,
                t.saleConditions = null == c ? void 0 : c.saleConditions,
                t
            }
            ,
            t.enrichStaticGood = function(t, e={}) {
                if (t)
                    return t.goodsName = e.n || t.goodsName || "Название не указано",
                    t.colorName = e.c || t.colorName,
                    t
            }
            ,
            t
        }();
        module.exports = BasketItemViewModel;

    }
    , {}],
    88: [function(require, module, exports) {
        "use strict";
        let BasketVM = function() {
            function t(t, a) {
                this.settings = {},
                this.paymentTypes = [t ? {
                    userGrade: 0,
                    bankCards: [{
                        id: "_newcardid",
                        name: "Привязать карту",
                        createNew: !0,
                        system: "bindnew"
                    }],
                    isOnline: !0,
                    isCreditCard: !0,
                    codeLower: "crd",
                    name: "Оплата картой",
                    id: "63",
                    available: !0
                } : {
                    isOnline: !0,
                    isCreditCard: !0,
                    codeLower: "crd",
                    name: "Оплата картой",
                    id: "63",
                    available: !0
                }],
                this.deliveryWay = "self",
                this.basketItems = null != a ? a : []
            }
            return t.calc = function(t) {
                return t.basketItems.forEach(t=>{
                    t.stocks && (t.maxQuantity = t.stocks.sumBy(t=>t.qty)),
                    t.maxQuantity > 0 && t.maxQuantity < t.quantity ? t.partQuantity = t.maxQuantity : t.partQuantity = null,
                    t._qnt = t.partQuantity || t.quantity
                }
                ),
                t.totalQuantity = t.basketItems.sumBy(t=>t._qnt),
                t
            }
            ,
            t
        }();
        module.exports = BasketVM;

    }
    , {}],
    89: [function(require, module, exports) {
        "use strict";
        function _defineProperties(t, e) {
            for (var s = 0; s < e.length; s++) {
                var r = e[s];
                r.enumerable = r.enumerable || !1,
                r.configurable = !0,
                "value"in r && (r.writable = !0),
                Object.defineProperty(t, _toPropertyKey(r.key), r)
            }
        }
        function _createClass(t, e, s) {
            return e && _defineProperties(t.prototype, e),
            s && _defineProperties(t, s),
            Object.defineProperty(t, "prototype", {
                writable: !1
            }),
            t
        }
        function _toPropertyKey(t) {
            var e = _toPrimitive(t, "string");
            return "symbol" == typeof e ? e : String(e)
        }
        function _toPrimitive(t, e) {
            if ("object" != typeof t || !t)
                return t;
            var s = t[Symbol.toPrimitive];
            if (void 0 !== s) {
                var r = s.call(t, e || "default");
                if ("object" != typeof r)
                    return r;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === e ? String : Number)(t)
        }
        const BasketItemViewModel = require("./local/basketItemViewModel")
          , BasketVM = require("./local/basketViewModel")
          , MAX_ITEMS = 256;
        let LocalBasket = function() {
            function t(t, e, s) {
                this._isAuth = t,
                this.sessionService = e,
                this.$eventBus = s
            }
            var e = t.prototype;
            return e.migrate = function() {
                if (localStorage.hasItem("_basket")) {
                    const t = this._getGuestBasket();
                    return this.addManyItems(t.basketItems),
                    this._detGuestBasket(),
                    t.basketItems
                }
                return []
            }
            ,
            e.addManyItems = function(t) {
                if (!t.length)
                    return {
                        isSuccess: !1,
                        error: "[basket] Неизвестная ошибка"
                    };
                const e = this._syncFrom();
                if (e.totalQuantity + t.length > 256)
                    return {
                        isSuccess: !1,
                        error: String.format("Вы не можете добавить в корзину больше {0}", $.views.converters.pluralize(256, "{0} товар", "{0} товара", "{0} товаров"))
                    };
                let s = !0;
                for (let r = 0; r < t.length; r++) {
                    const i = e.basketItems.findIndex(e=>e.characteristicId === t[r].characteristicId);
                    -1 === i ? (s = !1,
                    t[r].timestamp <= this.lastTs && (t[r].timestamp = this.lastTs + 1),
                    e.basketItems.unshift(t[r])) : e.basketItems[i].timestamp > 0 && (t[r].timestamp = e.basketItems[i].timestamp,
                    t[r].quantity = e.basketItems[i].quantity)
                }
                return this._syncTo(),
                {
                    isExist: s,
                    isSuccess: !0,
                    xnmDictTask: this._enrichProducts(e.basketItems.map(t=>t.cod1S))
                }
            }
            ,
            e.clearItems = function(t) {
                if ((null == t ? void 0 : t.length) > 0) {
                    const e = this._syncFrom();
                    e.basketItems = e.basketItems.filter(function(e) {
                        return -1 === t.indexOf(e.characteristicId)
                    }),
                    this._syncTo()
                }
            }
            ,
            e.add = function(t) {
                const e = this._syncFrom();
                if (e.totalQuantity + 1 > 256)
                    return {
                        isSuccess: !1,
                        error: String.format("Вы не можете добавить в корзину больше {0}", $.views.converters.pluralize(256, "{0} товар", "{0} товара", "{0} товаров"))
                    };
                const s = e.basketItems.find(e=>e.characteristicId === t.characteristicId);
                return s ? s.timestamp > 0 && (t.timestamp = s.timestamp,
                t.quantity = s.quantity) : (t.timestamp <= this.lastTs && (t.timestamp = this.lastTs + 1),
                e.basketItems.unshift(t)),
                this._syncTo(),
                {
                    isExist: !!s,
                    isSuccess: !0,
                    xnmDictTask: this._enrichProducts(e.basketItems.map(t=>t.cod1S))
                }
            }
            ,
            e.refresh = function(t, e) {
                var s, r, i, n;
                const a = this._syncFrom();
                if ("remove" === e) {
                    var o;
                    const e = (null === (o = t.chrtIds) || void 0 === o ? void 0 : o.length) > 0 ? t.chrtIds[0] : t.chrtId;
                    a.basketItems = a.basketItems.filter(function(t) {
                        return t.characteristicId !== e
                    })
                } else if ("recalc" === e && t.quantity > 0) {
                    const e = a.basketItems.find(e=>e.characteristicId === t.chrtId);
                    e && (e.quantity = t.quantity)
                }
                t.isBuyItNowMode || a.basketItems.forEach(e=>{
                    var s;
                    e.includeInOrder = !(null !== (s = t.excludeFromOrder) && void 0 !== s && s.length) || -1 === t.excludeFromOrder.indexOf(e.characteristicId)
                }
                ),
                a.deliveryWay = t.deliveryWay;
                let c = WbSpaModel.prototype.$services.userAddressService.get(t.addressId, t.deliveryWay);
                var d;
                (c && (null === (s = a.deliveryPoint) || void 0 === s ? void 0 : s.addressId) !== c.addressId && (a.deliveryPoint = c,
                a.deliveryPriceModel = null),
                t.paymentTypeId && t.paymentTypeId !== (null === (r = a.paymentType) || void 0 === r ? void 0 : r.id) && (a.paymentType = a.paymentTypes.find(e=>e.id === t.paymentTypeId && e.available)),
                null !== (i = a.paymentType) && void 0 !== i && i.isCreditCard && t.bankCardId && t.bankCardId !== (null === (n = a.paymentType) || void 0 === n ? void 0 : n.bankCardId)) && (a.paymentType.bankCardId = t.bankCardId,
                a.paymentType.selectedBankCard = null === (d = a.paymentTypes.find(t=>t.isCreditCard)) || void 0 === d || null === (d = d.bankCards) || void 0 === d ? void 0 : d.find(e=>e.id === t.bankCardId));
                this._syncTo()
            }
            ,
            e.setAddress = function(t, e) {
                var s;
                const r = this._syncFrom();
                let i = WbSpaModel.prototype.$services.userAddressService.get(t, e);
                i && (null === (s = r.deliveryPoint) || void 0 === s ? void 0 : s.addressId) !== i.addressId && (r.deliveryWay = e,
                r.deliveryPoint = i,
                r.deliveryPriceModel = null,
                this._syncTo())
            }
            ,
            e.getBankCards = function() {
                var t;
                return (null === (t = this._syncFrom().paymentTypes) || void 0 === t || null === (t = t.find(t=>t.isCreditCard)) || void 0 === t ? void 0 : t.bankCards) || []
            }
            ,
            e.getItems = function() {
                return this._syncFrom().basketItems
            }
            ,
            e.save = function(t) {
                const e = this._syncFrom()
                  , s = JSON.parse(JSON.stringify(t, (t,e)=>"basketItems" === t ? void 0 : e));
                s.basketItems = t.basketItems.reduce((t,e)=>{
                    return t.get(e.id) && t.set(e.id, wb.helpers.deepClone(e)),
                    t
                }
                , e.basketItems.toMap(t=>t.id, t=>t)).toArray(),
                this._syncTo(s)
            }
            ,
            e.get = function(t) {
                const e = this._syncFrom();
                return t && (e.basketItems.filter(t=>t.canBeOrdered).forEach(t=>{
                    t.includeInOrder = !0
                }
                ),
                BasketVM.calc(e)),
                e
            }
            ,
            e.getDeliveryPoint = function() {
                return this._syncFrom().deliveryPoint
            }
            ,
            e.buyItNow = function(t) {
                const e = this._syncFrom()
                  , s = e.basketItems.find(e=>e.characteristicId == t);
                if (s) {
                    const t = new BasketVM(this.isAuth);
                    return t.isBuyItNowMode = !0,
                    s.includeInOrder = !0,
                    t.basketItems.unshift(s),
                    t.deliveryWay = e.deliveryWay,
                    t.deliveryPoint = e.deliveryPoint,
                    t.paymentTypes = e.paymentTypes,
                    t.paymentType = e.paymentType,
                    t.paymentType && (t.paymentType.bankCardId = e.paymentType.bankCardId,
                    t.paymentType.selectedBankCard = e.paymentType.selectedBankCard),
                    BasketVM.calc(t),
                    t
                }
                return e
            }
            ,
            e.enrichProductsIfNeedAsync = function({force: t}={}) {
                const e = this._syncFrom();
                return e.basketItems.length > 0 && e.basketItems.every(t=>!t.hasOwnProperty("priceWithCouponAndDiscount") && !t.hasOwnProperty("price")) || t ? this._enrichProducts(e.basketItems.map(t=>t.cod1S)) : Promise.resolve([])
            }
            ,
            e._getGuestBasket = function() {
                try {
                    const t = "_basket"
                      , e = localStorage.getObject(t)
                      , s = e instanceof Array;
                    if (s)
                        return new BasketVM(!1,this._syncFromOld(e).map(t=>BasketItemViewModel.fromOldBasket(t)));
                    if (e && !s)
                        return e
                } catch (t) {
                    console.error(t),
                    wb.spa.logError(t, "cartService _getGuestBasket")
                }
                return new BasketVM(!1)
            }
            ,
            e._detGuestBasket = function() {
                localStorage.removeItem("_basket")
            }
            ,
            e._syncFromOld = function(t) {
                try {
                    const e = new Map;
                    return t.forEach(t=>e.set(t[0], t[1])),
                    e.toArray()
                } catch (t) {
                    return []
                }
            }
            ,
            e._syncFrom = function() {
                try {
                    const s = this.basketKey
                      , r = localStorage.getObject(s)
                      , i = r instanceof Array;
                    if (r && !i)
                        this.innerStorage = r;
                    else {
                        var t;
                        let e = [];
                        i && (e = this._syncFromOld(r).map(t=>BasketItemViewModel.fromOldBasket(t))),
                        null !== (t = this.innerStorage) && void 0 !== t && null !== (t = t.basketItems) && void 0 !== t && t.length || (this.innerStorage = new BasketVM(this.isAuth,e))
                    }
                    return this.isAuth && (localStorage.clearStartsWith("wb_basket_", s),
                    localStorage.clearStartsWith("wb___basketStorage_", `wb___basketStorage_${this.sessionService.getUserUid()}`)),
                    this.innerStorage
                } catch (t) {
                    var e;
                    return console.error(t),
                    wb.spa.logError(t, "cartService syncfrom"),
                    null !== (e = this.innerStorage) && void 0 !== e ? e : new BasketVM(this.isAuth)
                }
            }
            ,
            e._syncTo = function(t) {
                var e;
                t && (this.innerStorage = t),
                BasketVM.calc(this.innerStorage);
                try {
                    localStorage.putObject(this.basketKey, this.innerStorage)
                } catch (t) {}
                this.$eventBus.dispatchEvent(new CustomEvent("LocalBasketUpdateCount",{
                    detail: {
                        count: null === (e = this.innerStorage) || void 0 === e ? void 0 : e.totalQuantity
                    }
                }))
            }
            ,
            e._enrichProducts = async function(t) {
                if (0 === t.length)
                    return {};
                const [e,s] = await Promise.all([wb.xnm.getXnmProducts(t, !1), wb.xnm.getProductColorsByNmIdsAsync(t)])
                  , r = this._syncFrom();
                let i = !1;
                return r.basketItems.forEach(t=>{
                    e[t.cod1S] && (BasketItemViewModel.enrichCatalogGood(t, e[t.cod1S]),
                    i = !0),
                    s[t.cod1S] && (BasketItemViewModel.enrichStaticGood(t, s[t.cod1S]),
                    i = !0)
                }
                ),
                r.currency = WbSpaModel.prototype.$user.getCurrency(),
                i && this._syncTo(r),
                e
            }
            ,
            e.updateWbxProducts = function(t) {
                if (!t)
                    return;
                const e = this._syncFrom()
                  , s = e.basketItems.reduce(function(t, e) {
                    return t[e.characteristicId] = e,
                    t
                }, {});
                e.basketItems = t.map(t=>BasketItemViewModel.fromWbxBasketProduct(t)).reduce((t,e)=>{
                    const r = s[e.characteristicId];
                    if (r) {
                        const s = JSON.parse(JSON.stringify(r));
                        s.quantity = e.quantity,
                        s.targetUrl = e.targetUrl,
                        t.push(s)
                    } else
                        t.push(e);
                    return t
                }
                , []),
                this._syncTo()
            }
            ,
            e.updateWbProducts = function(t) {
                const e = this._syncFrom();
                localStorage.hasItem(this.basketKey) || this._syncTo(),
                null != t && t.length && (e.basketItems = [...e.basketItems, ...t.map(t=>BasketItemViewModel.fromWbBasketProduct(t))].reduce((t,e)=>{
                    const s = t.findIndex(t=>t.id === e.id);
                    return -1 !== s || e.isDeleted ? -1 !== s && (t[s].timestamp = Math.max(t[s].timestamp, e.timestamp),
                    t[s].quantity = e.quantity,
                    t[s].targetUrl = e.targetUrl,
                    t[s].isDeleted = e.isDeleted) : t.push(JSON.parse(JSON.stringify(e))),
                    t
                }
                , []).filter(t=>!t.isDeleted).sort((t,e)=>e.timestamp - t.timestamp),
                this._syncTo())
            }
            ,
            _createClass(t, [{
                key: "isAuth",
                get: function() {
                    return this._isAuth()
                }
            }, {
                key: "lastTs",
                get: function() {
                    var t;
                    return null === (t = this.innerStorage.basketItems) || void 0 === t || null === (t = t[0]) || void 0 === t ? void 0 : t.timestamp
                }
            }, {
                key: "count",
                get: function() {
                    const t = this._syncFrom();
                    return this.$eventBus.dispatchEvent(new CustomEvent("LocalBasketUpdateCount",{
                        detail: {
                            count: t.totalQuantity
                        }
                    })),
                    t.totalQuantity
                }
            }, {
                key: "basketKey",
                get: function() {
                    return this.isAuth ? `wb_basket_${this.sessionService.getUserUid()}` : "_basket"
                }
            }]),
            t
        }();
        module.exports = {
            LocalBasket: LocalBasket,
            BasketItemViewModel: BasketItemViewModel
        };

    }
    , {
        "./local/basketItemViewModel": 87,
        "./local/basketViewModel": 88
    }],
    90: [function(require, module, exports) {
        "use strict";
        let BasketItemSharedModel = function(t) {
            var i, e;
            this.characteristicId = +t.characteristicId;
            const s = +t.quantity;
            this.quantity = s > 0 ? s : 1,
            this.cod1S = t.cod1S,
            this.targetUrl = t.targetUrl,
            this.includeInOrder = t.includeInOrder,
            this.promos = t.promos,
            this.dstOffice = t.dstOffice,
            this.storeName = t.storeName,
            this.isLargeItem = t.isLargeItem,
            this.couponSale = t.couponSale,
            this.goodsName = t.goodsName,
            this.colorName = t.colorName,
            this.sizeName = t.sizeName,
            this.brandName = t.brandName,
            this.sale = t.sale,
            this.salePrice = t.salePrice,
            this.totalSale = t.totalSale,
            this.personalDiscount = t.personalDiscount,
            this.returnCost = t.returnCost,
            this.price = t.price,
            this.priceWithSale = t.priceWithSale,
            this.priceWithCoupon = t.priceWithCoupon,
            this.priceWithCouponAndSpp = t.priceWithCouponAndSpp,
            this.priceWithCouponAndDiscount = t.priceWithCouponAndDiscount,
            this.paymentSaleAmount = t.paymentSaleAmount,
            this.subjectId = t.subjectId,
            this.subjectRoot = t.subjectParentId,
            this.reviewRating = t.reviewRating,
            this.commentsCount = t.commentsCount || t.feedbacks,
            this.payloadV2 = t.payloadV2,
            this.logisticsCost = t.logisticsCost,
            this.whDtype = t.whDtype,
            this.supplierId = t.supplierId,
            this.supplierName = t.supplierName,
            this.saleConditions = t.saleConditions,
            this.catalogReturnCost = t.catalogReturnCost,
            this.maxQuantity = t.maxQuantity,
            this.volume = t.volume,
            this.storeIds = (null === (i = t.stocks) || void 0 === i || null === (i = i.filter(t=>t.qty > 0)) || void 0 === i ? void 0 : i.map(t=>t.wh)) || [],
            this.stocks = null === (e = t.stocks) || void 0 === e ? void 0 : e.reduce((t,i)=>(t[i.wh] = {
                storeId: i.wh,
                quantity: i.qty || 0,
                time1: i.time1,
                time2: i.time2,
                priority: i.priority
            },
            t), {}),
            this.timestamp = t.timestamp
        };
        module.exports = BasketItemSharedModel;

    }
    , {}],
    91: [function(require, module, exports) {
        "use strict";
        let BasketItemSharedModel = function() {
            function t(t, e, n, i, a) {
                this.chrt_id = +e;
                const r = +n;
                this.quantity = r > 0 ? r : 1,
                this.cod_1s = i,
                this.client_ts = a || Date.now() / 1e3 | 0,
                this.op_type = t || 1
            }
            return t.fromLocalBasket = function(e, n) {
                const i = new t(n,e.characteristicId,e.quantity,e.cod1S,e.timestamp);
                return i.client_ts > 1e12 && (i.client_ts = i.client_ts / 1e3 | 0),
                i.target_url = e.targetUrl,
                e.meta && (i.meta_data = JSON.stringify(e.meta)),
                i
            }
            ,
            t.toUpdate = function(e) {
                return t.fromLocalBasket(e, 2)
            }
            ,
            t.toDelete = function(e) {
                return new t(3,e)
            }
            ,
            t
        }();
        module.exports = BasketItemSharedModel;

    }
    , {}],
    92: [function(require, module, exports) {
        "use strict";
        function _defineProperties(t, e) {
            for (var i = 0; i < e.length; i++) {
                var s = e[i];
                s.enumerable = s.enumerable || !1,
                s.configurable = !0,
                "value"in s && (s.writable = !0),
                Object.defineProperty(t, _toPropertyKey(s.key), s)
            }
        }
        function _createClass(t, e, i) {
            return e && _defineProperties(t.prototype, e),
            i && _defineProperties(t, i),
            Object.defineProperty(t, "prototype", {
                writable: !1
            }),
            t
        }
        function _toPropertyKey(t) {
            var e = _toPrimitive(t, "string");
            return "symbol" == typeof e ? e : String(e)
        }
        function _toPrimitive(t, e) {
            if ("object" != typeof t || !t)
                return t;
            var i = t[Symbol.toPrimitive];
            if (void 0 !== i) {
                var s = i.call(t, e || "default");
                if ("object" != typeof s)
                    return s;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === e ? String : Number)(t)
        }
        const basketLocal = "wb___basketStorage"
          , DEFAULT_STATE = {
            ts: 0,
            c_ts: 0,
            operations: new Map
        };
        let BasketStorage = function() {
            function t(t) {
                window.addEventListener("storage", t=>{
                    t.key === this._basketKey && this._pull()
                }
                ),
                this.getLocalItems = t,
                this._data = DEFAULT_STATE
            }
            var e = t.prototype;
            return e.setUserUid = function(t) {
                t !== this.userUid && (this.userUid = t,
                this._pull(),
                this.ts > 10 && !localStorage.hasItem(`wb_basket_${this.userUid}`) && (wb.spa.logError(new Error(`[WB_BASKET_STORAGE]: key wb_basket_${this.userUid} notfound`), {
                    ts: this.ts,
                    opLen: this._data.operations.size
                }),
                this._data.ts = 10))
            }
            ,
            e.hasOperations = function() {
                return !!this._data.operations.size
            }
            ,
            e.getOperations = function() {
                return this.ts || (this._data.operations.clear(),
                this.getLocalItems().forEach(t=>{
                    this._data.operations.set(t.chrt_id, t)
                }
                )),
                this._data.operations.toArray()
            }
            ,
            e.setTs = function(t) {
                t && (this._data.ts = t,
                this._push())
            }
            ,
            e.setClientTs = function(t) {
                this._data.c_ts = t,
                this._push()
            }
            ,
            e._mergeOp = function(t, e) {
                return (null == t ? void 0 : t.chrt_id) === e.chrt_id && 1 === t.op_type && 2 === e.op_type && (e.op_type = 1),
                e
            }
            ,
            e.normalize = function(t, e) {
                t.forEach(t=>{
                    const e = this._data.operations.get(t.chrt_id);
                    e.quantity === t.quantity && e.client_ts === t.client_ts && e.op_type === t.op_type && this._data.operations.delete(t.chrt_id)
                }
                );
                let i = [];
                return (null == e ? void 0 : e.length) > 0 && (e.forEach(t=>{
                    const e = this._data.operations.get(t.chrt_id);
                    if (e) {
                        if (!t.is_deleted)
                            return;
                        if (1 === e.op_type)
                            return;
                        this._data.operations.delete(t.chrt_id)
                    }
                    i.push(t)
                }
                ),
                this._push()),
                i
            }
            ,
            e.update = function(t) {
                if ((null == t ? void 0 : t.length) > 0) {
                    for (let e = 0; e < t.length; e++) {
                        const i = t[e].chrt_id;
                        this._data.operations.set(i, this._mergeOp(this._data.operations.get(i), t[e]))
                    }
                    this._push()
                }
            }
            ,
            e.clear = function() {
                localStorage.removeItem(basketLocal)
            }
            ,
            e._pull = function() {
                const t = localStorage.getObject(this._basketKey) || localStorage.getObject(basketLocal);
                t && (t.operations = Array.isArray(t.operations) ? new Map(t.operations.map(t=>[t.chrt_id, t])) : DEFAULT_STATE.operations),
                this._data = null != t ? t : DEFAULT_STATE
            }
            ,
            e._push = function() {
                try {
                    const t = this._data.operations.toArray();
                    localStorage.putObject(this._basketKey, {
                        ts: this._data.ts,
                        c_ts: this._data.c_ts,
                        operations: t
                    }),
                    localStorage.hasItem(basketLocal) && localStorage.putObject(basketLocal, {
                        ts: this._data.ts,
                        c_ts: this._data.c_ts,
                        operations: t
                    })
                } catch (t) {}
            }
            ,
            _createClass(t, [{
                key: "_basketKey",
                get: function() {
                    return `${basketLocal}_${this.userUid}`
                }
            }, {
                key: "clientTs",
                get: function() {
                    return this._data.c_ts
                }
            }, {
                key: "ts",
                get: function() {
                    return this._data.ts
                }
            }]),
            t
        }();
        module.exports = BasketStorage;

    }
    , {}],
    93: [function(require, module, exports) {
        "use strict";
        const BasketItemSharedModel = require("./wbCool/basketItemSharedModel")
          , BasketStorage = require("./wbCool/basketStorage")
          , API_URL = "https://cart-storage-api.wildberries.ru/api/basket"
          , TIME_INTERVAL_MIN = 235;
        let WbCoolBasket = function() {
            function e(e) {
                this.localBasket = e,
                this.storage = new BasketStorage(()=>this.localBasket.getItems().map(e=>BasketItemSharedModel.fromLocalBasket(e))),
                this.debounceSync = this.$helper.debounce(this._sync.bind(this), 3e3),
                this.debounceShortSync = this.$helper.debounce(this._sync.bind(this), 1e3),
                setTimeout(()=>this._backupBasketAsync(), 11e3)
            }
            var t = e.prototype;
            return t.unAuth = function() {
                this.storage.clear()
            }
            ,
            t.onBeforeSignOut = function() {
                this.storage.hasOperations() && this._sync()
            }
            ,
            t.addItem = function(e) {
                e && (this.storage.update([BasketItemSharedModel.fromLocalBasket(e)]),
                this.debounceShortSync())
            }
            ,
            t.addManyItems = function(e) {
                e.length && (this.storage.update(e.map(e=>BasketItemSharedModel.fromLocalBasket(e))),
                this.debounceShortSync())
            }
            ,
            t.clearItems = function(e) {
                e.length && (this.storage.update(e.map(e=>BasketItemSharedModel.toDelete(e))),
                this.debounceShortSync())
            }
            ,
            t.refresh = function(e, t) {
                if ("remove" === t) {
                    var s, o, a, r;
                    const t = null !== (s = null !== (o = null === (a = e.chrtIds) || void 0 === a ? void 0 : a[0]) && void 0 !== o ? o : null === (r = e.items) || void 0 === r ? void 0 : r[0].chrtId) && void 0 !== s ? s : e.chrtId;
                    t > 0 && this.storage.update([BasketItemSharedModel.toDelete(t)])
                } else if ("recalc" === t) {
                    const t = this.localBasket.getItems().find(t=>t.characteristicId === e.chrtId);
                    t && this.storage.update([BasketItemSharedModel.toUpdate(t)])
                }
                this.debounceSync()
            }
            ,
            t.sync = async function(e, t) {
                await this._sync(e, t)
            }
            ,
            t._sync = async function(e, t) {
                await navigator.locks.request("lock-basket-sync", async s=>{
                    this.storage.setUserUid(this.$auth.um.userUid || this.$router.userUid);
                    const o = this.storage.getOperations();
                    if (t && !o.length && this.storage.clientTs > (Date.now() / 1e3 | 0))
                        return;
                    const a = this.$services.sessionService.getSession();
                    try {
                        const t = await this._doSync({
                            sessionId: a,
                            operations: o,
                            signal: e
                        });
                        if (this._sendMetrics(t.state),
                        0 === t.state && t.change_ts > 0)
                            this._updateProducts(t, o);
                        else if (1 === t.state) {
                            const e = this.localBasket.getItems().map(e=>BasketItemSharedModel.fromLocalBasket(e))
                              , t = await this._doSync({
                                sessionId: a,
                                operations: e,
                                rememberMe: !0
                            });
                            0 === t.state && t.change_ts > 0 && this._updateProducts(t, o)
                        } else
                            t && wb.spa.logError(new Error(`[WB_BASKET_SYNC]: sync state:${t.state}`), {
                                result: t,
                                ts: this.storage.ts,
                                deviceId: a,
                                opLen: o.length
                            })
                    } catch (e) {
                        const t = !e.isCustomError && e instanceof TypeError && ("Failed to fetch" === e.message || "NetworkError when attempting to fetch resource." === e.message || "Cancelled" === e.message);
                        this._sendMetrics(t ? "network" : "error"),
                        wb.spa.logError(new Error(`[WB_BASKET_SYNC]: ${e.message}`), {
                            ts: this.storage.ts,
                            deviceId: a,
                            opLen: o.length
                        })
                    }
                }
                )
            }
            ,
            t._updateProducts = function(e, t) {
                const s = this.storage.normalize(t, e.result_set);
                this.localBasket.updateWbProducts(s),
                this.storage.setTs(e.change_ts),
                this.storage.setClientTs(235 + (Date.now() / 1e3 | 0))
            }
            ,
            t._doSync = function({sessionId: e, operations: t, rememberMe: s=!1, signal: o=null}) {
                return this.$wbxHttpClient.fetch(`${API_URL}/sync?ts=${this.storage.ts}&device_id=${e}${s ? "&remember_me=true" : ""}`, {
                    method: "POST",
                    body: JSON.stringify(t),
                    headers: {
                        "Content-Type": "application/json"
                    },
                    signal: o
                }).then(async e=>e.ok ? e.json() : {}).then(e=>(e.result_set && (e.result_set = e.result_set[0] || []),
                e))
            }
            ,
            t._sendMetrics = function(e) {
                try {
                    fetch(`/webapi/logging/wbbasket/metrics?status=${e}`, {
                        method: "POST"
                    })
                } catch (e) {}
            }
            ,
            t._backupBasketAsync = function() {
                if (this.storage.ts <= 0)
                    return;
                const e = this.localBasket.getItems().map(e=>{
                    let t = BasketItemSharedModel.fromLocalBasket(e);
                    return delete t.op_type,
                    t
                }
                )
                  , t = [{
                    path: "/cart/wb_backup",
                    file: this.$helper.base64.encode(JSON.stringify(e))
                }];
                this.$services.apiUserStorage.setData(t)
            }
            ,
            e
        }();
        module.exports = WbCoolBasket;

    }
    , {
        "./wbCool/basketItemSharedModel": 91,
        "./wbCool/basketStorage": 92
    }],
    94: [function(require, module, exports) {
        "use strict";
        const basketMgrtKey = "wb___basketMgrt";
        let WbBasketUserControl = function() {
            function t() {}
            var e = t.prototype;
            return e.check = function(t) {
                return this._migrated || (this._migrated = localStorage.getItem(basketMgrtKey) === t),
                this._migrated
            }
            ,
            e.set = function(t) {
                this._migrated = !!t;
                try {
                    this._migrated ? localStorage.setItem(basketMgrtKey, t) : localStorage.removeItem(basketMgrtKey)
                } catch (t) {}
            }
            ,
            t
        }();
        module.exports = WbBasketUserControl;

    }
    , {}],
    95: [function(require, module, exports) {
        "use strict";
        const basketIdKey = "wbx___basketId";
        let WbxBasketIndex = function() {
            function t() {
                window.addEventListener("storage", t=>{
                    t.key === basketIdKey && this._pull()
                }
                ),
                this._pull()
            }
            var e = t.prototype;
            return e._pull = function() {
                var t;
                this._basketInd = parseInt(null !== (t = localStorage.getItem(basketIdKey)) && void 0 !== t ? t : "0")
            }
            ,
            e.get = function() {
                return this._basketInd > 0 || this._pull(),
                this._basketInd
            }
            ,
            e.set = function(t) {
                this._basketInd = t;
                try {
                    localStorage.setItem(basketIdKey, this._basketInd)
                } catch (t) {}
            }
            ,
            e.update = function() {
                this.set(this._basketInd + 1)
            }
            ,
            t
        }();
        module.exports = WbxBasketIndex;

    }
    , {}],
    96: [function(require, module, exports) {
        "use strict";
        function _defineProperties(t, e) {
            for (var o = 0; o < e.length; o++) {
                var i = e[o];
                i.enumerable = i.enumerable || !1,
                i.configurable = !0,
                "value"in i && (i.writable = !0),
                Object.defineProperty(t, _toPropertyKey(i.key), i)
            }
        }
        function _createClass(t, e, o) {
            return e && _defineProperties(t.prototype, e),
            o && _defineProperties(t, o),
            Object.defineProperty(t, "prototype", {
                writable: !1
            }),
            t
        }
        function _toPropertyKey(t) {
            var e = _toPrimitive(t, "string");
            return "symbol" == typeof e ? e : String(e)
        }
        function _toPrimitive(t, e) {
            if ("object" != typeof t || !t)
                return t;
            var o = t[Symbol.toPrimitive];
            if (void 0 !== o) {
                var i = o.call(t, e || "default");
                if ("object" != typeof i)
                    return i;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === e ? String : Number)(t)
        }
        const basketLocal = "wbx___basketLocal";
        let WbxBasketLocal = function() {
            function t() {
                window.addEventListener("storage", t=>{
                    t.key === basketLocal && this._pull()
                }
                ),
                this._pull()
            }
            var e = t.prototype;
            return e._fixTs = function(t) {
                t.groupBy(t=>t.added_timestamp).forEach(t=>{
                    t.length > 1 && t.forEach((t,e)=>{
                        t.added_timestamp += e
                    }
                    )
                }
                )
            }
            ,
            e._pull = function() {
                var t;
                this._data = null !== (t = localStorage.getObject(basketLocal)) && void 0 !== t ? t : []
            }
            ,
            e.set = function(t) {
                t && t.length || window._debug && console.log(`[WBXBASKET-LOCAL] set ${JSON.stringify(t)}`),
                this._data = t.filter(t=>t.product_id && t.product_option_id && 0 !== t.count);
                try {
                    localStorage.putObject(basketLocal, this._data)
                } catch (t) {}
            }
            ,
            e.clear = function() {
                window._debug && console.log("[WBXBASKET-LOCAL] CLEAR"),
                this._data = [],
                localStorage.removeItem(basketLocal)
            }
            ,
            e.getProducts = function() {
                return this._data.map(t=>Object.assign({}, t))
            }
            ,
            e.updateQnt = function(t) {
                if (!t.product_option_id)
                    return;
                const e = this.getProducts()
                  , o = e.findIndex(e=>e.product_option_id === t.product_option_id);
                -1 !== o ? e[o].count += t.count : e.push(t),
                window._debug && console.log("[WBXBASKET-LOCAL] updateQnt"),
                this.set(e)
            }
            ,
            e.updateProducts = function(t) {
                this._fixTs(t);
                const e = this.getProducts()
                  , o = [...e, ...t].reduce((t,e)=>{
                    const o = t.findIndex(t=>t.product_option_id === e.product_option_id);
                    return -1 === o ? t.push(e) : (t[o].added_timestamp = Math.min(t[o].added_timestamp, e.added_timestamp),
                    t[o].count = Math.max(t[o].count, e.count)),
                    t
                }
                , []);
                return window._debug && console.log(`[WBXBASKET-LOCAL] updateProducts local:${JSON.stringify(e)} items:${JSON.stringify(t)}`),
                this.set(o),
                e.length > 0
            }
            ,
            _createClass(t, [{
                key: "isEmpty",
                get: function() {
                    return 0 === this._data.length
                }
            }]),
            t
        }();
        module.exports = WbxBasketLocal;

    }
    , {}],
    97: [function(require, module, exports) {
        "use strict";
        const basketMgrtKey = "wbx___basketMgrt";
        let WbxBasketUserControl = function() {
            function t() {}
            var e = t.prototype;
            return e.check = function(t) {
                return this._migrated || (this._migrated = localStorage.getItem(basketMgrtKey) === t),
                this._migrated
            }
            ,
            e.set = function(t) {
                this._migrated = !!t;
                try {
                    this._migrated ? localStorage.setItem(basketMgrtKey, t) : localStorage.removeItem(basketMgrtKey)
                } catch (t) {}
            }
            ,
            t
        }();
        module.exports = WbxBasketUserControl;

    }
    , {}],
    98: [function(require, module, exports) {
        "use strict";
        let WbxBasketProduct = function() {
            function t(t, r, e, o, i) {
                this.product_id = t,
                this.product_option_id = r,
                this.added_timestamp = i || Date.now() / 1e3 | 0,
                this.count = e,
                this.target_url = o
            }
            return t.fromWbxProduct = function(r) {
                return new t(r.product_id,r.product_option_id,r.count,r.target_url,r.added_timestamp)
            }
            ,
            t.fromGuestBasket = function(r) {
                return new t(r.cod1S,r.characteristicId,r.quantity,r.targetUrl,r.timestamp)
            }
            ,
            t
        }();
        module.exports = WbxBasketProduct;

    }
    , {}],
    99: [function(require, module, exports) {
        "use strict";
        const basketRemoteKey = "wbx___basketRemote";
        let WbxBasketRemote = function() {
            function t() {
                window.addEventListener("storage", t=>{
                    t.key === basketRemoteKey && this._pull()
                }
                ),
                this._pull()
            }
            var e = t.prototype;
            return e._pull = function() {
                var t;
                this._data = null !== (t = localStorage.getObject(basketRemoteKey)) && void 0 !== t ? t : []
            }
            ,
            e.hasSessionId = function(t) {
                var e;
                return (null === (e = this._data) || void 0 === e ? void 0 : e.some(e=>e.sessionId === t)) || !1
            }
            ,
            e.set = function(t) {
                try {
                    this._data = t || [],
                    localStorage.putObject(basketRemoteKey, t)
                } catch (t) {}
            }
            ,
            e.get = function() {
                return this._data.map(t=>Object.assign({}, t))
            }
            ,
            e.clear = function() {
                this._data = [],
                localStorage.removeItem(basketRemoteKey)
            }
            ,
            e.updateProducts = function(t) {
                const e = this.get();
                t.forEach(t=>{
                    const s = e.findIndex(e=>e.sessionId === t.sessionId);
                    -1 !== s ? e[s] = t : e.push(t)
                }
                ),
                this.set(e)
            }
            ,
            e.getProducts = function() {
                return this.get().reduce((t,e)=>(e.data && t.push(...e.data),
                t), [])
            }
            ,
            t
        }();
        module.exports = WbxBasketRemote;

    }
    , {}],
    100: [function(require, module, exports) {
        "use strict";
        function _defineProperties(t, e) {
            for (var s = 0; s < e.length; s++) {
                var a = e[s];
                a.enumerable = a.enumerable || !1,
                a.configurable = !0,
                "value"in a && (a.writable = !0),
                Object.defineProperty(t, _toPropertyKey(a.key), a)
            }
        }
        function _createClass(t, e, s) {
            return e && _defineProperties(t.prototype, e),
            s && _defineProperties(t, s),
            Object.defineProperty(t, "prototype", {
                writable: !1
            }),
            t
        }
        function _toPropertyKey(t) {
            var e = _toPrimitive(t, "string");
            return "symbol" == typeof e ? e : String(e)
        }
        function _toPrimitive(t, e) {
            if ("object" != typeof t || !t)
                return t;
            var s = t[Symbol.toPrimitive];
            if (void 0 !== s) {
                var a = s.call(t, e || "default");
                if ("object" != typeof a)
                    return a;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === e ? String : Number)(t)
        }
        const basketLastSyncDate = "wbx___basketSyncDate"
          , version = 1
          , OLD_BASKET_SYNC_FILE = "cart/migrationmobile_ru_uz"
          , WbxBasketLocal = require("./wbx/wbxBasketLocal")
          , WbxBasketRemote = require("./wbx/wbxBasketRemote")
          , WbxBasketIndex = require("./wbx/wbxBasketIndex")
          , WbxBasketUserControl = require("./wbx/wbxBasketMigration")
          , WbBasketUserControl = require("./wbx/wbBasketMigration")
          , WbxBasketProduct = require("./wbx/wbxBasketProduct");
        let CartStorageItem = function(t) {
            this.ts = t.modify_time,
            this.path = t.path;
            const e = t.path.split("/")
              , s = e.find(t=>t.split("|").length > 1);
            if (s) {
                const t = s.split("|");
                this.sessionId = t[0],
                this.ver = parseInt(t[1])
            } else
                !0 === t.is_dir && (this.isDir = t.is_dir,
                this.dirId = e[e.length - 1])
        }
          , ApiUserStorageWrapper = function() {
            function t(t) {
                this.storage = t
            }
            var e = t.prototype;
            return e.getList = async function() {
                var t;
                if (null !== (t = wb.global) && void 0 !== t && null !== (t = t.settings) && void 0 !== t && null !== (t = t.switches) && void 0 !== t && t.offUserStorage)
                    throw "userstorage off";
                const e = await this.storage.getList.apply(this.storage, arguments);
                if (null === e)
                    throw "userstorage err";
                return e
            }
            ,
            e.getData = async function() {
                var t;
                if (null !== (t = wb.global) && void 0 !== t && null !== (t = t.settings) && void 0 !== t && null !== (t = t.switches) && void 0 !== t && t.offUserStorage)
                    throw "userstorage off";
                const e = await this.storage.getData.apply(this.storage, arguments);
                if (null === e)
                    throw "userstorage err";
                return e
            }
            ,
            e.setData = function() {
                var t;
                return null !== (t = wb.global) && void 0 !== t && null !== (t = t.settings) && void 0 !== t && null !== (t = t.switches) && void 0 !== t && t.offUserStorage ? {
                    success: !1,
                    error: new Error("userstorage off")
                } : this.storage.setData.apply(this.storage, arguments)
            }
            ,
            t
        }()
          , WbxBasket = function() {
            function t(t, e) {
                this.constants = e,
                this.wbLocalBasket = t,
                this.userStorage = new ApiUserStorageWrapper(this.$services.apiUserStorage),
                this.sessionService = this.$services.sessionService,
                this.basketInd = new WbxBasketIndex,
                this.basketLocal = new WbxBasketLocal,
                this.basketRemote = new WbxBasketRemote,
                this.basketUserControl = new WbxBasketUserControl,
                this.shouldUploadLocal = !1,
                this.wbBasketMigrated = new WbBasketUserControl,
                this._tasks = []
            }
            var e = t.prototype;
            return e.unAuth = function() {
                this.clear(),
                this.updateLastSyncDate(0),
                this.basketInd.set(0),
                this.basketUserControl.set(!1),
                this.wbBasketMigrated.set(!1)
            }
            ,
            e.clear = function() {
                this.basketRemote.clear(),
                this.basketLocal.clear()
            }
            ,
            e._getItemsRaw = function() {
                return [...this.basketLocal.getProducts(), ...this.basketRemote.getProducts()].reduce((t,e)=>{
                    const s = t.findIndex(t=>t.product_option_id === e.product_option_id);
                    return e.added_timestamp > 1e12 && (e.added_timestamp = e.added_timestamp / 1e3 | 0),
                    -1 === s ? t.push(Object.assign({}, e)) : (t[s].added_timestamp = Math.min(t[s].added_timestamp, e.added_timestamp),
                    t[s].count += e.count,
                    t[s].target_url = t[s].target_url || e.target_url),
                    t
                }
                , [])
            }
            ,
            e.getItems = function() {
                return this._getItemsRaw().filter(t=>t.product_id && t.product_option_id && t.count > 0).reverse().sort((t,e)=>e.added_timestamp - t.added_timestamp)
            }
            ,
            e.addItem = function(t) {
                const e = this._getItemsRaw()
                  , s = e.findIndex(e=>e.product_option_id === t.characteristicId);
                if (-1 === s)
                    this.basketLocal.updateQnt(WbxBasketProduct.fromGuestBasket(t)),
                    this._pushLocalBasket();
                else if (e[s].count < 1) {
                    const a = WbxBasketProduct.fromGuestBasket(t);
                    a.count = a.count - e[s].count,
                    this.basketLocal.updateQnt(a),
                    this._pushLocalBasket()
                }
            }
            ,
            e.addManyItems = function(t) {
                const e = this._getItemsRaw()
                  , s = t.map(t=>WbxBasketProduct.fromGuestBasket(t)).reduce((t,s)=>{
                    const a = e.findIndex(t=>t.product_option_id === s.product_option_id);
                    return -1 === a ? t.push(s) : e[a].count < 1 && (s.count -= e[a].count,
                    t.push(s)),
                    t
                }
                , []);
                s.length && (s.forEach(t=>{
                    this.basketLocal.updateQnt(t)
                }
                ),
                this._pushLocalBasket())
            }
            ,
            e.clearItems = async function(t) {
                var e;
                await (null === (e = this._syncTask) || void 0 === e ? void 0 : e.catch(()=>{}
                ));
                const s = null != t ? t : []
                  , a = this.getItems();
                if (0 === a.length)
                    return void wb.spa.logError(new Error(`[WBX_BASKET] clearItemsWarn1 allItems.count = 0, idx ${this.basketInd.get()}, chrtToDel: ${s}`));
                const i = a.filter(t=>-1 === s.indexOf(t.product_option_id));
                if (i.length === a.length)
                    return void wb.spa.logError(new Error(`[WBX_BASKET] clearItemsWarn2 allItems.count = items.count = ${a.length}, idx ${this.basketInd.get()}, chrtToDel: ${s}`));
                0 === i.length && wb.spa.logError(new Error(`[WBX_BASKET] clearItemsWarn3 itemsToSave.count = 0, idx ${this.basketInd.get()}, chrtToDel: ${s}`));
                const r = this.basketInd.get() + 1;
                if (await this._uploadNewFolderAsync(r, i))
                    this.sync();
                else {
                    wb.spa.logError(new Error(`[WBX_BASKET] failed upload new index ${r}, try clearItems in current idx ${this.basketInd.get()}`));
                    let t = !1;
                    a.filter(t=>-1 !== s.indexOf(t.product_option_id)).forEach(e=>{
                        if (e.count > 0) {
                            const s = WbxBasketProduct.fromWbxProduct(e);
                            s.count = -s.count,
                            this.basketLocal.updateQnt(s),
                            t = !0
                        }
                    }
                    ),
                    t && this._pushLocalBasket(!0)
                }
            }
            ,
            e.refresh = function(t, e) {
                const s = this.getItems();
                let a = !1;
                if ("remove" === e) {
                    var i, r, o, n;
                    const e = null !== (i = null !== (r = null === (o = t.chrtIds) || void 0 === o ? void 0 : o[0]) && void 0 !== r ? r : null === (n = t.items) || void 0 === n ? void 0 : n[0].chrtId) && void 0 !== i ? i : t.chrtId;
                    if (e > 0) {
                        var c;
                        const t = s.find(t=>t.product_option_id === e)
                          , i = null !== (c = null == t ? void 0 : t.count) && void 0 !== c ? c : 0;
                        if (i > 0) {
                            const e = WbxBasketProduct.fromWbxProduct(t);
                            e.count = -i,
                            this.basketLocal.updateQnt(e),
                            a = !0
                        }
                    }
                } else if ("recalc" === e) {
                    var d, u;
                    let e = t.quantity - (null !== (d = null === (u = s.find(e=>e.product_option_id === t.chrtId)) || void 0 === u ? void 0 : u.count) && void 0 !== d ? d : 0);
                    this.basketLocal.updateQnt(new WbxBasketProduct(t.cod1S,t.chrtId,e,t.targetUrl,t.timestamp)),
                    a = !0
                }
                a && this._pushLocalBasket()
            }
            ,
            e._pushLocalBasket = async function(t) {
                if (await this._checkBasketInd(null, t)) {
                    const t = this._getLastSyncDate();
                    this.updateLastSyncDate(t + 1),
                    this._uploadLocalBasketAsync()
                }
            }
            ,
            e.sync = async function(t) {
                for (; this._tasks.length; )
                    await this._tasks.shift().catch(()=>{}
                    );
                if (this._syncTask || (this._syncTask = this._sync(t)),
                await this._syncTask,
                this.wbBasketMigrated.check(this._userUid))
                    return {
                        wbBasketMigrated: !0
                    };
                this.wbLocalBasket.updateWbxProducts(this.getItems())
            }
            ,
            e._sync = async function(t) {
                try {
                    this.basketUserControl.check(this._userUid) || this.unAuth();
                    const e = {
                        signal: t
                    };
                    if (await this._checkBasketInd(e),
                    this.wbBasketMigrated.check(this._userUid))
                        return;
                    await this._syncSessions(e)
                } finally {
                    this._syncTask = null
                }
            }
            ,
            e._syncSessions = async function(t) {
                var e;
                const s = this.sessionService.getSession()
                  , a = this._getLastSyncDate()
                  , i = [];
                let r = this.basketRemote.get();
                const o = await this._getSessionPaths(t);
                r.length > o.filter(t=>t.sessionId !== s).length && (r = [],
                this.basketRemote.clear()),
                o.forEach(t=>{
                    const e = r.find(e=>e.sessionId === t.sessionId);
                    (e && e.ts < t.ts || !e && t.sessionId !== s || t.sessionId === s && a < t.ts) && i.push({
                        path: t.path
                    })
                }
                );
                const n = o.find(t=>t.sessionId === s);
                null != t && null !== (e = t.signal) && void 0 !== e && e.aborted || (!n && !this.basketLocal.isEmpty || n && n.ts < a) && (this.shouldUploadLocal = !0);
                let c = await this._getData(i, t);
                if (c.length > 0) {
                    const t = [];
                    let e = {};
                    c.forEach(a=>{
                        a.sessionId !== s ? t.push(a) : e = a
                    }
                    ),
                    e.ts && (this.shouldUploadLocal = this.shouldUploadLocal || this.basketLocal.updateProducts(e.data),
                    this.updateLastSyncDate(e.ts)),
                    this.basketRemote.updateProducts(t)
                }
                this.shouldUploadLocal && (this._uploadLocalBasketAsync(),
                this.shouldUploadLocal = !1)
            }
            ,
            e._getBasketSessionDebug = async function() {
                const t = await this._getSessionPaths();
                return await this._getData(t)
            }
            ,
            e._getBasketDebug = async function() {
                const t = await this._getSessionPaths();
                return (await this._getData(t)).selectMany(t=>t.data).reduce((t,e)=>{
                    const s = t.findIndex(t=>t.product_option_id === e.product_option_id);
                    return -1 === s ? t.push(e) : (t[s].added_timestamp = Math.min(t[s].added_timestamp, e.added_timestamp),
                    t[s].count = t[s].count + e.count,
                    t[s].target_url = t[s].target_url || e.target_url),
                    t
                }
                , []).filter(t=>t.count > 0).sort((t,e)=>e.added_timestamp - t.added_timestamp)
            }
            ,
            e._getLastIndBasket = async function(t) {
                const e = await this.userStorage.getList("cart", t)
                  , s = (null == e ? void 0 : e.map(t=>new CartStorageItem(t))) || [];
                null != e && s.some(t=>t.path === this.constants.WB_BASKET_SYNC_FILEPATH) && this.wbBasketMigrated.set(this._userUid),
                null != e && this.basketUserControl.set(this._userUid);
                const a = s.filter(t=>!0 === t.isDir);
                if (0 !== a.length) {
                    const t = a.filter(t=>!isNaN(t.dirId)).reduce((t,e)=>Number(t.dirId) > Number(e.dirId) ? t : e);
                    return Number(t.dirId)
                }
                return 0
            }
            ,
            e._getSessionPaths = async function(t) {
                var e;
                const s = this.basketInd.get();
                return (null === (e = await this.userStorage.getList(`cart/${s}`, t)) || void 0 === e ? void 0 : e.map(t=>new CartStorageItem(t))) || []
            }
            ,
            e._checkBasketInd = async function(t, e) {
                const s = this.basketInd.get();
                let a = await this._getLastIndBasket(t);
                return a && a < s && wb.spa.logError({
                    message: `_checkBasketInd last:${a}, cur:${s}`
                }),
                !(a && a > s) || (e && wb.spa.logError({
                    message: `_checkBasketIndClear last:${a}, cur:${s}`
                }),
                this.basketRemote.clear(),
                this.basketLocal.clear(),
                this.updateLastSyncDate(0),
                this.basketInd.set(a),
                !1)
            }
            ,
            e._uploadNewFolderAsync = async function(t, e) {
                const s = `${this.sessionService.getSession()}_order`
                  , a = await this._uploadBasketAsync(s, e, t);
                return a.success && (this.clear(),
                this.basketRemote.set([{
                    data: e,
                    sessionId: s,
                    ts: 0
                }]),
                this.basketInd.set(t)),
                a.success
            }
            ,
            e._uploadLocalBasketAsync = async function() {
                const t = this.sessionService.getSession()
                  , e = this.basketLocal.getProducts();
                if ((await this._uploadBasketAsync(t, e)).success) {
                    const e = await this._getLocalBasketLastSyncDateFromServer(t);
                    e && this.updateLastSyncDate(e)
                }
            }
            ,
            e._uploadBasketAsync = function(t, e, s) {
                if (!t || !e) {
                    const s = new Error(`[BASKET_WBX_SYNC] uploadBasket incorrect data sessionId:${t}`);
                    return console.error(s),
                    void wb.spa.logError(s, e)
                }
                const a = [{
                    path: `/cart/${s || this.basketInd.get()}/${t}|1`,
                    file: this.$helper.base64.encode(JSON.stringify(e))
                }]
                  , i = this.userStorage.setData(a);
                return this._tasks.push(i),
                i
            }
            ,
            e._uploadOldBasketAsync = function(t, e, s) {
                if (!t || !e) {
                    const s = new Error(`[BASKET_WBX_SYNC] uploadOldBasket incorrect data sessionId:${t}`);
                    return console.error(s),
                    void wb.spa.logError(s, e)
                }
                try {
                    const a = [{
                        path: `/cart/${s || this.basketInd.get()}/${t}|1`,
                        file: this.$helper.base64.encode(JSON.stringify(e))
                    }, {
                        path: `/${OLD_BASKET_SYNC_FILE}`,
                        file: "W10="
                    }, {
                        path: "/cart/migrationmobile",
                        file: "W10="
                    }];
                    return wb.spa.logError(new Error(`[BASKET_WBX_SYNC] sync count = ${e.length}, idx ${this.basketInd.get()}`)),
                    this.userStorage.setData(a)
                } catch (s) {
                    wb.spa.logError(new Error(`[BASKET_WBX_SYNC] uploadOldBasket failed upload data sessionId:${t}, err: ${s.message}`), e)
                }
            }
            ,
            e._getLocalBasketLastSyncDateFromServer = async function(t) {
                const e = (await this._getSessionPaths()).find(e=>e.sessionId === t);
                if (e)
                    return e.ts
            }
            ,
            e._getData = async function(t, e) {
                if (!t.length)
                    return [];
                let s = await this.userStorage.getData(t, e);
                return null == s ? void 0 : s.reduce((t,e)=>{
                    const s = e.path.split("/")
                      , a = s.find(t=>t.split("|").length > 1);
                    if (a) {
                        const i = a.split("|");
                        let r = [];
                        try {
                            r = JSON.parse(this.$helper.base64.decode(e.file))
                        } catch (t) {
                            wb.spa.logError(new Error(`[BASKET_WBX_SYNC]: file is corrupted path:${s}`), e)
                        }
                        t.push({
                            ts: e.modify_time,
                            sessionId: i[0],
                            data: r
                        })
                    }
                    return t
                }
                , [])
            }
            ,
            e._getLastSyncDate = function() {
                return Number(localStorage.getItem(basketLastSyncDate)) || 0
            }
            ,
            e.updateLastSyncDate = function(t) {
                localStorage.setItem(basketLastSyncDate, t)
            }
            ,
            _createClass(t, [{
                key: "name",
                get: function() {
                    return "WbxBasket"
                }
            }, {
                key: "_userUid",
                get: function() {
                    return this.$auth.um.userUid || this.$router.userUid
                }
            }]),
            t
        }();
        module.exports = WbxBasket;

    }
    , {
        "./wbx/wbBasketMigration": 94,
        "./wbx/wbxBasketIndex": 95,
        "./wbx/wbxBasketLocal": 96,
        "./wbx/wbxBasketMigration": 97,
        "./wbx/wbxBasketProduct": 98,
        "./wbx/wbxBasketRemote": 99
    }],
    101: [function(require, module, exports) {
        "use strict";
        function _defineProperties(t, e) {
            for (var s = 0; s < e.length; s++) {
                var i = e[s];
                i.enumerable = i.enumerable || !1,
                i.configurable = !0,
                "value"in i && (i.writable = !0),
                Object.defineProperty(t, _toPropertyKey(i.key), i)
            }
        }
        function _createClass(t, e, s) {
            return e && _defineProperties(t.prototype, e),
            s && _defineProperties(t, s),
            Object.defineProperty(t, "prototype", {
                writable: !1
            }),
            t
        }
        function _toPropertyKey(t) {
            var e = _toPrimitive(t, "string");
            return "symbol" == typeof e ? e : String(e)
        }
        function _toPrimitive(t, e) {
            if ("object" != typeof t || !t)
                return t;
            var s = t[Symbol.toPrimitive];
            if (void 0 !== s) {
                var i = s.call(t, e || "default");
                if ("object" != typeof i)
                    return i;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === e ? String : Number)(t)
        }
        !function() {
            const t = require("./basket/localBasket")
              , e = require("./basket/wbxBasket")
              , s = require("./basket/wbCoolBasket")
              , i = require("./basket/wb/basketItemSharedModel")
              , r = t.LocalBasket
              , a = t.BasketItemViewModel
              , n = {
                WB_BASKET_SYNC_FILE: "migration-us-wb",
                WB_BASKET_SYNC_FILEPATH: "cart/migration-us-wb"
            };
            let o = function() {
                function t() {}
                var o = t.prototype;
                return o.init = function() {
                    Object.setPrototypeOf(e.prototype, WbSpaModel.prototype),
                    Object.setPrototypeOf(s.prototype, WbSpaModel.prototype),
                    this.localBasket = new r(()=>this.$router.userIsAuth,this.$services.sessionService,this.$eventBus),
                    this.wbxBasket = new e(this.localBasket,n),
                    this.wbBasket = new s(this.localBasket),
                    this.srv = this.wbxBasket,
                    this.$eventBus.addEventListener("onUserAuth", ()=>{
                        this._setWbBasketRange(wb.global.settings.variables.wbxBasketRangeV3),
                        this._subscribed || (this._subscribed = !0,
                        wb.global.subscribe(()=>{
                            this._originalWbBasketRange !== wb.global.settings.variables.wbxBasketRangeV3 && this._setWbBasketRange(wb.global.settings.variables.wbxBasketRangeV3)
                        }
                        ))
                    }
                    ),
                    this.$eventBus.addEventListener("onUserAuth", this.sync.bind(this)),
                    this.$eventBus.addEventListener("onUserUnAuth", this.wbBasket.unAuth.bind(this.wbBasket)),
                    this.$eventBus.addEventListener("onBeforeSignOut", this.wbBasket.onBeforeSignOut.bind(this.wbBasket)),
                    this._syncInt = setInterval(this.sync.bind(this), 24e4, "interval"),
                    $.observe(this.$router, "activeContainer", "showPreview", (t,e)=>{
                        document.body.classList.toggle("body-gray", 2 === t.target.activeContainer && !t.target.showPreview)
                    }
                    ),
                    this._setWbBasketRange = function(t) {
                        var e;
                        this._originalWbBasketRange = t,
                        this.wbBasketRange = (null === (e = this._originalWbBasketRange) || void 0 === e || null === (e = e.split(";")) || void 0 === e || null === (e = e.map(t=>parseInt(t, 10))) || void 0 === e || null === (e = e.toChunk(2)) || void 0 === e ? void 0 : e.filter(t=>2 === t.length)) || []
                    }
                }
                ,
                o._wbHittingTheRange = function() {
                    var t;
                    if ((null === (t = this.wbBasketRange) || void 0 === t ? void 0 : t.length) > 0) {
                        const t = this.$router.userId;
                        for (let e = 0; e < this.wbBasketRange.length; e++)
                            if (this.wbBasketRange[e][0] < t && t < this.wbBasketRange[e][1])
                                return !0;
                        return !1
                    }
                    return !1
                }
                ,
                o.sync = async function(t) {
                    if (this.$router.userIsAuth && this._wbHittingTheRange() && (this.srv = this.wbxBasket.wbBasketMigrated.check(this.$router.userUid) ? this.wbBasket : this.wbxBasket),
                    this.$router.userIsAuth) {
                        var e;
                        let s = new AbortController;
                        return s._dt = (new Date).getTime() + 6e4,
                        null != t && t.timeout ? (this.backgroundController && this.backgroundController._dt < (new Date).getTime() ? (this.backgroundController.abort(),
                        this.backgroundController = null) : this.backgroundController && (s = this.backgroundController),
                        setTimeout(()=>s.abort(), t.timeout)) : this.backgroundController = s,
                        this._syncProcess = null !== (e = this._syncProcess) && void 0 !== e ? e : this._sync(s.signal, "interval" === t),
                        this._syncProcess.catch(t=>{}
                        ).finally(()=>{
                            this.$router.userIsAuth && (this._migrate(),
                            this.localBasket.enrichProductsIfNeedAsync()),
                            this._syncProcess = null,
                            this.backgroundController = null
                        }
                        )
                    }
                }
                ,
                o._sync = async function(t, e) {
                    const s = await this.srv.sync(t, e);
                    "WbxBasket" === this.srv.name && (null != s && s.wbBasketMigrated || this._wbHittingTheRange()) && (await this.wbBasket.sync(t),
                    (null != s && s.wbBasketMigrated || this.wbBasket.storage.ts > 0) && (this.srv = this.wbBasket),
                    (null == s || !s.wbBasketMigrated) && this.wbBasket.storage.ts > 0 && await this.$services.apiUserStorage.setData([{
                        path: `/cart/${n.WB_BASKET_SYNC_FILE}`,
                        file: "W10="
                    }]))
                }
                ,
                o.addItem = function({model: t, product: e, stores: s}) {
                    const i = a.fromCardModel(t, e, s)
                      , r = this.localBasket.add(i);
                    return this.$router.userIsAuth && r.isSuccess && !r.isExist && this.srv.addItem(i),
                    r
                }
                ,
                o.addManyItems = function(t) {
                    if (null == t || !t.length)
                        return;
                    const e = t.map(t=>a.fromBasketInputExtended(t))
                      , s = this.localBasket.addManyItems(e);
                    return this.$router.userIsAuth && s.isSuccess && !s.isExist && this.srv.addManyItems(e),
                    s
                }
                ,
                o.refresh = function({data: t, type: e}) {
                    this.localBasket.refresh(t, e),
                    this.$router.userIsAuth && e && this.srv.refresh(t, e)
                }
                ,
                o.clearItems = function(t) {
                    null != t && t.length && (this.localBasket.clearItems(t),
                    this.$router.userIsAuth && this.srv.clearItems(t))
                }
                ,
                o.getItems = function() {
                    return this.localBasket.getItems().map(t=>new i(t))
                }
                ,
                o.getBankCards = async function(t=6e3, e="", s=!1) {
                    try {
                        var i;
                        const r = await this.$httpClient.fetchJSON(`${this.$services.cartService.publicBasketApiUrl}/webapi/lk/bankcards`, {
                            method: "POST",
                            credentials: "include",
                            body: new URLSearchParams({
                                currency: e,
                                bypassCache: s
                            })
                        }, {
                            timeout: t
                        });
                        return null !== (i = null == r ? void 0 : r.maskedCards) && void 0 !== i ? i : []
                    } catch (t) {
                        return []
                    }
                }
                ,
                o.save = function(t) {
                    this.localBasket.save(t)
                }
                ,
                o.get = function(t) {
                    return this.localBasket.get()
                }
                ,
                o.buyItNow = function(t) {
                    return t ? this.localBasket.buyItNow(t) : this.localBasket.get()
                }
                ,
                o._migrate = function() {
                    const t = this.localBasket.migrate();
                    0 !== t.length && this.srv.addManyItems(t)
                }
                ,
                _createClass(t, [{
                    key: "BasketItemSharedModel",
                    get: function() {
                        return i
                    }
                }, {
                    key: "publicBasketApiUrl",
                    get: function() {
                        var t;
                        return "localhost" === location.host ? "//localhost:5000" : null !== (t = wb.global.settings) && void 0 !== t && null !== (t = t.variables) && void 0 !== t && t.publicBasketApiUrl ? "www.wildberries.by" === location.host ? wb.global.settings.variables.publicBasketApiUrl.replace(".ru", ".by") : wb.global.settings.variables.publicBasketApiUrl : "www.wildberries.by" === location.host ? "//by-basket-api.wildberries.by" : `//${wb.settings.currentLocale}-basket-api.wildberries.ru`
                    }
                }, {
                    key: "deliveryWays",
                    get: function() {
                        var t;
                        let e = [{
                            id: 2,
                            code: "self",
                            name: "Пункт выдачи",
                            calendars: []
                        }, {
                            id: 1,
                            code: "courier",
                            name: "Курьером",
                            calendars: []
                        }];
                        return !1 === (null === (t = wb.global.settings) || void 0 === t || null === (t = t.switches) || void 0 === t ? void 0 : t.enableCourierDelivery) && (e = e.filter(t=>"courier" !== t.code)),
                        e
                    }
                }, {
                    key: "localCount",
                    get: function() {
                        return this.localBasket.count
                    }
                }, {
                    key: "currentDeliveryType",
                    get: function() {
                        return this.localBasket.getDeliveryPoint()
                    }
                }]),
                t
            }();
            module.exports = o
        }();

    }
    , {
        "./basket/localBasket": 89,
        "./basket/wb/basketItemSharedModel": 90,
        "./basket/wbCoolBasket": 93,
        "./basket/wbxBasket": 100
    }],
    102: [function(require, module, exports) {
        "use strict";
        function _inheritsLoose(e, t) {
            e.prototype = Object.create(t.prototype),
            e.prototype.constructor = e,
            _setPrototypeOf(e, t)
        }
        function _setPrototypeOf(e, t) {
            return (_setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                return e.__proto__ = t,
                e
            }
            )(e, t)
        }
        const SubjectMenu = require("./subjectMenu");
        let BrandMenu = function(e) {
            function t(t, n) {
                var r;
                return (r = e.call(this) || this).modules = t,
                r.brandConstructorService = n,
                r.brandData = null,
                r.fullMenu = null,
                r.menuByUrl = new Map,
                r.menuById = new Map,
                r
            }
            _inheritsLoose(t, e);
            var n = t.prototype;
            return n.initMenu = async function(t, n, r, i) {
                let s = await WbSpaModel.prototype.$httpClient.fetchBasicJSON(`https://static-basket-01.wbbasket.ru/vol0/data/brands/${t}.json`, {}, {
                    nullOnError: !0
                });
                if (!s) {
                    var a;
                    const e = null === (a = t.split("-")) || void 0 === a ? void 0 : a[0];
                    e && (s = await WbSpaModel.prototype.$httpClient.fetchBasicJSON(`https://static-basket-01.wbbasket.ru/vol0/data/brands-by-id/${e}.json`, {}, {
                        nullOnError: !0
                    })),
                    s && (location.href = $.views.helpers.brandUrl(s.url))
                }
                if (!s)
                    return null;
                e.prototype.menuBase || await SubjectMenu.init(),
                this.isConstructor = n.indexOf(s.id) >= 0,
                this.brandData = s;
                const o = $.views.helpers.brandUrl(s.url)
                  , u = await this._getMenuItems(s, r, o, i);
                this.fullMenu = this._getFullMenu(s, o, u, this.infoMenu),
                this._createMenuMap(),
                this.isInited = !0
            }
            ,
            n._getFullMenu = function(e, t, n, r=[]) {
                return [{
                    id: e.id + "b",
                    name: e.name,
                    url: t,
                    shard: this.isConstructor ? "" : this._brandToShard(e.name),
                    query: this.isConstructor ? "" : this._brandToQuery(e.id),
                    childs: n.concat(r)
                }]
            }
            ,
            n._getMenuItems = async function(e, t, n, r) {
                var i, s;
                if (!this.isConstructor)
                    return await this._getChildsFromSubjects(e, t, n);
                const a = this.brandConstructorService.getPageInfo(r)
                  , o = await this.brandConstructorService.getMenus(e, a.pageType, a.infoUrl, a.previewMode);
                if (this.previewMode = a.previewMode,
                this.hasCustomMenu = (null == o || null === (i = o.menu) || void 0 === i ? void 0 : i.length) > 0,
                (null == o || null === (s = o.infoMenu) || void 0 === s || null === (s = s.menuInfoItems) || void 0 === s ? void 0 : s.length) > 0 && (this.infoMenu = o.infoMenu.menuInfoItems.map(t=>(t.id = `${t.id}info`,
                t.url = `${n}/info/${t.href}`,
                t.isInfo = !0,
                this._convertBrandScemeItemToMenuItemDTO(t, e)))),
                this.hasCustomMenu)
                    return await this._getChildsFromCustomMenu(e, o.menu);
                const u = await this._getChildsFromSubjects(e, t, n)
                  , d = {
                    id: e.id + "b-all",
                    name: "Весь ассортимент",
                    url: `${n}/all`,
                    seo: `${e.name} Весь ассортимент`,
                    shard: this._brandToShard(e.name),
                    query: this._brandToQuery(e.id),
                    childs: []
                };
                return u.push(d),
                u
            }
            ,
            n._getChildsFromCustomMenu = async function(e, t) {
                const n = t.map(t=>this._convertBrandScemeItemToMenuItemDTO(t, e, !0));
                return n.sort((e,t)=>e - t),
                n
            }
            ,
            n._getChildsFromSubjects = async function(e, t, n) {
                var r, i;
                const s = this._brandToShard(e.name)
                  , a = this._brandToQuery(e.id)
                  , o = new this.modules.XCatalogData(a,s,"Brand")
                  , u = this.modules.xCatalogProvider.createGoodsProvider(o)
                  , d = await u.loadSubjectsAsync(t, o)
                  , l = null !== (r = null == d || null === (i = d.data) || void 0 === i || null === (i = i.filters.find(e=>"xsubject" === e.key)) || void 0 === i ? void 0 : i.items.map(e=>e.id)) && void 0 !== r ? r : []
                  , h = [];
                for (const t of this.menuBase) {
                    let r = !1;
                    const i = [];
                    for (const s of null !== (c = null == t ? void 0 : t.childs) && void 0 !== c ? c : []) {
                        var c;
                        if (l.indexOf(s.id) >= 0) {
                            r = !0;
                            const t = Object.assign({}, s);
                            t.seo = `${e.name} ${s.name}`,
                            t.url = `${n}/${t.url}`,
                            t.shard = this._brandToShard(e.name),
                            t.query = this._brandToQuery(e.id, t.id),
                            i.push(t)
                        }
                    }
                    if (r) {
                        const r = Object.assign({}, t);
                        r.seo = `${e.name} ${t.name}`,
                        r.url = `${n}/${t.url}`,
                        r.shard = this._brandToShard(e.name),
                        r.query = this._brandToQuery(e.id, r.id),
                        r.childs = i,
                        r.parent = e.id + "b",
                        h.push(r)
                    }
                }
                return h
            }
            ,
            n._convertBrandScemeItemToMenuItemDTO = function(e, t, n) {
                const r = this._getXQueryForMenuItem(t, e.query)
                  , i = {
                    id: e.id,
                    name: e.title,
                    url: e.url.toLowerCase(),
                    seo: `${t.name} ${e.title}`,
                    sort: e.sort,
                    shard: this._brandToShard(t.name),
                    query: r
                };
                return n && (i.isCustom = n,
                i.parentId = t.id + "b"),
                e.isInfo && (i.isInfo = !0),
                i
            }
            ,
            n._getXQueryForMenuItem = function(e, t) {
                const n = new URLSearchParams(t);
                return n.has("type") && n.delete("type"),
                n.set("brand", e.id),
                decodeURIComponent(n)
            }
            ,
            n.getBrandInfo = function() {
                var e;
                return {
                    id: this.brandData.siteId,
                    brandCod: this.brandData.id,
                    name: this.brandData.name,
                    brandLink: $.views.helpers.brandUrl(this.brandData.url),
                    logoUrl: $.views.helpers.forBrandLogoFromId(null !== (e = this.brandData.hash) && void 0 !== e ? e : this.brandData.id)
                }
            }
            ,
            n.getCurrentMenuItem = function(e) {
                var t, n, r;
                if (!(e = null !== (t = null === (n = e) || void 0 === n ? void 0 : n.pathname) && void 0 !== t ? t : e))
                    return null;
                const i = e.replace("/data", "").replace("/preview", "");
                let s = this.menuByUrl.get(i);
                return !s && this.hasCustomMenu && this.menuByUrl.forEach(e=>{
                    e.url.split("?")[0] == i && (s = e)
                }
                ),
                null !== (r = s) && void 0 !== r ? r : this.menuByUrl.get(i.slice(0, i.lastIndexOf("/")))
            }
            ,
            n.getSitePathItems = function(e) {
                if (!e)
                    return null;
                const t = [];
                t.push({
                    id: e.id,
                    name: e.name,
                    pageUrl: e.url,
                    isInfo: e.isInfo,
                    analytic: ["BCA", null, null, e.id]
                });
                let n = this.menuById.get(e.id).parentId;
                for (; null != n; ) {
                    const e = this.menuById.get(n);
                    t.push({
                        id: n,
                        name: e.name,
                        pageUrl: e.url,
                        analytic: ["BCA", null, null, n]
                    }),
                    n = e.parentId
                }
                const r = this._brandLetterToSitePathParam(this.brandData.letter);
                return t.push({
                    id: 0,
                    name: `Бренды на «${r.toUpperCase()}»`,
                    pageUrl: `/wildberries/brandlist.aspx?letter=${r}`
                }),
                t.reverse()
            }
            ,
            n.getCatalogMenu = function(e) {
                var t;
                const n = [];
                if ((e = null === (t = e) || void 0 === t ? void 0 : t.filter(e=>!e.isInfo)) && 0 !== e.length)
                    if (1 === e.length) {
                        var r, i;
                        const t = {
                            name: "",
                            link: ""
                        }
                          , s = null !== (r = null === (i = this.menuByUrl.get(e[0].pageUrl).childs) || void 0 === i ? void 0 : i.filter(e=>!e.isInfo).map(e=>({
                            node: {
                                id: e.id,
                                name: e.name,
                                link: e.url
                            },
                            children: []
                        }))) && void 0 !== r ? r : [];
                        n.push({
                            node: t,
                            children: s
                        })
                    } else {
                        var s, a;
                        const t = this.menuByUrl.get(e[1].pageUrl)
                          , r = {
                            id: t.id,
                            isOpen: !0,
                            lastSelected: e[e.length - 1].id === t.id,
                            link: t.isDenyLink ? null : t.url,
                            name: t.name
                        }
                          , i = r.lastSelected ? null !== (s = null === (a = t.childs) || void 0 === a ? void 0 : a.filter(e=>!e.isInfo).map(e=>({
                            node: {
                                id: e.id,
                                name: e.name,
                                link: e.url
                            },
                            children: []
                        }))) && void 0 !== s ? s : [] : this.getCatalogMenu(e.slice(1));
                        n.push({
                            node: r,
                            children: i
                        })
                    }
                else
                    n.push({
                        node: {
                            name: "",
                            link: ""
                        },
                        children: []
                    });
                return n
            }
            ,
            n.hasItem = function(e) {
                return !!e && this.menuById.has(e)
            }
            ,
            n.getCatalogLink = function(e) {
                return this.menuById.get(e).url
            }
            ,
            n.getParents = function(e) {
                const t = [];
                let n = this.menuById.get(e).parentId;
                for (; null != n; ) {
                    const e = this.menuById.get(n);
                    t.push(e.name),
                    n = e.parentId
                }
                return t.reverse()
            }
            ,
            n.getRootNode = function(e) {
                let t = this.menuById.get(e.id);
                for (; null != t.parentId; )
                    t = this.menuById.get(t.parentId);
                return this._adaptMenu(t)
            }
            ,
            n._createMenuMap = function() {
                this.fullMenu.forEach(e=>this._setNode(e, null))
            }
            ,
            n._setNode = function(e, t, n) {
                var r;
                this.menuByUrl.set(e.url, e),
                this.menuById.set(e.id, {
                    parentId: t,
                    url: e.url,
                    name: e.name,
                    childs: e.childs,
                    id: e.id
                }),
                null === (r = e.childs) || void 0 === r || r.forEach(t=>this._setNode(t, e.id, n))
            }
            ,
            n._brandToShard = function(e) {
                const t = e ? e.toLowerCase() : " "
                  , n = t.charCodeAt(0);
                return 48 <= n && n <= 57 || 97 <= n && n <= 122 || 1072 <= n && n <= 1105 ? `brands/${t[0]}` : "brands/special"
            }
            ,
            n._brandToQuery = function(e, t) {
                return t ? `brand=${e}&subject=${t}` : `brand=${e}`
            }
            ,
            n._brandLetterToSitePathParam = function(e) {
                const t = e.charCodeAt(0);
                return 1072 <= t && t <= 1105 ? "а-я" : 97 <= t && t <= 122 ? e : "123"
            }
            ,
            n._adaptMenu = function(e) {
                var t;
                const n = this.menuById.get(e.id);
                return n.childs = null === (t = n.childs) || void 0 === t ? void 0 : t.map(e=>this._adaptMenu(e)),
                n
            }
            ,
            t
        }(SubjectMenu);
        module.exports = BrandMenu;

    }
    , {
        "./subjectMenu": 107
    }],
    103: [function(require, module, exports) {
        "use strict";
        let CatalogMenu = function() {
            function e() {
                this.fullMenu = null,
                this.menuByUrl = new Map,
                this.menuById = new Map,
                this.isInited = !1,
                this.menuIdEnum = this._menuIdEnum()
            }
            var n = e.prototype;
            return n._menuIdEnum = function() {
                return {
                    sport: 784,
                    monocity: 61042,
                    forAdults: 62057,
                    promotion: 2192
                }
            }
            ,
            n.initMenu = async function() {
                const e = `main-menu-${WbSpaModel.prototype.$user.getLocale()}-ru-v2.json`;
                return this.fullMenu = await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(e, 1e4),
                this.fullMenu && (this._createMenuMap(),
                this.isInited = !0),
                this
            }
            ,
            n.getCurrentMenuItem = function(e) {
                if (!e)
                    return null;
                const n = e.pathname.replace("catalogdata", "catalog");
                return this.menuByUrl.get(n)
            }
            ,
            n.getSitePathItems = function(e) {
                if (!e)
                    return null;
                const n = [];
                n.push({
                    id: e.id,
                    name: e.name,
                    pageUrl: e.url,
                    analytic: ["CCC", null, null, e.id]
                });
                let t = this.menuById.get(e.id).parentId;
                for (; null != t; ) {
                    const e = this.menuById.get(t);
                    n.push({
                        id: t,
                        name: e.name,
                        pageUrl: e.url,
                        analytic: ["CCC", null, null, t]
                    }),
                    t = e.parentId
                }
                return n.reverse()
            }
            ,
            n.getCatalogMenu = function(e) {
                const n = [];
                if (e && 0 !== e.length)
                    if (1 === e.length) {
                        var t, l;
                        const i = {
                            name: "",
                            link: ""
                        }
                          , r = null !== (t = null === (l = this.menuByUrl.get(e[0].pageUrl).childs) || void 0 === l ? void 0 : l.map(e=>({
                            node: {
                                id: e.id,
                                name: e.name,
                                link: e.url,
                                isDenyLink: e.isDenyLink
                            },
                            children: []
                        }))) && void 0 !== t ? t : [];
                        n.push({
                            node: i,
                            children: r
                        })
                    } else {
                        var i, r;
                        const t = this.menuByUrl.get(e[1].pageUrl)
                          , l = {
                            id: t.id,
                            isOpen: !0,
                            lastSelected: e[e.length - 1].id === t.id,
                            link: t.url,
                            name: t.name
                        }
                          , u = l.lastSelected ? null !== (i = null === (r = t.childs) || void 0 === r ? void 0 : r.map(e=>{
                            var n;
                            return {
                                node: {
                                    id: e.id,
                                    name: e.name,
                                    link: e.url,
                                    isDenyLink: e.isDenyLink
                                },
                                children: null === (n = e.childs) || void 0 === n ? void 0 : n.map(e=>({
                                    node: {
                                        id: e.id,
                                        name: e.name,
                                        link: e.url
                                    },
                                    children: []
                                }))
                            }
                        }
                        )) && void 0 !== i ? i : [] : this.getCatalogMenu(e.slice(1));
                        n.push({
                            node: l,
                            children: u
                        })
                    }
                else
                    n.push({
                        node: {
                            name: "",
                            link: ""
                        },
                        children: []
                    });
                return n
            }
            ,
            n.getCatalogDenyMenu = function(e, n) {
                var t, l, i, r;
                if (!e)
                    return;
                const u = n[n.length - 2]
                  , a = n.slice(1).map(e=>({
                    name: e.name,
                    link: e.pageUrl
                }));
                a[a.length - 1].lastSelected = !0;
                const s = null === (t = e.childs) || void 0 === t ? void 0 : t.map(e=>({
                    name: e.name,
                    link: e.url,
                    anc: !0
                }));
                if ((null === (l = e.childs) || void 0 === l ? void 0 : l.length) > 0)
                    return {
                        current: {
                            name: e.name,
                            link: e.url,
                            isTop: e.isTop,
                            lastSelected: !1
                        },
                        sideMenu: [...a, ...s],
                        parent: {
                            name: u.name,
                            link: u.pageUrl
                        },
                        parents: this.getParentsForDeny(e.id),
                        tagsMenu: null != s ? s : []
                    };
                const o = this.menuByUrl.get(u.pageUrl);
                return {
                    current: {
                        name: e.name,
                        link: e.url,
                        isTop: e.isTop,
                        lastSelected: !0
                    },
                    sideMenu: a,
                    parent: {
                        name: u.name,
                        link: u.pageUrl
                    },
                    parents: this.getParentsForDeny(e.id),
                    tagsMenu: null !== (i = null === (r = o.childs) || void 0 === r ? void 0 : r.map(e=>({
                        name: e.name,
                        link: e.url
                    }))) && void 0 !== i ? i : []
                }
            }
            ,
            n.getRootNode = function(e) {
                let n = e;
                for (; null != n.parentId; )
                    n = this.menuById.get(n.parentId);
                return n
            }
            ,
            n.hasItem = function(e) {
                return !!e && this.menuById.has(e)
            }
            ,
            n.getCatalogLink = function(e) {
                return this.menuById.get(e).url
            }
            ,
            n.getParents = function(e) {
                const n = [];
                let t = this.menuById.get(e).parentId;
                for (; null != t; ) {
                    const e = this.menuById.get(t);
                    n.push(e.name),
                    t = e.parentId
                }
                return n.reverse()
            }
            ,
            n.getParentsForDeny = function(e) {
                const n = [];
                let t = this.menuById.get(e).parentId;
                for (; null != t; ) {
                    const e = this.menuById.get(t);
                    n.push({
                        name: e.name,
                        link: e.url
                    }),
                    t = e.parentId
                }
                return n.reverse()
            }
            ,
            n._createMenuMap = function() {
                this.fullMenu.forEach(e=>this._setNode(e, null))
            }
            ,
            n._setNode = function(e, n) {
                var t;
                n && (e.parentId = n),
                this.menuByUrl.has(e.url) && !e.shard || (this.menuByUrl.set(e.url, e),
                this.menuById.set(e.id, e)),
                null === (t = e.childs) || void 0 === t || t.forEach(n=>this._setNode(n, e.id))
            }
            ,
            n._prepareDropdownMenu = function(e, n=null) {
                const t = {
                    parentItem: n
                };
                for (let n in e)
                    e.hasOwnProperty(n) && (Array.isArray(e[n]) ? t[n] = e[n].map(e=>this._prepareDropdownMenu(e, t)) : t[n] = e[n]);
                return t
            }
            ,
            e
        }();
        module.exports = CatalogMenu;

    }
    , {}],
    104: [function(require, module, exports) {
        "use strict";
        let PromoMenu = function() {
            function e() {
                this.fullMenu = null,
                this.menuByUrl = new Map,
                this.menuById = new Map
            }
            var n = e.prototype;
            return n.getPromoIdByUrl = async function(e) {
                var n;
                const t = `promotions/${e}-v3.json`
                  , i = await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(t, 1e4);
                return null !== (n = null == i ? void 0 : i.promo.id) && void 0 !== n ? n : 0
            }
            ,
            n.initMenu = async function(e) {
                const n = `promotions/${e}-v3.json`
                  , t = await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(n, 1e4);
                var i;
                t && (this.fullMenu = t.menu,
                this.promoId = null !== (i = t.promo.id) && void 0 !== i ? i : 0,
                this.isSpecial = t.promo.isSpecial,
                this._createMenuMap());
                this.isInited = !0
            }
            ,
            n.getCurrentMenuItem = function(e) {
                if (!e)
                    return null;
                const n = e.pathname.replace("promotionscatalogdata", "promotions");
                return this.menuByUrl.get(n)
            }
            ,
            n.getSitePathItems = function(e) {
                if (!e)
                    return null;
                const n = [];
                n.push({
                    id: e.id,
                    name: e.name,
                    pageUrl: e.url
                });
                let t = this.menuById.get(e.id).parentId;
                for (; null != t; ) {
                    const e = this.menuById.get(t);
                    n.push({
                        id: t,
                        name: e.name,
                        pageUrl: e.url
                    }),
                    t = e.parentId
                }
                return n.push({
                    id: 2192,
                    name: "Акции",
                    pageUrl: "/promotions"
                }),
                n.reverse()
            }
            ,
            n.getCatalogMenu = function(e, n) {
                var t, i, l, a, r, o;
                if (!e)
                    return;
                if (e.landing || 2 === n.length)
                    return {
                        current: {
                            name: e.name,
                            link: e.url,
                            isTop: e.isTop,
                            lastSelected: !1
                        },
                        sideMenu: [],
                        parent: {},
                        parents: [],
                        tagsMenu: null !== (r = null === (o = e.childNodes) || void 0 === o ? void 0 : o.map(e=>({
                            name: e.name,
                            link: e.url
                        }))) && void 0 !== r ? r : []
                    };
                const u = n[n.length - 2]
                  , s = n.slice(1).map(e=>({
                    name: e.name,
                    link: e.pageUrl
                }));
                s[s.length - 1].lastSelected = !0;
                const d = null === (t = e.childNodes) || void 0 === t ? void 0 : t.map(e=>({
                    name: e.name,
                    link: e.url,
                    anc: !0
                }));
                if ((null === (i = e.childNodes) || void 0 === i ? void 0 : i.length) > 0)
                    return {
                        current: {
                            name: e.name,
                            link: e.url,
                            isTop: e.isTop,
                            lastSelected: !1
                        },
                        sideMenu: [...s, ...d],
                        parent: {
                            name: u.name,
                            link: u.pageUrl
                        },
                        parents: this.getParents(e.id),
                        tagsMenu: null != d ? d : []
                    };
                const p = this.menuByUrl.get(u.pageUrl);
                return {
                    current: {
                        name: e.name,
                        link: e.url,
                        isTop: e.isTop,
                        lastSelected: !0
                    },
                    sideMenu: s,
                    parent: {
                        name: u.name,
                        link: u.pageUrl
                    },
                    parents: this.getParents(e.id),
                    tagsMenu: null !== (l = null === (a = p.childNodes) || void 0 === a ? void 0 : a.map(e=>({
                        name: e.name,
                        link: e.url
                    }))) && void 0 !== l ? l : []
                }
            }
            ,
            n.hasItem = function(e) {
                return !!e && this.menuById.has(e)
            }
            ,
            n.getCatalogLink = function(e) {
                return this.menuById.get(e).url
            }
            ,
            n.getParents = function(e) {
                const n = [];
                let t = this.menuById.get(e).parentId;
                for (; null != t; ) {
                    const e = this.menuById.get(t);
                    n.push({
                        name: e.name,
                        link: e.url,
                        isLanding: e.landing
                    }),
                    t = e.parentId
                }
                return n.reverse()
            }
            ,
            n.getRootNode = function(e) {
                let n = this.menuById.get(e.id);
                for (; null != n.parentId; )
                    n = this.menuById.get(n.parentId);
                return this._adaptMenu(n)
            }
            ,
            n._createMenuMap = function() {
                this.fullMenu.forEach(e=>this._setNode(e, null))
            }
            ,
            n._setNode = function(e, n) {
                var t;
                this.menuByUrl.set(e.url, e),
                this.menuById.set(e.id, {
                    id: e.id,
                    parentId: n,
                    url: e.url,
                    name: e.name,
                    landing: e.landing,
                    childs: e.childNodes,
                    promoId: this.promoId
                }),
                null === (t = e.childNodes) || void 0 === t || t.forEach(n=>this._setNode(n, e.id))
            }
            ,
            n._adaptMenu = function(e) {
                var n;
                const t = this.menuById.get(e.id);
                return t.childs = null === (n = t.childs) || void 0 === n ? void 0 : n.map(e=>this._adaptMenu(e)),
                t
            }
            ,
            e
        }();
        module.exports = PromoMenu;

    }
    , {}],
    105: [function(require, module, exports) {
        "use strict";
        function _defineProperties(e, t) {
            for (var r = 0; r < t.length; r++) {
                var n = t[r];
                n.enumerable = n.enumerable || !1,
                n.configurable = !0,
                "value"in n && (n.writable = !0),
                Object.defineProperty(e, _toPropertyKey(n.key), n)
            }
        }
        function _createClass(e, t, r) {
            return t && _defineProperties(e.prototype, t),
            r && _defineProperties(e, r),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            e
        }
        function _toPropertyKey(e) {
            var t = _toPrimitive(e, "string");
            return "symbol" == typeof t ? t : String(t)
        }
        function _toPrimitive(e, t) {
            if ("object" != typeof e || !e)
                return e;
            var r = e[Symbol.toPrimitive];
            if (void 0 !== r) {
                var n = r.call(e, t || "default");
                if ("object" != typeof n)
                    return n;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === t ? String : Number)(e)
        }
        function _inheritsLoose(e, t) {
            e.prototype = Object.create(t.prototype),
            e.prototype.constructor = e,
            _setPrototypeOf(e, t)
        }
        function _setPrototypeOf(e, t) {
            return (_setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                return e.__proto__ = t,
                e
            }
            )(e, t)
        }
        const SubjectMenu = require("./subjectMenu");
        let SearchMenu = function(e) {
            function t(t) {
                var r;
                return (r = e.call(this) || this).modules = t,
                r.fullMenu = null,
                r.menuById = new Map,
                r.rootMenuId = null,
                r
            }
            _inheritsLoose(t, e);
            var r = t.prototype;
            return r.initMenu = async function(t, r) {
                var n, o, i;
                e.prototype.menuBase || await SubjectMenu.init();
                const u = this.modules.CatalogProvider.createGoodsProvider(r)
                  , s = await u.loadSubjectsAsync(t);
                null != s && null !== (n = s.metadata) && void 0 !== n && n.name && r.search !== s.metadata.name && (r.search = s.metadata.name);
                const a = null !== (o = null == s || null === (i = s.data) || void 0 === i || null === (i = i.filters.find(e=>"xsubject" === e.key)) || void 0 === i ? void 0 : i.items.toHashSet(e=>e.id)) && void 0 !== o ? o : new Set
                  , l = r.search.toSafeString();
                this.rootMenuId = this._searchToHash(r.search) + "s",
                this.fullMenu = [{
                    id: this.rootMenuId,
                    name: r.search,
                    url: `/catalog/0/search.aspx?search=${l}${1 === r.nocorrection ? "&nocorrection=1" : ""}`,
                    shard: null,
                    query: null,
                    childs: []
                }];
                for (const e of this.menuBase) {
                    let t = !1;
                    const n = [];
                    for (const o of null !== (c = null == e ? void 0 : e.childs) && void 0 !== c ? c : []) {
                        var c;
                        if (a.has(o.id)) {
                            var d;
                            t = !0;
                            const e = Object.assign({}, o);
                            e.url = `/catalog/0/search.aspx?search=${l}&ssubject=${e.id}${1 === r.nocorrection ? "&nocorrection=1" : ""}`,
                            e.shard = null,
                            e.query = null,
                            e.parentId = null !== (d = e.parentId) && void 0 !== d ? d : this.rootMenuId,
                            n.push(e)
                        }
                    }
                    if (t) {
                        const t = Object.assign({}, e);
                        t.url = `/catalog/0/search.aspx?search=${l}&ssubject=${t.id}${1 === r.nocorrection ? "&nocorrection=1" : ""}`,
                        t.shard = null,
                        t.query = null,
                        t.childs = n,
                        t.parentId = this.rootMenuId,
                        this.fullMenu[0].childs.push(t)
                    }
                }
                this._createMenuMap(),
                this.isInited = !0
            }
            ,
            r.getCurrentMenuItem = function(e) {
                var t, r;
                return null !== (t = this.menuById.get(null !== (r = Number.tryParseInt(e)) && void 0 !== r ? r : this.rootMenuId)) && void 0 !== t ? t : this.menuById.get(this.rootMenuId)
            }
            ,
            r.getRootNode = function(e) {
                if (null == e)
                    return null;
                let t = this.menuById.get(e.id);
                for (; null != t.parentId; )
                    t = this.menuById.get(t.parentId);
                return this._adaptMenu(t)
            }
            ,
            r._createMenuMap = function() {
                this.fullMenu.forEach(e=>this._setNode(e, null))
            }
            ,
            r._setNode = function(e, t) {
                var r;
                this.menuById.set(e.id, {
                    parentId: t,
                    url: e.url,
                    name: e.name,
                    id: e.id,
                    childs: e.childs
                }),
                null === (r = e.childs) || void 0 === r || r.forEach(t=>this._setNode(t, e.id))
            }
            ,
            r._adaptMenu = function(e) {
                var t;
                const r = this.menuById.get(e.id);
                return r.childs = null === (t = r.childs) || void 0 === t ? void 0 : t.map(e=>this._adaptMenu(e)),
                r
            }
            ,
            r._searchToHash = function(e) {
                var t, r = 0;
                if (0 === e.length)
                    return r;
                for (t = 0; t < e.length; t++)
                    r = (r << 5) - r + e.charCodeAt(t),
                    r |= 0;
                return r
            }
            ,
            _createClass(t, [{
                key: "$httpClient",
                get: function() {
                    return WbSpaModel.prototype.$httpClient
                }
            }]),
            t
        }(SubjectMenu);
        module.exports = SearchMenu;

    }
    , {
        "./subjectMenu": 107
    }],
    106: [function(require, module, exports) {
        "use strict";
        function _inheritsLoose(e, t) {
            e.prototype = Object.create(t.prototype),
            e.prototype.constructor = e,
            _setPrototypeOf(e, t)
        }
        function _setPrototypeOf(e, t) {
            return (_setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                return e.__proto__ = t,
                e
            }
            )(e, t)
        }
        const SubjectMenu = require("./subjectMenu");
        let SellerMenu = function(e) {
            function t(t) {
                var n;
                return (n = e.call(this) || this).modules = t,
                n.sellerData = null,
                n.fullMenu = null,
                n.menuByUrl = new Map,
                n.menuById = new Map,
                n.shard = "sellers",
                n
            }
            _inheritsLoose(t, e);
            var n = t.prototype;
            return n.initMenu = async function(t, n) {
                var r, i, l, s;
                e.prototype.menuBase || await SubjectMenu.init();
                const u = this.shard
                  , o = this._sellerToQuery(t, null)
                  , a = new this.modules.XCatalogData(o,u,"Seller")
                  , d = this.modules.xCatalogProvider.createGoodsProvider(a)
                  , c = await d.loadSubjectsAsync(n, a)
                  , h = await this._getSellerData(t);
                this.sellerData = h,
                this.fullMenu = [{
                    id: h.id + "s",
                    name: this._trimSellerOrgForms(null !== (r = null !== (i = h.trademark) && void 0 !== i ? i : h.fineName) && void 0 !== r ? r : h.name, h.orgForms),
                    url: "/seller/" + h.id,
                    shard: this.shard,
                    query: this._sellerToQuery(h.id, null),
                    childs: [],
                    title: "Все товары"
                }];
                const p = null !== (l = null == c || null === (s = c.data) || void 0 === s || null === (s = s.filters.find(e=>"xsubject" === e.key)) || void 0 === s ? void 0 : s.items.toHashSet(e=>e.id)) && void 0 !== l ? l : new Set;
                for (const e of this.menuBase) {
                    let t = !1;
                    const n = [];
                    for (const r of null !== (m = null == e ? void 0 : e.childs) && void 0 !== m ? m : []) {
                        var m;
                        if (p.has(r.id)) {
                            var f;
                            t = !0;
                            const e = Object.assign({}, r);
                            e.url = `/seller/${h.id}/${e.url}`,
                            e.shard = this.shard,
                            e.query = this._sellerToQuery(h.id, e.id),
                            e.parentId = null !== (f = e.parentId) && void 0 !== f ? f : h.id + "s",
                            e.title = e.name,
                            n.push(e)
                        }
                    }
                    if (t) {
                        const t = Object.assign({}, e);
                        t.url = `/seller/${h.id}/${e.url}`,
                        t.shard = this.shard,
                        t.query = this._sellerToQuery(h.id, t.id),
                        t.childs = n,
                        t.parentId = h.id + "s",
                        t.title = t.name,
                        this.fullMenu[0].childs.push(t)
                    }
                }
                this._createMenuMap(),
                this.isInited = !0
            }
            ,
            n.getSellerInfo = function() {
                return this.sellerData
            }
            ,
            n.getCurrentMenuItem = function(e) {
                var t;
                if (!e)
                    return null;
                const n = e.pathname.replace("/data", "");
                return null !== (t = this.menuByUrl.get(n)) && void 0 !== t ? t : this.menuByUrl.get(n.slice(0, n.lastIndexOf("/")))
            }
            ,
            n.getSitePathItems = function(e) {
                if (!e)
                    return null;
                const t = [];
                t.push({
                    id: e.id,
                    name: e.name,
                    pageUrl: e.url
                });
                let n = this.menuById.get(e.id).parentId;
                for (; null != n; ) {
                    const e = this.menuById.get(n);
                    t.push({
                        id: n,
                        name: e.name,
                        pageUrl: e.url
                    }),
                    n = e.parentId
                }
                return t.reverse()
            }
            ,
            n.getCatalogMenu = function(e) {
                const t = [];
                if (e && 0 !== e.length)
                    if (1 === e.length) {
                        var n, r;
                        const i = {
                            name: "",
                            link: ""
                        }
                          , l = null !== (n = null === (r = this.menuByUrl.get(e[0].pageUrl).childs) || void 0 === r ? void 0 : r.map(e=>({
                            node: {
                                id: e.id,
                                name: e.name,
                                link: e.url
                            },
                            children: []
                        }))) && void 0 !== n ? n : [];
                        t.push({
                            node: i,
                            children: l
                        })
                    } else {
                        var i, l;
                        const n = this.menuByUrl.get(e[1].pageUrl)
                          , r = {
                            id: n.id,
                            isOpen: !0,
                            lastSelected: e[e.length - 1].id === n.id,
                            link: n.url,
                            name: n.name
                        }
                          , s = r.lastSelected ? null !== (i = null === (l = n.childs) || void 0 === l ? void 0 : l.map(e=>({
                            node: {
                                id: e.id,
                                name: e.name,
                                link: e.url
                            },
                            children: []
                        }))) && void 0 !== i ? i : [] : this.getCatalogMenu(e.slice(1));
                        t.push({
                            node: r,
                            children: s
                        })
                    }
                else
                    t.push({
                        node: {
                            name: "",
                            link: ""
                        },
                        children: []
                    });
                return t
            }
            ,
            n.hasItem = function(e) {
                return !!e && this.menuById.has(e)
            }
            ,
            n.getCatalogLink = function(e) {
                return this.menuById.get(e).url
            }
            ,
            n.getParents = function(e) {
                const t = [];
                let n = this.menuById.get(e).parentId;
                for (; null != n; ) {
                    const e = this.menuById.get(n);
                    t.push(e.name),
                    n = e.parentId
                }
                return t.reverse()
            }
            ,
            n.getRootNode = function(e) {
                let t = this.menuById.get(e.id);
                for (; null != t.parentId; )
                    t = this.menuById.get(t.parentId);
                return this._adaptMenu(t)
            }
            ,
            n._getSellerData = async function(e) {
                var t;
                const n = {
                    id: e,
                    isUnknown: !0,
                    name: $.localize("Продавец")
                }
                  , r = await WbSpaModel.prototype.$httpClient.fetchBasicJSON(`https://static-basket-01.wbbasket.ru/vol0/data/supplier-by-id/${e}.json`, {}, {
                    nullOnError: !0
                });
                if (!r)
                    return n;
                const i = WbSpaModel.prototype.$services.suppliersService.setSupplierInfo(r);
                return {
                    id: i.supplierId,
                    name: null !== (t = i.supplierFullName) && void 0 !== t ? t : i.supplierName,
                    fineName: this._trimSellerOrgForms(i.supplierName, i.orgForms),
                    ogrn: i.ogrn,
                    ogrnip: i.ogrnip,
                    taxpayerCode: i.taxpayerCode,
                    inn: i.inn,
                    kpp: i.kpp,
                    unp: i.unp,
                    bin: i.bin,
                    unn: i.unn,
                    trademark: i.trademark,
                    legalAddress: i.legalAddress,
                    isUnknown: !1,
                    orgForms: i.orgForms
                }
            }
            ,
            n._trimSellerOrgForms = function(e, t=[]) {
                return $.views.converters.trimWord(e, t)
            }
            ,
            n._createMenuMap = function() {
                this.fullMenu.forEach(e=>this._setNode(e, null))
            }
            ,
            n._setNode = function(e, t) {
                var n;
                this.menuByUrl.set(e.url, e),
                this.menuById.set(e.id, {
                    parentId: t,
                    url: e.url,
                    name: e.name,
                    id: e.id,
                    childs: e.childs
                }),
                null === (n = e.childs) || void 0 === n || n.forEach(t=>this._setNode(t, e.id))
            }
            ,
            n._sellerToQuery = function(e, t) {
                return t ? `supplier=${e}&subject=${t}` : `supplier=${e}`
            }
            ,
            n._adaptMenu = function(e) {
                var t;
                const n = this.menuById.get(e.id);
                return n.childs = null === (t = n.childs) || void 0 === t ? void 0 : t.map(e=>this._adaptMenu(e)),
                n
            }
            ,
            t
        }(SubjectMenu);
        module.exports = SellerMenu;

    }
    , {
        "./subjectMenu": 107
    }],
    107: [function(require, module, exports) {
        "use strict";
        function _defineProperties(e, t) {
            for (var r = 0; r < t.length; r++) {
                var o = t[r];
                o.enumerable = o.enumerable || !1,
                o.configurable = !0,
                "value"in o && (o.writable = !0),
                Object.defineProperty(e, _toPropertyKey(o.key), o)
            }
        }
        function _createClass(e, t, r) {
            return t && _defineProperties(e.prototype, t),
            r && _defineProperties(e, r),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            e
        }
        function _toPropertyKey(e) {
            var t = _toPrimitive(e, "string");
            return "symbol" == typeof t ? t : String(t)
        }
        function _toPrimitive(e, t) {
            if ("object" != typeof e || !e)
                return e;
            var r = e[Symbol.toPrimitive];
            if (void 0 !== r) {
                var o = r.call(e, t || "default");
                if ("object" != typeof o)
                    return o;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === t ? String : Number)(e)
        }
        let SubjectMenu = function() {
            function e() {}
            e.init = async function() {
                var t;
                if (e.prototype.menuBaseData)
                    return;
                e.prototype.menuBaseData = null !== (t = await WbSpaModel.prototype.$httpClient.fetchStaticDataV2("subject-base.json", 1e4)) && void 0 !== t ? t : [],
                e.prototype.menuByIdData = new Map,
                e.prototype._createMenuMap()
            }
            ;
            var t = e.prototype;
            return t._createMenuMap = function() {
                e.prototype.menuBase.forEach(t=>e.prototype._setNode(t, null))
            }
            ,
            t._setNode = function(t, r) {
                var o;
                r && (t.parentId = r),
                e.prototype.menuByIdData.set(t.id, t),
                null === (o = t.childs) || void 0 === o || o.forEach(r=>e.prototype._setNode(r, t.id))
            }
            ,
            _createClass(e, [{
                key: "menuBase",
                get: function() {
                    return e.prototype.menuBaseData
                },
                set: function(t) {
                    e.prototype.menuBaseData = t
                }
            }], [{
                key: "menuById",
                get: function() {
                    return e.prototype.menuByIdData
                }
            }]),
            e
        }();
        module.exports = SubjectMenu;

    }
    , {}],
    108: [function(require, module, exports) {
        "use strict";
        function _defineProperties(e, t) {
            for (var o = 0; o < t.length; o++) {
                var a = t[o];
                a.enumerable = a.enumerable || !1,
                a.configurable = !0,
                "value"in a && (a.writable = !0),
                Object.defineProperty(e, _toPropertyKey(a.key), a)
            }
        }
        function _createClass(e, t, o) {
            return t && _defineProperties(e.prototype, t),
            o && _defineProperties(e, o),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            e
        }
        function _toPropertyKey(e) {
            var t = _toPrimitive(e, "string");
            return "symbol" == typeof t ? t : String(t)
        }
        function _toPrimitive(e, t) {
            if ("object" != typeof e || !e)
                return e;
            var o = e[Symbol.toPrimitive];
            if (void 0 !== o) {
                var a = o.call(e, t || "default");
                if ("object" != typeof a)
                    return a;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === t ? String : Number)(e)
        }
        const SYNC_TYPES = require("./favoriteGoodsSyncTypes")
          , FavoriteGoodsCacheModel = require("./favoriteGoodsCacheModel")
          , FAVORITE_SOURCE_TYPES = require("./favoritesSourceType")
          , CURRENT_VERSION = 1
          , CACHE_KEY = "user_favorite_goods_{0}_v{1}"
          , LAST_SYNC_CHACHE_KEY = "favorite_last_sync_dt_{0}_v{1}"
          , TABS_SYNC_STATE_KEY = "favorite_tabs_sync_v{0}";
        let FavoriteServiceCacheHelper = function() {
            function e(e) {
                this.uid = null,
                this.cacheModel = null,
                this._storageHelper = e,
                this._bindEvents()
            }
            var t = e.prototype;
            return t.setKey = function(e) {
                this.uid = e,
                this._checkOldCache(),
                this.cacheModel = null
            }
            ,
            t.getLastSyncDt = async function() {
                if (null == this.uid)
                    return -1;
                try {
                    var e;
                    const t = await this._openIDb()
                      , o = await this._storageHelper.getItem(t, this.lastSyncCacheKey, "sync_dt");
                    return null !== (e = null == o ? void 0 : o.lastSyncDt) && void 0 !== e ? e : -1
                } catch (e) {
                    return this.getLastSyncDtFromLocalStorage()
                }
            }
            ,
            t.getLastSyncDtFromLocalStorage = function() {
                var e;
                if (null == this.uid)
                    return -1;
                const t = null !== (e = localStorage.getItem(this.lastSyncCacheKey)) && void 0 !== e ? e : -1;
                return parseInt(localStorage.hasItem(this.cacheKey) ? t : -1)
            }
            ,
            t.setLastSyncDt = async function(e) {
                if (!(await this.getLastSyncDt() >= e || null == this.uid))
                    try {
                        const t = await this._openIDb();
                        await this._storageHelper.setItem(t, this.lastSyncCacheKey, {
                            name: "sync_dt",
                            lastSyncDt: e
                        })
                    } catch (t) {
                        localStorage.setItem(this.lastSyncCacheKey, e)
                    }
            }
            ,
            t.clearLastSyncDt = async function() {
                try {
                    const e = await this._openIDb();
                    await this._storageHelper.removeItem(e, this.lastSyncCacheKey, "sync_dt")
                } catch (e) {
                    localStorage.removeItem(this.lastSyncCacheKey)
                }
            }
            ,
            t.getFavoriteGoods = async function(e=!1) {
                if (null == this.uid && (this.cacheModel = new FavoriteGoodsCacheModel([],!0)),
                !this.cacheModel) {
                    let e = await this._fetchFromIDb();
                    null == e && (e = localStorage.getObject(this.cacheKey)),
                    this.cacheModel = null == e ? new FavoriteGoodsCacheModel([],!0) : new FavoriteGoodsCacheModel(e)
                }
                return e ? this.cacheModel : new FavoriteGoodsCacheModel(this.cacheModel.items.filter(e=>!e.needSync || e.needSync && e.syncType !== SYNC_TYPES.delete),this.cacheModel.isEmptyCache)
            }
            ,
            t.getFavoriteGoodsFromLocalStorage = async function(e=null) {
                var t;
                null == this.uid && (this.cacheModel = new FavoriteGoodsCacheModel([],!0));
                const o = null !== (t = null != e ? e : await this._fetchFromIDb()) && void 0 !== t ? t : localStorage.getObject(this.cacheKey)
                  , a = null == o ? new FavoriteGoodsCacheModel([],!0) : new FavoriteGoodsCacheModel(o);
                return new FavoriteGoodsCacheModel(a.items.filter(e=>!e.needSync || e.needSync && e.syncType != SYNC_TYPES.delete),a.isEmptyCache)
            }
            ,
            t.setFavoriteGoods = async function(e) {
                if (null == this.uid)
                    return;
                this.cacheModel = null == e ? new FavoriteGoodsCacheModel([],!0) : new FavoriteGoodsCacheModel(e),
                !await this._saveToIDb(e) && localStorage.putObject(this.cacheKey, e),
                localStorage.setItem(this.tabsSyncCacheKey, `${Date.now()}`)
            }
            ,
            t.contains = function(e) {
                if (null == this.cacheModel)
                    return !1;
                const t = this.cacheModel.favoritesGoodsMap.get(e);
                return null != t && !(t.needSync && t.syncType === SYNC_TYPES.delete)
            }
            ,
            t._checkOldCache = function() {
                for (let e = 1; e < 1; e++)
                    localStorage.removeItem(String.format(CACHE_KEY, this.uid, e))
            }
            ,
            t._bindEvents = function() {
                window.addEventListener("storage", e=>{
                    null != e.key && e.key !== this.tabsSyncCacheKey || (this.cacheModel = null,
                    this.getFavoriteGoods())
                }
                )
            }
            ,
            t._fetchFromIDb = async function() {
                try {
                    const e = await this._openIDb()
                      , t = await this._storageHelper.getAll(e, this.cacheKey);
                    return null != t ? t : []
                } catch (e) {
                    return console.log(`[FAVS_STORAGE]: fetching from idb failed, reason=${e.message}`),
                    null
                }
            }
            ,
            t._saveToIDb = async function(e) {
                try {
                    const t = (await this._openIDb()).transaction([this.cacheKey], "readwrite").objectStore(this.cacheKey);
                    t.clear();
                    for (let o of e)
                        t.put(o);
                    return !0
                } catch (e) {
                    return console.log(`[FAVS_STORAGE]: saving to idb failed, reason=${e.message}`),
                    !1
                }
            }
            ,
            t._openIDb = async function() {
                try {
                    return await this._storageHelper.openDb("wb_" + this.cacheKey, {
                        onupgradeneeded: e=>{
                            if (!e.objectStoreNames.contains(this.cacheKey)) {
                                e.createObjectStore(this.cacheKey, {
                                    keyPath: "characteristicId"
                                }).createIndex("timestamp", "timestamp", {
                                    unique: !1
                                })
                            }
                            e.objectStoreNames.contains(this.lastSyncCacheKey) || e.createObjectStore(this.lastSyncCacheKey, {
                                keyPath: "name"
                            })
                        }
                        ,
                        version: 1
                    })
                } catch (e) {
                    return null
                }
            }
            ,
            _createClass(e, [{
                key: "cacheKey",
                get: function() {
                    return String.format(CACHE_KEY, this.uid, 1)
                }
            }, {
                key: "lastSyncCacheKey",
                get: function() {
                    return String.format(LAST_SYNC_CHACHE_KEY, this.uid, 1)
                }
            }, {
                key: "tabsSyncCacheKey",
                get: function() {
                    return String.format(TABS_SYNC_STATE_KEY, 1)
                }
            }]),
            e
        }();
        module.exports = FavoriteServiceCacheHelper;

    }
    , {
        "./favoriteGoodsCacheModel": 109,
        "./favoriteGoodsSyncTypes": 111,
        "./favoritesSourceType": 112
    }],
    109: [function(require, module, exports) {
        "use strict";
        function _defineProperties(e, t) {
            for (var r = 0; r < t.length; r++) {
                var i = t[r];
                i.enumerable = i.enumerable || !1,
                i.configurable = !0,
                "value"in i && (i.writable = !0),
                Object.defineProperty(e, _toPropertyKey(i.key), i)
            }
        }
        function _createClass(e, t, r) {
            return t && _defineProperties(e.prototype, t),
            r && _defineProperties(e, r),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            e
        }
        function _toPropertyKey(e) {
            var t = _toPrimitive(e, "string");
            return "symbol" == typeof t ? t : String(t)
        }
        function _toPrimitive(e, t) {
            if ("object" != typeof e || !e)
                return e;
            var r = e[Symbol.toPrimitive];
            if (void 0 !== r) {
                var i = r.call(e, t || "default");
                if ("object" != typeof i)
                    return i;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === t ? String : Number)(e)
        }
        let FavoriteGoodsCacheModel = function() {
            function e(e, t=!1) {
                this.items = e.sort((e,t)=>{
                    var r, i;
                    return null !== (r = t.timestamp) && void 0 !== r ? r : 0 - (null !== (i = e.timestamp) && void 0 !== i ? i : 0)
                }
                ),
                this.isEmptyCache = t,
                this._favoritesGoodsMap = null
            }
            return _createClass(e, [{
                key: "count",
                get: function() {
                    return this.items.length
                }
            }, {
                key: "favoritesGoodsMap",
                get: function() {
                    return null != this._favoritesGoodsMap ? this._favoritesGoodsMap : (this._favoritesGoodsMap = this.items.reduce((e,t)=>(e.set(t.characteristicId, t),
                    e), new Map),
                    this._favoritesGoodsMap)
                }
            }]),
            e
        }();
        module.exports = FavoriteGoodsCacheModel;

    }
    , {}],
    110: [function(require, module, exports) {
        "use strict";
        let FavoriteGoodsConverter = function() {
            function t() {}
            return t.convertToFavoriteGoods = function(t={}, e={}) {
                var i, r, o, c, a, n, s;
                const d = null === (i = t.sizes) || void 0 === i ? void 0 : i.find(t=>t.optionId === e.characteristicId)
                  , l = null !== (r = null == d ? void 0 : d.price) && void 0 !== r ? r : t.price
                  , u = l && null !== (o = null == d || null === (c = d.stocks) || void 0 === c ? void 0 : c.some(t=>t.qty > 0)) && void 0 !== o && o
                  , m = 20624 === t.brandId || 30624 === t.siteBrandId
                  , v = u ? l.total / 100 : 0;
                return {
                    nmId: t.id,
                    cod1S: t.id,
                    brandName: t.brand,
                    characteristicId: e.characteristicId,
                    id: e.characteristicId,
                    goodsName: t.name,
                    colorName: null === (a = t.colors) || void 0 === a || null === (a = a[0]) || void 0 === a ? void 0 : a.name,
                    onStock: u ? 1 : 0,
                    star: t.rating,
                    price: u ? l.basic / 100 : 0,
                    priceWithSale: v,
                    priceWithCouponAndDiscount: v,
                    sale: u ? l.sale : 0,
                    totalSale: u ? l.sale : 0,
                    salePrice: v,
                    targetUrl: null !== (n = e.targetUrl) && void 0 !== n ? n : "",
                    sizeName: null !== (s = null == d ? void 0 : d.origName) && void 0 !== s ? s : "",
                    stocks: null == d ? void 0 : d.stocks,
                    timestamp: e.timestamp,
                    deliveryHours: u && t.time1 + t.time2,
                    source: e.source,
                    subjectId: t.subjectId,
                    subjectParentId: t.subjectParentId,
                    reviewRating: t.reviewRating,
                    feedbacks: t.feedbacks || t.commentsCount,
                    supplierId: t.supplierId,
                    newlyArrived: u && (1 & e.source) > 0,
                    _rawCatalogModel: t,
                    viewFlags: t.viewFlags,
                    shouldShowOriginalMark: !m && 0 != (8 & t.viewFlags),
                    paymentDiscountAmount: wb.priceHelper.canShowWalletDiscount(v, t.currency) ? wb.priceHelper.calculateDiscount(v, wb.global.settings.variables.walletDiscountPercent, "RUB") : 0,
                    get isDeleted() {
                        return !(this.goodsName || this.brandName || this.colorName || this.sizeName)
                    },
                    get showDiscount() {
                        return (this.price > 0 || this.priceWithCouponAndDiscount > 0) && this.price != this.priceWithCouponAndDiscount
                    }
                }
            }
            ,
            t.convertFromAddModelToCacheItem = function(t, e) {
                var i, r;
                const o = wb.analitics.analiticsInfoToListName(t);
                return {
                    characteristicId: t.characteristicId,
                    cod1S: t.cod1S,
                    id: t.characteristicId,
                    source: e,
                    targetUrl: `${null !== (i = t.targetUrl) && void 0 !== i ? i : ""}|${null !== (r = t.iid) && void 0 !== r ? r : 1}|${o}`,
                    timestamp: Math.ceil(Date.now() / 1e3)
                }
            }
            ,
            t.convertFromCacheItemToUserStorageItem = function(t) {
                return {
                    product_option_id: t.characteristicId,
                    product_id: t.cod1S,
                    target_url: t.targetUrl,
                    added_timestamp: t.timestamp,
                    fav_type: 3 == t.source || 1 == t.source ? 1 : 2
                }
            }
            ,
            t.convertFromUserStorageItemToCacheItem = function(t) {
                return {
                    characteristicId: t.product_option_id,
                    cod1S: t.product_id,
                    targetUrl: t.target_url,
                    timestamp: t.added_timestamp,
                    count: 1,
                    source: t.fav_type
                }
            }
            ,
            t.convertFromCacheToRemoveModelItem = function(t) {
                const e = wb.analitics.getAnaliticsInfoFromTargetUrl(null == t ? void 0 : t.targetUrl, {
                    iid: 1
                });
                return {
                    characteristicId: t.characteristicId,
                    cod1S: t.cod1S,
                    id: t.characteristicId,
                    source: t.source,
                    quantity: 1,
                    targetInfo: {
                        targetUrl: e.targetUrl,
                        analiticsInfo: e
                    }
                }
            }
            ,
            t.convertFromCacheAddModelItem = function(t) {
                const e = wb.analitics.getAnaliticsInfoFromTargetUrl(null == t ? void 0 : t.targetUrl, {
                    iid: 1
                });
                return {
                    isFromCache: !0,
                    cod1S: t.cod1S,
                    quantity: 1,
                    characteristicId: t.characteristicId,
                    ...e
                }
            }
            ,
            t
        }();
        module.exports = FavoriteGoodsConverter;

    }
    , {}],
    111: [function(require, module, exports) {
        "use strict";
        module.exports = Object.freeze({
            delete: 0,
            add: 1
        });

    }
    , {}],
    112: [function(require, module, exports) {
        "use strict";
        module.exports = Object.freeze({
            waitlist: 1,
            poned: 2,
            both: 3
        });

    }
    , {}],
    113: [function(require, module, exports) {
        "use strict";
        const FavoriteServiceCacheHelper = require("./cacheHelper")
          , FavoriteGoodsConverter = require("./favoriteGoodsConverter")
          , SYNC_TYPES = require("./favoriteGoodsSyncTypes")
          , FAVORITE_SOURCE_TYPES = require("./favoritesSourceType")
          , MAX_SERVICE_STORAGE_ITEMS = 2e3
          , FAVS_URL = "/webapi/lk/favorites"
          , FAVS_SYNCED_FILE_PATH = "favs/favs_v1_synced"
          , FAVS_SYNCED_FILE_PATH_V2 = "favs/favs_v2_synced"
          , FAVS_DUMP_FILE_PATH = "favs/site_items"
          , SYNCRONIZNG_OFFSET = 3e4
          , REQUEST_TIMEOUT = 15e3;
        let FavsService = function() {
            function e() {
                this._cacheHelper = new FavoriteServiceCacheHelper(this.$storageHelper),
                this._enrichedFavoriteItems = new Map,
                this._timer = null,
                this.isSynced = !1,
                this._hasBeenLoadedOnce = !1,
                this._bindEvents()
            }
            var t = e.prototype;
            return t.setKey = function(e, t) {
                this._stopSyncronizing(),
                e && (this._cacheHelper.setKey(t),
                this._startSyncronizing())
            }
            ,
            t.syncFromServerAsync = async function() {
                if (this.isSynced || this._initialSyncInProgress)
                    return;
                this._initialSyncInProgress = !0;
                const e = await this._loadRawGoodsFromDumpAsync();
                return this._initialSyncInProgress = !1,
                e
            }
            ,
            t.getWlArrivedCatalogModelAsync = async function() {
                window._debug && console.time("buildWlArrivedCatalogModel");
                try {
                    const [e,t] = await Promise.all([this._loadFavoriteGoodsAsync(), this.$moduleLoader.loadModuleAsync("favoriteGoodsModel")])
                      , i = new t(e);
                    return i.setOnlyWlArrived(!0).setSorting(1).setGoods(Number.MAX_SAFE_INTEGER).complete(),
                    {
                        goods: i.favoriteGoods
                    }
                } catch (e) {
                    return console.error(e),
                    {
                        goods: [],
                        isEmptyCache: !0
                    }
                } finally {
                    window._debug && console.timeEnd("buildWlArrivedCatalogModel")
                }
            }
            ,
            t.getSimplifiedModelAsync = async function() {
                window._debug && console.time("buildFavSimpleModel");
                try {
                    const [e,t] = await Promise.all([this._loadFavoriteGoodsAsync(), this.$moduleLoader.loadModuleAsync("favoriteGoodsModel")]);
                    return new t(e).setSorting(7).setGoods(16).toSimpleModel()
                } catch (e) {
                    return console.error(e),
                    {
                        goods: [],
                        totalCount: 0,
                        availableCount: 0,
                        isEmptyCache: !0
                    }
                } finally {
                    window._debug && console.timeEnd("buildFavSimpleModel")
                }
            }
            ,
            t.getFavsDataAsync = async function(e="") {
                var t, i, o, s;
                window._debug && console.time("buildFavModel");
                const a = new URLSearchParams(e)
                  , r = parseInt(null !== (t = a.get("page")) && void 0 !== t ? t : 1)
                  , n = null !== (i = a.get("sort")) && void 0 !== i ? i : "newlydown"
                  , c = null !== (o = a.get("search")) && void 0 !== o ? o : ""
                  , d = "true" == (null !== (s = a.get("wlArrived")) && void 0 !== s ? s : a.get("wlarrived"));
                try {
                    const [e,t,i,{FavorireGoodsSorterModel: o}] = await Promise.all([this._loadFavoriteGoodsAsync(), this.$moduleLoader.loadModuleAsync("favoriteGoodsModel"), this.$moduleLoader.loadModuleAsync("pagerHelper"), this.$moduleLoader.loadModuleAsync("sorterModel")])
                      , s = new t(e,new o(n,window.location.href));
                    return s.setOnlyWlArrived(d).setSearch(c).setPager(i, r).setSorting().setGoods().complete(),
                    s
                } catch (e) {
                    return console.error(e),
                    {
                        isEmptyCache: !0
                    }
                } finally {
                    window._debug && console.timeEnd("buildFavModel")
                }
            }
            ,
            t.addToFavs = async function(e, t=!1, i=!1, o) {
                if (null == this.$router.userIsAuth && await this._checkAuthState(),
                !this.$router.userIsAuth)
                    throw new UnauthorizeError;
                return this.sendToWishlistStat(e, o),
                t ? this._addToPoned(e, i) : this._addToWl(e, i)
            }
            ,
            t.sendToWishlistStat = async function(e, t) {
                if (!window.wba)
                    return;
                const i = e=>this.$moduleLoader.loadServiceAsync("suppliersService").then(()=>this.$services.suppliersService.getProductSupplierByNmIdsAsync([e])).then(t=>Promise.resolve(t[e]));
                try {
                    var o, s, a, r, n, c, d, l, h, u;
                    let p = {
                        stores: null === (o = (t && t.sizes || e && e.sizes || []).find(t=>t.ch == e.characteristicId)) || void 0 === o ? void 0 : o.stocks,
                        salePrice: t ? t.salePrice : e.salePrice
                    };
                    if (!p.stores) {
                        p = (await wb.xnm.getInfoForWbaStat([{
                            nmId: e.cod1S,
                            size: e.characteristicId
                        }])).get(e.cod1S)
                    }
                    const v = await i(e.cod1S)
                      , y = this.$analitic.getAnaliticsInfoFromTargetUrl(e.targetUrl)
                      , _ = ()=>this.$analitic.analiticsInfoToListName(e.l ? e : y)
                      , S = ()=>this.$analitic.getTailObjectFromAnalyticsInfo(e.l ? e : y);
                    const f = {
                        id: e.cod1S,
                        chrt: e.characteristicId,
                        quantity: e.quantity,
                        price: null === (s = p) || void 0 === s ? void 0 : s.salePrice,
                        affiliation: null == v ? void 0 : v.supplierId,
                        inListIndex: e.iid || 1,
                        listName: _(),
                        name: null !== (a = null == t ? void 0 : t.name) && void 0 !== a ? a : e.goodsName,
                        brand: null !== (r = null == t ? void 0 : t.brand) && void 0 !== r ? r : e.brandName,
                        rating: null !== (n = null == t ? void 0 : t.reviewRating) && void 0 !== n ? n : e.reviewRating,
                        storeId: null !== (c = null == e ? void 0 : e.storeId) && void 0 !== c ? c : (m = null === (d = p) || void 0 === d ? void 0 : d.stores,
                        m.length > 0 ? null == m ? void 0 : m.sort((e,t)=>e.time1 + e.time2 - t.time1 - t.time2)[0].wh : null),
                        feedbacksCount: null !== (l = null == t ? void 0 : t.feedbacks) && void 0 !== l ? l : e.feedbacks,
                        subjectId: null !== (h = null == t ? void 0 : t.subjectId) && void 0 !== h ? h : e.subjectId,
                        subjectParentId: null !== (u = null == t ? void 0 : t.subjectParentId) && void 0 !== u ? u : e.subjectParentId,
                        tailObject: S()
                    };
                    this.$analitic.sendWbaEcomStat("add_to_wishlist", [f])
                } catch (e) {
                    console.error(e)
                }
                var m
            }
            ,
            t.deleteFromFavs = function(e, t) {
                return this._removeFromPoned(t)
            }
            ,
            t.isAddedToFavs = function(e) {
                return this.syncFromServerAsync(),
                this._cacheHelper.contains(e)
            }
            ,
            t.deleteManyFromFavsAsync = async function(e) {
                const t = e.map(e=>({
                    characteristicId: e.characteristicId,
                    targetInfo: e.targetInfo,
                    source: e.source
                }));
                this.$httpClient.fetchJSON(`${FAVS_URL}/remove`, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(t)
                });
                const i = await this._cacheHelper.getFavoriteGoods(!0);
                e.forEach(e=>{
                    const t = i.favoritesGoodsMap.get(e.characteristicId);
                    t && (t.needSync = !0,
                    t.syncType = SYNC_TYPES.delete)
                }
                ),
                await this._cacheHelper.setFavoriteGoods(i.favoritesGoodsMap.toArray()),
                WbSpaModel.prototype.$moduleLoader.execModule("bottomNotificationPanel", "showNotification", [0, "Товар удалён из избранного"])
            }
            ,
            t.moveManyToBasketAsync = async function(e) {
                this.$services.cartService.addManyItems(e).isSuccess && WbSpaModel.prototype.$moduleLoader.execModule("bottomNotificationPanel", "showNotification", [0, "Товар добавлен в корзину"])
            }
            ,
            t._bindEvents = function() {
                this.$eventBus.addEventListener("GeoUpdated", ()=>this._enrichedFavoriteItems.clear())
            }
            ,
            t._loadFavoriteGoodsAsync = async function() {
                try {
                    await this.$user.getUserInfo();
                    const e = await this._loadRawGoodsFromDumpAsync();
                    if (!e)
                        return {
                            isEmptyCache: !0,
                            items: []
                        };
                    if (e.isEmptyCache)
                        return {
                            isEmptyCache: !0,
                            items: []
                        };
                    const t = e.items;
                    return t.length < 1 ? {
                        isEmptyCache: !1,
                        items: []
                    } : this._enrichGoodsAsync(t)
                } catch (e) {
                    return console.error(e),
                    this._loadFromCache()
                }
            }
            ,
            t._loadRawGoodsAsync = async function() {
                return this._cacheHelper.getFavoriteGoodsFromLocalStorage()
            }
            ,
            t._enrichGoodsAsync = async function(e) {
                const t = e.reduce((e,t)=>(!this._enrichedFavoriteItems.has(t.characteristicId) && e.set(t.characteristicId, t),
                e), new Map);
                let i = {};
                return t.size > 0 && (i = await wb.xnm.getCatalogCards(t.toArray(e=>e.cod1S), !1, !0, !0)),
                {
                    isEmptyCache: !1,
                    items: e.reduce((e,t)=>{
                        const o = i[t.cod1S]
                          , s = this._enrichedFavoriteItems.get(t.characteristicId);
                        if (o || s) {
                            var a;
                            const i = null !== (a = s && {
                                ...s
                            }) && void 0 !== a ? a : FavoriteGoodsConverter.convertToFavoriteGoods(o, t);
                            e.push(i),
                            !s && this._enrichedFavoriteItems.set(i.characteristicId, i)
                        }
                        return e
                    }
                    , [])
                }
            }
            ,
            t._addToPoned = function(e, t) {
                return this._addThroughCache(e, FAVORITE_SOURCE_TYPES.poned, t)
            }
            ,
            t._removeFromPoned = async function(e) {
                const t = (await this._cacheHelper.getFavoriteGoods(!0)).items
                  , i = t.find(t=>t.characteristicId === e);
                i && (i.needSync = !0,
                i.syncType = SYNC_TYPES.delete),
                await this._cacheHelper.setFavoriteGoods(t)
            }
            ,
            t._addToWl = function(e, t) {
                return this._addThroughCache(e, FAVORITE_SOURCE_TYPES.waitlist, t)
            }
            ,
            t._addThroughCache = async function(e, t, i) {
                if (i)
                    return this._saveToCacheLocal(e, t);
                this.$httpClient.fetchJSON(`${FAVS_URL}/${t === FAVORITE_SOURCE_TYPES.poned ? "addtoponed" : "addtowl"}`, {
                    method: "POST",
                    body: new URLSearchParams(e)
                });
                if (!e.isFromCache) {
                    if ((await this._cacheHelper.getFavoriteGoods()).count >= 2e3)
                        throw new KnownServerError(String.format(this.$localziation.ponedMaxStorage, 2e3))
                }
                const o = (await this._cacheHelper.getFavoriteGoods(!0)).items;
                let s = o.find(t=>t.characteristicId == e.characteristicId);
                s ? s.timestamp = Math.ceil(Date.now() / 1e3) : (s = FavoriteGoodsConverter.convertFromAddModelToCacheItem(e, t),
                o.push(s)),
                s.needSync = !0,
                s.syncType = SYNC_TYPES.add,
                await this._cacheHelper.setFavoriteGoods(o)
            }
            ,
            t._saveToCacheLocal = async function(e, t) {
                await this.syncFromServerAsync();
                const i = await this._cacheHelper.getFavoriteGoods(!0);
                if (t == FAVORITE_SOURCE_TYPES.poned && i.ponedCount >= 2e3)
                    throw new KnownServerError(String.format(this.$localziation.ponedMaxStorage, 2e3));
                if (t == FAVORITE_SOURCE_TYPES.waitlist && i.waitlistCount >= 2e3)
                    throw new KnownServerError(String.format(this.$localziation.waitlistMaxStorage, 2e3));
                i.items.push(FavoriteGoodsConverter.convertFromAddModelToCacheItem(e, t)),
                this._cacheHelper.clearLastSyncDt(),
                await this._cacheHelper.setFavoriteGoods(i.items)
            }
            ,
            t._checkAuthState = async function() {
                await this.$user.getUserInfo()
            }
            ,
            t.mergeActualAndCacheItems = async function(e, t, i) {
                const o = e.reduce((e,t)=>(e.set(t.characteristicId, t),
                e), new Map)
                  , s = (await this._cacheHelper.getFavoriteGoods(!0)).items;
                return t > i && s.forEach(e=>{
                    1e3 * e.timestamp > i && e.syncType != SYNC_TYPES.delete && (e.needSync = !0,
                    e.syncType = SYNC_TYPES.add)
                }
                ),
                s.filter(e=>e.needSync).forEach(e=>{
                    (e.syncType == SYNC_TYPES.delete && o.has(e.characteristicId) || e.syncType == SYNC_TYPES.add && !o.has(e.characteristicId)) && o.set(e.characteristicId, e)
                }
                ),
                o.toArray()
            }
            ,
            t._startSyncronizing = function() {
                this._timer = setInterval(async()=>{
                    if (this._syncronizigInProcess || !this.isSynced)
                        return;
                    const e = await this._cacheHelper.getLastSyncDt();
                    let t = await this._getDumpFilesInfoAsync();
                    if (null === t || t.needsMigration)
                        return;
                    const i = (await this._cacheHelper.getFavoriteGoods(!0)).items;
                    let o = 0
                      , s = !1;
                    if (!(0 === i.filter(e=>e.needSync).length && t.dumpTs <= e)) {
                        this._syncronizigInProcess = !0;
                        try {
                            let r = [];
                            if (t.dumpTs <= e)
                                r = i.filter(e=>!e.needSync || e.needSync && e.syncType !== SYNC_TYPES.delete);
                            else {
                                const o = await this.$services.apiUserStorage.getData([{
                                    path: t.dumpFiles[0].path
                                }]);
                                if (!Array.isArray(o) || 0 === o.length)
                                    throw new Error(`failed to fetch data at path ${t.dumpFiles[0].path}`);
                                let a = null;
                                try {
                                    a = JSON.parse(this.$helper.base64.decode(o[0].file))
                                } catch (e) {
                                    wb.spa.logError(e, `[FAVS_SYNC]: latest file is corrupted, file=${t.dumpFiles[0].path}`, !0)
                                }
                                if (Array.isArray(a)) {
                                    let i = a.map(e=>FavoriteGoodsConverter.convertFromUserStorageItemToCacheItem(e));
                                    r = await this.mergeActualAndCacheItems(i, e, t.dumpTs),
                                    s = this._itemsAreMatched(i, r)
                                } else
                                    r = i.filter(e=>!e.needSync || e.needSync && e.syncType !== SYNC_TYPES.delete)
                            }
                            if (s)
                                o = t.dumpTs;
                            else {
                                const e = this.$helper.base64.encode(JSON.stringify(r.map(e=>FavoriteGoodsConverter.convertFromCacheItemToUserStorageItem(e))))
                                  , i = [{
                                    path: FAVS_DUMP_FILE_PATH,
                                    file: e
                                }]
                                  , s = await this.$services.apiUserStorage.setData(i);
                                var a;
                                if (!s.success)
                                    throw new Error(`failed to set data reason=${null === (a = s.error) || void 0 === a ? void 0 : a.message}`);
                                {
                                    o = t.dumpTs;
                                    const e = await this._getDumpFilesInfoAsync();
                                    (null == e ? void 0 : e.dumpTs) > 0 && (o = e.dumpTs)
                                }
                            }
                            await this._cacheHelper.setFavoriteGoods(r.map(e=>(e.needSync = !1,
                            e)))
                        } catch (e) {
                            wb.spa.logError(e, "[FAVS_SYNC]: sync failed", !0)
                        } finally {
                            this._syncronizigInProcess = !1,
                            await this._cacheHelper.setLastSyncDt(o > 0 ? o : e)
                        }
                    }
                }
                , 3e4)
            }
            ,
            t._itemsAreMatched = function(e, t) {
                return e.map(e=>e.characteristicId).sort((e,t)=>e - t).join(",") === t.map(e=>e.characteristicId).sort((e,t)=>e - t).join(",")
            }
            ,
            t._stopSyncronizing = function() {
                clearInterval(this._timer)
            }
            ,
            t._updateSyncStatus = function(e) {
                $.observable(this).setProperty({
                    isSynced: e
                })
            }
            ,
            t._getTimeout = function(e) {
                const t = new AbortController;
                return setTimeout(()=>t.abort(), e),
                t.signal
            }
            ,
            t._getDumpFilesInfoAsync = async function() {
                try {
                    let e = await this.$services.apiUserStorage.getList("favs", {
                        signal: this._getTimeout(5e3)
                    });
                    if (null == e)
                        return null;
                    const t = {};
                    return t.dumpFiles = e.filter(e=>[FAVS_DUMP_FILE_PATH, "favs/ios_items", "favs/android_items"].indexOf(e.path) > -1),
                    t.dumpFiles.sort((e,t)=>t.modify_time - e.modify_time),
                    t.needsMigration = !e.find(e=>"favs/favs_v1_synced" === e.path || "favs/favs_v2_synced" === e.path),
                    t.dumpFiles.forEach(e=>{
                        e.modify_time = 1e3 * e.modify_time
                    }
                    ),
                    t.dumpTs = t.dumpFiles.length > 0 ? t.dumpFiles[0].modify_time : 0,
                    t
                } catch (e) {
                    return null
                }
            }
            ,
            t._migrateFromOldStorageAsync = async function() {
                const e = await this._loadRawGoodsAsync();
                if (!e.isEmptyCache) {
                    const t = e.items.map(e=>FavoriteGoodsConverter.convertFromCacheItemToUserStorageItem(e))
                      , i = [{
                        path: FAVS_DUMP_FILE_PATH,
                        file: this.$helper.base64.encode(JSON.stringify(t))
                    }, {
                        path: "favs/favs_v1_synced",
                        file: "W10="
                    }];
                    wb.spa.logError(new Error(`[FAVS_SYNC]: sync completed items_synced=${t.length}`)),
                    await this.$services.apiUserStorage.setData(i)
                }
            }
            ,
            t._loadRawGoodsFromDumpAsync = async function() {
                var e, t, i;
                const o = await this._cacheHelper.getLastSyncDt();
                let s, a = !1, r = null;
                try {
                    const e = await this._getDumpFilesInfoAsync();
                    if (null != e && e.needsMigration && this._migrateFromOldStorageAsync(),
                    null != e) {
                        if (o === e.dumpTs || 0 === e.dumpTs)
                            return await this._cacheHelper.getFavoriteGoods();
                        let t = 0
                          , i = null;
                        for (; t < e.dumpFiles.length && !(t > 0 && e.dumpFiles[t].modify_time < o); ) {
                            const o = await this.$services.apiUserStorage.getData([{
                                path: e.dumpFiles[t].path
                            }]);
                            if (!Array.isArray(o) || 0 === o.length)
                                throw new Error(`failed to fetch data at path ${e.dumpFiles[t].path}`);
                            try {
                                i = JSON.parse(this.$helper.base64.decode(o[0].file));
                                break
                            } catch (i) {
                                wb.spa.logError(i, `[FAVS_SYNC]: latest file is corrupted, file=${e.dumpFiles[t].path}`, !0),
                                t++,
                                r = -1
                            }
                        }
                        if (!Array.isArray(i))
                            throw "[FAVS_SYNC]: all dump files are corrupted";
                        s = {
                            favsList: i.map(e=>FavoriteGoodsConverter.convertFromUserStorageItemToCacheItem(e))
                        },
                        r = -1 === r ? r : e.dumpTs,
                        a = !0
                    }
                } catch (e) {
                    if (e.isUnauthorize)
                        return null
                } finally {
                    !this._cacheHelper.cacheModel && await this._cacheHelper.getFavoriteGoods(),
                    this._updateSyncStatus(!0)
                }
                if (!a)
                    return await this._cacheHelper.getFavoriteGoods();
                r = null !== (e = r) && void 0 !== e ? e : o;
                const n = null !== (t = null === (i = s) || void 0 === i ? void 0 : i.favsList) && void 0 !== t ? t : [];
                return await this._cacheHelper.setFavoriteGoods(await this.mergeActualAndCacheItems(n, o, r)),
                await this._cacheHelper.setLastSyncDt(r),
                await this._cacheHelper.getFavoriteGoods()
            }
            ,
            e
        }();
        module.exports = FavsService;

    }
    , {
        "./cacheHelper": 108,
        "./favoriteGoodsConverter": 110,
        "./favoriteGoodsSyncTypes": 111,
        "./favoritesSourceType": 112
    }],
    114: [function(require, module, exports) {
        "use strict";
        let DeliveriesOverview = function() {
            function e(e) {
                this.cnt = 0,
                this.isCacheEmpty = e.isCacheEmpty,
                e.active.length > 0 && this._initialize(e.active)
            }
            return e.prototype._initialize = function(e) {
                const t = e[0].products[0];
                this.cnt = e.length,
                this.deliveryDate = t.readyToReceiveToday ? new Date : new Date(t.dateTime),
                this.deliveryAmount = e[0].totalPrice + e[0].deliveryPrice,
                this.receiveDateFormatted = t.receiveDate
            }
            ,
            e
        }();
        module.exports = DeliveriesOverview;

    }
    , {}],
    115: [function(require, module, exports) {
        "use strict";
        function _defineProperties(t, e) {
            for (var i = 0; i < e.length; i++) {
                var s = e[i];
                s.enumerable = s.enumerable || !1,
                s.configurable = !0,
                "value"in s && (s.writable = !0),
                Object.defineProperty(t, _toPropertyKey(s.key), s)
            }
        }
        function _createClass(t, e, i) {
            return e && _defineProperties(t.prototype, e),
            i && _defineProperties(t, i),
            Object.defineProperty(t, "prototype", {
                writable: !1
            }),
            t
        }
        function _toPropertyKey(t) {
            var e = _toPrimitive(t, "string");
            return "symbol" == typeof e ? e : String(e)
        }
        function _toPrimitive(t, e) {
            if ("object" != typeof t || !t)
                return t;
            var i = t[Symbol.toPrimitive];
            if (void 0 !== i) {
                var s = i.call(t, e || "default");
                if ("object" != typeof s)
                    return s;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === e ? String : Number)(t)
        }
        const {PayStatus: PayStatus, ExpirationDays: ExpirationDays, ExpirationCostDays: ExpirationCostDays, ExpirationCost: ExpirationCost} = require("../../modules/delivery/states")
          , STORE_TYPE = require("../../modules/delivery/storeTypes");
        let TrackerKey = function() {
            function t(t, e, i) {
                e != t && (t > 0 || t) ? (this.type = "shard",
                this.value = t > 0 ? t : 1) : (this.type = "user_id",
                this.value = e > 0 ? e : i > 0 ? i : 1)
            }
            return t.prototype.toString = function() {
                return `${this.type}=${this.value}`
            }
            ,
            t
        }()
          , DeliveryProduct = function() {
            function t(t, e, i) {
                Object.assign(this, t),
                this.isCanceling && (this.canPrepay = !1),
                this._ctx = e,
                this.options = null != i ? i : {},
                wb.xnm.expandSaleConditions(this, null, 1),
                this.isPrepaid && delete this.isVerificationReturn,
                this.setIsOnShelf()
            }
            var e = t.prototype;
            return e.openProductPopup = function(t, e) {
                if (!t.target.classList.contains("j-non-refundable") && !t.target.classList.contains("rate-star__item")) {
                    var i = e.view.data;
                    this._ctx.$productCardPopup.show(i.code1S, i.characteristicId)
                }
            }
            ,
            e.setDeliveryConfirmation = function() {
                !wb.global.settings.switches.enableCargoDeliveryUpdate || wb.global.settings.switches.enableCargoDeliveryUpdateV2 || 17 !== this.smId || 2 !== (new Date).daysBetween(new Date(this.dateTime)) || wb.global.userSettings.confirmed.includes(this.rId) || (this.needsDeliveryConfirmation = !0)
            }
            ,
            e.setIsOnShelf = function(t) {
                if (6 === this.smId && (this.trackingStatusId ? this.trackingStatusReady : this.readyToReceiveToday) && ("ordo" == this.source && $.observable(this, t).setProperty({
                    isOnShelf: !0
                }),
                !this.expirationTimestamp && this.lastDate && ExpirationDays > 0 && $.observable(this, t).setProperty({
                    expirationTimestamp: new Date(this.lastDate).addDays(ExpirationDays)
                }),
                this.expirationTimestamp && ExpirationCostDays > 0)) {
                    (new Date).daysBetween(new Date(this.expirationTimestamp)) <= ExpirationCostDays && $.observable(this, t).setProperty({
                        unclaimedCost: ExpirationCost
                    })
                }
                !wb.global.settings.switches.enableCargoDeliveryUpdateV2 || 300 != this.trackingStatusId || 17 !== this.smId || this.timeTo && this.timeFrom || wb.global.userSettings.confirmed.includes(this.rId) || ($.observable(this, t).setProperty({
                    needsDeliveryUpdate: !0
                }),
                3 === (new Date).daysBetween(new Date(this.dateTime)) && (this.needsDeliveryUpdateTimeOut = !0))
            }
            ,
            e.setCancel = function(t) {
                if (this.canCancel)
                    return this;
                if (this.options.canCancelMp && this.wh > 0 && this.payState == PayStatus.NotPaid) {
                    var e, i;
                    const s = this._ctx.$services.storeService.storesMap[this.wh];
                    let r = 0;
                    if (STORE_TYPE.isMp(s.type) && (null === (e = wb.global) || void 0 === e || null === (e = e.settings) || void 0 === e || null === (e = e.variables) || void 0 === e ? void 0 : e.minutesForMPOrderCancel) > 0 ? r = wb.global.settings.variables.minutesForMPOrderCancel : (null === (i = wb.global) || void 0 === i || null === (i = i.settings) || void 0 === i || null === (i = i.variables) || void 0 === i ? void 0 : i.minutesForWBOrderCancel) > 0 && !(STORE_TYPE.isMp(s.type) || STORE_TYPE.isCargoStore(s.type) || STORE_TYPE.isDbs(s.type) || STORE_TYPE.isForeign(s.type)) && (r = wb.global.settings.variables.minutesForWBOrderCancel),
                    r > 0 && 300 == this.trackingStatusId && new Date(this.orderDate).addMinutes(r) >= new Date)
                        return $.observable(this, t).setProperty({
                            canCancel: !0
                        }),
                        this
                }
                return this
            }
            ,
            e.showStatusPopup = function(t, e) {
                if (this.loading)
                    return !1;
                this.loading = !0;
                var i = e.view.ctxPrm("delivery")
                  , s = null == i ? void 0 : i.deliveryWay;
                return this._ctx.$moduleLoader.loadModuleAsync("trackingPopup").then(t=>{
                    (new t).showStatusPopup({
                        rid: this.rId,
                        smId: this.smId,
                        receiveDate: this.receiveDate,
                        isCourier: this.readyToReceiveToday && "Courier" == s,
                        delayed: this.delayed,
                        name: this.name,
                        brand: this.brand,
                        expirationTimestamp: this.expirationTimestamp,
                        customTrackerStatus: this.customTrackerStatus,
                        trackerKey: this.trackerKey
                    }),
                    this.loading = !1
                }
                ).catch(t=>{
                    console.log(t),
                    this.loading = !1
                }
                ),
                !1
            }
            ,
            e.cancelItem = function(t, e) {
                if (this.isCanceling)
                    return !1;
                return $.observable(this).setProperty({
                    isCanceling: !0
                }),
                ("nnsz" == this.source ? this._ctx.$services.wbxOrderService.cancelByRids({
                    shard: this.sticker,
                    orderId: this.orderId,
                    rids: [this.rId]
                }) : this._ctx.$httpClient.fetchJSON(this._ctx.$router.urls.cancelGroupedDelivery, {
                    method: "POST",
                    body: new URLSearchParams({
                        rids: this.rId
                    })
                })).then(t=>{
                    if (null != t && t.error)
                        return $.observable(this).setProperty({
                            isCanceling: !1
                        }),
                        void wb.popup.renderModalError("Не удалось отменить доставку");
                    if (null != t && t.notExists) {
                        var i;
                        const t = null !== (i = e.view.ctx.parentView) && void 0 !== i ? i : e.view;
                        let s = t.get("array");
                        if (null != s && s.data && ($.observable(s.data).remove(t.getIndex()),
                        0 == s.data.length)) {
                            let t = s.parent;
                            const e = null == t ? void 0 : t.get("array");
                            null != e && e.data && $.observable(e.data).remove(t.getIndex())
                        }
                    }
                    this._ctx.updateItems([this.rId], {
                        isCanceling: !0
                    })
                }
                ).catch(t=>{
                    t.isCustomError || console.log(t),
                    $.observable(this).setProperty({
                        isCanceling: !1
                    }),
                    wb.popup.renderModalError(t.isCustomError ? t.message : "Ошибка при отмене доставки")
                }
                ),
                !1
            }
            ,
            e.onShowAllStatus = function(t) {
                const e = t.target.closest("li");
                null == e || e.classList.add("hide");
                const i = document.querySelector(".j-status-list")
                  , s = null == i ? void 0 : i.querySelectorAll(".j-status");
                null == s || s.forEach(t=>t.classList.remove("hide"))
            }
            ,
            e.loadSeller = function(t) {
                var e, i;
                const s = this._ctx.$services.storeService.storesMap
                  , r = null !== (e = null == s || null === (i = s[this.wh]) || void 0 === i ? void 0 : i.type) && void 0 !== e ? e : 0;
                STORE_TYPE.isForeign(r) || this._sellerLoading || this.sellerId > 0 || (this._sellerLoading = !0,
                this._ctx.$httpClient.fetchBasicJSON(wb.helpers.url.urlSellerStatic(this.code1S), {}, {
                    nullOnError: !0
                }).then(t=>{
                    if (!t)
                        return void (this._sellerLoading = !1);
                    const {supplierId: e, supplierName: i, trademark: s} = t;
                    e > 0 && 32477 !== e && 12399 !== e && 1312586 !== e ? $.observable(this).setProperty({
                        sellerId: e,
                        sellerName: s || i
                    }) : this.canCancel || ("m" === wb.settings.displayMode && WbSpaModel.prototype.$moduleLoader.loadModuleAsync("bottomNotificationPanel").then(t=>{
                        t.showNotification(t.notificationsType.bottomCustomMsg, "Ничего не нашлось")
                    }
                    ),
                    $.observable(this).setProperty("menuDisabled", !0))
                }
                ))
            }
            ,
            e.startSellerChat = function(t) {
                const {rId: e, name: i, brand: s, color: r, size: a, code1S: n, orderDate: o, sellerId: l, sellerName: d, price: c, currency: u, shkId: h, country: p} = this;
                if (!l)
                    return;
                const y = `seller_${l}`
                  , v = [i];
                s && v.push(`бренд ${s}`),
                a && "0" != a && v.push(`размер ${a}`),
                n > 0 && v.push(`артикул ${n}`),
                o && v.push(`товар оформлен ${new Date(o).format("dd.MM.yyyy")}`);
                const b = `Здравствуйте! У меня вопрос по товару "${v.join(", ")}"`;
                wb.spa.getMainLayout().header.onlineChat.showChat({
                    chatId: y,
                    sellerId: l,
                    text: b,
                    title: d,
                    goodCard: {
                        rid: e,
                        nmID: n,
                        brand: s,
                        name: i,
                        color: r,
                        shkID: h,
                        size: a,
                        price: 100 * c,
                        priceCurrency: u,
                        date: o,
                        site: null == p ? void 0 : p.toUpperCase(),
                        statusID: (()=>this.trackingStatusId >= 300 && this.trackingStatusId <= 399 ? 1 : this.trackingStatusId >= 10 && this.trackingStatusId <= 99 ? 2 : 210 == this.trackingStatusId ? 4 : 260 == this.trackingStatusId ? 5 : this.trackingStatusId >= 100 && this.trackingStatusId <= 199 || this.trackingStatusId >= 500 && this.trackingStatusId <= 599 ? 3 : 0)()
                    }
                })
            }
            ,
            _createClass(t, [{
                key: "trackerKey",
                get: function() {
                    return new TrackerKey(this.trackerShardKey,this.user)
                }
            }, {
                key: "verificationRequired",
                get: function() {
                    var t, e;
                    if (1 == (1 & this.options.verificationLevel))
                        return !1;
                    const i = this._ctx.$services.storeService.storesMap
                      , s = null !== (t = null == i || null === (e = i[this.wh]) || void 0 === e ? void 0 : e.type) && void 0 !== t ? t : 0;
                    return STORE_TYPE.isForeign(s)
                }
            }]),
            t
        }();
        module.exports = DeliveryProduct;

    }
    , {
        "../../modules/delivery/states": 36,
        "../../modules/delivery/storeTypes": 37
    }],
    116: [function(require, module, exports) {
        "use strict";
        let GroupedDebtDelivery = function(t) {
            this.totalPrice = t.sum("price"),
            this.canTotalToPay = this.totalPrice,
            this.totalToPay = this.totalPrice,
            this.products = t,
            this.currency = t[0].currency,
            this.source = t[0].source,
            this.mustPayTheRest = !0
        };
        module.exports = GroupedDebtDelivery;

    }
    , {}],
    117: [function(require, module, exports) {
        "use strict";
        const {CalcFailedPaymentExpire: CalcFailedPaymentExpire} = require("../../modules/delivery/states");
        let GroupedDelivery = function() {
            function e(e) {
                this.totalPrice = 0,
                this.deliveryPrice = 0,
                this.prepaidDelivery = 0,
                this.totalPrepaid = 0,
                this.canTotalToPay = 0,
                this.hasIsAdult = !1,
                this.showPrepaid = !1,
                this.showCode = !1,
                this._ctx = e.ctx,
                e.postPayment && Object.keys(e.postPayment).length > 0 ? Object.assign(this, e.postPayment) : e.options.short ? this._createShort(e) : (this._create(e),
                this._setJSView()),
                this.needsDeliveryConfirmation = this.products.some(e=>e.needsDeliveryConfirmation),
                this.mpmPaymentStatus = this.products.first().mpmPaymentStatus
            }
            var t = e.prototype;
            return t.loadSeller = function(e, t) {
                $.view(e.target).data.loadSeller()
            }
            ,
            t.cancelDelivery = function(e, t) {
                wb.popup.confirm($.localize("Отменить доставку товаров?")).then(e=>{
                    if (!e || this.isCanceling)
                        return;
                    if ($.observable(this).setProperty({
                        isCanceling: !0
                    }),
                    "nnsz" == this.source) {
                        const e = this.products.reduce((e,t)=>{
                            let o = `${t.orderId}_${t.sticker}`
                              , i = e.get(o);
                            return i || (i = {
                                orderId: t.orderId,
                                shard: t.sticker,
                                rids: []
                            },
                            e.set(o, i)),
                            i.rids.push(t.rId),
                            e
                        }
                        , new Map);
                        return void this._ctx.$services.wbxOrderService.cancelByRids([...e.values()]).then(({success: e, error: t}={})=>{
                            if (e) {
                                var o;
                                const e = [];
                                for (const t of this.products)
                                    $.observable(t, e).setProperty({
                                        isCanceling: !0
                                    });
                                null === (o = e.trigger) || void 0 === o || o.call(e)
                            } else
                                $.observable(this).setProperty({
                                    isCanceling: !1
                                }),
                                wb.popup.renderModalError(t || "Ошибка при отмене доставки")
                        }
                        ).catch(()=>{
                            $.observable(this).setProperty({
                                isCanceling: !1
                            }),
                            wb.popup.renderModalError("Ошибка при отмене доставки")
                        }
                        )
                    }
                    const o = this.products.map(e=>e.rId);
                    this._ctx.$httpClient.fetchJSON(this._ctx.$router.urls.cancelGroupedDelivery, {
                        method: "POST",
                        body: new URLSearchParams(o.map(e=>["rids", e]))
                    }).then(e=>{
                        if (null != e && e.notExists) {
                            var i;
                            const e = null !== (i = t.view.ctx.parentView) && void 0 !== i ? i : t.view
                              , o = null == e ? void 0 : e.get("array");
                            o && o.data && $.observable(o.data).remove(e.getIndex())
                        }
                        this._ctx.updateItems(o, {
                            isCanceling: !0
                        });
                        const s = [];
                        for (const e of this.products)
                            $.observable(e, s).setProperty({
                                isCanceling: !0
                            });
                        s.trigger()
                    }
                    ).catch(e=>{
                        console.log(e),
                        wb.popup.renderModalError("Ошибка при отмене доставки")
                    }
                    )
                }
                )
            }
            ,
            t.rescheduleDelivery = function() {
                const e = this.products.filter(e=>e.needsDeliveryUpdate);
                0 == e.length && wb.popup.renderModalError("В доставке нет товаров, которые можно перенести"),
                this._ctx.$moduleLoader.loadModuleAsync("cargoDeliveryDatePicker").then(t=>{
                    (new t).showDatePickerPopup(e, this.address, "reschedule", !1, t=>{
                        $.observable(this).setProperty({
                            needsDeliveryConfirmation: !1,
                            needsDeliveryUpdate: !1,
                            needsDeliveryUpdateTimeOut: !1,
                            deliveryDateHasBeenChanged: !0
                        }),
                        e.forEach(e=>{
                            const o = `Ожидается ${t.format("d MMMM")}, 09:00&#8209;21:00`;
                            $.observable(e).setProperty({
                                dateTime: t.toISOString(),
                                receiveDate: o,
                                trackingStatus: o
                            })
                        }
                        )
                    }
                    )
                }
                )
            }
            ,
            t.confirmDelivery = function() {
                this._ctx.$moduleLoader.loadModuleAsync("cargoDeliveryDatePicker").then(e=>{
                    (new e).confirmCurrentDeliveryDate(this.products.map(e=>e.rId)),
                    $.observable(this).setProperty({
                        needsDeliveryConfirmation: !1,
                        needsDeliveryUpdate: !1,
                        needsDeliveryUpdateTimeOut: !1,
                        deliveryHasBeenConfirmed: !0
                    })
                }
                )
            }
            ,
            t.payTheRest = function(e, t) {
                this._ctx.$moduleLoader.loadModuleAsync("paymentPopup").then(e=>{
                    var o;
                    const i = t.view.ctxPrm("fromBasket")
                      , s = i || t.view.ctxPrm("postPayment") || !(null !== (o = this.isMultipleForPay) && void 0 !== o && o.call(this))
                      , r = this.products.filter(e=>e.canPrepay && (e.selectedForPay || s))
                      , a = r[0].iSOCurrency || r[0].currency
                      , n = r.map(e=>e.rId)
                      , c = s ? this.canTotalToPay : this.sumSelectedForPay();
                    e.showPayTheRestPopupAsync({
                        useWbx: "nnsz" == this.source,
                        totalToPay: c,
                        rids: n,
                        currency: a,
                        positions: r,
                        onSuccess: ()=>{
                            var e;
                            i ? $.observable(this).setProperty({
                                paid: !0
                            }) : this._refreshPayedPositions(r),
                            null === (e = this.closePopup) || void 0 === e || e.call(this),
                            this._ctx.$user.resetBalance(),
                            wb.popup.renderModalError("Оплата прошла успешно")
                        }
                    }),
                    this.paymentTimer > 0 && this._ctx.$services.groupedDeliveriesService.updateItems(null, null, this.products.toMap(e=>e.rId, e=>(e.mpmPaymentStatus = 0,
                    e)))
                }
                )
            }
            ,
            t.showPopupCourierPay = function() {
                this.location || wb.popup.renderModalError("Ошибка при получении данных, попробуйте обновить страницу");
                let e = this.products.filter(e=>e.isOnShelf);
                if (this.location.coordinates instanceof Array)
                    this.location.latitude = this.location.coordinates[0],
                    this.location.longitude = this.location.coordinates[1];
                else {
                    const e = this.location.coordinates.split(",").map(e=>parseFloat(e));
                    this.location.latitude = e[0],
                    this.location.longitude = e[1]
                }
                this._courierPopup ? this._courierPopup.showSwitchToCourierPopup(e, this.location) : this._ctx.$moduleLoader.loadModuleAsync("courierDeliveryOptionPopup").then(async t=>{
                    this._courierPopup = new t({
                        onPayCallback: t=>{
                            t.success && this._refreshPayedPositions(e)
                        }
                        ,
                        onCourier: t=>this._refreshMovedPositions(e, t)
                    }),
                    await this._courierPopup.showSwitchToCourierPopup(e, this.location)
                }
                )
            }
            ,
            t.calcPaymentTime = function() {
                var e;
                return 0 == (null === (e = this.products) || void 0 === e ? void 0 : e.length) ? 0 : CalcFailedPaymentExpire(this.products[0].orderDate)
            }
            ,
            t.showMap = function(e) {
                const t = this[e];
                if (!t)
                    return !1;
                this._ctx.$moduleLoader.loadModuleAsync("pooMapModule").then(e=>wb.popup.showCustomPopup({
                    useHtml: !0,
                    popupClassesList: ["popup-map", "shown", "j-active-address-map"],
                    showCross: !1,
                    showCloseBtn: !0,
                    closeClass: ["popup__close-btn", "j-close"],
                    contentClasses: ["popup__content"],
                    useCenteredFunction: !0,
                    onShow: o=>{
                        const i = new e({
                            form: ".j-active-address-map",
                            pooList: [Object.assign({
                                id: t.id,
                                _filled: !0,
                                dtype: t.smId,
                                createBalloon: void 0 === t.hasBalloon,
                                showSelectBtn: !1
                            }, t)],
                            mapId: "addressMap",
                            isShowMode: !0
                        });
                        6 != t.smId && 86 != t.smId || (i.pooBalloon = t,
                        i.pooBalloon.comments || (i.pooBalloon.comments = [])),
                        $.templates.singlePooMapTmpl.link(o.querySelector(".popup__content"), i);
                        const s = i.showPoo();
                        i.pooBalloon && s.then(e=>e.onPooMoreClick(t, {
                            needExtInfo: !0
                        }))
                    }
                }))
            }
            ,
            t.paySelectStart = function() {
                if ("m" == wb.settings.displayMode) {
                    const e = wb.popup.showCustomPopup({
                        useHtml: !0,
                        popupClassesList: ["popup-unpaid-product", "shown"],
                        contentClasses: ["popup__content"],
                        useCenteredFunction: !0,
                        onShow: t=>{
                            $.templates.unpaidProductPopupTmpl.link(t.querySelector(".popup__content"), {
                                delivery: this,
                                products: this.products.filter(e=>e.canPrepay),
                                sumSelectedForPay: this.sumSelectedForPay,
                                isMultipleForPay: this.isMultipleForPay,
                                currency: this.currency,
                                canTotalToPay: this.canTotalToPay,
                                totalPrice: this.totalPrice,
                                payTheRest: this.payTheRest,
                                source: this.source,
                                closePopup: ()=>e.close(),
                                _calculatePayment: this._calculatePayment,
                                _refreshPayedPositions: this._refreshPayedPositions,
                                _ctx: this._ctx
                            })
                        }
                    })
                } else
                    $.observable(this).setProperty({
                        paySelectMode: !0
                    })
            }
            ,
            t.paySelectCancel = function() {
                $.observable(this).setProperty({
                    paySelectMode: !1
                })
            }
            ,
            t.showWalletLimitPopup = function() {
                this._ctx.$moduleLoader.loadModuleAsync("walletLimitPopup").then(e=>{
                    this.walletLimitPopup = new e(e.template,!0),
                    this.walletLimitPopup.showWalletLimitPopup()
                }
                )
            }
            ,
            t.showInfoWbPayPopup = async function(e) {
                var t;
                const o = this.walletTotalToPay - e
                  , i = `Пополните на ${$.views.converters.priceWithCurrencyV2(o, !1, "₽")} для&nbsp;оплаты со&nbsp;скидкой`
                  , [s,r] = await Promise.all([this._ctx.$services.userData.getUserDataAsync(), this._ctx.$moduleLoader.loadModuleAsync("infoWbPayPopup")]);
                this.infoWbPayPopup = new r({
                    template: r.template,
                    phone: null == s || null === (t = s.userInfo) || void 0 === t ? void 0 : t.formattedPhoneMobile,
                    title: i,
                    totalPrice: o,
                    balance: e,
                    howTopUp: !0
                }),
                this.infoWbPayPopup.show()
            }
            ,
            t._refreshPayedPositions = function(e=[]) {
                var t;
                const o = []
                  , i = {
                    isPrepaid: !0,
                    selectedForPay: !1,
                    canPrepay: !1
                };
                for (const t of e)
                    $.observable(t, o).setProperty(i),
                    $.observable(t, o).setProperty({
                        prepaid: t.price
                    });
                this._ctx.updateItems(e.map(e=>e.rId), i);
                const {canTotalToPay: s, totalPrepaid: r, totalToPay: a, walletTotalToPay: n} = this._calculatePayment();
                $.observable(null !== (t = this.delivery) && void 0 !== t ? t : this, o).setProperty({
                    canTotalToPay: s,
                    totalPrepaid: r,
                    totalToPay: a,
                    walletTotalToPay: n
                }),
                o.trigger()
            }
            ,
            t._refreshMovedPositions = function(e, t) {
                var o;
                const i = []
                  , s = {
                    place_name: t,
                    status_id: "265",
                    status_name: "Оформлена доставка курьером",
                    date: 1e6 * Date.now()
                }
                  , r = {
                    smId: 5,
                    address: s.place_name,
                    trackingStatusId: s.status_id,
                    trackingStatus: s.status_name,
                    trackingStatusReady: !1
                };
                for (const t of e)
                    t.customTrackerStatus = s,
                    $.observable(t, i).setProperty(r),
                    $.observable(t, i).setProperty({
                        isOnShelf: !1
                    });
                null === (o = i.trigger) || void 0 === o || o.call(i)
            }
            ,
            t._calculatePayment = function() {
                let e = 0
                  , t = 0
                  , o = 0
                  , i = 0;
                for (const s of this.products.filter(e=>!e.archive))
                    s.supplierPayment ? e += s.prepaid : (t += s.prepaid,
                    s.canPrepay && 0 == s.prepaid && (o += s.price)),
                    s.prepaid || 1 !== s.paymentSaleType || (i += s.price);
                o && (o += (this.deliveryPrice || 0) - (this.prepaidDelivery || 0));
                const s = this.totalPrice - t - e;
                return {
                    canTotalToPay: +o.toFixed(2),
                    totalPrepaid: +t.toFixed(2),
                    totalToPay: +s.toFixed(2),
                    walletTotalToPay: +i.toFixed(2)
                }
            }
            ,
            t._createShort = function({data: e, positions: t, locations: o}) {
                var i;
                const s = o[e.locationId];
                s && (this.deliveryType = s.deliveryType,
                s.address && ([this.address,this.recipientPhone] = s.address.split(", телефон ")),
                this.workTime = s.workTime),
                this.officeId = null === (i = t.find(e=>e.officeId > 0)) || void 0 === i ? void 0 : i.officeId,
                this.products = [],
                this.currency = e.currency,
                this.smId = e.smId;
                let r = t[0].dateTime
                  , a = t[0].dateTime;
                for (const e of t)
                    this.products.push({
                        code1S: e.code1S
                    }),
                    this.showCode = this.showCode || e.showCode,
                    e.dateTime && (e.dateTime < r && (r = e.dateTime),
                    e.dateTime > a && (a = e.dateTime));
                this.totalToPay = 0,
                this.source = e.source,
                this.readyToReceiveToday = e.readyToReceiveToday,
                this.readyToReceiveToday ? this.courier = !(5 != e.smId && 17 != e.smId && 86 != e.smId || 260 != t[0].trackingStatusId && 555 != t[0].trackingStatusId) : !e.delayed && r ? this.receiveDate = wb.helpers.date.formatEstimated(r) : this.receiveDate = t[0].receiveDate,
                e.archive && (this.archive = e.archive)
            }
            ,
            t._create = function({data: e, positions: t, locations: o, options: i}) {
                var s, r, a;
                this.products = t,
                e.payFailed && (this.orderId = e.orderId,
                this.payFailed = !0,
                this.partialPayment = e.partialPayment,
                this.paymentTimer = this.calcPaymentTime()),
                this.smId = e.smId,
                this.verificationRequired = e.verificationRequired,
                this.officeId = null === (s = t.find(e=>e.officeId > 0)) || void 0 === s ? void 0 : s.officeId,
                this.pid = null === (r = t.find(e=>e.pid > 0)) || void 0 === r ? void 0 : r.pid,
                e.source && (this.source = e.source),
                this.pid > 0 && 86 == e.smId && (this.pid += 1e7),
                this.currency = e.currency,
                this.returnCost = e.returnCost;
                const n = o[e.locationId];
                n && (this.deliveryType = n.deliveryType,
                n.address && ([this.address,this.recipientPhone] = n.address.split(", телефон ")),
                this.workTime = n.workTime,
                this.location = n.mapLocation),
                this.canCancel = !0;
                for (const t of this.products)
                    e.payFailed && 0 == this.paymentTimer && (t.canCancel = !1),
                    this.canCancel = this.canCancel && t.canCancel && !t.isCanceling;
                this.allSupplierReturn = !0;
                for (const e of this.products.filter(e=>!e.archive)) {
                    const t = e.supplierPayment;
                    if (this.allSupplierReturn &= t,
                    this.hasIsAdult = this.hasIsAdult || e.isAdult,
                    t || (this.totalPrice += e.price),
                    this.deliveryPrice += e.deliveryPrice || 0,
                    this.prepaidDelivery += e.prepaidDelivery,
                    this.showPrepaid = this.showPrepaid || !t,
                    this.showCode = this.showCode |= e.showCode,
                    !this.courierOfficeAddress) {
                        const t = o[e.officeLocationId];
                        t && (this.courierOfficeAddress = t.address,
                        this.courierOfficeLocation = t.mapLocation)
                    }
                    !this.unclaimedCost && e.unclaimedCost > 0 && (this.unclaimedCost = e.unclaimedCost)
                }
                this.totalPrice = +this.totalPrice.toFixed(2);
                const {canTotalToPay: c, totalPrepaid: l, totalToPay: d, walletTotalToPay: p} = this._calculatePayment();
                this.totalToPay = d,
                this.canTotalToPay = c,
                this.totalPrepaid = l,
                this.walletTotalToPay = p,
                this.mustPayTheRest = !1 !== (null === (a = wb.global.settings) || void 0 === a || null === (a = a.switches) || void 0 === a ? void 0 : a.enablePayTheRestInDeliveries),
                this.source = e.source
            }
            ,
            t.courierPhone = function() {
                var e;
                return null === (e = this.products.find(e=>260 == e.trackingStatusId || 555 == e.trackingStatusId)) || void 0 === e ? void 0 : e.courierPhone
            }
            ,
            t.canMoveToCourier = function() {
                var e;
                return (null === (e = this.location) || void 0 === e ? void 0 : e.courier) && "RUB" === this.currency && this.products.some(e=>e.isOnShelf)
            }
            ,
            t.needsDeliveryUpdate = function() {
                return 17 == this.smId && this.products.some(e=>e.needsDeliveryUpdate)
            }
            ,
            t._setJSView = function() {
                function e() {
                    return this.products.some(e=>e.selectedForPay)
                }
                function t() {
                    const e = this.products.filter(e=>e.selectedForPay).reduce((e,t)=>e + (t.canPrepay ? t.price : 0), 0);
                    return e ? e + (this.deliveryPrice || 0) : 0
                }
                function o() {
                    return 86 == this.smId && this.products.find(e=>Number(260 == e.trackingStatusId) || Number(210 == e.trackingStatusId))
                }
                this.canMoveToCourier.depends = ["location^courier", "products.[]^isOnShelf"],
                this.needsDeliveryUpdate.depends = ["location^courier", "products.[]^needsDeliveryUpdate"],
                e.depends = "products.[]^selectedForPay",
                t.depends = "products.[]^selectedForPay",
                o.depends = "products.[]^trackingStatusId",
                this.courierPhone.depends = "products.[]^courierPhone",
                this.anySelectedForPay = e,
                this.sumSelectedForPay = t,
                this.showPostamatBlock = o,
                this.isMultipleForPay = function() {
                    if (this.payFailed)
                        return !1;
                    let e = 0;
                    for (const t of this.products)
                        if (t.canPrepay && e++,
                        e > 1)
                            return !0;
                    return !1
                }
            }
            ,
            e
        }();
        module.exports = GroupedDelivery;

    }
    , {
        "../../modules/delivery/states": 36
    }],
    118: [function(require, module, exports) {
        "use strict";
        const PRIVATE_CODE_CACHE_OLD_KEY = "_private_code"
          , PRIVATE_CODE_CACHE_KEY = "_private_code_v2";
        let PrivateCodeCache = function() {
            function e() {}
            var t = e.prototype;
            return t.sync = function(e, t) {
                if (t) {
                    const r = t.expireM || 60
                      , a = (new Date).addMinutes(r).getTime()
                      , o = btoa(JSON.stringify({
                        privateCode: t.privateCode,
                        qrStr: t.qrStr,
                        ver: t.ver,
                        expire: a
                    }));
                    localStorage.clearStartsWith("_private_code"),
                    localStorage.clearStartsWith("_private_code_v2"),
                    localStorage.setItem(`_private_code_v2_${e}`, o)
                }
            }
            ,
            t.get = function(e, t) {
                const r = localStorage.getItem(`_private_code_v2_${e}`);
                if (r)
                    try {
                        const e = JSON.parse(atob(r));
                        return t != e.ver || (e.expire || 0) < (new Date).getTime() ? (this.clear(),
                        null) : e
                    } catch (e) {
                        return console.error(e),
                        null
                    }
                return null
            }
            ,
            t.clear = function() {
                localStorage.clearStartsWith("_private_code"),
                localStorage.clearStartsWith("_private_code_v2")
            }
            ,
            e
        }();
        module.exports = PrivateCodeCache;

    }
    , {}],
    119: [function(require, module, exports) {
        "use strict";
        const GroupedDebtDelivery = require("./groupedDeliveries/groupedDebtDelivery")
          , GroupedDelivery = require("./groupedDeliveries/groupedDelivery")
          , DeliveriesOverview = require("./groupedDeliveries/deliveriesOverview")
          , PrivateCodeCache = require("./groupedDeliveries/privateCodeCache")
          , {PayStatus: PayStatus} = require("../modules/delivery/states")
          , OrdersArchiveService = require("./ordersArchiveService");
        let GroupedDeliveriesService = function() {
            function e() {
                this.wbxOrdersSyncRange = [],
                this.$eventBus.addEventListener("onUserAuth", this._confirmCargoDeliveryIfRequired.bind(this)),
                Object.defineProperty(this, "privateCodeCache", {
                    enumerable: !1,
                    configurable: !1,
                    writable: !1,
                    value: new PrivateCodeCache
                }),
                Object.setPrototypeOf(OrdersArchiveService.prototype, WbSpaModel.prototype),
                this.ordersArchiveService = new OrdersArchiveService
            }
            var t = e.prototype;
            return t.init = function() {
                this.$eventBus.addEventListener("onUserAuth", async()=>{
                    var t;
                    e(),
                    this._subscribed || (this._subscribed = !0,
                    wb.global.subscribe(()=>e()));
                    const r = await this.get({
                        readyToReceive: "d" == wb.settings.displayMode,
                        short: !0,
                        fromCache: !0,
                        caller: "GroupedDeliveriesService.init",
                        useTracker: !0
                    }).catch(e=>console.log(e));
                    let i = null !== (t = r.active) && void 0 !== t ? t : [];
                    r.postPayments && (i = [...r.postPayments, ...r.active]),
                    i && $.observable(wb.spa.getMainLayout().$userEnv).setProperty({
                        deliveries: i,
                        readyCount: r.totalReady,
                        debtsCount: r.debtsCount
                    })
                }
                );
                const e = ()=>{
                    var e;
                    wb.global.settings.variables.wbxOrdersSyncRange && (this.wbxOrdersSyncRange = (null === (e = wb.global.settings.variables.wbxOrdersSyncRange) || void 0 === e || null === (e = e.split(";")) || void 0 === e || null === (e = e.map(e=>+e)) || void 0 === e || null === (e = e.toChunk(2)) || void 0 === e ? void 0 : e.filter(e=>2 === e.length)) || [],
                    this.ordersArchiveService.setMergeOptions({
                        syncDisabled: !this.ordersSyncSupported(),
                        ordoOnly: !wb.global.settings.switches.enableWbxOrder
                    }))
                }
            }
            ,
            t.ordersSyncSupported = function() {
                const e = this.$router.userId;
                if (!e)
                    return !!this.$router.userIsAuth;
                for (const t of this.wbxOrdersSyncRange)
                    if (t[0] < e && e < t[1])
                        return !0;
                return !1
            }
            ,
            t.getStorageModel = async function({fromCache: e, caller: t}={}) {
                var r;
                const i = await this.$user.getUserInfo();
                return i.isAuth ? this.ordersArchiveService.getItems({
                    uid: i.uid,
                    fromCache: e && !this.ordersArchiveService.isCacheExpired,
                    ordoOnly: !(null !== (r = wb.global) && void 0 !== r && null !== (r = r.settings) && void 0 !== r && null !== (r = r.switches) && void 0 !== r && r.enableWbxOrder),
                    localOnly: !this.ordersSyncSupported(),
                    caller: [...t ? [].concat(t) : [], "groupedDeliveriesService.getStorageModel"]
                }) : {}
            }
            ,
            t.get = async function(e={}) {
                var t, r, i, o;
                const s = await this.getStorageModel({
                    caller: [...e.caller ? [].concat(e.caller) : [], "groupedDeliveriesService.get"],
                    ...e
                })
                  , a = s.debtPositions;
                a.length && (s.postPayment = {
                    totalPrice: a.sum("price"),
                    canTotalToPay: a.sum("price"),
                    totalToPay: a.sum("price"),
                    products: a,
                    currency: a[0].currency,
                    mustPayTheRest: !0
                });
                const n = this.$services.orderService.getOrders();
                if ((null == n ? void 0 : n.size) > 0) {
                    [...n.values()].filter(e=>{
                        var t;
                        return null === (t = e.state) || void 0 === t ? void 0 : t.startsWith("need_")
                    }
                    ).length > 0 && (e.additionalPositions = [],
                    e.additionalLocations = {},
                    n.forEach(t=>{
                        const {positions: r, locations: i} = t.toPositionsModel({
                            processing: !0
                        });
                        e.additionalPositions = [...e.additionalPositions, ...r],
                        e.additionalLocations = Object.assign(e.additionalLocations, i)
                    }
                    ))
                }
                "SpaActiveOrdersEntrypoint" != (null === (t = this.$router.currentRoute) || void 0 === t ? void 0 : t.name) && e.useTracker && (null === (r = s.forTrackers) || void 0 === r ? void 0 : r.size) > 0 && await this.updateTrackers(s);
                const {groupedDeliveries: d, failedPayments: c, totalReady: l} = this._getGrouped(s, e);
                let u;
                return d.length > 0 && (u = await this.getCode(s.codeDeliveryVer)),
                {
                    active: d,
                    totalReady: l,
                    debtsCount: s.debtPositions.length,
                    isAllPostamat: d.every(e=>86 === e.smId),
                    failedPayments: c,
                    postPayments: this._getGroupedPostPayment(s, e),
                    privateCode: null === (i = u) || void 0 === i ? void 0 : i.privateCode,
                    qrCode: null === (o = u) || void 0 === o ? void 0 : o.qrCode,
                    purchaseInfo: s.purchaseInfo,
                    forTrackers: s.forTrackers,
                    positionsMap: s.positionsMap
                }
            }
            ,
            t.getCode = async function(e) {
                const t = await this.$user.getUserInfo()
                  , [r,i] = await Promise.all([this.getPrivateCode(t.uid, e), this.$moduleLoader.loadModuleAsync("qrGenerator")]);
                return r.qrStr && (r.qrCode = (new i).generatePng(r.qrStr, {
                    ecclevel: "Q",
                    modulesize: 20
                })),
                r
            }
            ,
            t.getLocalCount = async function({caller: e, useTracker: t}={}) {
                var r, i;
                const o = await this.getStorageModel({
                    fromCache: !0,
                    caller: [...e ? [].concat(e) : [], "groupedDeliveriesService.getLocalCount"]
                });
                if (null == o)
                    return {};
                const s = {
                    total: o.debtPositions.length,
                    unpaid: o.debtPositions.length,
                    ready: 0
                };
                "SpaActiveOrdersEntrypoint" != (null === (r = this.$router.currentRoute) || void 0 === r ? void 0 : r.name) && t && (null === (i = o.forTrackers) || void 0 === i ? void 0 : i.size) > 0 && await this.updateTrackers(o);
                for (const e of o.positions)
                    s.total++,
                    s.ready += this.$services.trackingService.isStatusReady(e.trackingStatusId);
                return s
            }
            ,
            t.updateTrackers = function(e, {timeout: t=1e3}={}) {
                const r = []
                  , i = []
                  , o = new AbortController;
                setTimeout(()=>o.abort(), t || 1e3);
                const s = new Map;
                return e.forTrackers.forEach((t,a)=>{
                    r.push(this.$services.trackingService.getLastStatuses(a, t, o.signal).then(({found: t, notFound: r})=>{
                        t.forEach((t,r)=>{
                            const o = e.positionsMap.get(r);
                            !o || 8 == o.status && 210 != t.statusId || ((o.trackingStatusId != t.statusId || "nnsz" != o.source && Math.floor(o.lastDate / 1e3) != t.unixSeconds) && s.set(o.rId, o),
                            o.trackingStatusId = t.statusId,
                            o.readyToReceiveToday = t.ready,
                            $.observable(o, i).setProperty({
                                noTracking: !1,
                                trackingStatus: t.status,
                                trackingStatusReady: t.isComplete(o.smId)
                            }),
                            o.setIsOnShelf(i),
                            "nnsz" != o.source && o.setCancel(i),
                            t.phone && $.observable(o, i).setProperty({
                                courierPhone: t.phone
                            }),
                            o.lastDate = new Date(t.dateTime))
                        }
                        );
                        for (const t of r) {
                            const r = e.positionsMap.get(t);
                            "ordo" == (null == r ? void 0 : r.source) && $.observable(r, i).setProperty({
                                noTracking: !0
                            })
                        }
                    }
                    ).catch(e=>{
                        console.error(e)
                    }
                    ))
                }
                ),
                Promise.all(r).then(()=>{
                    var e;
                    null === (e = i.trigger) || void 0 === e || e.call(i),
                    this.updateItems(null, null, s)
                }
                )
            }
            ,
            t.getPrivateCode = async function(e, t) {
                const r = this.privateCodeCache.get(e, t);
                return r || this.$httpClient.fetchJSON("/webapi/lk/myorders/delivery/code2", {
                    method: "POST"
                }, {
                    includeResponse: !0
                }).then(t=>(this.privateCodeCache.sync(e, t.responseData),
                t.responseData)).catch(()=>({}))
            }
            ,
            t.getPurchaseInfo = async function() {
                return this.ordersArchiveService.getPurchaseInfo() || await this.get({
                    fromCache: !0,
                    caller: "getPurchaseInfo"
                }).then(e=>e.purchaseInfo)
            }
            ,
            t.getOverview = async function() {
                const e = await this.get({
                    fromCache: !0,
                    caller: "getOverview"
                });
                return new DeliveriesOverview(e)
            }
            ,
            t._confirmCargoDeliveryIfRequired = function() {
                var e, t, r;
                (null !== (e = wb.global.settings) && void 0 !== e && null !== (e = e.switches) && void 0 !== e && e.enableCargoDeliveryUpdate || null !== (t = wb.global.settings) && void 0 !== t && null !== (t = t.switches) && void 0 !== t && t.enableCargoDeliveryUpdateV2) && "SpaActiveOrdersEntrypoint" !== (null === (r = this.$router.currentRoute) || void 0 === r ? void 0 : r.name) && this.$helper.sleep(300).then(()=>this.getCargoDeliveriesForConfirmation().then(e=>{
                    var t;
                    return (null == e || null === (t = e.cargoPositions) || void 0 === t ? void 0 : t.length) && this.$moduleLoader.loadModuleAsync("cargoDeliveryDatePicker").then(t=>{
                        (new t).showDatePickerPopup(e.cargoPositions, e.address, e.multipleDeliveries ? "confirm_multiple" : "confirm")
                    }
                    )
                }
                ))
            }
            ,
            t.getCargoDeliveriesForConfirmation = async function() {
                const e = await this.get({
                    fromCache: !0,
                    caller: "getCargoDeliveriesForConfirmation"
                });
                let t = null
                  , r = 0;
                const i = e.active.reduce((e,i)=>{
                    if (17 === i.smId) {
                        let o = wb.global.settings.switches.enableCargoDeliveryUpdateV2 ? i.products.filter(e=>e.needsDeliveryUpdateTimeOut) : i.products.filter(e=>e.needsDeliveryConfirmation);
                        e.push(...o),
                        o.length > 0 && (t = i.address,
                        r++)
                    }
                    return e
                }
                , []);
                return i.length > 0 && wb.global.userSettings.closed.indexOf(i.map(e=>e.rId).join(",")) > -1 ? {
                    address: t,
                    cargoPositions: []
                } : {
                    address: t,
                    cargoPositions: i,
                    multipleDeliveries: r > 1
                }
            }
            ,
            t.resetCache = function() {
                this.ordersArchiveService.resetCache(),
                this.privateCodeCache.clear()
            }
            ,
            t.merge = function(e) {
                this.ordersArchiveService.addItem(e)
            }
            ,
            t.updateItems = function(e, t, r) {
                this.ordersArchiveService.updateItems(e, t, r)
            }
            ,
            t.groupDebt = function(e) {
                return this._getGroupedPostPayment(e)
            }
            ,
            t._getGrouped = function(e, t) {
                var r, i;
                const o = new Map
                  , s = null !== (r = t.additionalPositions) && void 0 !== r ? r : []
                  , a = null !== (i = t.additionalLocations) && void 0 !== i ? i : []
                  , n = new Set
                  , d = new Set;
                let c = 0;
                e.positions.concat(s).reduce((e,t)=>(n.has(t.rId) || (n.add(t.rId),
                e.push(t)),
                e), []).filter(e=>{
                    const r = e.trackingStatusId > 0 ? e.trackingStatusReady || 5 == e.smId && 210 == e.trackingStatusId : e.readyToReceiveToday;
                    return r && c++,
                    !t.readyToReceive || r
                }
                ).forEach(e=>{
                    const r = this._groupBy(e, t)
                      , i = JSON.stringify(r);
                    let s;
                    e.payState != PayStatus.PayFail && e.orderId && d.add(e.orderId),
                    o.has(i) ? s = o.get(i) : (s = {
                        data: r,
                        positions: []
                    },
                    o.set(i, s)),
                    s.positions.push(e)
                }
                );
                const l = []
                  , u = [];
                return o.forEach(({data: r, positions: i})=>{
                    const o = r.payFailed ? u : l;
                    r.payFailed && r.orderId && d.has(r.orderId) && (r.partialPayment = !0),
                    o.push(new GroupedDelivery({
                        data: r,
                        positions: i,
                        locations: Object.assign({}, a, e.locations),
                        postamatOrderInfos: e.postamatOrderInfos,
                        options: t,
                        ctx: this
                    }))
                }
                ),
                l.sort((e,t)=>86 != e.smId && 86 != t.smId ? 0 : 86 == e.smId ? 1 : -1),
                u.sort((e,t)=>(t.paymentTimer || 0) - (e.paymentTimer || 0)),
                {
                    groupedDeliveries: l,
                    failedPayments: u,
                    totalReady: c
                }
            }
            ,
            t._getGroupedPostPayment = function(e) {
                var t, r;
                if (0 == (null !== (t = null === (r = e.debtPositions) || void 0 === r ? void 0 : r.length) && void 0 !== t ? t : 0))
                    return [];
                const i = new Map;
                e.debtPositions.forEach(e=>{
                    const t = {
                        currency: e.currency,
                        sticker: e.sticker
                    }
                      , r = JSON.stringify(t);
                    let o;
                    i.has(r) ? o = i.get(r) : (o = {
                        positions: []
                    },
                    i.set(r, o)),
                    o.positions.push(e)
                }
                );
                let o = [];
                return i.forEach(({positions: e})=>{
                    o.push(new GroupedDelivery({
                        ctx: this,
                        postPayment: new GroupedDebtDelivery(e)
                    }))
                }
                ),
                o
            }
            ,
            t._groupBy = function(e, t) {
                const r = {
                    smId: e.smId,
                    locationId: e.locationId,
                    currency: e.currency,
                    payFailed: e.payState == PayStatus.PayFail,
                    verificationRequired: e.verificationRequired,
                    orderId: e.payState == PayStatus.PayFail ? e.orderId : 0
                };
                return t.short ? (r.delayed = e.delayed,
                r.archive = e.archive,
                r.readyToReceiveToday = e.trackingStatusId > 0 ? e.trackingStatusReady || 5 == e.smId && 210 == e.trackingStatusId : e.readyToReceiveToday,
                r.readyToReceiveToday || (r.smId = 0,
                r.locationId = "0",
                r.currency = "")) : r.source = e.source,
                r
            }
            ,
            e
        }();
        module.exports = GroupedDeliveriesService;

    }
    , {
        "../modules/delivery/states": 36,
        "./groupedDeliveries/deliveriesOverview": 114,
        "./groupedDeliveries/groupedDebtDelivery": 116,
        "./groupedDeliveries/groupedDelivery": 117,
        "./groupedDeliveries/privateCodeCache": 118,
        "./ordersArchiveService": 121
    }],
    120: [function(require, module, exports) {
        "use strict";
        function _defineProperties(e, t) {
            for (var r = 0; r < t.length; r++) {
                var i = t[r];
                i.enumerable = i.enumerable || !1,
                i.configurable = !0,
                "value"in i && (i.writable = !0),
                Object.defineProperty(e, _toPropertyKey(i.key), i)
            }
        }
        function _createClass(e, t, r) {
            return t && _defineProperties(e.prototype, t),
            r && _defineProperties(e, r),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            e
        }
        function _toPropertyKey(e) {
            var t = _toPrimitive(e, "string");
            return "symbol" == typeof t ? t : String(t)
        }
        function _toPrimitive(e, t) {
            if ("object" != typeof e || !e)
                return e;
            var r = e[Symbol.toPrimitive];
            if (void 0 !== r) {
                var i = r.call(e, t || "default");
                if ("object" != typeof i)
                    return i;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === t ? String : Number)(e)
        }
        !function() {
            const e = e=>new Promise(t=>setTimeout(t, e));
            let t = function() {
                function e() {}
                var t = e.prototype;
                return t.setProps = function(e, t) {
                    var r, i;
                    this.chrt_id = e.characteristicId,
                    this.nm_id = e.cod1S,
                    this.subject_id = e.subjectId,
                    this.price = null !== (r = e.priceBasic) && void 0 !== r ? r : 100 * e.price,
                    this.total_price = null !== (i = e.priceTotal) && void 0 !== i ? i : 100 * e.priceWithCouponAndDiscount,
                    this.sale = e.sale,
                    this.brand = e.brandName,
                    this.name = e.goodsName,
                    this.size = e.sizeName,
                    this.positions = [],
                    [...Array(e.quantity).keys()].forEach(r=>{
                        this.positions.push({
                            rid: wb.helpers.generateGuid(),
                            wh: e.storeId,
                            return_fee: 100 * t.fittingPrice
                        })
                    }
                    ),
                    this.targetUrl = e.targetUrl,
                    this.colorName = e.colorName,
                    this.quantity = e.quantity,
                    this.subjectParentId = e.subjectParentId,
                    this.storeId = e.storeId,
                    this.timestamp = e.timestamp,
                    this.saleConditions = e.saleConditions,
                    this.catalogReturnCost = e.catalogReturnCost,
                    this.logisticsCost = e.logisticsCost,
                    this.whDtype = e.whDtype,
                    this.payloadV2 = e.payloadV2,
                    this.reviewRating = e.reviewRating,
                    this.feedbacks = e.feedbacks || e.commentsCount,
                    this.supplierId = e.supplierId,
                    this.supplierName = e.supplierName
                }
                ,
                t.toStorageItem = function() {
                    var e, t, r;
                    return {
                        id: this.nm_id,
                        name: null !== (e = this.name) && void 0 !== e ? e : "",
                        subjectId: this.subject_id,
                        subjectParentId: this.subjectParentId,
                        reviewRating: this.reviewRating,
                        feedbacks: this.feedbacks,
                        brand: null !== (t = this.brand) && void 0 !== t ? t : "",
                        price: this.price,
                        salePrice: this.total_price,
                        option: {
                            id: this.chrt_id,
                            name: null !== (r = this.sizeName) && void 0 !== r ? r : ""
                        },
                        quantity: this.positions.length,
                        return_fee: this.positions[0].return_fee,
                        rids: this.positions.map(e=>e.rid),
                        sale: this.sale,
                        supplierId: this.supplierId,
                        supplierName: this.supplierName
                    }
                }
                ,
                e
            }()
              , r = function() {
                function e() {}
                var r = e.prototype;
                return r.setGlobals = function(e="", t="", r="", i=0) {
                    this.lang = t,
                    this.locale = r,
                    this.order_uid = e,
                    this.app_type = i,
                    this.order_dt = Date.now()
                }
                ,
                r.setFormData = function(e) {
                    this.fd = [];
                    for (const [t,r] of e)
                        this.fd.push({
                            key: t,
                            value: r
                        })
                }
                ,
                r.setItems = function(e, r, i) {
                    this.items = [],
                    e.forEach(e=>{
                        let r = new t;
                        r.setProps(e, i),
                        this.items.push(r)
                    }
                    ),
                    this.basket_params = r
                }
                ,
                r.setPayment = function(e, t, r=0) {
                    this.paymentCode = e.paymentType.code,
                    this.pay_type = 1,
                    this.pay_mode = e.postPay ? 20 : 10,
                    this.payment = {
                        amount: 100 * (t + r),
                        goods_total: 100 * t,
                        delivery_cost: 100 * r,
                        currency: e.currency,
                        merchant: e.merchantId,
                        paymentType: e.paymentType
                    },
                    this.wbpay = {
                        return_url: `${e.returnUrl}?orderId=${this.order_uid}&ext=1`,
                        token: {
                            card_id: e.bankCardId
                        }
                    }
                }
                ,
                r.setDelivery = function(e={}, t={}) {
                    var r;
                    let i = new Date(e.deliveryDate);
                    this.delivery = {
                        delivery_type: "self" === e.deliveryType ? 6 : 5,
                        dst_office_id: e.dstOfficeId,
                        delivery_time: Date.UTC(i.getFullYear(), i.getMonth(), i.getDate()) / 1e3,
                        latitude: Number(e.lat),
                        longitude: Number(e.lon),
                        full_address: e.address,
                        email: t.email,
                        phone: null === (r = t.phone) || void 0 === r ? void 0 : r.toString(),
                        name: t.fullName,
                        tin: `${t.inn}`
                    }
                }
                ,
                r.updateState = function(e) {
                    this.state_dt = Date.now(),
                    console.log(`[ORDER_SYNC]: order ${this.order_uid} state changed from ${this.state} to ${e}`),
                    this.state = e
                }
                ,
                r.toJsonModel = function() {
                    return {
                        order: {
                            order_uid: this.order_uid,
                            lang: this.lang,
                            locale: this.locale,
                            app_type: this.app_type,
                            pay_type: this.pay_type,
                            pay_mode: this.pay_mode,
                            items: this.items,
                            payment: this.payment,
                            delivery: this.delivery,
                            basket_params: this.basket_params
                        },
                        wbpay: this.wbpay
                    }
                }
                ,
                r.toStorageItem = function() {
                    var e;
                    return {
                        app_type: this.app_type,
                        lang: this.lang,
                        locale: this.locale,
                        pay_mode: this.pay_mode,
                        sticker: this.sticker,
                        timestamp: Math.round(this.order_dt / 1e3),
                        tracking: "",
                        uid: this.order_uid,
                        delivery: {
                            address: null !== (e = this.delivery.full_address) && void 0 !== e ? e : "",
                            delivery_type: this.delivery.delivery_type,
                            delivery_time: this.delivery.delivery_time,
                            service: 5 == this.delivery.delivery_type ? "wb_courier" : "wb_pvz",
                            dst_office_id: this.delivery.dst_office_id,
                            latitude: this.delivery.latitude,
                            longitude: this.delivery.longitude,
                            city: "",
                            country: "",
                            email: "",
                            first_name: "",
                            phone: "",
                            region: "",
                            surname: "",
                            zip: ""
                        },
                        items: this.items.map(e=>e.toStorageItem()),
                        payment: {
                            amount: this.payment.amount,
                            currency: this.payment.currency,
                            delivery_cost: this.payment.delivery_cost,
                            goods_total: this.payment.goods_total,
                            merchant: this.payment.merchant
                        }
                    }
                }
                ,
                r.toPositionsModel = function({processing: e}={}) {
                    const t = {}
                      , r = [];
                    for (const o of this.items)
                        for (const n of o.positions) {
                            var i, s, a;
                            let d;
                            d = 6 == this.delivery.delivery_type && this.delivery.dst_office_id > 0 ? `6_${this.delivery.dst_office_id}` : wb.helpers.getHashCode(this.delivery.full_address);
                            const l = {
                                brand: o.brand,
                                characteristicId: o.chrt_id,
                                code1S: o.nm_id,
                                currency: null === (i = this.payment) || void 0 === i ? void 0 : i.currency,
                                deliveryPrice: ((null === (s = this.payment) || void 0 === s ? void 0 : s.delivery_cost) || 0) / 100,
                                locationId: d,
                                name: o.name,
                                orderDate: (new Date).toISOString(),
                                paymentType: null === (a = this.payment) || void 0 === a ? void 0 : a.type,
                                price: o.total_price / 100,
                                receiveDate: wb.helpers.date.formatEstimated(1e3 * this.delivery.delivery_time),
                                returnCost: (n.return_fee || 0) / 100,
                                rId: n.rid,
                                size: o.size,
                                showCode: !0,
                                supplierId: o.supplierId,
                                supplierName: o.supplierName,
                                timestamp: Math.round(this.order_dt / 1e3),
                                version: "v4"
                            };
                            e && (l.noTracking = !0,
                            l.trackingStatus = "В обработке",
                            l.status = "New"),
                            t[l.locationId] || (t[l.locationId] = {
                                address: this.delivery.full_address,
                                deliveryType: 6 == this.delivery.delivery_type ? "Пункт выдачи" : "Курьерская"
                            }),
                            r.push(l)
                        }
                    return {
                        positions: r,
                        locations: t
                    }
                }
                ,
                _createClass(e, [{
                    key: "asFormData",
                    get: function() {
                        let e = new FormData;
                        for (const t of this.fd)
                            e.append(t.key, t.value);
                        e.append("orderDetails.ClientOrderId", this.order_uid);
                        for (let t = 0; t < this.items.length; t++)
                            e.append(`orderDetails.UserBasketItems[${t}].OrderedItemGuidsStr`, this.items[t].positions.map(e=>e.rid).join(","));
                        return e
                    }
                }]),
                e
            }()
              , i = function() {
                function i() {
                    this._userId = this.$user.getId(),
                    this._isUserAuth ? this._initInnerStorage() : console.log(`[ORDER_SYNC]: user id is ${this._userId} - initializing empty inner storage`)
                }
                var s = i.prototype;
                return s.startSync = function(e) {
                    this._submitOrderUrl = e + "/lk/basket/spa/submitorder",
                    this._notifyOrderSaveFailedUrl = "/webapi/lk/newsfeed/notify/failedorder",
                    this._userId = this.$user.getId(),
                    this._isUserAuth && (this._initInnerStorage(),
                    this._startSyncJob())
                }
                ,
                s._initInnerStorage = function() {
                    try {
                        let e = localStorage.getObject(this._storageKey);
                        this._innerStorage = e ? new Map(Object.entries(e).map(e=>{
                            let i = e[1]
                              , s = Object.assign(new r, i);
                            return s.items = i.items.map(e=>Object.assign(new t, e)),
                            e[1] = s,
                            e
                        }
                        )) : new Map
                    } catch (e) {
                        console.error(e),
                        wb.spa.logError(e, "[ORDER_SYNC]: failed to read from localstorage", !0),
                        this._innerStorage = new Map
                    }
                }
                ,
                s._startSyncJob = async function(t=1e4) {
                    for (; ; ) {
                        let a = this.getOrders();
                        if (0 === a.size) {
                            await e(t);
                            continue
                        }
                        let o = a.toArray();
                        for (let a = 0; a < o.length; a++) {
                            var r, i;
                            let n = o[a]
                              , d = n.order_uid;
                            if ("success" === n.state && Date.now() - n.state_dt > 6e4)
                                this._removeOrder(d),
                                await e(t);
                            else if ("accepted_locally" !== n.state)
                                if (Date.now() - n.order_dt > (null !== (r = null === (i = wb.global) || void 0 === i || null === (i = i.settings) || void 0 === i || null === (i = i.variables) || void 0 === i ? void 0 : i.localOrderTtl) && void 0 !== r ? r : 864e5))
                                    wb.spa.orderMetrics("lq_expired"),
                                    wb.spa.logError(new Error("[ORDER_SYNC]: order expired"), n),
                                    this._handleOrderSaveError(n),
                                    this._removeOrder(d);
                                else if ("need_resave" === n.state) {
                                    let r = await this._saveOrder(n);
                                    if (r.needReSave) {
                                        wb.spa.orderMetrics(n.state);
                                        continue
                                    }
                                    if (r.err) {
                                        wb.spa.orderMetrics("fail"),
                                        wb.spa.logError(new Error(`[ORDER_SYNC]: order save failed with server error=${JSON.stringify(r.err)}`), n),
                                        this._handleOrderSaveError(n),
                                        this._removeOrder(d);
                                        continue
                                    }
                                    if (r.success) {
                                        var s;
                                        wb.spa.orderMetrics("success"),
                                        wb.spa.logError(new Error(`[ORDER_SYNC]: order save succeeded data=${JSON.stringify(r.data)}`), n);
                                        let i = null === (s = r.data) || void 0 === s || null === (s = s.data) || void 0 === s ? void 0 : s.paymentFailErrMsg;
                                        i && this._handleOrderSaveError(n, i),
                                        this._removeOrder(d),
                                        await e(t)
                                    } else
                                        wb.spa.orderMetrics("success2"),
                                        wb.spa.logError(new Error(`[ORDER_SYNC]: order save failed redirect required data=${JSON.stringify(r.data)}`), n),
                                        this._handleOrderSaveError(n),
                                        this._removeOrder(d)
                                }
                        }
                        await e(t)
                    }
                }
                ,
                s._handleOrderSaveError = function(e, t="") {
                    let r = e.items.map(e=>({
                        characteristicId: e.chrt_id,
                        quantity: e.quantity,
                        cod1S: e.nm_id,
                        targetUrl: e.targetUrl,
                        subjectId: e.subject_id,
                        subjectParentId: e.subjectParentId,
                        reviewRating: e.reviewRating,
                        feedbacks: e.feedbacks || e.commentsCount
                    }));
                    this._sendOrderSaveFailedNotification(t),
                    this.$services.cartService.addManyItems(r)
                }
                ,
                s._sendOrderSaveFailedNotification = function(e="") {
                    this.$httpClient.fetchJSON(`${this._notifyOrderSaveFailedUrl}?paymentFailErrMsg=${e}`, {
                        method: "POST"
                    })
                }
                ,
                s._storeOrder = function(e, t=!0) {
                    this._innerStorage.set(e.order_uid, e);
                    try {
                        t && localStorage.putObject(this._storageKey, this._innerStorage.reduce((e,t)=>(e[t.order_uid] = t,
                        e), {}))
                    } catch (e) {
                        wb.spa.logError(e, "[ORDER_SYNC]: localstorage save failed", !0)
                    }
                }
                ,
                s._removeOrder = function(e, t=!0) {
                    this._innerStorage.delete(e);
                    try {
                        t && localStorage.putObject(this._storageKey, this._innerStorage.reduce((e,t)=>(e[t.order_uid] = t,
                        e), {}))
                    } catch (e) {
                        wb.spa.logError(e, "[ORDER_SYNC]: localstorage save failed", !0)
                    }
                }
                ,
                s._saveOrder = async function(e) {
                    try {
                        var t, r;
                        const i = {
                            "X-Spa-Version": WbSpaModel.appVersion,
                            Authorization: `Bearer ${this.$auth.jwt}`
                        };
                        let s = await this.$httpClient.fetchJSON(this._submitOrderUrl, {
                            method: "POST",
                            credentials: "include",
                            body: e.asFormData,
                            headers: i
                        }, {
                            noProcessResponse: !0
                        });
                        return -1 === s.resultState ? {
                            err: new Error((null === (t = s.value) || void 0 === t ? void 0 : t.message) || s.value),
                            paymentFailErrMsg: s.value.paymentFailWithSign,
                            payload: null === (r = s.value) || void 0 === r ? void 0 : r.payload
                        } : 0 === s.resultState ? {
                            success: !0,
                            data: s.value
                        } : 3 === s.resultState ? {
                            success: !0,
                            redirect: !0,
                            data: s.value
                        } : {
                            data: s.value
                        }
                    } catch (t) {
                        return wb.spa.logError(t, `[ORDER_SYNC]: initial order save failed order=${JSON.stringify(e)}`),
                        e.payment.paymentType.isCreditCard || e.payment.paymentType.isStockExchange || e.payment.paymentType.isBalance ? {
                            needReSave: !0,
                            err: t
                        } : {
                            needReSave: !1,
                            err: t
                        }
                    }
                }
                ,
                s.getOrders = function() {
                    return this._innerStorage
                }
                ,
                s.getOrderById = function(e) {
                    return this._innerStorage.get(e)
                }
                ,
                s.submitOrder = async function(e, t, i, s, a, o) {
                    let n = new r;
                    n.setFormData(o),
                    n.setGlobals(e, "ru", wb.settings.currentLocale, "d" === wb.settings.displayMode ? 1 : 2),
                    n.setPayment(i, a, s.deliveryPrice),
                    n.setDelivery(s),
                    n.setItems(t, null, s),
                    n.updateState("accepted_locally"),
                    this._isUserAuth && this._storeOrder(n);
                    let d = await this._saveOrder(n);
                    return d.needReSave && this._isUserAuth ? (n.updateState("need_resave"),
                    wb.spa.orderMetrics(n.state),
                    this._storeOrder(n),
                    {
                        order: n
                    }) : (n.updateState("success"),
                    this._isUserAuth && this._storeOrder(n),
                    d.order = n,
                    d)
                }
                ,
                s.payForRids = async function({paymentAmount: e, rids: t=[], selectedCardId: r, returnUrl: i=""}) {
                    try {
                        return await this.$httpClient.fetchJSON("/webapi/lk/myorders/delivery/paytherest_v2", {
                            method: "POST",
                            body: this.$helper.objectSerializer({
                                paymentAmount: e,
                                rids: t,
                                selectedCardId: r,
                                returnUrl: i
                            })
                        }),
                        {
                            success: !0
                        }
                    } catch (e) {
                        return {
                            msg: e.message,
                            success: !1
                        }
                    }
                }
                ,
                s.checkRidsPaymentStatus = async function(e=[]) {
                    try {
                        const t = await this.$httpClient.fetchJSON("/webapi/lk/myorders/delivery/paymentstatus", {
                            method: "POST",
                            body: this.$helper.objectSerializer({
                                rids: e
                            })
                        });
                        return {
                            status: 0 === t.status ? 3 : t.status,
                            reason: t.reason
                        }
                    } catch (e) {
                        return {
                            status: 3
                        }
                    }
                }
                ,
                _createClass(i, [{
                    key: "_isUserAuth",
                    get: function() {
                        return "0" != this._userId
                    }
                }, {
                    key: "_storageKey",
                    get: function() {
                        return `user-active-orders-${this._userId}`
                    }
                }]),
                i
            }();
            module.exports = i
        }();

    }
    , {}],
    121: [function(require, module, exports) {
        "use strict";
        function _defineProperties(e, t) {
            for (var i = 0; i < t.length; i++) {
                var r = t[i];
                r.enumerable = r.enumerable || !1,
                r.configurable = !0,
                "value"in r && (r.writable = !0),
                Object.defineProperty(e, _toPropertyKey(r.key), r)
            }
        }
        function _createClass(e, t, i) {
            return t && _defineProperties(e.prototype, t),
            i && _defineProperties(e, i),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            e
        }
        function _toPropertyKey(e) {
            var t = _toPrimitive(e, "string");
            return "symbol" == typeof t ? t : String(t)
        }
        function _toPrimitive(e, t) {
            if ("object" != typeof e || !e)
                return e;
            var i = e[Symbol.toPrimitive];
            if (void 0 !== i) {
                var r = i.call(e, t || "default");
                if ("object" != typeof r)
                    return r;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === t ? String : Number)(e)
        }
        const OrdoStorageOrder = require("./storage/orders/ordoStorageOrder")
          , DeliveryProduct = require("./groupedDeliveries/deliveryProduct")
          , {RidStatus: RidStatus, PayStatus: PayStatus, ActiveStatuses: ActiveStatuses, ArchiveStatuses: ArchiveStatuses, CalcFailedPaymentExpire: CalcFailedPaymentExpire} = require("../modules/delivery/states")
          , {OrdersPaths: OrdersPaths} = require("./storage/variables")
          , SupplierPaymentTypes = ["SRT", "SRD", "SRG", "SRN", "SRF", "SRC"]
          , RID_VERSION = 6;
        let PurchaseInfoCache = function() {
            function e() {}
            var t = e.prototype;
            return t.sync = function(e) {
                if (e) {
                    const t = btoa(JSON.stringify({
                        pa: e.purchase,
                        pp: e.purchasePercent,
                        up: e.unpaid
                    }));
                    localStorage.setItem("_user_pa", t)
                }
            }
            ,
            t.get = function() {
                const e = localStorage.getItem("_user_pa");
                if (e)
                    try {
                        const t = JSON.parse(atob(e));
                        return {
                            purchase: +t.pa || 0,
                            purchasePercent: +t.pp || 0,
                            unpaid: +t.up || 0
                        }
                    } catch (e) {
                        return console.error(e),
                        null
                    }
                return null
            }
            ,
            t.clear = function() {
                localStorage.removeItem("_user_pa")
            }
            ,
            e
        }()
          , ProductsInfoCache = function() {
            function e() {
                this._innerStorage = this._getFromCache()
            }
            var t = e.prototype;
            return t.put = function(e) {
                if (e && 0 != e.length) {
                    for (const t of e)
                        t.code1S > 0 && this._innerStorage.set(t.code1S, {
                            code1S: t.code1S,
                            name: t.name,
                            brand: t.brand,
                            size: t.size,
                            subjectId: t.subjectId,
                            nonRefundable: t.nonRefundable
                        });
                    this._syncToCache()
                }
            }
            ,
            t.enrich = function(e) {
                const t = this._innerStorage.get(e.code1S);
                t && (e.name || (e.name = t.name),
                e.brand || (e.brand = t.brand),
                e.size || (e.size = t.size),
                e.subjectId || (e.subjectId = t.subjectId))
            }
            ,
            t._getFromCache = function() {
                const e = localStorage.getObject("_products_cache")
                  , t = new Map;
                if (!e || 0 == e.length)
                    return t;
                for (const i of e)
                    i.code1S > 0 && t.set(i.code1S, i);
                return t
            }
            ,
            t._syncToCache = function() {
                localStorage.putObject("_products_cache", [...this._innerStorage.values()])
            }
            ,
            e
        }()
          , PurchaseInfo = function() {
            function e() {
                const e = e=>{
                    Object.defineProperty(this, e, {
                        enumerable: !1,
                        configurable: !1,
                        writable: !0,
                        value: "_needRound" != e && 0
                    })
                }
                ;
                for (const t of ["_totalAmountRub", "_purchaseAmountRub", "_purchaseAmountCurrency", "_needRound", "_unpaidAmountRub"])
                    e(t)
            }
            var t = e.prototype;
            return t.addPosition = function(e) {
                if ("archive" == e.type) {
                    const {years: t, months: i, days: r} = wb.helpers.date.diff(new Date(1e3 * e.timestamp));
                    if (t <= 2 && 0 == i && 0 == r || i + r > 0) {
                        const t = this._convertPrice(e.price, e.currency);
                        this._totalAmountRub += t,
                        32 == e.bitStatus && (this._purchaseAmountRub += t)
                    }
                } else if ("active" == e.type && !1 === e.isPrepaid) {
                    const t = this._convertPrice(e.price, e.currency);
                    this._unpaidAmountRub += t
                }
            }
            ,
            t._convertPrice = function(e, t) {
                const i = $.views.helpers.priceToRub(e, t);
                return this._needRound = i != e,
                i
            }
            ,
            _createClass(e, [{
                key: "purchase",
                get: function() {
                    return isNaN(this._purchaseAmountRub) ? 0 : this._needRound ? +this._purchaseAmountRub.toFixed(2) : this._purchaseAmountRub
                }
            }, {
                key: "purchasePercent",
                get: function() {
                    return 0 == this._totalAmountRub ? 0 : (this._purchaseAmountRub / this._totalAmountRub * 100).toFixed(2)
                }
            }, {
                key: "unpaid",
                get: function() {
                    return isNaN(this._unpaidAmountRub) ? 0 : this._needRound ? +this._unpaidAmountRub.toFixed(2) : this._unpaidAmountRub
                }
            }]),
            e
        }()
          , OrdersArchiveService = function() {
            function e() {
                Object.defineProperty(this, "purchaseInfoCache", {
                    enumerable: !1,
                    configurable: !1,
                    writable: !1,
                    value: new PurchaseInfoCache
                }),
                Object.defineProperty(this, "productsCache", {
                    enumerable: !1,
                    configurable: !1,
                    writable: !1,
                    value: new ProductsInfoCache
                }),
                Object.defineProperty(this, "_getItemsTask", {
                    enumerable: !1,
                    configurable: !1,
                    writable: !0
                }),
                Object.defineProperty(this, "_getLocalItemsTask", {
                    enumerable: !1,
                    configurable: !1,
                    writable: !0
                })
            }
            var t = e.prototype;
            return t.getItems = async function(e={}) {
                return null != e && e.fromCache && this._getItemsTask ? (window._debug && console.debug("[ORDERS FILES]:", "read from memory", "options: ", e),
                this._getItemsTask.task) : (!this._getItemsTask || this._getItemsTask.ts < Date.now() ? (this._getItemsTask = {
                    task: this._getItems(e).catch(e=>(console.error("[ORDERS FILES]:", "get items error", e),
                    wb.spa.logError(e, ""),
                    {
                        broken: !0,
                        positions: [],
                        debtPositions: [],
                        archivePositions: [],
                        locations: [],
                        purchaseInfo: {},
                        forTrackers: new Map,
                        positionsMap: new Map
                    })),
                    ts: Date.now() + 1e3
                },
                window._debug && console.debug("[ORDERS FILES]:", "read from storage", "options:", e)) : window._debug && console.debug("[ORDERS FILES]:", "read from memory lock", "options:", e),
                this._getItemsTask.task)
            }
            ,
            t.resetCache = function() {
                this._getItemsTask = null,
                this._getLocalItemsTask = null,
                this.purchaseInfoCache.clear()
            }
            ,
            t.getPurchaseInfo = function() {
                return this.purchaseInfoCache.get()
            }
            ,
            t.setMergeOptions = function(e) {
                this._getStorageService().then(()=>{
                    this.$services.storageService.orders.setMergeOptions(e) && this.resetCache()
                }
                )
            }
            ,
            t.addItem = function(e) {
                const t = OrdoStorageOrder.singleFromOrdo(e);
                this._getStorageService().then(()=>{
                    this.$services.storageService.orders.saveOrdoOrder(t),
                    this.resetCache()
                }
                )
            }
            ,
            t.updateItems = async function(e, t, i) {
                const r = new Set(i ? i.keys() : e);
                if (0 == r.size)
                    return;
                await this._getStorageService();
                const a = await this.$services.storageService.orders.getFiles({
                    localOnly: !0
                }) || []
                  , s = new Set;
                for (const e of a)
                    for (const a of e.file) {
                        for (const o of r) {
                            var n;
                            OrdoStorageOrder.trySetPositionProps(a, o, null !== (n = null == i ? void 0 : i.get(o)) && void 0 !== n ? n : t) && (s.add(e),
                            r.delete(o))
                        }
                        if (0 == r.size)
                            break
                    }
                s.size > 0 && (await this.$services.storageService.orders.syncToServer([...s]),
                this.resetCache())
            }
            ,
            t._getItems = async function({notEnrich: e, ordoOnly: t, localOnly: i, uid: r}={}) {
                var a;
                await this._getStorageService();
                const s = this.$user.getIdInt()
                  , n = s > 0 ? `/orders/${s}|1` : ""
                  , o = await this.$services.storageService.orders.getFiles({
                    ordoOnly: t,
                    localOnly: i,
                    excludePaths: n
                }) || (t ? [] : null);
                if (localStorage.setItem("_wbx_orders_t", Date.now() + 6e4),
                null == o)
                    return null;
                const d = {}
                  , c = new Map
                  , u = new Map
                  , l = new Map
                  , p = new Map
                  , y = new Map
                  , v = new Set
                  , h = new Set
                  , f = new Map
                  , m = new Set
                  , S = Date.now();
                let g, _;
                const b = {};
                for (const e of o)
                    for (const t of e.file) {
                        if (t.is_finished && !t.state && (e.update({
                            uid: t.uid,
                            state: 5
                        }, "uid"),
                        e.modified() && m.add(e)),
                        t.sticker && !OrdoStorageOrder.isCompleted(t)) {
                            let e;
                            p.has(t.sticker) ? e = p.get(t.sticker) : (e = [],
                            p.set(t.sticker, e)),
                            e.push(t)
                        }
                        f.set(t.uid, e);
                        for (const i of null !== (P = t.items) && void 0 !== P ? P : []) {
                            var P, I;
                            const r = null === (I = i.positions) || void 0 === I ? void 0 : I.toMap(e=>e.rid, e=>e);
                            for (const a of i.rids) {
                                var w, k, R, T, O, C, D, F;
                                const s = (null === (w = t.rid_states) || void 0 === w ? void 0 : w.find(e=>e.rid == a)) || {
                                    state: t.state
                                }
                                  , n = null !== (k = null == s ? void 0 : s.state) && void 0 !== k ? k : t.state
                                  , o = new Date(1e3 * t.timestamp)
                                  , d = new DeliveryProduct({
                                    _debug: t,
                                    archive: s.archive,
                                    brand: i.brand,
                                    characteristicId: null === (R = i.option) || void 0 === R ? void 0 : R.id,
                                    code1S: i.id,
                                    currency: t.payment.currency,
                                    deliveryPrice: ((null === (T = t.payment) || void 0 === T ? void 0 : T.delivery_cost) || 0) / 100,
                                    expirationTimestamp: s.expiration_timestamp,
                                    country: t.locale,
                                    name: i.name,
                                    nonRefundable: i.nonRefundable,
                                    orderDate: o.toISOString(),
                                    price: (i.salePrice || i.price) / 100,
                                    paymentSaleAmount: (i.paymentSaleAmount || 0) / 100,
                                    paymentSaleType: i.paymentSaleType,
                                    paymentType: null === (O = t.payment) || void 0 === O ? void 0 : O.type,
                                    prepaidDelivery: 0,
                                    rId: a,
                                    returnCost: (i.return_fee || 0) / 100,
                                    saleConditions: i.sale_conditions || i.saleConditions,
                                    size: (null === (C = i.option) || void 0 === C ? void 0 : C.name) || null,
                                    color: (null === (D = i.option) || void 0 === D ? void 0 : D.color) || null,
                                    source: t.source,
                                    status: this._getStatus(s.state),
                                    subjectId: i.subjectId,
                                    showCode: !0,
                                    timestamp: t.timestamp,
                                    version: s.version,
                                    mpmPaymentStatus: s.mpmPaymentStatus,
                                    sticker: t.sticker,
                                    orderId: t.orderId || t.uid,
                                    trackerShardKey: t.tracker_shard_key,
                                    cacheExpiration: i.cacheExpiration,
                                    wh: null == r || null === (F = r.get(a)) || void 0 === F ? void 0 : F.wh,
                                    ridState: s,
                                    user: t.user
                                },this,b);
                                d.source || e.path == OrdersPaths.ordo || (d.source = "nnsz"),
                                !d.trackerShardKey && "nnsz" == d.source && d.sticker && (d.trackerShardKey = this.$auth.jwtData.shard_key),
                                c.set(a, d),
                                u.set(a, t),
                                s.state >= 0 && this._fillPositionState(d, s),
                                (0 < d.cacheExpiration && d.cacheExpiration < S || "ordo" == d.source && d.payState == PayStatus.PayFail && 0 == CalcFailedPaymentExpire(o)) && h.add(a),
                                t.is_finished || 99 != n && !ActiveStatuses.includes(n) ? 4096 != d.bitStatus && (d.type = "archive") : d.archive || 4096 == d.bitStatus || L(d),
                                d.archive && (d.noTracking = !0),
                                ("ordo" == d.source || !ArchiveStatuses.includes(s.state) && "archive" != d.type) && v.add(a),
                                q.call(this, d);
                                {
                                    var x, A, j, M;
                                    const e = null !== (x = null !== (A = null == r || null === (j = r.get(a)) || void 0 === j ? void 0 : j.delivery_time) && void 0 !== A ? A : null === (M = t.delivery) || void 0 === M ? void 0 : M.delivery_time) && void 0 !== x ? x : i.expected_delivery_time;
                                    var E, z, N;
                                    if (e && (d.dateTime = new Date(1e3 * e),
                                    t.delivery.time_from && t.delivery.time_to && (d.timeFrom = t.delivery.time_from,
                                    d.timeTo = t.delivery.time_to)),
                                    t.delivery)
                                        d.address = [t.delivery.city, t.delivery.address].filter(e=>!!e).join(", "),
                                        d.officeId = t.delivery.dst_office_id,
                                        d.pid = t.delivery.p_id,
                                        d.latitude = t.delivery.latitude,
                                        d.longitude = t.delivery.longitude,
                                        d.smId = t.delivery.delivery_type,
                                        d.pid || 6 != (null !== (E = t.delivery.delivery_type) && void 0 !== E ? E : null == r || null === (z = r.get(a)) || void 0 === z ? void 0 : z.delivery_type) || (d.pid = t.delivery.dst_office_id),
                                        d.smId || ("wb_courier" == t.delivery.service ? d.smId = 5 : "wb_pvz" == t.delivery.service && (d.smId = 6)),
                                        null === (N = d.setIsOnShelf) || void 0 === N || N.call(d),
                                        U(d)
                                }
                            }
                        }
                    }
                function L(e) {
                    var t, i;
                    let r;
                    const a = null !== (t = null === (i = e.trackerKey) || void 0 === i ? void 0 : i.toString()) && void 0 !== t ? t : "";
                    l.has(a) ? r = l.get(a) : (r = [],
                    l.set(a, r)),
                    -1 == r.indexOf(e.rId) && r.push(e.rId)
                }
                function K(e) {
                    for (const t of [...l.values()]) {
                        const i = t.findIndex(t=>t == e.rId);
                        if (i >= 0) {
                            t.splice(i, 1);
                            break
                        }
                    }
                }
                function q(e) {
                    function t(e) {
                        return !e.brand || !e.name || null == e.size || !e.subjectId
                    }
                    if (t(e) && (this.productsCache.enrich(e),
                    t(e))) {
                        let t;
                        y.has(e.code1S) ? t = y.get(e.code1S) : (t = [],
                        y.set(e.code1S, t)),
                        t.push(e)
                    }
                }
                function U(e) {
                    const t = e.address && isNaN(e.address) ? e.address : "Доставка"
                      , i = `${e.smId}_${wb.helpers.getHashCode(t)}`;
                    d[i] || (d[i] = {
                        address: t
                    },
                    e.latitude > 0 && e.longitude > 0 && (d[i].mapLocation = {
                        coordinates: `${e.latitude},${e.longitude}`,
                        hasBalloon: !1,
                        iconContent: t,
                        latitude: e.latitude,
                        longitude: e.longitude,
                        useDefaultIcon: !0
                    }),
                    5 == e.smId || 17 == e.smId ? d[i].deliveryType = 17 == e.smId ? "Грузовая доставка" : "Курьерская" : 86 == e.smId ? d[i].deliveryType = "Постамат" : 6 == e.smId || 30 == e.smId ? d[i].deliveryType = "Пункт выдачи" : 16 == e.smId ? d[i].deliveryType = "Постамат пятерочка" : 23 == e.smId ? d[i].deliveryType = "Почта России" : 63 == e.smId && (d[i].deliveryType = "СЦ / Склад")),
                    e.locationId = i
                }
                const V = [];
                if (p.forEach((e,t)=>{
                    V.push(this.$services.wbxOrderService.getOrderItemsStatus(e.map(e=>e.uid), t, 3e3).then(t=>{
                        if (null == t || !t.orders)
                            return;
                        const i = e.filter(e=>!t.orders.map(e=>e.order_uid).includes(e.uid));
                        if ((null == i ? void 0 : i.length) > 0)
                            for (const e of i) {
                                const t = f.get(e.uid);
                                t.update({
                                    uid: e.uid,
                                    is_finished: !0,
                                    state: 5
                                }, "uid"),
                                t.modified() && m.add(t);
                                for (const t of e.items)
                                    for (const e of t.rids) {
                                        v.delete(e),
                                        K({
                                            rId: e
                                        });
                                        const i = c.get(t.rid);
                                        i && (i.type = "archive")
                                    }
                            }
                        for (const {order_uid: e, items: i} of t.orders) {
                            const t = f.get(e);
                            t.update({
                                uid: e,
                                rid_states: i
                            }, "uid"),
                            t.modified() && m.add(t);
                            for (const e of i) {
                                const t = c.get(e.rid);
                                t && (t.ridState = {
                                    ...t.ridState,
                                    ...e
                                },
                                this._fillPositionState(t, t.ridState),
                                "active" != t.type || t.archive ? K(t) : L(t))
                            }
                        }
                    }
                    ))
                }
                ),
                await Promise.all(V),
                r) {
                    _ = await this._getFromOrdo({
                        localRids: Array.from(v),
                        uid: r
                    }) || {};
                    const {positions: e, archiveRids: t, trackerKey: i, broken: a, notFound: s, canCancel: n, canCancelMp: o, verificationLevel: d} = _;
                    g = _.codeDeliveryVer,
                    b.canCancelMp = o,
                    b.verificationLevel = d;
                    for (const [e,t] of c)
                        !0 !== n || t.archive || (t.canCancel = !0),
                        i && "nnsz" != t.source && t.user && t.user != i && h.add(t.rId);
                    if (!a) {
                        if ((null == t ? void 0 : t.length) > 0)
                            for (const e of t) {
                                const t = c.get(e);
                                t && ("nnsz" == t.source ? t.type = "archive" : h.add(e))
                            }
                        if ((null == s ? void 0 : s.length) > 0)
                            for (const e of s) {
                                var B;
                                const t = c.get(e);
                                if (t && "nnsz" != t.source)
                                    if ((null == t || null === (B = t.ridState) || void 0 === B ? void 0 : B.pay_state) == PayStatus.PayFail)
                                        h.add(e);
                                    else if ((null == t ? void 0 : t.timestamp) > 0) {
                                        0 == Math.floor(Math.max(0, new Date(1e3 * t.timestamp).addMinutes(30) - new Date)) && h.add(e)
                                    }
                            }
                    }
                    for (const e of h) {
                        const t = u.get(e);
                        if (t && OrdoStorageOrder.removePosition(t, e)) {
                            const e = f.get(t.uid);
                            m.add(e)
                        }
                        c.delete(e)
                    }
                    if ((null == e ? void 0 : e.length) > 0)
                        for (const t of e) {
                            t.type = "active",
                            t.source = "ordo",
                            t.user = i,
                            t.version = 6,
                            t.dateTime = new Date(t.dateTime),
                            U(t),
                            t.isoCurrency && (t.currency = t.isoCurrency);
                            const e = c.get(t.rId);
                            if (e) {
                                var J;
                                const i = OrdoStorageOrder.getItemState(t);
                                if (e.canCancel = t.canCancel,
                                e.country = t.country,
                                e.status = t.status,
                                8 == e.status && 210 != e.trackingStatusId && (e.trackingStatusId = 210,
                                e.trackingStatus = t.trackingStatus,
                                e.trackingStatusReady = t.trackingStatusReady,
                                e.setIsOnShelf(),
                                e.customTrackerStatus = {
                                    place_name: t.address,
                                    status_id: "210",
                                    status_name: t.trackingStatus,
                                    date: 1e6 * new Date(t.lastDate || new Date)
                                }),
                                !(i.pay_state != (null === (J = e.ridState) || void 0 === J ? void 0 : J.pay_state) || t.version != e.version || t.officeId != e.officeId || t.address != e.address || t.smId != e.smId || (t.paymentSaleAmount || 0) != (e.paymentSaleAmount || 0) || t.archive && t.trackingStatus != e.trackingStatus || t.cacheExpiration && t.cacheExpiration != e.cacheExpiration || t.expirationTimestamp && t.expirationTimestamp != e.expirationTimestamp || !e.currency && t.currency || !e.wh && t.wh || e.isCanceling != t.isCanceling || t.timeFrom && t.timeTo && t.dateTime.getTime() !== e.dateTime.getTime()))
                                    continue;
                                t.dirty = !0
                            }
                            const r = new DeliveryProduct(t,this,b);
                            t.archive || 4096 == t.status ? K(r) : L(r),
                            q.call(this, r),
                            c.set(t.rId, r)
                        }
                }
                if (!e && y.size > 0)
                    try {
                        const e = await wb.xnm.getXnmProducts([...y.keys()]);
                        y.forEach((t,i)=>{
                            const r = e[i];
                            if (r)
                                for (const e of t) {
                                    var a;
                                    e.name || (e.name = r.name),
                                    e.brand || (e.brand = r.brand),
                                    !e.size && r.sizes && (e.size = null === (a = r.sizes.find(t=>t.optionId == e.characteristicId)) || void 0 === a ? void 0 : a.name),
                                    !e.subjectId && r.subjectId && (e.subjectId = r.subjectId),
                                    this.productsCache.put([e])
                                }
                        }
                        )
                    } catch (e) {
                        console.error(e)
                    }
                if (_ && _.serverUid == r) {
                    var X;
                    const e = (null == o ? void 0 : o.find(e=>e.path == OrdersPaths.ordo)) || this.$services.storageService.orders.createOrdoFile();
                    if (0 == o.length && o.push(e),
                    (null === (X = _.positions) || void 0 === X ? void 0 : X.length) > 0) {
                        const t = OrdoStorageOrder.singleFromOrdo({
                            trackerKey: _.trackerKey,
                            positions: _.positions.filter(e=>{
                                const t = u.get(e.rId);
                                if (!t)
                                    return !0;
                                if (!t.user)
                                    return !0;
                                const i = c.get(e.rId);
                                return i && !i.archive && i.trackingStatusId != e.trackingStatusId && (e.trackingStatusId = i.trackingStatusId,
                                e.trackingStatus = i.trackingStatus),
                                (null == i ? void 0 : i.dirty) || !1
                            }
                            )
                        });
                        t.length > 0 && (e.file = [...e.file.concat(t).reduce((e,t)=>(e.set(t.uid, t),
                        e), new Map).values()],
                        m.add(e))
                    }
                    if (m.size > 0)
                        try {
                            m.has(e) && (e.file = e.file.reduce((e,t)=>{
                                var i;
                                return (null === (i = t.items) || void 0 === i ? void 0 : i.length) > 0 && e.push(t),
                                e
                            }
                            , []).filter(e=>{
                                var t;
                                return (null === (t = e.items) || void 0 === t ? void 0 : t.length) > 0
                            }
                            )),
                            this.$services.storageService.orders.syncToServer([...m]),
                            this.resetCache()
                        } catch (e) {
                            console.error(e)
                        }
                }
                new Map;
                const G = []
                  , H = new Map
                  , W = []
                  , Q = new PurchaseInfo;
                await wb.xnm.waitNoReturnSubjectsInitialized();
                const Y = [];
                for (const e of c.values()) {
                    var Z;
                    if (e.subjectId > 0 && wb.xnm.setNoRefund(e.subjectId) && $.observable(e, Y).setProperty({
                        nonRefundable: !0
                    }),
                    "active" == e.type && (4096 == e.bitStatus ? W.push(e) : G.push(e)),
                    "archive" == e.type && H.set(e.rId, e),
                    e.dateTime) {
                        e.receiveDate = e.timeFrom && e.timeTo ? this._getStatusReceiveDate(e.dateTime, e.timeFrom, e.timeTo) : wb.helpers.date.formatEstimated(e.dateTime);
                        const t = new Date(e.dateTime);
                        t.setDate(e.dateTime.getDate() + 2),
                        e.readyToReceiveToday || (e.delayed = t - new Date < 0),
                        e.payState == PayStatus.PayFail ? delete e.trackingStatus : e.noTracking && !e.trackingStatus && (e.trackingStatus = e.receiveDate)
                    }
                    SupplierPaymentTypes.includes(null === (Z = e.paymentType) || void 0 === Z ? void 0 : Z.toUpperCase()) && (e.supplierPayment = !0),
                    Q.addPosition(e),
                    e.setDeliveryConfirmation(Y)
                }
                return null === (a = Y.trigger) || void 0 === a || a.call(Y),
                this.purchaseInfoCache.sync(Q),
                {
                    broken: !1,
                    codeDeliveryVer: g,
                    positions: G.filter(e=>!e.cacheExpiration || e.cacheExpiration >= S).sort(this._sortPositions),
                    debtPositions: W,
                    archivePositions: H,
                    locations: d,
                    purchaseInfo: Q,
                    forTrackers: l,
                    positionsMap: c
                }
            }
            ,
            t._sortPositions = function(e, t, i) {
                if (e.archive)
                    return 1;
                if (t.archive)
                    return -1;
                function r(e) {
                    switch (e) {
                    case 16:
                        return 260;
                    case 8:
                        return 210;
                    case 4:
                        return 100;
                    case 2:
                        return 1;
                    case 1:
                        return 300
                    }
                }
                const a = e.trackingStatusId || r(e.status)
                  , s = t.trackingStatusId || r(t.status)
                  , n = s - a;
                if (0 != n) {
                    if (260 == a || 555 == a || 210 == a && 260 != s && 555 != s)
                        return -1;
                    if (260 == s || 555 == s || 210 == s && 260 != a && 555 != a)
                        return 1
                }
                if (!e.dateTime && t.dateTime)
                    return -1;
                if (e.dateTime && !t.dateTime)
                    return 1;
                if (e.dateTime && t.dateTime) {
                    const i = e.dateTime - t.dateTime;
                    if (0 != i)
                        return i
                }
                return 300 <= a && a <= 399 ? 1 : 300 <= s && s <= 399 ? -1 : 500 <= a && a <= 599 ? 1 : 500 <= s && s <= 599 ? -1 : n
            }
            ,
            t._fillPositionState = function(e, {state: t, pay_state: i, is_canceling: r, tracking: a, tracking_id: s, shk_id: n, delivery_date: o, updated_dt: d}) {
                99 == t && (t = RidStatus.Processing,
                i = PayStatus.Paid),
                e.shkId = n,
                d > 0 && (e.lastDate = new Date(1e3 * d)),
                ArchiveStatuses.includes(t) ? (e.type = "archive",
                e.status = this._getStatus(t, i),
                t == RidStatus.Rejected ? e.bitStatus = i == PayStatus.Refunded ? 128 : 64 : i === PayStatus.NotPaid || "nnsz" != e.source && i === PayStatus.PayFail ? (e.type = "active",
                (i === PayStatus.NotPaid || "nnsz" == e.source && i == PayStatus.PayFail) && (e.isPrepaid = !1),
                e.bitStatus = 4096,
                e.canPrepay = !0,
                e.selectedForPay = !0,
                e.prepaid = 0) : e.bitStatus = 32) : "ordo" != e.source && ActiveStatuses.includes(t) && new Date(e.orderDate).daysBetween(new Date) > 90 ? e.type = "archive" : ActiveStatuses.includes(t) && (e.type = "active",
                !e.dateTime && o > 0 && (e.dateTime = new Date(1e3 * o)),
                r ? (e.archive = !0,
                e.isCanceling = r,
                e.trackingStatus = "Отмена") : (a ? (e.trackingStatus = a,
                e.trackingStatusId = s) : t == RidStatus.Accepted ? e.trackingStatus = "Оформлено" : t == RidStatus.ValidateFail || t == RidStatus.Rejected ? e.trackingStatus = "Отмена" : t == RidStatus.Assembling ? e.trackingStatus = "На сборке" : t == RidStatus.Processing && (e.trackingStatus = "В обработке"),
                e.readyToReceiveToday = this.$services.trackingService.isStatusReady(s),
                e.trackingStatusReady = e.readyToReceiveToday && (5 != e.smId || 17 != e.smId || 210 != e.trackingStatusId)),
                e.payState = i,
                "nnsz" == e.source && i == PayStatus.PayFail && (e.payState = PayStatus.NotPaid),
                e.payState == PayStatus.NotPaid ? this._excludePay(e) || "Отмена" == a || e.archive || (e.isPrepaid = !1,
                e.canPrepay = !0,
                e.selectedForPay = !0,
                e.prepaid = 0) : e.payState == PayStatus.PayFail ? (e.payFailed = !0,
                e.canPrepay = !0,
                e.selectedForPay = !0,
                e.prepaid = 0) : e.payState == PayStatus.Paid ? (this._excludePay(e) || (e.isPrepaid = !0),
                "Отмена" == a || e.archive || (e.prepaid = e.price,
                e.prepaidDelivery = e.deliveryPrice)) : e.payState != PayStatus.Refunded && t != RidStatus.Completed || (e.archive = !0,
                i == PayStatus.Refunded && (e.refunded = !0),
                e.trackingStatus = "Заказ завершен",
                e.noTracking = !0,
                delete e.trackingStatusId,
                delete e.trackingStatusReady))
            }
            ,
            t._excludePay = function(e) {
                var t;
                return SupplierPaymentTypes.includes(null === (t = e.paymentType) || void 0 === t ? void 0 : t.toUpperCase()) || "CRE" == e.paymentType
            }
            ,
            t._getStatus = function(e) {
                switch (e) {
                case RidStatus.Rejected:
                    return "Rejected";
                case RidStatus.Completed:
                    return "Purchased"
                }
            }
            ,
            t._getStorageService = function() {
                return this.$moduleLoader.loadServiceAsync("storageService")
            }
            ,
            t._getStatusReceiveDate = function(e, t, i) {
                const r = new Date
                  , a = (new Date).daysBetween(e)
                  , s = new Date(`${$.views.converters.formatDate(e, "yyyy/MM/dd")} ${t}`)
                  , n = new Date(`${$.views.converters.formatDate(e, "yyyy/MM/dd")} ${i}`);
                return 1 === a ? `Завтра с ${t} до ${i}` : r > n ? "Скоро будем" : 0 === a && r < s ? `Сегодня с ${t} до ${i}` : 0 === a ? `Сегодня до ${i}` : $.views.converters.formatDate(e, `d MMMM, ${t}&#8209;${i}`)
            }
            ,
            t._getFromOrdo = async function({localRids: e, uid: t}={}) {
                try {
                    const i = (null == e ? void 0 : e.length) > 0 ? new URLSearchParams(e.map(e=>["rids", e])) : null;
                    return await this.$httpClient.fetchJSON("/webapi/v2/lk/myorders/delivery/active", {
                        method: "POST",
                        body: i,
                        headers: {
                            "X-Client-Time": WbSpaModel.prototype.$helper.getClientDt(),
                            "X-Client-Id": t
                        }
                    }, {
                        timeout: 6e3
                    })
                } catch (e) {
                    return null
                }
            }
            ,
            _createClass(e, [{
                key: "isCacheExpired",
                get: function() {
                    const e = localStorage.getItem("_wbx_orders_t");
                    return !e || e < Date.now()
                }
            }]),
            e
        }();
        module.exports = OrdersArchiveService;

    }
    , {
        "../modules/delivery/states": 36,
        "./groupedDeliveries/deliveryProduct": 115,
        "./storage/orders/ordoStorageOrder": 130,
        "./storage/variables": 132
    }],
    122: [function(require, module, exports) {
        "use strict";
        const MAX_PAGES_IN_ROW = 8
          , MIN_PAGES_IN_ROW = 7;
        let PagerService = function() {
            function e() {}
            return e.createPagerModel = function(t, a, r=100, n=window.location.href, s=!1) {
                let o = Math.ceil(t / r);
                s && (o = o <= a ? a : a + 1);
                let u = [];
                if (o <= 8)
                    u.push(...e.createRange(o, 1));
                else {
                    let t = 5;
                    if (a < 7)
                        u.push(...e.createRange(7, 1)),
                        u.push("");
                    else if (a >= o - t - 1)
                        u.push(1),
                        u.push(""),
                        u.push(...e.createRange(7, o - 7 + 1));
                    else {
                        u.push(1),
                        u.push("");
                        let t = a
                          , r = a
                          , n = !1
                          , s = 1;
                        for (; s < 7; )
                            r < o && n && (r++,
                            s++),
                            t > 1 && !1 === n && (t--,
                            s++),
                            n = !n;
                        t = 1 === t ? 2 : t,
                        u.push(...e.createRange(r - t + 1, t)),
                        r < o - 1 && u.push("")
                    }
                }
                const l = new URL(n,window.location.origin);
                return {
                    pageUrls: u.map(e=>(l.searchParams.set("page", e),
                    {
                        value: e,
                        href: "" !== e ? l.toString() : null
                    })),
                    pagingInfo: {
                        currentPage: a,
                        totalPages: o,
                        totalItems: t,
                        hideTotal: s
                    }
                }
            }
            ,
            e.createRange = function(e, t) {
                return Array.from({
                    length: e
                }).map((e,a)=>a + t)
            }
            ,
            e
        }();
        module.exports = PagerService;

    }
    , {}],
    123: [function(require, module, exports) {
        "use strict";
        const COLOR_LIMIT = 60
          , ACTIVATION_KEY_SUBJECTS = [5352, 2255]
          , VIDEO_SUBJECT = 5105
          , CLOTHES_FITTING_ROOT_SUBJECTS = [1, 2, 3, 4, 6, 200, 204, 1327, 1465, 1513, 1616, 2273, 3497, 4607, 4735]
          , CLOTHES_DISABLE_FITTING_SUBJECTS = [213, 1542, 2605, 2693, 4733, 4737, 212, 380, 733, 1675, 2687, 4738, 4827, 4932, 214, 2616, 218, 757, 53, 61, 63, 305, 946, 1161, 1422, 1439, 1475, 1487, 2318, 2379, 2747, 2920, 3489, 3490, 3579, 3766, 4200, 4256, 4537, 5154, 5220, 5222, 5273, 5094, 5096, 1339, 836, 5131, 1542, 5095, 4021, 4022, 1338, 2564]
          , HIDE_COLOR_SUBJECT_ROOT_IDS = [786, 1107]
          , CERTIFICATE_NOT_SHOW_LINK = [1524, 1525]
          , SHOW_MIN_DETAILS = [1, 2, 4, 200, 204, 239, 1513, 5038];
        let VIDEOS_CACHE = []
          , ProductCardService = function() {
            function i() {}
            var e = i.prototype;
            return e.loadProductCardAsync = async function(i, e, l=!1) {
                try {
                    var t;
                    return (null === (t = this._stashedCatalogProduct) || void 0 === t ? void 0 : t.nmId) !== i || l || this._stashedCatalogProduct.currency !== WbSpaModel.prototype.$user.getCurrency() ? this.loadDynamicProductAsync(i, e, await this.loadStaticProductAsync(i)) : this.fromCatalogProduct(this._stashedCatalogProduct, e)
                } catch (i) {
                    return null
                }
            }
            ,
            e.loadStaticProductAsync = async function(i) {
                try {
                    const [e] = await Promise.all([this.$httpClient.fetchBasicJSON(wb.helpers.url.urlProductStatic(i), {}, {
                        timeout: 2e3
                    }), wb.xnm.waitNoReturnSubjectsInitialized()]);
                    return e
                } catch (i) {
                    return null
                }
            }
            ,
            e.loadDynamicProductAsync = async function(i, e, l, t) {
                var o, n, s, d;
                if (!i || isNaN(parseInt(i)))
                    throw new TypeError("[ProductCardService] nmId must be an integer at loadDynamicProductAsync");
                e && isNaN(parseInt(e)) && (console.warn("[ProductCardService] chrtId is not an integer at loadDynamicProductAsync"),
                e = null),
                l = null !== (o = l) && void 0 !== o ? o : await this.loadStaticProductAsync(i);
                const a = new Map;
                let r = null !== (n = null === (s = l) || void 0 === s ? void 0 : s.colors) && void 0 !== n ? n : [i];
                const u = this._canCheckForMulti(l);
                l && (l.colors = this._colorLimiter(i, r),
                r = l.colors,
                a.set(l.nm_id, l));
                const c = 1 === r.length && t ? {
                    [i]: t
                } : await wb.xnm.getXnmProducts(r).catch(i=>null);
                let v = null == c ? void 0 : c[i];
                if (!v)
                    return null;
                const p = {}
                  , m = this._fillBaseProductCardFromX(l, v, u);
                r.forEach(i=>{
                    const e = a.get(i)
                      , l = null == c ? void 0 : c[i];
                    if (l && l.pics > 0) {
                        const t = this._fillNomenclature(i, e, l);
                        t.groupedAddedOptions = m.groupedAddedOptions,
                        t.miniAddedOptions = m.miniAddedOptions,
                        t.verifiedCertificate = this._setVerifiedCertificate(e),
                        m.nomenclatures.push(t)
                    }
                }
                ),
                m.nomenclatures = m.nomenclatures.sort((e,l)=>e.nmId === i ? -1 : l.nmId === i ? 1 : l.sort - e.sort);
                const _ = m.nomenclatures.find(e=>e.nmId === i);
                if (null == _ || null == _.sizes)
                    return null;
                const f = Object.assign({}, _);
                return this.fillSelectedNomenclature(f, e),
                this._addDigitalLinks(f, l),
                Object.assign(p, {
                    product: m,
                    selectedNomenclature: f
                }),
                p.metaTags = this._fillProductCardMetaTags(m),
                p.promoUrl = this._fillPromoUrl(i, m, l, f.brandId),
                p.openGraphDescription = this._fillOpenGraphDescription(i, _, p.metaTags),
                p.targetInfo = null !== (d = p.targetInfo) && void 0 !== d ? d : {},
                p.selectedNomenclature.goodsName || (p.product.goodsName = "Название не указано"),
                this._checkGroupedAddedOptionsExist(p.selectedNomenclature.groupedAddedOptions) || (p.selectedNomenclature.groupedAddedOptions = []),
                p.product.canCheckForMulti = u,
                p
            }
            ,
            e.loadSizeTable = async function(i) {
                const e = await this.loadStaticProductAsync(i);
                return this._fillSizeTable(e)
            }
            ,
            e.fromCatalogProduct = function(i, e) {
                var l, t, o, n, s;
                const d = {}
                  , a = {
                    imtId: i.imtId,
                    nomenclatures: [],
                    supplierDeliveryInfo: {
                        time1: null,
                        time2: null,
                        storeId: null
                    }
                }
                  , r = i.pics
                  , u = 20624 === i.brandId || 30624 === i.siteBrandId
                  , c = {
                    adult: i.adult,
                    brandId: i.brandCod,
                    brandName: i.brand,
                    canFit: this._setCanFit(i.subjectId, i.subjectParentId),
                    colorName: -1 !== HIDE_COLOR_SUBJECT_ROOT_IDS.indexOf(i.subjectId) ? null : i.color,
                    gluedOptions: i.gluedOptions,
                    consist: "",
                    deliveryHours: i.deliveryHours,
                    fastestStore: i.wh,
                    feedbacks: i.feedbacks,
                    goodsName: i.name,
                    isActivationKey: -1 !== ACTIVATION_KEY_SUBJECTS.indexOf(i.subjectId),
                    isDataLoaded: !1,
                    isDetailsLoaded: !1,
                    isDigital: i.isDigitalGood,
                    isPreorder: 5772 === i.brandCod && wb.settings.preOrderList.includes(i.nmId),
                    isVideo: 5105 === i.subjectId,
                    hasVideo: 0 != (16 & i.viewFlags),
                    kindId: null !== (l = i.kindId) && void 0 !== l ? l : 0,
                    nmId: i.nmId,
                    nonRefundable: i.isUnrefusable || wb.xnm.setNoRefund(i.subjectId),
                    panelPromoId: i.panelPromoId,
                    picsCount: r,
                    promoText: i.promoTextCard,
                    subjectId: i.subjectId,
                    subjectParentId: i.subjectParentId,
                    sizeTable: null,
                    showMinDetails: !SHOW_MIN_DETAILS.includes(i.subjectParentId),
                    reviewRating: i.reviewRating,
                    star: i.star,
                    miniAddedOptions: [],
                    groupedAddedOptions: [],
                    urlForReccomendations: `/recommendation/catalog?type=visuallysimilar&forproduct=${i.nmId}&excludeNms=true`,
                    sizes: i.sizes.map(e=>({
                        characteristicId: e.ch,
                        sizeName: e.nm,
                        sizeNameRus: e.rusNm,
                        quantity: e.unavailable || i.soldOut ? 0 : 1,
                        isSoldOut: !!e.unavailable || i.soldOut,
                        deliveryHours: i.deliveryHours,
                        payloadV2: i.payloadV2,
                        returnCost: i.returnCost
                    })),
                    viewFlags: i.viewFlags,
                    shouldShowOriginalMark: !u && 0 != (8 & i.viewFlags),
                    supplierId: i.supplierId
                };
                c.allSizesSoldOut = null === (t = c.sizes) || void 0 === t ? void 0 : t.every(i=>i.isSoldOut);
                const v = !c.allSizesSoldOut && (null === (o = i.catalogPrice) || void 0 === o ? void 0 : o.total) > 0;
                return c.price = {
                    price: v ? i.catalogPrice.basic / 100 : 0,
                    salePrice: v ? i.catalogPrice.total / 100 : 0,
                    sale: v ? i.catalogPrice.sale : 0,
                    logisticsCost: (null !== (n = i.catalogPrice.logistics) && void 0 !== n ? n : 0) / 100,
                    priceDiff: !!v && i.priceDiff,
                    soldOut: i.allSizesSoldOut
                },
                c.sort = 0,
                c.sizes.length > 0 && (1 === c.sizes.length ? c.sort = c.sizes[0].quantity > 0 ? 1 : 0 : c.sizes.reduce((i,e)=>c.sort += e.quantity > 0, {})),
                a.nomenclatures.push(c),
                this.fillSelectedNomenclature(c, e),
                Object.assign(d, {
                    product: a,
                    selectedNomenclature: c
                }),
                d.product.canCheckForMulti = !0,
                d.targetInfo = null !== (s = d.targetInfo) && void 0 !== s ? s : {},
                d.metaTags = this._fillProductCardMetaTags(a),
                d.openGraphDescription = this._fillOpenGraphDescription(c.nmId, a, d.metaTags),
                d
            }
            ,
            e.stashCatalogProduct = function(i={}) {
                this._stashedCatalogProduct = i
            }
            ,
            e._checkGroupedAddedOptionsExist = function(i) {
                return (null == i ? void 0 : i.length) > 0 && i.some(i=>{
                    var e;
                    return (null === (e = i.addedOptions) || void 0 === e ? void 0 : e.length) > 0
                }
                )
            }
            ,
            e.fillSelectedNomenclature = function(i, e) {
                var l;
                const t = i.sizes.length <= 2 && i.sizes.every(i=>"0" === i.sizeName);
                t || 1 === i.sizes.length ? i.selectedSize = i.sizes.find(i=>!i.isSoldOut) || i.sizes[0] : null != e && (i.selectedSize = i.sizes.find(i=>i.characteristicId === e)),
                this._setSelectedPrice(i),
                this._setButtons(i),
                i.showSize = !t,
                i.deliveryInfoEnable = !i.isDigital && !(null !== (l = i.selectedSize) && void 0 !== l && l.isSoldOut || i.allSizesSoldOut)
            }
            ,
            e.loadNomenclature = async function(i) {
                let e = null;
                if (!i.isDataLoaded)
                    try {
                        e = await this.loadStaticProductAsync(i.nmId)
                    } catch (i) {
                        e = null
                    }
                if (e) {
                    var l, t, o, n, s, d, a, r, u, c, v, p, m, _, f, h;
                    if (i.goodsName = null !== (l = null === (t = e) || void 0 === t ? void 0 : t.imt_name) && void 0 !== l ? l : i.goodsName,
                    i.brandName = null !== (o = null === (n = e) || void 0 === n || null === (n = n.selling) || void 0 === n ? void 0 : n.brand_name) && void 0 !== o ? o : i.brandName,
                    i.colorName = e.nm_colors_names,
                    i.hasVideo = null === (s = e.media) || void 0 === s ? void 0 : s.has_video,
                    i.hasRich = null !== (d = null === (a = e) || void 0 === a ? void 0 : a.has_rich) && void 0 !== d && d,
                    i.consist = null !== (r = null !== (u = null === (c = e) || void 0 === c || null === (c = c.compositions) || void 0 === c ? void 0 : c.map(i=>i.value ? `${i.name} ${i.value}%` : i.name).join(", ")) && void 0 !== u ? u : null === (v = e) || void 0 === v || null === (v = v.options) || void 0 === v || null === (v = v.find(i=>"Состав" === i.name)) || void 0 === v ? void 0 : v.value) && void 0 !== r ? r : "",
                    e.sizes_table && e.sizes_table.details_props) {
                        i.sizeTable = [];
                        const l = e.sizes_table.details_props.indexOf("RU")
                          , t = {
                            row: []
                        };
                        l >= 0 && (t.row[0] = this.$localziation.russianSize),
                        t.row[1] = this.$localziation.manufactureSize;
                        let o = 2;
                        for (let i = 2; i < e.sizes_table.details_props.length; i++) {
                            const l = e.sizes_table.details_props[i];
                            t.row[o++] = "" !== l ? l : "-"
                        }
                        i.sizeTable.push(t),
                        e.sizes_table.values.forEach(e=>{
                            var t;
                            const o = {
                                chrtId: null !== (t = e.chrt_id) && void 0 !== t ? t : 0,
                                row: []
                            };
                            if (l >= 0 && (o.row[0] = e.details[l]),
                            o.row[1] = e.tech_size,
                            e.details.length > 2)
                                for (let i = 2; i < e.details.length; i++)
                                    o.row[i] = "" !== e.details[i] ? e.details[i] : "-";
                            i.sizeTable.push(o)
                        }
                        );
                        for (const l of i.sizes) {
                            const i = e.sizes_table.values.find(i=>i.chrt_id === l.characteristicId);
                            if (i && e.sizes_table.details_props.length === i.details.length)
                                for (let t = 2; t < e.sizes_table.details_props.length; t++) {
                                    const o = {
                                        name: e.sizes_table.details_props[t],
                                        value: "" !== i.details[t] ? i.details[t] : "-"
                                    };
                                    l.dimensions.push(o)
                                }
                        }
                    }
                    const b = this._fillGroupedAddedOptions(e);
                    i.groupedAddedOptions = b,
                    i.miniAddedOptions = this._fillMiniGroupedAddedOptions(b),
                    i.gluedOptions = wb.xnm.convertOptionsToGluedOptions(null === (p = e) || void 0 === p ? void 0 : p.options),
                    i.subjectName = null !== (m = null === (_ = e) || void 0 === _ ? void 0 : _.subj_name) && void 0 !== m ? m : "",
                    i.subjectParent = null !== (f = null === (h = e) || void 0 === h ? void 0 : h.subj_root_name) && void 0 !== f ? f : "",
                    i.verifiedCertificate = this._setVerifiedCertificate(e),
                    this._addDigitalLinks(i, e),
                    i.description = e.description,
                    i.isDataLoaded = !0
                }
                const b = Object.assign({}, i);
                return this.fillSelectedNomenclature(b),
                b
            }
            ,
            e.loadPriceHistory = async function(i) {
                return await this.$httpClient.fetchBasicJSON(wb.helpers.url.urlPriceHistoryStatic(i), {}, {
                    nullOnError: !0,
                    logOff: !0
                })
            }
            ,
            e.loadProductVideosAsync = async function(i) {
                const e = VIDEOS_CACHE.find(e=>e.nmId == i);
                if (null != e)
                    return await e.payloadTask;
                try {
                    const e = this.$httpClient.fetchBasicJSON(`https://video-reviews.wildberries.ru/api/v1/video-by-nm?nm=${i}`);
                    return VIDEOS_CACHE.push({
                        nmId: i,
                        payloadTask: e
                    }),
                    VIDEOS_CACHE = VIDEOS_CACHE.slice(-25),
                    await e
                } catch (i) {
                    return console.error(i),
                    null
                }
            }
            ,
            e._addDigitalLinks = function(i, e) {
                var l, t;
                i.digitalLinks = {
                    audio: null == e || null === (l = e.media) || void 0 === l ? void 0 : l.audiobook,
                    electronic: null == e || null === (t = e.media) || void 0 === t ? void 0 : t.electronic_book
                }
            }
            ,
            e._colorLimiter = function(i, e) {
                if (null === e || e.length < 60)
                    return e;
                if (e.indexOf(i) < 60)
                    return e.slice(0, 60);
                const l = [i];
                return l.push(...e.slice(0, 59)),
                l
            }
            ,
            e._fillBaseProductCardFromX = function(i, e, l) {
                var t, o, n;
                const s = this._fillGroupedAddedOptions(i);
                return {
                    imtId: null !== (t = null !== (o = null == i ? void 0 : i.imt_id) && void 0 !== o ? o : null == e ? void 0 : e.root) && void 0 !== t ? t : 0,
                    groupedAddedOptions: s,
                    miniAddedOptions: this._fillMiniGroupedAddedOptions(s, l),
                    nomenclatures: [],
                    promoTemplateUfu: null == i || null === (n = i.media) || void 0 === n || null === (n = n.promo_url) || void 0 === n ? void 0 : n.replace(/^\/+|\/+$/g, ""),
                    supplierDeliveryInfo: {
                        time1: null == e ? void 0 : e.time1,
                        time2: null == e ? void 0 : e.time2,
                        storeId: null == e ? void 0 : e.wh
                    }
                }
            }
            ,
            e._fillGroupedAddedOptions = function(i) {
                var e, l, t, o, n, s;
                const d = null !== (e = null == i || null === (l = i.grouped_options) || void 0 === l ? void 0 : l.map(i=>{
                    var e;
                    return {
                        categoryName: i.group_name,
                        addedOptions: null === (e = i.options) || void 0 === e ? void 0 : e.map(i=>({
                            property: i.name,
                            subProperty: i.value
                        }))
                    }
                }
                )) && void 0 !== e ? e : [];
                let a = null == d ? void 0 : d.find(i=>"Дополнительная информация" === (null == i ? void 0 : i.categoryName));
                var r;
                (null != a && null != a.addedOptions || (a = {
                    categoryName: "Дополнительная информация",
                    addedOptions: []
                },
                d.push(a)),
                null != i && null !== (t = i.options) && void 0 !== t && t.find(i=>"Состав" === i.name) || null == (null == i ? void 0 : i.compositions)) || a.addedOptions.unshift({
                    property: "Состав",
                    subProperty: null == i || null === (r = i.compositions) || void 0 === r ? void 0 : r.map(i=>i.value ? `${i.name} ${i.value}%` : i.name).join(", ")
                });
                return null != i && null !== (o = i.options) && void 0 !== o && o.find(i=>"Комплектация" === i.name) || null == (null == i ? void 0 : i.contents) || a.addedOptions.push({
                    property: "Комплектация",
                    subProperty: i.contents
                }),
                null != i && null !== (n = i.options) && void 0 !== n && n.find(i=>"Пол" === i.name) || null == (null == i ? void 0 : i.kinds) || a.addedOptions.push({
                    property: "Пол",
                    subProperty: i.kinds.join(", ")
                }),
                null != i && null !== (s = i.options) && void 0 !== s && s.find(i=>"Сезон" === i.name) || null == i || !i.season || a.addedOptions.push({
                    property: "Сезон",
                    subProperty: i.season
                }),
                d.filter(i=>i.addedOptions.length > 0)
            }
            ,
            e._fillNomenclature = function(i, e, l) {
                var t, o, n, s, d, a, r, u, c, v, p, m, _, f, h, b, O, I, g, S, z, C, y, T, w, P, N, E, A, D, j, k, R;
                const L = null !== (t = null !== (o = null == e || null === (n = e.data) || void 0 === n ? void 0 : n.subject_id) && void 0 !== o ? o : null == l ? void 0 : l.subjectId) && void 0 !== t ? t : 0
                  , F = null !== (s = null !== (d = null == e || null === (a = e.data) || void 0 === a ? void 0 : a.subject_root_id) && void 0 !== d ? d : null == l ? void 0 : l.subjectParentId) && void 0 !== s ? s : 0
                  , x = null !== (r = null == e ? void 0 : e.subj_name) && void 0 !== r ? r : ""
                  , U = null !== (u = null == e ? void 0 : e.subj_root_name) && void 0 !== u ? u : ""
                  , H = null !== (c = null !== (v = null == l ? void 0 : l.pics) && void 0 !== v ? v : null == e || null === (p = e.media) || void 0 === p ? void 0 : p.photo_count) && void 0 !== c ? c : 0
                  , $ = 20624 === (null == l ? void 0 : l.brandId) || 30624 === (null == l ? void 0 : l.siteBrandId)
                  , B = {
                    adult: null !== (m = null == l ? void 0 : l.isAdult) && void 0 !== m && m,
                    brandId: null !== (_ = null == l ? void 0 : l.brandId) && void 0 !== _ ? _ : 0,
                    brandName: null !== (f = null == e || null === (h = e.selling) || void 0 === h ? void 0 : h.brand_name) && void 0 !== f ? f : null == l ? void 0 : l.brand,
                    canFit: this._setCanFit(L, F),
                    colorName: -1 !== HIDE_COLOR_SUBJECT_ROOT_IDS.indexOf(null == l ? void 0 : l.subjectId) ? null : null !== (b = null == e ? void 0 : e.nm_colors_names) && void 0 !== b ? b : null == l || null === (O = l.colors) || void 0 === O ? void 0 : O.map(i=>i.name).join(", "),
                    consist: null !== (I = null !== (g = null == e || null === (S = e.compositions) || void 0 === S ? void 0 : S.map(i=>i.value ? `${i.name} ${i.value}%` : i.name).join(", ")) && void 0 !== g ? g : null == e || null === (z = e.options) || void 0 === z || null === (z = z.find(i=>"Состав" === i.name)) || void 0 === z ? void 0 : z.value) && void 0 !== I ? I : "",
                    deliveryHours: ((null == l ? void 0 : l.time1) || 0) + ((null == l ? void 0 : l.time2) || 0),
                    description: null == e ? void 0 : e.description,
                    fastestStore: null == l ? void 0 : l.wh,
                    feedbacks: null !== (C = null == l ? void 0 : l.feedbacks) && void 0 !== C ? C : 0,
                    gluedOptions: wb.xnm.convertOptionsToGluedOptions(null == e ? void 0 : e.options),
                    goodsName: null !== (y = null == e ? void 0 : e.imt_name) && void 0 !== y ? y : null == l ? void 0 : l.name,
                    isActivationKey: -1 !== ACTIVATION_KEY_SUBJECTS.indexOf(L),
                    isDataLoaded: null != e,
                    isDetailsLoaded: !0,
                    isDigital: null !== (T = null == l ? void 0 : l.isDigital) && void 0 !== T && T,
                    isPreorder: 5772 === (null == l ? void 0 : l.brandId) && wb.settings.preOrderList.includes(i),
                    isVideo: 5105 === L,
                    hasVideo: null !== (w = null == e || null === (P = e.media) || void 0 === P ? void 0 : P.has_video) && void 0 !== w && w,
                    hasRich: null !== (N = null == e ? void 0 : e.has_rich) && void 0 !== N && N,
                    kindId: null !== (E = null == l ? void 0 : l.kindId) && void 0 !== E ? E : 0,
                    nmId: i,
                    nonRefundable: (null == l ? void 0 : l.isUnrefusable) || wb.xnm.setNoRefund(L),
                    ordersCount: 0,
                    panelPromoId: null == l ? void 0 : l.panelPromoId,
                    picsCount: H,
                    promoText: null == l ? void 0 : l.promoTextCard,
                    promotions: null == l ? void 0 : l.promotions,
                    saleConditions: null == l ? void 0 : l.saleConditions,
                    subjectId: L,
                    subjectName: x,
                    subjectParent: U,
                    subjectParentId: F,
                    sizes: this._fillSizes(l, e),
                    sizeTable: e ? this._fillSizeTable(e) : null,
                    showMinDetails: !SHOW_MIN_DETAILS.includes(F),
                    reviewRating: null == l ? void 0 : l.reviewRating,
                    star: null !== (A = null == l ? void 0 : l.rating) && void 0 !== A ? A : 0,
                    urlForReccomendations: `/recommendation/catalog?type=visuallysimilar&forproduct=${i}&excludeNms=true`,
                    supplierId: null == l ? void 0 : l.supplierId
                };
                B.allSizesSoldOut = null === (D = B.sizes) || void 0 === D ? void 0 : D.every(i=>i.isSoldOut);
                const G = !B.allSizesSoldOut && (null == l || null === (j = l.price) || void 0 === j ? void 0 : j.total) > 0;
                return B.price = {
                    price: G && l.price.basic ? l.price.basic / 100 : 0,
                    salePrice: G && l.price.total ? l.price.total / 100 : 0,
                    sale: G ? l.price.sale : 0,
                    priceDiff: !!G && l.diffPrice,
                    logisticsCost: (null !== (k = l.price.logistics) && void 0 !== k ? k : 0) / 100,
                    soldOut: B.allSizesSoldOut
                },
                B.sort = 0,
                (null === (R = B.sizes) || void 0 === R ? void 0 : R.length) > 0 && (1 === B.sizes.length ? B.sort = B.sizes[0].quantity > 0 ? 1 : 0 : B.sizes.reduce((i,e)=>B.sort += e.quantity > 0, {})),
                B.supplierDeliveryInfo = {
                    time1: null == l ? void 0 : l.time1,
                    time2: null == l ? void 0 : l.time2,
                    storeId: null == l ? void 0 : l.wh
                },
                l && (B.viewFlags = l.viewFlags,
                B.shouldShowOriginalMark = !$ && 0 != (8 & l.viewFlags)),
                B
            }
            ,
            e._fillSizeTable = function(i) {
                const e = [];
                if (i.sizes_table && i.sizes_table.details_props) {
                    const l = i.sizes_table.details_props.indexOf("RU")
                      , t = i.sizes_table.details_props.indexOf("EU")
                      , o = {
                        row: []
                    };
                    let n = 0;
                    l >= 0 && (o.row[n++] = this.$localziation.russianSize),
                    o.row[n++] = this.$localziation.manufactureSize;
                    for (let e = 0; e < i.sizes_table.details_props.length; e++) {
                        if (e === l || e === t)
                            continue;
                        const s = i.sizes_table.details_props[e];
                        o.row[n++] = "" !== s ? s : "-"
                    }
                    e.push(o),
                    i.sizes_table.values.forEach(i=>{
                        var o;
                        let n = 0;
                        const s = {
                            chrtId: null !== (o = i.chrt_id) && void 0 !== o ? o : 0,
                            row: []
                        };
                        l >= 0 && (s.row[n++] = i.details[l]),
                        s.row[n++] = i.tech_size;
                        const d = (-1 !== l ? 1 : 0) + (-1 !== t ? 1 : 0);
                        if (i.details.length > d)
                            for (let e = 0; e < i.details.length; e++)
                                e !== l && e !== t && (s.row[n++] = "" !== i.details[e] ? i.details[e] : "-");
                        e.push(s)
                    }
                    )
                }
                return e
            }
            ,
            e._fillProductCardMetaTags = function(i) {
                const e = {};
                return i.nomenclatures.map(i=>{
                    const l = `${i.goodsName} ${i.brandName} ${i.nmId}`;
                    e[i.nmId] = {
                        title: `${l} купить %FORPRICE% в интернет-магазине Wildberries`,
                        description: `${l} купить %FORPRICE% в интернет-магазине Wildberries. Бесплатная доставка и постоянные скидки!`
                    }
                }
                ),
                e
            }
            ,
            e._fillPromoUrl = function(i, e, l, t) {
                if (e.promoTemplateUfu)
                    return `promo/${e.promoTemplateUfu}`;
                if (6012 === t || 3363 === t) {
                    var o;
                    if (null == l || null === (o = l.options) || void 0 === o || null === (o = o.find(i=>"Подробный обзор" === i.name)) || void 0 === o ? void 0 : o.value)
                        return `https://www.wildberries.ru/productinfo/philips/${i}`
                }
            }
            ,
            e._canCheckForMulti = function(i) {
                var e;
                return !(null == i || null === (e = i.options) || void 0 === e || !e.find(i=>"Модель" === i.name))
            }
            ,
            e._fillOpenGraphDescription = function(i, e, l) {
                if (null != e && e.description)
                    return e.description;
                const t = l[i];
                return null != t && t.description ? t.description : "Узнать подробнее, перейдите по ссылке"
            }
            ,
            e._fillSizes = function(i, e) {
                var l;
                return i && i.sizes ? i.sizes.sort((i,e)=>i.rank - e.rank).map(l=>{
                    var t, o, n, s, d, a, r;
                    const u = []
                      , c = null == e || null === (t = e.sizes_table) || void 0 === t || null === (t = t.values) || void 0 === t ? void 0 : t.find(i=>i.chrt_id === l.optionId);
                    if (null != c && c.details && (null === (o = e.sizes_table.details_props) || void 0 === o ? void 0 : o.length) === c.details.length)
                        for (let i = 0; i < e.sizes_table.details_props.length; i++) {
                            if ("RU" === e.sizes_table.details_props[i] || "EU" === e.sizes_table.details_props[i])
                                continue;
                            const l = {
                                name: e.sizes_table.details_props[i],
                                value: "" !== c.details[i] ? c.details[i] : "-"
                            };
                            u.push(l)
                        }
                    const v = null !== (n = null === (s = l.price) || void 0 === s ? void 0 : s.total) && void 0 !== n ? n : null === (d = i.price) || void 0 === d ? void 0 : d.total;
                    let p = 0;
                    v > 0 && (null === (a = l.stocks) || void 0 === a ? void 0 : a.length) > 0 && (1 === l.stocks.length ? p = l.stocks[0].qty : l.stocks.reduce((i,e)=>p += e.qty, 0));
                    const m = p > 0 ? null === (r = l.stocks) || void 0 === r ? void 0 : r.map(i=>i.wh) : null
                      , _ = {
                        characteristicId: l.optionId,
                        sizeName: l.origName,
                        sizeNameRus: l.name,
                        dimensions: u,
                        quantity: p,
                        stocks: l.stocks,
                        storeIds: m,
                        isSoldOut: 0 === p,
                        lowQuantity: p < 3 && p > 0,
                        deliveryHours: (l.time1 || 0) + (l.time2 || 0),
                        fastestStore: l.wh,
                        payload: l.payload,
                        returnCost: l.returnCost
                    };
                    var f, h, b, O, I, g;
                    p > 0 && i.diffPrice && (_.price = {
                        price: null !== (f = l.price) && void 0 !== f && f.basic ? (null === (h = l.price) || void 0 === h ? void 0 : h.basic) / 100 : 0,
                        salePrice: null !== (b = l.price) && void 0 !== b && b.total ? (null === (O = l.price) || void 0 === O ? void 0 : O.total) / 100 : 0,
                        returnCost: null !== (I = null === (g = l.price) || void 0 === g ? void 0 : g.return) && void 0 !== I ? I : 0
                    });
                    return _
                }
                ) : null != e && null !== (l = e.data) && void 0 !== l && l.chrt_ids ? e.data.chrt_ids.map(i=>{
                    var l;
                    const t = null == e || null === (l = e.sizes_table) || void 0 === l ? void 0 : l.values.find(e=>e.chrt_id === i)
                      , o = [];
                    if (t) {
                        var n, s;
                        const i = null == e || null === (n = e.sizes_table) || void 0 === n ? void 0 : n.values.find(i=>i.chrt_id === t.optionId);
                        if (null != i && i.details && (null === (s = e.sizes_table.details_props) || void 0 === s ? void 0 : s.length) === i.details.length)
                            for (let l = 0; l < e.sizes_table.details_props.length; l++) {
                                if ("RU" === e.sizes_table.details_props[l] || "EU" === e.sizes_table.details_props[l])
                                    continue;
                                const t = {
                                    name: e.sizes_table.details_props[l],
                                    value: "" !== i.details[l] ? i.details[l] : "-"
                                };
                                o.push(t)
                            }
                    }
                    return {
                        characteristicId: i,
                        sizeName: "0",
                        sizeNameRus: "",
                        dimensions: o,
                        quantity: 0,
                        isSoldOut: !0
                    }
                }
                ) : null
            }
            ,
            e._setCanFit = function(i, e) {
                return -1 !== CLOTHES_FITTING_ROOT_SUBJECTS.indexOf(e) && -1 === CLOTHES_DISABLE_FITTING_SUBJECTS.indexOf(i)
            }
            ,
            e._fillMiniGroupedAddedOptions = function(i, e) {
                const l = [];
                if (!i)
                    return l;
                let t = e ? 4 : 6;
                for (let e = 0; e < i.length; e++) {
                    const o = i[e].addedOptions.slice(0, t).filter(i=>"Цвет" !== i.property);
                    if (l.push(...o),
                    (t -= o.length) < 1)
                        break
                }
                return l
            }
            ,
            e._setVerifiedCertificate = function(i) {
                var e, l;
                return null != i && null !== (e = i.certificate) && void 0 !== e && e.verified ? null !== (l = i.data) && void 0 !== l && l.subject_id && CERTIFICATE_NOT_SHOW_LINK.indexOf(i.data.subject_id) >= 0 ? 2 : 1 : 0
            }
            ,
            e._setSelectedPrice = function(i) {
                var e;
                i.selectedPrice = null !== (e = i.selectedSize) && void 0 !== e && e.price ? i.selectedSize.price : i.price
            }
            ,
            e._setButtons = function(i) {
                var e, l, t;
                i.addToBasketEnable = !(null !== (e = i.selectedSize) && void 0 !== e && e.isSoldOut || i.allSizesSoldOut),
                i.addToPonedEnable = !(null !== (l = i.selectedSize) && void 0 !== l && l.isSoldOut || i.allSizesSoldOut),
                i.addToWaitingListEnable = (null === (t = i.selectedSize) || void 0 === t ? void 0 : t.isSoldOut) || i.allSizesSoldOut,
                i.addedToBasket = !1,
                i.addedToWl = !1
            }
            ,
            i
        }();
        module.exports = ProductCardService;

    }
    , {}],
    124: [function(require, module, exports) {
        "use strict";
        const REFUND_KEY = "wb__refundRids"
          , MAX_COUNT = 64;
        let RefundService = function() {
            function t() {
                this.rids = (sessionStorage.getObject(REFUND_KEY) || []).toHashSet()
            }
            var s = t.prototype;
            return s.toRefund = function(t) {
                !t || this.rids.size >= 64 || (this.rids.add(t),
                this._syncTo())
            }
            ,
            s.del = function(t) {
                t && (this.rids.delete(t),
                this._syncTo())
            }
            ,
            s.clear = function() {
                this.rids.clear(),
                this._syncTo()
            }
            ,
            s.getRids = function() {
                return this.rids.toArray()
            }
            ,
            s._syncTo = function() {
                sessionStorage.putObject(REFUND_KEY, this.rids.toArray())
            }
            ,
            t
        }();
        module.exports = RefundService;

    }
    , {}],
    125: [function(require, module, exports) {
        "use strict";
        const indexDb = "send-queue"
          , defaultRetryCount = 10
          , logPrefix = "[RETRY FETCH SERVICE]";
        let RetryFetchService = function() {
            function e() {
                this.sendQueue = "queue",
                this.storage = this.$storageHelper,
                this.storage.supportIndexedDb() ? setInterval(()=>this._sendJobChecker.call(this, this.sendQueue), 1e4) : this.dbPromise = Promise.reject()
            }
            var t = e.prototype;
            return t.saveRequest = function(e, t, {tryTill: r, timeout: i}={}) {
                try {
                    delete t.signal;
                    const o = {
                        url: e,
                        options: t,
                        retryCount: 1,
                        retryTime: Date.now()
                    };
                    r > 0 && (o.tryTill = r),
                    i > 0 && (o.timeout = i),
                    this._openDb().then(e=>e.transaction(this.sendQueue, "readwrite").objectStore(this.sendQueue).add(o))
                } catch (e) {
                    wb.spa.logError(e, `${logPrefix}: failed to save table=${this.sendQueue}`, !0)
                }
            }
            ,
            t._openDb = function() {
                return this.dbPromise || (this.dbPromise = this.storage.openDb(indexDb, {
                    onupgradeneeded: e=>{
                        if (!e.objectStoreNames.contains(this.sendQueue)) {
                            e.createObjectStore(this.sendQueue, {
                                autoIncrement: !0
                            }).createIndex("retryTime", "retryTime", {
                                unique: !1
                            })
                        }
                        e.objectStoreNames.contains(this.storage.metadataTableName(this.sendQueue)) || e.createObjectStore(this.storage.metadataTableName(this.sendQueue), {
                            keyPath: "name"
                        })
                    }
                    ,
                    version: 2
                })),
                this.dbPromise
            }
            ,
            t._log = function(e) {
                window._debug && console.debug(`%c${logPrefix}: ${e}`, "color:#4B6F44")
            }
            ,
            t._sendJobChecker = function() {
                const e = "job_in_progress"
                  , t = this.storage.metadataTableName(this.sendQueue);
                wb.settings.isOffline || this._openDb().then(async r=>{
                    let i = !1;
                    try {
                        const o = await this.storage.get(r, t, e);
                        o && Date.now() > o.value && await this.storage.removeItem(r, t, e).then(()=>this._log("lock cleared")),
                        i = await this.storage.addItem(r, t, {
                            name: e,
                            value: Date.now() + 3e5
                        }, !0);
                        try {
                            await this.storage.withCursor(r, this.sendQueue, "retryTime", async(e,t,i)=>{
                                const o = Date.now();
                                if (this._log(`checking ${i.primaryKey} url: ${t.url}, retryCount: ${t.retryCount}, retryTime: ${t.retryTime}`),
                                t.retryCount > 10 && 0 < t.tryTill && t.tryTill > o && (t.retryCount = Math.max(2, 8),
                                t.retryTime = o - 1e3),
                                t.retryCount > 10)
                                    this.storage.removeItem(r, this.sendQueue, i.primaryKey).then(()=>this._log(`cleared url: ${t.url}`));
                                else if (t.retryTime < o) {
                                    const e = i.primaryKey;
                                    try {
                                        var s;
                                        this._log(`executing ${e} url: ${t.url}, retryCount: ${t.retryCount}, retryTime: ${t.retryTime}`);
                                        const i = {
                                            timeout: t.timeout
                                        };
                                        if (await this.$httpClient.fetchText(t.url, t.options, i),
                                        null !== (s = i.modified) && void 0 !== s && s.timeout)
                                            throw this._log(`timeout for ${e} url: ${t.url}`),
                                            new Error("service timeout");
                                        this.storage.removeItem(r, this.sendQueue, e).then(()=>this._log(`cleared ${e} url: ${t.url}`))
                                    } catch (i) {
                                        t.retryTime = Date.now() + 2 ** t.retryCount * 1e3,
                                        t.retryCount++,
                                        delete t.options.signal,
                                        this.storage.updateItem(r, this.sendQueue, t, e).then(()=>this._log(`extended ${e} url: ${t.url}, retryCount: ${t.retryCount}, retryTime: ${t.retryTime}`))
                                    }
                                }
                            }
                            )
                        } catch (e) {
                            console.log(e)
                        }
                    } catch (e) {} finally {
                        i && this.storage.removeItem(r, t, e)
                    }
                }
                )
            }
            ,
            e
        }();
        module.exports = RetryFetchService;

    }
    , {}],
    126: [function(require, module, exports) {
        "use strict";
        !function() {
            let t = function() {
                function t() {}
                return t.prototype.getSeoTags = async function(t) {
                    t = t.replace("/catalogdata/", "/catalog/");
                    const a = `seo-catalog-tags-by-url-${wb.settings.currentLocale}-${t}.json`
                      , e = await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(a, 3e3);
                    return null != e && e.link && (e.link = e.link.replace("/catalog/", "/catalogdata/")),
                    e
                }
                ,
                t
            }();
            module.exports = t
        }();

    }
    , {}],
    127: [function(require, module, exports) {
        "use strict";
        const sessionKey = "wbx__sessionID";
        let SessionService = function() {
            function e() {
                this.session = localStorage.getItem(sessionKey),
                window.addEventListener("storage", e=>{
                    e.key === sessionKey && (this.session = localStorage.getItem(sessionKey))
                }
                )
            }
            var s = e.prototype;
            return s.getSession = function() {
                return this.session || (this.session = localStorage.getItem(sessionKey),
                this.session || (this.session = `site_${wb.helpers.generateGuid()}`,
                localStorage.setItem(sessionKey, this.session))),
                this.session
            }
            ,
            s.getUserUid = function() {
                return this.$router.userIsAuth ? this.$router.userUid : this.getBasketUid()
            }
            ,
            s.getBasketUid = function() {
                let e = wb.cookieHelper.getCookie("BasketUID");
                return e || (e = wb.helpers.generateGuid(),
                wb.cookieHelper.setCookie("BasketUID", e, {
                    domain: "localhost" === window.location.host ? "" : ".wildberries." + wb.settings.currentLocale
                })),
                e
            }
            ,
            e
        }();
        module.exports = SessionService;

    }
    , {}],
    128: [function(require, module, exports) {
        "use strict";
        !function() {
            const t = "splitInfo"
              , e = {
                splitId: "no_test",
                title: "no_test"
            }
              , i = {
                default: [{
                    key: "ab_testing",
                    value: !1
                }]
            };
            let n = function() {
                function n() {
                    this._setSplitInfo = this._setSplitInfo.bind(this),
                    this.splitInfo = i.default,
                    this._setSplitInfo(),
                    localStorage.removeItem(t)
                }
                var o = n.prototype;
                return o.removeCountInFilters = function() {
                    return "no_filters_count" === this.splitInfo.title
                }
                ,
                o.getSplitInfo = function() {
                    return e
                }
                ,
                o.getSplitInfoV2 = function(t) {
                    return this.splitInfo[t] || i.default
                }
                ,
                o.appendSplitInfoV2 = function(t, e) {
                    const i = this.getSplitInfoV2(e);
                    i && i.forEach(e=>t.append(e.key, e.value))
                }
                ,
                o._updSplitInfo = function() {
                    this.timerId && clearTimeout(this.timerId),
                    this.timerId = setTimeout(this._setSplitInfo, 36e5)
                }
                ,
                o._setSplitInfo = async function() {
                    var t;
                    const e = this._getSplitInfoFromCache();
                    if (this.splitInfo = null !== (t = null == e ? void 0 : e.splitInfo) && void 0 !== t ? t : i,
                    null == e || !e.skipSplitRequest) {
                        const t = await this._getSplitInfoFromService() || i;
                        this._setSplitInfoToCache(t),
                        this.splitInfo = t
                    }
                    wb.analitics.sendEvent("AB_Test_Splitter_Request", this.splitInfo),
                    this._updSplitInfo()
                }
                ,
                o._getSplitInfoFromService = async function() {
                    const t = wb.cookieHelper.getCookie("_wbauid");
                    if (!t)
                        return null;
                    try {
                        const e = "https://splitter.wb.ru/v2/result"
                          , n = {
                            "X-API-KEY": "c8ab0248-284e-4fad-a8a2-d4dd258cbd6c",
                            "X-USER-ID": t
                        };
                        let o = await WbSpaModel.prototype.$httpClient.fetchBasicJSON(e, {
                            credentials: "omit",
                            headers: n
                        }, {
                            saveToBlob: "splitter_response",
                            timeout: 3e3,
                            nullOnError: !0,
                            return204: !0
                        });
                        return o && 204 !== o.status ? this._convertToAssociativeArray(o) : i
                    } catch (t) {
                        return null
                    }
                }
                ,
                o._convertToAssociativeArray = function(t) {
                    let e = {};
                    return Array.isArray(t) && (e = t.reduce((t,e)=>(t[e.type] = e.properties,
                    t), {})),
                    e
                }
                ,
                o._getSplitInfoFromCache = function() {
                    var t;
                    let e = localStorage.getObject("splitInfoV2");
                    return e ? (e.t = null !== (t = e.t) && void 0 !== t ? t : 0,
                    Date.now() > e.t + 72e5 ? null : {
                        splitInfo: e.splitInfo,
                        skipSplitRequest: Date.now() <= e.t + 36e5
                    }) : null
                }
                ,
                o._setSplitInfoToCache = function(t) {
                    t && localStorage.putObject("splitInfoV2", {
                        splitInfo: t,
                        t: Date.now()
                    })
                }
                ,
                n
            }();
            module.exports = n
        }();

    }
    , {}],
    129: [function(require, module, exports) {
        "use strict";
        const {PayStatus: PayStatus, RidStatus: RidStatus, UnpaidStatuses: UnpaidStatuses, CompletedOrderDays: CompletedOrderDays} = require("../../../modules/delivery/states");
        let BaseStorageOrder = function() {
            function t() {
                this.delivery = {
                    address: "",
                    city: "",
                    country: "",
                    email: "",
                    first_name: "",
                    phone: "",
                    region: "",
                    surname: "",
                    zip: ""
                },
                this.payment = {
                    amount: 0,
                    delivery_cost: 0,
                    goods_total: 0
                },
                this.items = [],
                this.rid_states = []
            }
            return t.isRidStateCompleted = function({state: t, pay_state: e}) {
                return !![RidStatus.Rejected, RidStatus.ValidateFail].includes(t) || (t === RidStatus.Completed && e === PayStatus.Refunded || t === RidStatus.Completed && e === PayStatus.Paid)
            }
            ,
            t.isCompleted = function(t) {
                if (t.is_finished)
                    return !0;
                const e = new Date(1e3 * (t.timestamp || 0));
                if (!t.rid_states || 0 == t.rid_states.length)
                    return !1;
                const a = e.addDays(CompletedOrderDays);
                return !(t.rid_states || []).some(({state: t, pay_state: e, service_pay_state: s})=>![RidStatus.Rejected, RidStatus.ValidateFail].includes(t) && ((t !== RidStatus.Completed || e !== PayStatus.Refunded) && !(t === RidStatus.Completed && e === PayStatus.Paid && a < new Date)))
            }
            ,
            t.trySetPositionProps = function(t, e, a) {
                var s;
                if (!a)
                    return !1;
                const i = null === (s = t.rid_states) || void 0 === s ? void 0 : s.find(t=>t.rid == e);
                if (!i)
                    return !1;
                const {isCanceling: d, isPrepaid: n, selectedForPay: r, canPrepay: o, trackingStatus: u, trackingStatusId: l, lastDate: m, mpmPaymentStatus: c} = a;
                let p = !1;
                if (d && !i.is_canceling && (p = !0,
                i.is_canceling = !0),
                n && i.pay_state != PayStatus.Paid && (p = !0,
                i.pay_state = PayStatus.Paid),
                l > 0 && i.tracking_id != l && (p = !0,
                i.tracking_id = l,
                i.tracking = u),
                c !== i.mpmPaymentStatus && (p = !0,
                i.mpmPaymentStatus = c),
                m > 0) {
                    const t = Math.floor(m / 1e3);
                    t != i.updated_dt && (i.updated_dt = t,
                    p = !0)
                }
                return p
            }
            ,
            t.removePosition = function(t, e) {
                const a = t.items.findIndex(t=>t.rids.includes(e));
                if (a >= 0) {
                    var s, i;
                    const d = null === (s = t.rid_states) || void 0 === s ? void 0 : s.findIndex(t=>t.rid == e);
                    d >= 0 && t.rid_states.splice(d, 1);
                    const n = 100 * (null === (i = t.items[a]) || void 0 === i ? void 0 : i.price) || 0;
                    return t.payment.amount = Math.max(0, t.payment.amount - n),
                    t.payment.goods_total = Math.max(0, t.payment.goods_total - n),
                    t.items.splice(a, 1),
                    !0
                }
                return !1
            }
            ,
            t
        }();
        module.exports = BaseStorageOrder;

    }
    , {
        "../../../modules/delivery/states": 36
    }],
    130: [function(require, module, exports) {
        "use strict";
        function _inheritsLoose(e, t) {
            e.prototype = Object.create(t.prototype),
            e.prototype.constructor = e,
            _setPrototypeOf(e, t)
        }
        function _setPrototypeOf(e, t) {
            return (_setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                return e.__proto__ = t,
                e
            }
            )(e, t)
        }
        const {PayStatus: PayStatus, RidStatus: RidStatus} = require("../../../modules/delivery/states")
          , BaseStorageOrder = require("./baseStorageOrder")
          , StorageOrderItem = require("./storageOrderItem");
        let OrdoStorageOrder = function(e) {
            function t({uid: t, orderId: r, position: i, trackerKey: o}) {
                var a;
                return (a = e.call(this) || this).uid = t,
                r && (a.orderId = r),
                a.source = "ordo",
                a.timestamp = Math.round(new Date(i.orderDate) / 1e3),
                i.country && (a.locale = i.country),
                a.delivery = Object.assign(a.delivery, {
                    address: i.address,
                    delivery_type: i.smId,
                    delivery_time: new Date(i.dateTime) / 1e3,
                    dst_office_id: i.officeId,
                    p_id: i.pid
                }),
                5 == a.delivery.delivery_type || 17 == a.delivery.delivery_type ? a.delivery.service = "wb_courier" : a.delivery.delivery_type > 0 && (a.delivery.service = "wb_pvz"),
                i.latitude > 0 && i.longitude > 0 && Object.assign(a.delivery, {
                    latitude: i.latitude,
                    longitude: i.longitude
                }),
                i.timeFrom && i.timeTo && Object.assign(a.delivery, {
                    time_from: i.timeFrom,
                    time_to: i.timeTo
                }),
                i.trackerShardKey && (a.tracker_shard_key = i.trackerShardKey),
                a.addOrdoPosition(i),
                a.user = o,
                a
            }
            return _inheritsLoose(t, e),
            t.prototype.addOrdoPosition = function(e) {
                this.payment.amount += 100 * e.price,
                this.payment.delivery_cost = Math.max(100 * e.deliveryPrice, this.payment.delivery_cost),
                this.payment.goods_total = this.payment.amount + this.payment.delivery_cost,
                this.payment.currency = e.isoCurrency || e.iSOCurrency,
                this.payment.type = e.paymentType,
                this.items.push(StorageOrderItem.fromOrdo(e)),
                this.rid_states.push(Object.assign({
                    rid: e.rId
                }, t.getItemState(e)))
            }
            ,
            t.getItemState = function(e) {
                let t = PayStatus.Unknown
                  , r = RidStatus.Assembling;
                return 4096 == e.bitStatus ? (t = PayStatus.PayFail,
                r = RidStatus.Completed) : "CSH" == e.paymentType || e.prepaid ? e.hasOwnProperty("isPrepaid") && (t = e.isPrepaid ? PayStatus.Paid : PayStatus.NotPaid) : t = PayStatus.PayFail,
                {
                    pay_state: e.payState || t,
                    state: r,
                    tracking: e.trackingStatus,
                    tracking_id: e.trackingStatusId,
                    expiration_timestamp: e.expirationTimestamp,
                    updated_dt: Math.floor(e.lastDate / 1e3),
                    archive: e.archive,
                    shk_id: e.shkId,
                    version: e.version
                }
            }
            ,
            t.singleFromOrdo = function({positions: e, trackerKey: t}) {
                return e.map(e=>new this({
                    uid: e.rId,
                    orderId: e.orderId,
                    position: e,
                    trackerKey: t
                }))
            }
            ,
            t.groupedFromOrdo = function({positions: e, trackerKey: t}) {
                return [...e.reduce((e,r)=>{
                    var i;
                    let o;
                    const a = null !== (i = r.orderId) && void 0 !== i ? i : r.rId;
                    return e.has(a) ? (o = e.get(a)).addOrdoPosition(r) : (o = new this({
                        uid: a,
                        position: r,
                        trackerKey: t,
                        orderId: r.orderId
                    }),
                    e.set(a, o)),
                    e
                }
                , new Map).values()]
            }
            ,
            t
        }(BaseStorageOrder);
        module.exports = OrdoStorageOrder;

    }
    , {
        "../../../modules/delivery/states": 36,
        "./baseStorageOrder": 129,
        "./storageOrderItem": 131
    }],
    131: [function(require, module, exports) {
        "use strict";
        let StorageOrderItem = function() {
            function e() {
                this.sale = 0
            }
            return e.fromOrdo = function(e) {
                var n, t, i;
                const r = new this;
                return r.id = e.code1S,
                r.name = null !== (n = e.name) && void 0 !== n ? n : "",
                r.subjectId = e.subjectId,
                r.nonRefundable = e.nonRefundable,
                r.brand = null !== (t = e.brand) && void 0 !== t ? t : "",
                r.price = 100 * e.price,
                r.salePrice = 100 * e.price,
                r.paymentSaleAmount = 100 * e.paymentSaleAmount,
                r.paymentSaleType = e.paymentSaleType,
                r.option = {
                    id: e.characteristicId,
                    color: e.color,
                    name: null !== (i = e.size) && void 0 !== i ? i : ""
                },
                r.quantity = 1,
                r.return_fee = 100 * e.returnCost,
                r.rids = [e.rId],
                e.saleConditions > -1 && (r.sale_conditions = e.saleConditions),
                r.cacheExpiration = e.cacheExpiration,
                r.positions = [{
                    rid: e.rId,
                    delivery_type: e.smId,
                    delivery_time: new Date(e.dateTime) / 1e3,
                    wh: e.wh
                }],
                r
            }
            ,
            e
        }();
        module.exports = StorageOrderItem;

    }
    , {}],
    132: [function(require, module, exports) {
        "use strict";
        const StorageTables = Object.freeze({
            orders: "orders",
            chats: "chats"
        })
          , ChatStoragePrefix = "/chats/"
          , ChatPathPrefix = "/chats/chat/"
          , ChatPaths = Object.freeze({
            root: "/chats/",
            chatChat: "/chats/chat/",
            chatList: "/chats/list",
            chatMaxSeen: "/chats/maxSeen",
            chat: t=>`/chats/chat/${t}`
        })
          , OrdersStoragePrefix = "/orders/"
          , OrdersPaths = Object.freeze({
            root: "/orders/",
            ordo: "/orders/ordo-orders|1"
        })
          , FutureSecondsForLocal = 60;
        module.exports = {
            StorageTables: StorageTables,
            ChatPaths: ChatPaths,
            OrdersPaths: OrdersPaths,
            FutureSecondsForLocal: 60
        };

    }
    , {}],
    133: [function(require, module, exports) {
        "use strict";
        function _defineProperties(t, e) {
            for (var r = 0; r < e.length; r++) {
                var o = e[r];
                o.enumerable = o.enumerable || !1,
                o.configurable = !0,
                "value"in o && (o.writable = !0),
                Object.defineProperty(t, _toPropertyKey(o.key), o)
            }
        }
        function _createClass(t, e, r) {
            return e && _defineProperties(t.prototype, e),
            r && _defineProperties(t, r),
            Object.defineProperty(t, "prototype", {
                writable: !1
            }),
            t
        }
        function _toPropertyKey(t) {
            var e = _toPrimitive(t, "string");
            return "symbol" == typeof e ? e : String(e)
        }
        function _toPrimitive(t, e) {
            if ("object" != typeof t || !t)
                return t;
            var r = t[Symbol.toPrimitive];
            if (void 0 !== r) {
                var o = r.call(t, e || "default");
                if ("object" != typeof o)
                    return o;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === e ? String : Number)(t)
        }
        const storeNameDict = require("../models/basket/storeNames")
          , CARGO_STORES_DT_KEY = "wb__cargo_stores_dt"
          , CARGO_STORES_NAME = "cargo-delivery-stores-v2.json"
          , STORES_DATA_DT_KEY = "wb__cargo_data_dt"
          , STORES_DATA_NAME = "stores-data.json"
          , CARGO_STORES_INTERVAL = 9e5
          , indexDb = "all-stores"
          , cargoStoresObject = "cargo-stores"
          , storeDataObject = "stores-data";
        let StoreService = function() {
            function t() {
                this._storeNames = storeNameDict,
                this._stores = {},
                this._getCargoStoresAsync().then(({storesData: t})=>{
                    if (this._cargoStores = [],
                    t) {
                        for (let {id: e, name: r, type: o} of t)
                            this._storeNames[e] = r,
                            !0 & o && this._cargoStores.push(e),
                            this._stores[e] = {
                                name: r,
                                type: o
                            };
                        this._storesLoaded = !0
                    }
                    this._startJobSync()
                }
                )
            }
            var e = t.prototype;
            return e._openDb = function() {
                return this.$storageHelper.openDb(indexDb, {
                    onupgradeneeded: t=>{
                        t.objectStoreNames.contains("cargo-stores") || t.createObjectStore("cargo-stores", {
                            keyPath: "id"
                        }),
                        t.objectStoreNames.contains("stores-data") || t.createObjectStore("stores-data", {
                            keyPath: "id"
                        })
                    }
                    ,
                    version: 2
                })
            }
            ,
            e._setStoresAsync = function(t, e) {
                this._openDb().then(r=>{
                    if (t instanceof Array) {
                        let e = r.transaction(["cargo-stores"], "readwrite").objectStore("cargo-stores");
                        e.clear();
                        for (let r = 0; r < t.length; r++)
                            e.add(t[r])
                    }
                    if (e instanceof Array) {
                        const t = r.transaction(["stores-data"], "readwrite").objectStore("stores-data");
                        for (const r of e)
                            t.put(r)
                    }
                }
                )
            }
            ,
            e._getCargoStoresAsync = async function() {
                const t = await this._openDb()
                  , [e,r] = await Promise.all([this.$storageHelper.getAll(t, "cargo-stores"), this.$storageHelper.getAll(t, "stores-data")]);
                return {
                    cargoStores: e,
                    storesData: r
                }
            }
            ,
            e._startJobSync = function() {
                (!this._cargoStores || !this._storesLoaded || +localStorage.getItem(CARGO_STORES_DT_KEY) < Date.now() || +localStorage.getItem(STORES_DATA_DT_KEY) < Date.now()) && this._syncStores(),
                setInterval(this._syncStores.bind(this), 9e5)
            }
            ,
            e._syncStores = async function() {
                const [t,e] = await Promise.all([this.$httpClient.fetchStaticDataV2(CARGO_STORES_NAME), this.$httpClient.fetchStaticDataV2(STORES_DATA_NAME)]);
                if (e instanceof Array) {
                    if (e instanceof Array) {
                        this._storesLoaded = !0,
                        this._cargoStores = [];
                        for (let {id: t, name: r, type: o} of e)
                            this._storeNames[t] = r,
                            !0 & o && this._cargoStores.push(t),
                            this._stores[t] = {
                                name: r,
                                type: o
                            };
                        localStorage.setItem(STORES_DATA_DT_KEY, Date.now() + 9e5)
                    }
                    this._setStoresAsync(t, e)
                }
            }
            ,
            _createClass(t, [{
                key: "cargoStores",
                get: function() {
                    return this._cargoStores || []
                }
            }, {
                key: "names",
                get: function() {
                    return this._storeNames
                }
            }, {
                key: "storesMap",
                get: function() {
                    return this._stores
                }
            }]),
            t
        }();
        module.exports = StoreService;

    }
    , {
        "../models/basket/storeNames": 33
    }],
    134: [function(require, module, exports) {
        "use strict";
        const readyStatuses = ["210", "230", "240", "250", "260", "280", "402", "235", "407", "555"]
          , timeout = 1e3
          , regexes = {
            260: /^Выдан курьеру(. \+?([\d]{11}),) .*$/i,
            555: /^Выдан курьеру .*([ ]+\+?(7[\d]+))$/i
        };
        let ridStatus = function() {
            function t(t) {
                this.statusId = t.status_id,
                this.dateTime = new Date(t.date / 1e6),
                this.unixSeconds = Math.floor(this.dateTime / 1e3),
                this.status = t.status_name,
                this.address = t.place_name,
                this.ready = readyStatuses.includes(this.statusId),
                this.readyToReceive = readyStatuses.includes(this.statusId),
                this.extractPhone()
            }
            var s = t.prototype;
            return s.isComplete = function(t) {
                return this.ready && (5 != t && 17 != t && 86 != t || 210 != this.statusId)
            }
            ,
            s.extractPhone = function() {
                "m" != wb.settings.displayMode || 260 != this.statusId && 555 != this.statusId || (this.status = this.status.replace(regexes[this.statusId], (t,s,e)=>(this.phone = e,
                t.replace(s, ""))))
            }
            ,
            t
        }()
          , TrackingService = function() {
            function t() {
                this.baseUrl = "https://wbx-status-tracker.wildberries.ru/api/v2"
            }
            var s = t.prototype;
            return s._getTimeout = function(t) {
                const s = new AbortController;
                return setTimeout(()=>s.abort(), t),
                s.signal
            }
            ,
            s.create = function(t) {
                return new ridStatus(t)
            }
            ,
            s.getLastStatuses = async function(t, s, e) {
                const i = await fetch(`${this.baseUrl}/last-status?${t}`, {
                    method: "POST",
                    body: JSON.stringify({
                        ids: s
                    }),
                    signal: null != e ? e : this._getTimeout(1e3)
                }).then(t=>200 == t.status ? t.json() : [])
                  , a = new Map;
                for (const t of i)
                    a.set(t.rid, new ridStatus(t));
                return {
                    found: a,
                    notFound: s.filter(t=>!a.has(t))
                }
            }
            ,
            s.getRidHistory = async function(t, s) {
                return (await fetch(`${this.baseUrl}/rid/${s}?${t}`).then(t=>200 == t.status ? t.json() : []).catch(()=>[])).map(t=>new ridStatus(t))
            }
            ,
            s._getParameter = function(t, s) {
                return t != s && (s > 0 || s) ? `shard=${s > 0 ? s : 1}` : `user_id=${t > 0 ? t : 1}`
            }
            ,
            s.isStatusReady = function(t) {
                return readyStatuses.includes(null == t ? void 0 : t.toString())
            }
            ,
            t
        }();
        module.exports = TrackingService;

    }
    , {}],
    135: [function(require, module, exports) {
        "use strict";
        function _defineProperties(e, t) {
            for (var i = 0; i < t.length; i++) {
                var r = t[i];
                r.enumerable = r.enumerable || !1,
                r.configurable = !0,
                "value"in r && (r.writable = !0),
                Object.defineProperty(e, _toPropertyKey(r.key), r)
            }
        }
        function _createClass(e, t, i) {
            return t && _defineProperties(e.prototype, t),
            i && _defineProperties(e, i),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            e
        }
        function _toPropertyKey(e) {
            var t = _toPrimitive(e, "string");
            return "symbol" == typeof t ? t : String(t)
        }
        function _toPrimitive(e, t) {
            if ("object" != typeof e || !e)
                return e;
            var i = e[Symbol.toPrimitive];
            if (void 0 !== i) {
                var r = i.call(e, t || "default");
                if ("object" != typeof r)
                    return r;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === t ? String : Number)(e)
        }
        const DELIVERY_POINTS_KEY = "wb_delivery-points-"
          , allPickupsName = "all-poo-fr-v9.json"
          , allPickupsHashName = "all-poo-v9.json.hash"
          , ALL_PICKUPS_HASH_KEY = "wb_allpickups_hash"
          , ALL_PICKUPS_UPDATE_INTERVAL = 36e4;
        let UserAddressService = function() {
            function e() {
                this._startJobSyncPickups(),
                this.checkInterval = null,
                this.pooCount = 0
            }
            var t = e.prototype;
            return t._startJobSyncPickups = function() {
                this._pickupDbName = "wb_allpickups",
                this._objectStoreName = "pickups_active",
                this._version = 1,
                setTimeout(this._syncPickups.bind(this), 15e3)
            }
            ,
            t._openPickupDb = function() {
                return this.$storageHelper.openDb(this._pickupDbName, {
                    onupgradeneeded: e=>e.createObjectStore(this._objectStoreName, {
                        keyPath: "id"
                    }),
                    version: this._version
                })
            }
            ,
            t._syncPickups = async function() {
                const e = await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(allPickupsHashName, 5e3, "text").catch(e=>null);
                if (null !== e)
                    if (e !== localStorage.getItem("wb_allpickups_hash")) {
                        const t = await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(allPickupsName, 6e4)
                          , i = null == t ? void 0 : t.selectMany(e=>(e.items.forEach(t=>{
                            t.country = e.country
                        }
                        ),
                        e.items));
                        if (!(i && i.length || this.checkInterval))
                            return void setTimeout(this._syncPickups.bind(this), 15e3);
                        if ((!i || !i.length) && this.checkInterval)
                            return;
                        this.checkInterval || (this.checkInterval = setInterval(this._syncPickups.bind(this), 36e4)),
                        this.pooCount = i.filter(e=>!e.isSortCenter && !e.isHkn && e.emp).length,
                        this._openPickupDb().then(t=>{
                            window._debug && console.time("transaction pickups");
                            let r = t.transaction([this._objectStoreName], "readwrite").objectStore(this._objectStoreName);
                            r.clear();
                            for (let e = 0; e < i.length; e++)
                                r.add(i[e]);
                            window._debug && console.timeEnd("transaction pickups"),
                            localStorage.setItem("wb_allpickups_hash", e)
                        }
                        )
                    } else
                        this.checkInterval || (this.checkInterval = setInterval(this._syncPickups.bind(this), 36e4));
                else
                    this.checkInterval || setTimeout(this._syncPickups.bind(this), 15e3)
            }
            ,
            t.getPickupAsync = function(e) {
                return this._openPickupDb().then(t=>this.$storageHelper.getItem(t, this._objectStoreName, e))
            }
            ,
            t.getActivePickupsAsync = async function() {
                await this.$user.getBasketShortInfo();
                const [e,t] = await Promise.all([this._openPickupDb().then(e=>this.$storageHelper.getAll(e, this._objectStoreName)), this.$router.userIsAuth ? this.$services.userData.getUserDataAsync() : Promise.resolve({})]);
                return [...this._filterPickups(e, null == t ? void 0 : t.userInfo)]
            }
            ,
            t._filterPickups = function*(e, {isEmployeeSynced: t, houseKeeping: i, isPickupPointOwner: r}={}) {
                for (const s of e) {
                    s.isHkn && !i || s.emp && !t || s.isSortCenter && !(r || t) || (yield s)
                }
            }
            ,
            t.getDeliveryPointsAsync = function(e) {
                return new Promise((t,i)=>{
                    this.$httpClient.fetchJSON(this.deliveryPointsUrl, {
                        method: "POST",
                        body: this.$helper.objectSerializer({
                            deliveryWay: e,
                            currency: WbSpaModel.prototype.$user.getCurrency()
                        }),
                        credentials: "include"
                    }, {
                        timeout: 2e3
                    }).then(i=>{
                        const r = this._updateDeliveryPoints(i, e);
                        t(r)
                    }
                    ).catch(i=>{
                        console.log(i.message);
                        let r = this.restoreDeliveryPoints(e);
                        r && t(r)
                    }
                    )
                }
                )
            }
            ,
            t._updateDeliveryPoints = function(e, t) {
                const i = [...e, ...this.restoreDeliveryPoints(t).filter(e=>e._local)].reduce((e,t)=>{
                    const i = e.findIndex(e=>e.addressId === t.addressId);
                    return -1 === i ? e.push(t) : e[i]._local = e[i]._local && t._local,
                    e
                }
                , []);
                return this.backupDeliveryPoints(i, t),
                this._syncDeliveryPoints(i.filter(e=>e._local).reverse(), t),
                i
            }
            ,
            t._syncDeliveryPoints = async function(e, t) {
                for (let i = 0; i < e.length; i++)
                    await this._saveAddressAsync(e[i], t)
            }
            ,
            t.get = function(e, t) {
                var i;
                const r = null === (i = this.restoreDeliveryPoints(t)) || void 0 === i ? void 0 : i.find(t=>t.addressId == e);
                return r && r._local && this._syncDeliveryPoints([r], t),
                r
            }
            ,
            t.getByCoordinates = function(e, t, i) {
                return ["self", "courier"].forEach(r=>{
                    var s;
                    const o = null === (s = this.restoreDeliveryPoints(r)) || void 0 === s ? void 0 : s.find(r=>r.lat == e && r.lon == t && r.address === i);
                    if (o && o._local && this._syncDeliveryPoints([o], r),
                    o)
                        return o
                }
                ),
                null
            }
            ,
            t.backupDeliveryPoints = function(e, t) {
                this.deliveryPoints[t] = e;
                const i = this._key;
                localStorage.putObject(i, this.deliveryPoints),
                Object.entries(localStorage).filter(e=>e[0].startsWith(DELIVERY_POINTS_KEY) && e[0] !== i).forEach(e=>{
                    localStorage.removeItem(e[0])
                }
                )
            }
            ,
            t.restoreDeliveryPoints = function(e) {
                var t, i;
                return this.deliveryPoints = null !== (t = localStorage.getObject(this._key)) && void 0 !== t ? t : {},
                this.deliveryPoints.self || (this.deliveryPoints.self = []),
                this.deliveryPoints.courier || (this.deliveryPoints.courier = []),
                [...this.deliveryPoints.courier, ...this.deliveryPoints.self].forEach(e=>{
                    e.latitude && e.longitude || !e.lat || !e.lon || (e.latitude = e.lat,
                    e.longitude = e.lon)
                }
                ),
                null !== (i = this.deliveryPoints[e]) && void 0 !== i ? i : []
            }
            ,
            t.add = async function(e, t) {
                let i = this.restoreDeliveryPoints(t);
                const r = this._convertModel(e, t);
                if (!i.find(e=>(null == e ? void 0 : e.addressId) == r.addressId)) {
                    if ("courier" === t) {
                        const e = await WbSpaModel.prototype.$httpClient.fetchBasicJSON(`https://user-geo-data.wildberries.ru/get-office?latitude=${r.lat}&longitude=${r.lon}`, {}, {
                            timeout: 3e3,
                            nullOnError: !0
                        });
                        e && Object.assign(r, e)
                    }
                    i.unshift(r),
                    this.backupDeliveryPoints(i, t)
                }
                return this._saveAddressAsync(r, t),
                i
            }
            ,
            t.remove = function(e, t) {
                let i = this.restoreDeliveryPoints(t);
                return i = i.filter(t=>t.addressId != e),
                this.backupDeliveryPoints(i, t),
                this._removeAddressAsync(e, t),
                i
            }
            ,
            t._removeAddressAsync = function(e, t) {
                this.$httpClient.fetchJSON(this.removeUrl, {
                    method: "POST",
                    body: this.$helper.objectSerializer({
                        addressId: e,
                        deliveryWay: t
                    }),
                    credentials: "include"
                }).then(e=>{
                    this.backupDeliveryPoints(e, t)
                }
                )
            }
            ,
            t._saveAddressAsync = function(e, t) {
                const i = "self" === t ? {
                    "Item.AddressId": e.addressId
                } : e;
                return this.$httpClient.fetchJSON(this._dataUrl(t), {
                    method: "POST",
                    credentials: "include",
                    body: this.$helper.objectSerializer(i, new URLSearchParams, !0)
                }).then(e=>(this.backupDeliveryPoints(e, t),
                e))
            }
            ,
            t._dataUrl = function(e) {
                return "self" === e ? this.editPooUrl : this.editCourierAddressUrl
            }
            ,
            t._convertModel = function(e, t) {
                if ("courier" === t) {
                    let i = Object.assign({}, e);
                    return i._local = !0,
                    i.deliveryType = t,
                    i.addressId = btoa(wb.helpers.generateGuid().slice(12)),
                    i.address = `${i.city ? i.city : i.province}, `,
                    i.area && !i.city && (i.address += `${i.area}, `),
                    i.street && (i.address += `${i.street}, `),
                    i.home && (i.address += `д. ${i.home}, `),
                    i.flat && (i.address += `кв. ${i.flat}, `),
                    i.entrance && (i.address += `под. ${i.entrance}, `),
                    i.doorCode && (i.address += `дмф. ${i.doorCode}, `),
                    i.floor && (i.address += `этаж ${i.floor}, `),
                    i.index && (i.address += `индекс ${$.views.converters.leadZero(i.index, 6)}, `),
                    i.address = i.address.slice(0, -2),
                    i.lat = i.latitude,
                    i.lon = i.longitude,
                    i
                }
                if ("self" === t)
                    return {
                        _local: !0,
                        address: e.address,
                        addressId: e.id,
                        lat: e.coordinates[0],
                        lon: e.coordinates[1],
                        workTime: e.workTime,
                        deliveryType: t,
                        pointTypeName: this._getPointTypeName(e.dtype),
                        IsSortCenter: 63 === t,
                        status: e.status,
                        rate: e.rate,
                        deliveryPrice: $.views.helpers.priceFromRub(e.deliveryPrice, !0),
                        country: e.country,
                        dest: e.dest,
                        sign: e.sign
                    }
            }
            ,
            t._getPointTypeName = function(e) {
                switch (e) {
                case 63:
                    return "СЦ / Склад";
                default:
                    return "Пункт выдачи"
                }
            }
            ,
            _createClass(e, [{
                key: "removeUrl",
                get: function() {
                    return this.$services.cartService.publicBasketApiUrl + "/spa/removeaddress"
                }
            }, {
                key: "editPooUrl",
                get: function() {
                    return this.$services.cartService.publicBasketApiUrl + "/spa/poos/create?version=1"
                }
            }, {
                key: "editCourierAddressUrl",
                get: function() {
                    return this.$services.cartService.publicBasketApiUrl + "/spa/yandexaddress/editajax?version=2"
                }
            }, {
                key: "deliveryPointsUrl",
                get: function() {
                    return this.$services.cartService.publicBasketApiUrl + "/spa/deliverypoints"
                }
            }, {
                key: "_key",
                get: function() {
                    return `wb_delivery-points-_${this.$services.sessionService.getUserUid()}`
                }
            }]),
            e
        }();
        module.exports = UserAddressService;

    }
    , {}],
    136: [function(require, module, exports) {
        "use strict";
        const CACHE_DURATION = 6e5
          , USER_INFO_CACHE_KEY_PREFIX = "user-info-"
          , USER_INFO_CACHE_KEY = "user-info-{0}";
        let UserDataService = function() {
            function t() {
                this.timer = null,
                this.lastUpdate = -1 / 0,
                this.userData = {},
                this.balanceInfo = {},
                this.loadRequesterPromise = null
            }
            var e = t.prototype;
            return e.setKey = function(t, e) {
                t && (this.USER_INFO_CACHE_KEY_FORMATTED = String.format("user-info-{0}", e))
            }
            ,
            e._getLocalUserInfo = function() {
                return localStorage.getObject(this.USER_INFO_CACHE_KEY_FORMATTED)
            }
            ,
            e.clear = function() {
                this.lastUpdate = -1 / 0
            }
            ,
            e.clearLocalUserInfo = function() {
                this.USER_INFO_CACHE_KEY_FORMATTED && localStorage.removeItem(this.USER_INFO_CACHE_KEY_FORMATTED)
            }
            ,
            e.getUserDataAsync = async function(t=!1, e=!1) {
                var a;
                if (e && this.userData.isAuthenticated && !this.userData.isAuthenticated)
                    return wb.spa.signIn({
                        query: {
                            returnUrl: window.location.href
                        }
                    });
                this.basicDataTask = null !== (a = this.basicDataTask) && void 0 !== a ? a : this._loadBasicDataInternal();
                const s = this.basicDataTask
                  , [n] = await Promise.all([s]);
                if (this.basicDataTask = null,
                e && !this.userData.isAuthenticated)
                    return wb.spa.signIn({
                        query: {
                            returnUrl: window.location.href
                        }
                    });
                if (n.maskedInfo)
                    try {
                        localStorage.putObject(this.USER_INFO_CACHE_KEY_FORMATTED, n.maskedInfo)
                    } catch (t) {}
                return {
                    userInfo: n,
                    userExtraInfo: {
                        dataLoaded: !0,
                        discountInfo: {
                            purchase: n.purchaseAmount,
                            personalDiscount: n.personalDiscount,
                            purchasePercent: n.purchasePercent
                        }
                    }
                }
            }
            ,
            e.removeInn = function() {
                $.observable(this.userData).setProperty({
                    inn: ""
                })
            }
            ,
            e.updateFioAsync = async function(t, e, a) {
                return (await this._loadRequetser()).updateFioAsync(t, e, a, this.userData)
            }
            ,
            e.updateSexAsync = async function(t) {
                return (await this._loadRequetser()).updateSexAsync(t, this.userData)
            }
            ,
            e.updateBirthdayAsync = async function(t) {
                return (await this._loadRequetser()).updateBirthdayAsync(t, this.userData)
            }
            ,
            e.updateEmailAsync = async function(t) {
                return (await this._loadRequetser()).updateEmailAsync(t, this.userData)
            }
            ,
            e.updatePhoneMobileAsync = async function(t, e, a) {
                return (await this._loadRequetser()).updatePhoneMobileAsync(t, e, a, this.userData)
            }
            ,
            e.updateInnAsync = async function(t) {
                return (await this._loadRequetser()).updateInnAsync(t, this.userData)
            }
            ,
            e.updateImageAsync = async function(t) {
                return (await this._loadRequetser()).updateImageAsync(t, this.userData)
            }
            ,
            e.removeUserPhotoAsync = async function() {
                return (await this._loadRequetser()).removeUserPhotoAsync(this.userData)
            }
            ,
            e._loadBasicDataInternal = async function() {
                if (Date.now() - this.lastUpdate < 6e5)
                    return this.userData;
                const t = await this._loadRequetser();
                return this.lastUpdate = Date.now(),
                t.loadBasicInfo(this.userData, this._getLocalUserInfo())
            }
            ,
            e._loadRequetser = async function() {
                return this.loadRequesterPromise || (this.loadRequesterPromise = this.$moduleLoader.loadModuleAsync("userInfoRequester")),
                this.loadRequesterPromise
            }
            ,
            t
        }();
        module.exports = UserDataService;

    }
    , {}],
    137: [function(require, module, exports) {
        "use strict";
        const BASE_URL = "/webapi/newsfeed/events"
          , SUCCESS_TIME_OFFSET = 3e5
          , FAILURE_TIME_OFFSET = 6e3;
        let UserNotificationService = function() {
            function e() {
                this.eventsModel = {
                    eventsCount: 0,
                    loading: !0
                }
            }
            var t = e.prototype;
            return t.checkNotificationCountAsync = async function() {
                this._clearTimer();
                let e = !1;
                try {
                    const t = await this.$httpClient.fetchJSON(`${BASE_URL}/count`, {
                        method: "POST"
                    });
                    $.observable(this.eventsModel).setProperty({
                        eventsCount: t
                    }),
                    e = !0
                } catch (e) {
                    console.error(e),
                    $.observable(this.eventsModel).setProperty({
                        isNetworkError: !0
                    })
                } finally {
                    return $.observable(this.eventsModel).setProperty({
                        loading: !1
                    }),
                    this._startTimer(e),
                    this.eventsModel
                }
            }
            ,
            t.markNotificationRead = async function(e) {
                this._clearTimer();
                let t, i = !1;
                try {
                    await this.$httpClient.fetchJSON(`${BASE_URL}/mark`, {
                        method: "POST",
                        body: new URLSearchParams({
                            readIds: e.join(";")
                        })
                    }),
                    $.observable(this.eventsModel).setProperty({
                        eventsCount: Math.max(this.eventsModel.eventsCount - e.length, 0)
                    }),
                    i = !0
                } catch (t) {
                    t = t,
                    $.observable(this.eventsModel).setProperty({
                        isNetworkError: !0
                    })
                } finally {
                    return this._startTimer(i),
                    {
                        isSuccess: i,
                        error: void 0
                    }
                }
            }
            ,
            t._clearTimer = function() {
                clearTimeout(this.timer)
            }
            ,
            t._startTimer = function(e) {
                this.timer = setTimeout(()=>this.checkNotificationCountAsync(), e ? 3e5 : 6e3)
            }
            ,
            e
        }();
        module.exports = UserNotificationService;

    }
    , {}],
    138: [function(require, module, exports) {
        "use strict";
        const errorReasonseStorage = {
            NoContent: 24,
            ErrorRequest: 40,
            ErrorAuth: 41,
            ErrorService: 50,
            NewRoute: 37
        }
          , statusRequest = {
            Ok: 0,
            Error: -1
        }
          , userStorageH = "_userstorage_h";
        let ApiUserStorageService = function() {
            var e = t.prototype;
            function t() {
                this.savedHost = null,
                window.addEventListener("storage", e=>{
                    e.key === userStorageH && this.getSavedHost()
                }
                ),
                this.$eventBus.addEventListener("onUserAuth", ()=>{
                    this.getSavedHost()
                }
                ),
                this.$eventBus.addEventListener("onUserUnAuth", ()=>{
                    this.saveHost(null)
                }
                )
            }
            return e.getSavedHost = function() {
                return this.savedHost = localStorage.getItem(userStorageH),
                this.savedHost
            }
            ,
            e.saveHost = function(e) {
                this.savedHost = e,
                this.savedHost ? localStorage.setItem(userStorageH, this.savedHost) : localStorage.removeItem(userStorageH)
            }
            ,
            e._set = function(e) {
                return this.$wbxHttpClient.fetch("/api/v2/data/set", e, null, e=>this._userStorageHost(e)).then(e=>e.json())
            }
            ,
            e._get = async function(e, t, r, s) {
                try {
                    const a = await this.$wbxHttpClient.fetch(e, t, null, e=>s || this._userStorageHost(e)).then(e=>e.json());
                    if (a.state === statusRequest.Ok)
                        return a.body;
                    if (a.state === statusRequest.Error && a.reason === errorReasonseStorage.NoContent)
                        return [];
                    var o;
                    if (a.state === statusRequest.Error && a.reason === errorReasonseStorage.ErrorService)
                        return null != r && r.replaceBroken && null !== (o = t.paths) && void 0 !== o && o.length ? t.paths.map(e=>({
                            path: e.path,
                            file: "W10="
                        })) : [];
                    if (a.state === statusRequest.Error && a.reason === errorReasonseStorage.NewRoute) {
                        this.saveHost(a.location);
                        const r = await this._get(e, t);
                        if (r.state === statusRequest.Ok)
                            return r.body;
                        if (r.state === statusRequest.Error && r.reason === errorReasonseStorage.NoContent)
                            return []
                    }
                    return null
                } catch (o) {
                    if (!s) {
                        var u;
                        const s = RouteMapping[Math.floor(Math.random() * Object.keys(RouteMapping).length)];
                        if (null == t || null === (u = t.signal) || void 0 === u || !u.aborted)
                            return await this._get(e, t, r, `https://${s}`);
                        t.signal = null,
                        this._fixLocation(e, {
                            method: t.method,
                            body: t.body
                        }, `https://${s}`)
                    }
                    return null
                }
            }
            ,
            e._fixLocation = async function(e, t, r) {
                const s = await this._get(e, t, null, r);
                (null == s ? void 0 : s.state) === statusRequest.Error && (null == s ? void 0 : s.reason) === errorReasonseStorage.NewRoute && this.saveHost(s.location)
            }
            ,
            e.getList = function(e, t) {
                const r = {
                    method: "POST",
                    body: JSON.stringify({
                        path: e
                    }),
                    signal: null == t ? void 0 : t.signal
                };
                return this._get("/api/v2/list", r, t)
            }
            ,
            e.getData = function(e, t) {
                if (!e || 0 === e.length)
                    return null;
                const r = {
                    method: "POST",
                    body: JSON.stringify(e),
                    signal: null == t ? void 0 : t.signal,
                    paths: e
                };
                return this._get("/api/v2/data/get", r, t)
            }
            ,
            e.setData = async function(e) {
                try {
                    const t = {
                        method: "POST",
                        body: JSON.stringify(e)
                    }
                      , r = await this._set(t);
                    if (r.state === statusRequest.Ok)
                        return {
                            success: !0
                        };
                    if (r.state === statusRequest.Error && r.reason === errorReasonseStorage.NewRoute) {
                        this.saveHost(r.location);
                        const e = await this._set(t);
                        return e.state === statusRequest.Ok ? {
                            success: !0
                        } : {
                            success: !1,
                            error: new Error(`error - ${e}`)
                        }
                    }
                    return {
                        success: !1,
                        error: new Error(`error - ${r}`)
                    }
                } catch (e) {
                    return {
                        success: !1,
                        error: e
                    }
                }
            }
            ,
            e._userStorageHost = function(e) {
                return `https://${this.savedHost || RouteMapping[e || 1] || RouteMapping[1]}`
            }
            ,
            t
        }();
        const RouteMapping = {
            1: "user-storage-01gel.wb.ru",
            2: "user-storage-01iel.wb.ru",
            3: "user-storage-01hel.wb.ru",
            4: "user-storage-01fel.wb.ru",
            5: "user-storage-01eel.wb.ru",
            6: "user-storage-01jel.wb.ru",
            7: "user-storage-01del.wb.ru",
            8: "user-storage-01dp.wb.ru",
            9: "user-storage-01cxc.wb.ru",
            10: "user-storage-01bxc.wb.ru",
            11: "user-storage-01kel.wb.ru",
            12: "user-storage-01bdl.wb.ru",
            13: "user-storage-01adl.wb.ru",
            14: "user-storage-01hel.wb.ru",
            15: "user-storage-01fel.wb.ru",
            16: "user-storage-01eel.wb.ru",
            17: "user-storage-01jel.wb.ru",
            18: "user-storage-01del.wb.ru",
            19: "user-storage-01dp.wb.ru",
            20: "user-storage-01cxc.wb.ru",
            21: "user-storage-01bxc.wb.ru",
            22: "user-storage-01kel.wb.ru",
            23: "user-storage-01bdl.wb.ru",
            24: "user-storage-01adl.wb.ru",
            25: "user-storage-02dl.wb.ru",
            26: "user-storage-02el.wb.ru",
            27: "user-storage-02dl.wb.ru",
            28: "user-storage-02el.wb.ru",
            29: "user-storage-02dl.wb.ru",
            30: "user-storage-02el.wb.ru",
            31: "user-storage-02dl.wb.ru",
            32: "user-storage-02el.wb.ru",
            33: "user-storage-02dl.wb.ru",
            34: "user-storage-02el.wb.ru",
            35: "user-storage-02dl.wb.ru",
            36: "user-storage-02el.wb.ru",
            37: "user-storage-02dl.wb.ru",
            38: "user-storage-02el.wb.ru",
            39: "user-storage-02dl.wb.ru",
            40: "user-storage-02el.wb.ru",
            41: "user-storage-02dl.wb.ru",
            42: "user-storage-02el.wb.ru"
        };
        module.exports = ApiUserStorageService;

    }
    , {}],
    139: [function(require, module, exports) {
        "use strict";
        function _defineProperties(e, r) {
            for (var t = 0; t < r.length; t++) {
                var s = r[t];
                s.enumerable = s.enumerable || !1,
                s.configurable = !0,
                "value"in s && (s.writable = !0),
                Object.defineProperty(e, _toPropertyKey(s.key), s)
            }
        }
        function _createClass(e, r, t) {
            return r && _defineProperties(e.prototype, r),
            t && _defineProperties(e, t),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            e
        }
        function _toPropertyKey(e) {
            var r = _toPrimitive(e, "string");
            return "symbol" == typeof r ? r : String(r)
        }
        function _toPrimitive(e, r) {
            if ("object" != typeof e || !e)
                return e;
            var t = e[Symbol.toPrimitive];
            if (void 0 !== t) {
                var s = t.call(e, r || "default");
                if ("object" != typeof s)
                    return s;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === r ? String : Number)(e)
        }
        const {RidStatus: RidStatus, PayStatus: PayStatus} = require("../modules/delivery/states");
        !function() {
            const e = "https://wbxoofex.wildberries.ru"
              , r = e=>new Promise(r=>setTimeout(r, e));
            let t = function() {
                function e() {}
                var r = e.prototype;
                return r.setProps = function(e, r, t, s=0, i="", o="", a=0) {
                    var n;
                    this.chrt_id = e.characteristicId,
                    this.nm_id = e.cod1S,
                    this.subject_id = e.subjectId,
                    this.price = Math.round(100 * e.price),
                    this.total_price = Math.round(100 * e.priceWithCouponAndDiscount),
                    this.sale = e.sale,
                    this.brand = e.brandName,
                    this.name = e.goodsName,
                    this.size = e.sizeName,
                    this.positions = [];
                    const d = (null === (n = e.deliveryInfos[0]) || void 0 === n ? void 0 : n.closestDeliveryDate) || r.deliveryDate
                      , c = Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()) / 1e3;
                    [...Array(e.quantity).keys()].forEach((s,i)=>{
                        this.positions.push({
                            rid: `${t}.${o}.${a}.${i}`,
                            wh: e.storeId,
                            return_fee: 100 * r.fittingPrice,
                            delivery_time: c,
                            delivery_type: "self" === r.deliveryType ? 6 : 5
                        })
                    }
                    ),
                    this.targetUrl = e.targetUrl,
                    this.colorName = e.colorName,
                    this.quantity = e.quantity,
                    this.subjectParentId = e.subjectParentId,
                    this.storeId = e.storeId,
                    this.timestamp = e.timestamp,
                    this.sign = e.sign,
                    this.reviewRating = e.reviewRating,
                    this.feedbacks = e.feedbacks || e.commentsCount,
                    this.supplierId = e.supplierId,
                    this.supplierName = e.supplierName,
                    this.volume = e.volume,
                    this.return_cost = e.catalogReturnCost,
                    this.sale_conditions = e.saleConditions,
                    this.seller_id = e.supplierId,
                    this.spp = e.personalDiscount,
                    this.validation = {
                        curr: i,
                        version: 2,
                        sign: e.signV2,
                        spp: s
                    }
                }
                ,
                r.toStorageItem = function() {
                    var e, r, t;
                    return {
                        id: this.nm_id,
                        name: null !== (e = this.name) && void 0 !== e ? e : "",
                        subjectId: this.subject_id,
                        subjectParentId: this.subjectParentId,
                        reviewRating: this.reviewRating,
                        feedbacks: this.feedbacks,
                        brand: null !== (r = this.brand) && void 0 !== r ? r : "",
                        price: this.price,
                        salePrice: this.total_price,
                        option: {
                            id: this.chrt_id,
                            name: null !== (t = this.sizeName) && void 0 !== t ? t : ""
                        },
                        quantity: this.positions.length,
                        return_fee: this.positions[0].return_fee,
                        positions: this.positions,
                        rids: this.positions.map(e=>e.rid),
                        sale: this.sale,
                        supplierId: this.supplierId,
                        supplierName: this.supplierName
                    }
                }
                ,
                e
            }()
              , s = function() {
                function e() {}
                var r = e.prototype;
                return r.setGlobals = function(e="", r="", t="", s=0) {
                    this.lang = r,
                    this.locale = t,
                    this.order_uid = e,
                    this.app_type = s,
                    this.order_dt = Date.now(),
                    this.flags = 1
                }
                ,
                r.setFormData = function(e) {
                    this.fd = [];
                    for (const [r,t] of e)
                        this.fd.push({
                            key: r,
                            value: t
                        })
                }
                ,
                r.setItems = function(e, r, s, i, o) {
                    this.items = [],
                    e.forEach((e,r)=>{
                        let a = new t;
                        a.setProps(e, s, this.sticker, i, o, this.order_uid, r),
                        this.items.push(a)
                    }
                    )
                }
                ,
                r.setUserGrade = function(e) {
                    this.user_grade = e
                }
                ,
                r.setPayment = function(e, r, t=0) {
                    this.paymentCode = e.paymentType.codeLower,
                    this.pay_type = 1,
                    this.pay_mode = e.postPay ? 20 : 10,
                    this.payment = {
                        amount: 100 * (r + t),
                        goods_total: 100 * r,
                        delivery_cost: 100 * t,
                        currency: e.currency,
                        merchant: e.merchantId,
                        paymentType: e.paymentType
                    },
                    this.wbpay = {
                        return_url: `${e.returnUrl}`,
                        token: {
                            card_id: e.bankCardId
                        }
                    }
                }
                ,
                r.setDelivery = function(e={}, r={}) {
                    var t;
                    let s = new Date(e.deliveryDate);
                    this.delivery = {
                        delivery_type: "self" === e.deliveryType ? 6 : 5,
                        dst_office_id: e.dstOfficeId,
                        delivery_time: Date.UTC(s.getFullYear(), s.getMonth(), s.getDate()) / 1e3,
                        latitude: Number(e.lat),
                        longitude: Number(e.lon),
                        full_address: e.address,
                        email: r.email,
                        phone: null === (t = r.phone) || void 0 === t ? void 0 : t.toString(),
                        name: r.fullName,
                        tin: `${r.inn}`,
                        dest_id: e.dest,
                        sign: e.sign
                    }
                }
                ,
                r.setSticker = function(e="", r=!1) {
                    this.sticker = e,
                    r && this._rewriteRids(e)
                }
                ,
                r._rewriteRids = function(e) {
                    this.items.forEach(r=>{
                        r.positions.forEach(r=>{
                            const t = r.rid.split(".");
                            r.rid = `${e}.${t.slice(1).join(".")}`
                        }
                        )
                    }
                    )
                }
                ,
                r.updateState = function(e) {
                    this.state_dt = Date.now(),
                    console.log(`[WBX_ORDER_SYNC]: order ${this.order_uid} state changed from ${this.state} to ${e}`),
                    this.state = e
                }
                ,
                r.toJsonModel = function() {
                    return {
                        order: {
                            order_uid: this.order_uid,
                            lang: this.lang,
                            locale: this.locale,
                            app_type: this.app_type,
                            pay_type: this.pay_type,
                            pay_mode: this.pay_mode,
                            items: this.items,
                            payment: this.payment,
                            delivery: this.delivery
                        },
                        wbpay: this.wbpay,
                        user_grade: this.user_grade,
                        flags: this.flags
                    }
                }
                ,
                r.toStorageItem = function() {
                    var e;
                    return {
                        app_type: this.app_type,
                        lang: this.lang,
                        locale: this.locale,
                        pay_mode: this.pay_mode,
                        sticker: this.sticker,
                        timestamp: Math.round(this.order_dt / 1e3),
                        tracking: "",
                        uid: this.order_uid,
                        delivery: {
                            address: null !== (e = this.delivery.full_address) && void 0 !== e ? e : "",
                            delivery_type: this.delivery.delivery_type,
                            delivery_time: this.delivery.delivery_time,
                            service: 5 == this.delivery.delivery_type ? "wb_courier" : "wb_pvz",
                            dst_office_id: this.delivery.dst_office_id,
                            latitude: this.delivery.latitude,
                            longitude: this.delivery.longitude,
                            city: "",
                            country: "",
                            email: "",
                            first_name: "",
                            phone: "",
                            region: "",
                            surname: "",
                            zip: ""
                        },
                        items: this.items.map(e=>e.toStorageItem()),
                        payment: {
                            amount: this.payment.amount,
                            currency: this.payment.currency,
                            delivery_cost: this.payment.delivery_cost,
                            goods_total: this.payment.goods_total,
                            merchant: this.payment.merchant
                        },
                        rid_states: this.items.reduce((e,r)=>(e.push(...r.positions.map(e=>({
                            rid: e.rid,
                            state: RidStatus.Accepted,
                            pay_state: PayStatus.Unknown
                        }))),
                        e), [])
                    }
                }
                ,
                r.toPositionsModel = function({processing: e}={}) {
                    const r = {}
                      , t = [];
                    for (const a of this.items)
                        for (const n of a.positions) {
                            var s, i, o;
                            let d;
                            d = 6 == this.delivery.delivery_type && this.delivery.dst_office_id > 0 ? `6_${this.delivery.dst_office_id}` : wb.helpers.getHashCode(this.delivery.full_address);
                            const c = {
                                brand: a.brand,
                                characteristicId: a.chrt_id,
                                code1S: a.nm_id,
                                currency: null === (s = this.payment) || void 0 === s ? void 0 : s.currency,
                                deliveryPrice: ((null === (i = this.payment) || void 0 === i ? void 0 : i.delivery_cost) || 0) / 100,
                                locationId: d,
                                name: a.name,
                                orderDate: (new Date).toISOString(),
                                paymentType: null === (o = this.payment) || void 0 === o ? void 0 : o.type,
                                price: a.total_price / 100,
                                receiveDate: wb.helpers.date.formatEstimated(1e3 * this.delivery.delivery_time),
                                returnCost: (n.return_fee || 0) / 100,
                                rId: n.rid,
                                size: a.size,
                                showCode: !0,
                                supplierId: a.supplierId,
                                supplierName: a.supplierName,
                                timestamp: Math.round(this.order_dt / 1e3),
                                version: "v4"
                            };
                            e && (c.noTracking = !0,
                            c.trackingStatus = "В обработке",
                            c.status = "New"),
                            r[c.locationId] || (r[c.locationId] = {
                                address: this.delivery.full_address,
                                deliveryType: 6 == this.delivery.delivery_type ? "Пункт выдачи" : "Курьерская"
                            }),
                            t.push(c)
                        }
                    return {
                        positions: t,
                        locations: r
                    }
                }
                ,
                r._getCurrency = function(e) {
                    return "KGS" == e ? "сом" : "AMD" == e ? "драм" : "RUB" == e ? "₽" : ""
                }
                ,
                e
            }()
              , i = function() {
                function i() {
                    var e;
                    this._userId = null === (e = this.$auth.jwtData) || void 0 === e ? void 0 : e.user,
                    this._isUserAuth ? this._initInnerStorage() : console.log(`[WBX_ORDER_SYNC]: user id is ${this._userId} - initializing empty inner storage`)
                }
                var o = i.prototype;
                return o._initInnerStorage = function() {
                    try {
                        let e = localStorage.getObject(this._storageKey);
                        this._innerStorage = e ? new Map(Object.entries(e).map(e=>{
                            let r = e[1]
                              , i = Object.assign(new s, r);
                            return i.items = r.items.map(e=>Object.assign(new t, e)),
                            e[1] = i,
                            e
                        }
                        )) : new Map
                    } catch (e) {
                        console.error(e),
                        wb.spa.logError(e, "[WBX_ORDER_SYNC]: failed to read from localstorage", !0),
                        this._innerStorage = new Map
                    }
                }
                ,
                o.startSync = function() {
                    var e;
                    this._notifyOrderSaveFailedUrl = "/webapi/lk/newsfeed/notify/failedorder",
                    this._userId = null === (e = this.$auth.jwtData) || void 0 === e ? void 0 : e.user,
                    this._isUserAuth && (this._initInnerStorage(),
                    this._startSyncJob())
                }
                ,
                o.getOrderItemsStatus = async function(r=[], t, s) {
                    t || (t = this._getSticker());
                    try {
                        let i = null;
                        if (s > 0) {
                            const e = new AbortController;
                            setTimeout(()=>e.abort(), s),
                            i = e.signal
                        }
                        let o = await fetch(`${e}/api/v2/orders_stat`, {
                            method: "POST",
                            body: JSON.stringify({
                                orders: r,
                                sticker: t
                            }),
                            signal: i
                        })
                          , a = await o.json();
                        return !a || a.error ? (wb.spa.logError(new Error(`[WBX_ORDER_SYNC]: order items status check failed, reason=${null == a ? void 0 : a.error}`), {
                            orders: r
                        }),
                        {
                            error: null == a ? void 0 : a.error
                        }) : {
                            orders: a.data
                        }
                    } catch (e) {
                        return wb.spa.logError(e, `order items status check failed orders=${JSON.stringify(r)}`),
                        {
                            error: e.message
                        }
                    }
                }
                ,
                o._startSyncJob = async function(e=1e4) {
                    for (; ; ) {
                        let i = this.getOrders();
                        if (0 === i.size) {
                            await r(e);
                            continue
                        }
                        let o = i.toArray();
                        for (let i = 0; i < o.length; i++) {
                            var t, s;
                            let a = o[i]
                              , n = a.order_uid;
                            if ("success" === a.state && Date.now() - a.state_dt > 6e4)
                                this._removeOrder(n),
                                await r(e);
                            else if ("accepted_locally" !== a.state)
                                if (Date.now() - a.order_dt > (null !== (t = null === (s = wb.global) || void 0 === s || null === (s = s.settings) || void 0 === s || null === (s = s.variables) || void 0 === s ? void 0 : s.localOrderTtl) && void 0 !== t ? t : 864e5))
                                    wb.spa.orderMetrics("wbx_lq_expired"),
                                    wb.spa.logError(new Error("[WBX_ORDER_SYNC]: order expired"), a),
                                    this._handleOrderSaveError(a),
                                    this._removeOrder(n);
                                else {
                                    if ("need_resave" === a.state) {
                                        let t = await this._saveOrder(a);
                                        if (t.needReSave) {
                                            t.gotNewSticker && (a.updateState("need_sticker"),
                                            this._storeOrder(a)),
                                            wb.spa.orderMetrics(`wbx_${a.state}`);
                                            continue
                                        }
                                        if (t.error) {
                                            wb.spa.orderMetrics("wbx_fail"),
                                            wb.spa.logError(new Error(`[WBX_ORDER_SYNC]: order save failed with server error=${t.error}`), a),
                                            this._handleOrderSaveError(a),
                                            this._removeOrder(n);
                                            continue
                                        }
                                        t.success && (await this.reCheckOrder(a),
                                        await r(e))
                                    }
                                    if ("need_recheck" !== a.state && "3ds_required" !== a.state || await this.reCheckOrder(a),
                                    "need_move" === a.state) {
                                        if ((await this._moveToDeliveries(a)).success) {
                                            wb.spa.orderMetrics("wbx_lq_success"),
                                            this._removeOrder(n);
                                            continue
                                        }
                                    }
                                    if ("need_sticker" === a.state) {
                                        let e = await this._getSticker();
                                        e && (a.setSticker(e, !0),
                                        a.updateState("need_resave"),
                                        this._storeOrder(a))
                                    }
                                }
                        }
                        await r(e)
                    }
                }
                ,
                o._handleOrderSaveError = function(e, r="") {
                    let t = e.items.map(e=>({
                        characteristicId: e.chrt_id,
                        quantity: e.quantity,
                        cod1S: e.nm_id,
                        targetUrl: e.targetUrl,
                        subjectId: e.subject_id,
                        subjectParentId: e.subjectParentId,
                        reviewRating: e.reviewRating,
                        feedbacks: e.feedbacks || e.commentsCount
                    }));
                    this._sendOrderSaveFailedNotification(r),
                    this.$services.cartService.addManyItems(t)
                }
                ,
                o._sendOrderSaveFailedNotification = function(e="") {
                    this.$httpClient.fetchJSON(`${this._notifyOrderSaveFailedUrl}?paymentFailErrMsg=${e}`, {
                        method: "POST"
                    })
                }
                ,
                o._storeOrder = function(e, r=!0) {
                    this._innerStorage.set(e.order_uid, e);
                    try {
                        r && localStorage.putObject(this._storageKey, this._innerStorage.reduce((e,r)=>(e[r.order_uid] = r,
                        e), {}))
                    } catch (e) {
                        wb.spa.logError(e, "[WBX_ORDER_SYNC]: localstorage save failed", !0)
                    }
                }
                ,
                o._removeOrder = function(e, r=!0) {
                    this._innerStorage.delete(e);
                    try {
                        r && localStorage.putObject(this._storageKey, this._innerStorage.reduce((e,r)=>(e[r.order_uid] = r,
                        e), {}))
                    } catch (e) {
                        wb.spa.logError(e, "[WBX_ORDER_SYNC]: localstorage save failed", !0)
                    }
                }
                ,
                o._moveToDeliveries = async function(e) {
                    await this.$moduleLoader.loadServiceAsync("storageService");
                    const r = await this.$services.storageService.orders.saveOrder(e.toStorageItem());
                    return r.success || (wb.spa.logError(new Error(`[WBX_ORDER_SYNC]: failed to save succeeded order to storage, reason=${r.error}`), e),
                    console.error(r.error)),
                    r
                }
                ,
                o._getSticker = async function() {
                    if (this._sticker)
                        return this._sticker;
                    try {
                        let r = await this.$wbxHttpClient.fetch(`${e}/api/v2/stick`)
                          , t = await r.json();
                        if (t && !t.error)
                            return this._storeSticker(t.sticker),
                            this._sticker;
                        throw new Error(`[WBX_ORDER_SYNC]: failed to fetch sticker, reason=${r.error}`)
                    } catch (e) {
                        return wb.spa.logError(e),
                        this._sticker
                    }
                }
                ,
                o._storeSticker = function(e="") {
                    e && (this._sticker = e,
                    localStorage.setItem(`wbx-user-orders-sticker-${this._userId}`, e))
                }
                ,
                o._saveOrder = async function(r) {
                    try {
                        let t = await this.$wbxHttpClient.fetch(`${e}/api/v8/order?sticker=${r.sticker}`, {
                            method: "POST",
                            body: JSON.stringify(r.toJsonModel())
                        })
                          , s = await t.json();
                        return null === s ? (wb.spa.logError(new Error("[WBX_ORDER_SYNC]: couldnt save order, reason=response is null"), {
                            order: r
                        }),
                        {
                            needReSave: !0
                        }) : s.error ? (wb.spa.logError(new Error(`[WBX_ORDER_SYNC]: couldnt save order, reason=${null == s ? void 0 : s.error}`), {
                            order: r
                        }),
                        {
                            error: null == s ? void 0 : s.error
                        }) : null !== s.sticker && s.sticker !== r.sticker ? (this._storeSticker(s.sticker),
                        {
                            needReSave: !0,
                            gotNewSticker: !0
                        }) : {
                            success: !0
                        }
                    } catch (e) {
                        return wb.spa.logError(e, {
                            order: r
                        }),
                        {
                            needReSave: !0
                        }
                    }
                }
                ,
                o._checkOrderStatus = async function(r="", t="") {
                    try {
                        let o = await this.$wbxHttpClient.fetch(`${e}/api/v3/status?id=${r}&sticker=${t}`)
                          , a = await o.json();
                        var s, i;
                        if (null != a && a.error || 2 === (null == a ? void 0 : a.result))
                            return wb.spa.logError(new Error(`[ORDER_WBX]: couldnt check order status, reason=${null !== (s = null == a ? void 0 : a.error) && void 0 !== s ? s : "unknown error"}`), {
                                orderId: r
                            }),
                            {
                                status: "fail",
                                error: null !== (i = null == a ? void 0 : a.error) && void 0 !== i ? i : "unknown error"
                            };
                        if (null === a || 1 === a.result)
                            return {
                                status: "need_recheck"
                            };
                        if (a.auth3dsUrl && 4 === a.result)
                            return {
                                status: "3ds_required",
                                redirectUrl: a.auth3dsUrl
                            };
                        if (0 === a.result)
                            return {
                                status: "success"
                            }
                    } catch (e) {
                        return wb.spa.logError(e, {
                            orderId: r
                        }),
                        {
                            status: "need_recheck"
                        }
                    }
                }
                ,
                o._checkOrderStatusWithRetries = async function(e="", t="", s=10) {
                    let i = {
                        status: "need_recheck"
                    };
                    for (let o = 0; o < s; o++) {
                        if (i = await this._checkOrderStatus(e, t),
                        "need_recheck" !== await i.status)
                            return i;
                        await r(1e3)
                    }
                    return i
                }
                ,
                o.canUseWbxOrder = function(e=[], r={}, t=!1) {
                    var s, i;
                    return !(!r.isCreditCard || r.selectedBankCard.isSbp || t) && (!((null !== (s = null === (i = r.selectedBankCard) || void 0 === i ? void 0 : i.extraDiscount) && void 0 !== s ? s : r.extraDiscount) > 0) && !e.some(e=>e.isPrepaid))
                }
                ,
                o.reCheckOrder = async function(e) {
                    let r = await this._checkOrderStatus(e.order_uid, e.sticker);
                    if ("success" === r.status) {
                        return (await this._moveToDeliveries(e)).success ? (this._removeOrder(e.order_uid),
                        void wb.spa.orderMetrics("wbx_lq_success")) : (e.updateState("need_move"),
                        wb.spa.orderMetrics(`wbx_lq_${e.state}`),
                        void this._storeOrder(e))
                    }
                    return "fail" === r.status ? (wb.spa.orderMetrics("wbx_lq_fail"),
                    wb.spa.logError(new Error(`[WBX_ORDER_SYNC]: order status check failed with server error reason=${r.error}`), e),
                    e.updateState(r.status),
                    void this._removeOrder(e.order_uid)) : "3ds_required" === r.status ? (wb.spa.orderMetrics("wbx_lq_3ds_required"),
                    void wb.spa.logError(new Error("[WBX_ORDER_SYNC]: order status check failed reason=3ds_required"), e)) : (e.updateState(r.status),
                    wb.spa.orderMetrics(`wbx_lq_${e.state}`),
                    void this._storeOrder(e))
                }
                ,
                o.payForOrders = async function({orders: r=[], cardId: t="", sticker: s=""}) {
                    try {
                        const i = JSON.stringify({
                            card_id: t,
                            return_url: `${location.origin}/lk/myorders/delivery?paymentSuccess=true`,
                            sticker: s,
                            pay_type: 1,
                            orders: r
                        });
                        let o = await fetch(`${e}/api/v2/orders_pay`, {
                            method: "POST",
                            body: i
                        });
                        if (!o.ok)
                            return wb.spa.logError(new Error("[ORDER_WBX]: order failed to pay for orders, reason=non 200 response"), {
                                orders: r
                            }),
                            {
                                error: "Сервис временно недоступен попробуйте позже"
                            };
                        const a = await o.json();
                        return a.error ? (wb.spa.logError(new Error(`[ORDER_WBX]: order failed to pay for orders, reason=${a.error}`), {
                            orders: r
                        }),
                        {
                            error: "Ошибка сервиса"
                        }) : {
                            success: !0
                        }
                    } catch (e) {
                        return wb.spa.logError(e, `[WBX_ORDER_SYNC]: order failed to pay for orders=${JSON.stringify(r)}`),
                        {
                            error: "Нет связи, попробуйте снова"
                        }
                    }
                }
                ,
                o.cancelByRids = async function(r) {
                    try {
                        r = [].concat(r);
                        const s = [];
                        for (const t of r) {
                            const r = JSON.stringify({
                                items: t.rids,
                                order_id: t.orderId,
                                order_shard: t.shard
                            })
                              , i = fetch(`${e}/api/v1/reject_payment`, {
                                method: "POST",
                                body: r
                            }).then(async e=>({
                                ok: e.ok,
                                data: await e.json()
                            }));
                            s.push(i)
                        }
                        const i = await Promise.all(s);
                        let o, a = !0;
                        for (const e of i) {
                            var t;
                            o = null === (t = e.data) || void 0 === t ? void 0 : t.error,
                            a &= e.ok && o
                        }
                        return a ? {
                            success: !0
                        } : (wb.spa.logError(new Error(`[ORDER_WBX]: order cancel failed reason=${o}`), {
                            rids: rids
                        }),
                        {
                            error: "Ошибка при отмене доставки"
                        })
                    } catch (e) {
                        return wb.spa.logError(e, `[ORDER_WBX]: order cancel failed rids=${JSON.stringify(r)}`),
                        {
                            error: "Сервис временно недоступен попробуйте позже"
                        }
                    }
                }
                ,
                o.getOrderById = function(e) {
                    return this._innerStorage.get(e)
                }
                ,
                o.getOrders = function() {
                    return this._innerStorage
                }
                ,
                o.submitOrder = async function(e, r, t, i, o, a, n, d, c) {
                    let l = new s;
                    if (l.setGlobals(e, "ru", wb.settings.currentLocale, "d" === wb.settings.displayMode ? 1 : 2),
                    l.setPayment(t, a, i.deliveryPrice),
                    l.setUserGrade(d),
                    l.setDelivery(i, o),
                    l.setSticker(await this._getSticker()),
                    l.setItems(r, n, i, d.spp, c),
                    l.updateState("accepted_locally"),
                    wb.spa.orderMetrics(`wbx_${l.state}`),
                    this._storeOrder(l),
                    !l.sticker)
                        return l.updateState("need_sticker"),
                        wb.spa.orderMetrics(`wbx_${l.state}`),
                        this._storeOrder(l),
                        {
                            order: l
                        };
                    let u = await this._saveOrder(l);
                    if (u.error)
                        return this._removeOrder(l.order_uid),
                        wb.spa.orderMetrics("wbx_save_server_error"),
                        {
                            order: l,
                            error: u.error,
                            isValidationError: !0
                        };
                    if (u.needReSave)
                        return l.updateState(u.gotNewSticker ? "need_sticker" : "need_resave"),
                        wb.spa.orderMetrics(`wbx_${l.state}`),
                        this._storeOrder(l),
                        {
                            order: l
                        };
                    let h = await this._checkOrderStatusWithRetries(l.order_uid, l.sticker);
                    if ("success" === h.status) {
                        return l.updateState(h.status),
                        (await this._moveToDeliveries(l)).success ? l.updateState("success") : l.updateState("need_move"),
                        wb.spa.orderMetrics(`wbx_${l.state}`),
                        this._storeOrder(l),
                        {
                            order: l
                        }
                    }
                    return "3ds_required" === h.status ? (l.updateState(h.status),
                    wb.spa.orderMetrics(`wbx_${l.state}`),
                    this._storeOrder(l),
                    {
                        order: l,
                        redirectUrl: h.redirectUrl
                    }) : "fail" === h.status ? (this._removeOrder(l.order_uid),
                    wb.spa.orderMetrics("wbx_fail_after_check"),
                    wb.spa.logError(new Error(`[WBX_ORDER_SYNC]: order status check failed with server error reason=${h.error}`), l),
                    {
                        error: h.error,
                        order: null
                    }) : "need_recheck" === h.status ? (l.updateState(h.status),
                    wb.spa.orderMetrics(`wbx_${l.state}`),
                    this._storeOrder(l),
                    {
                        order: l
                    }) : void 0
                }
                ,
                _createClass(i, [{
                    key: "_isUserAuth",
                    get: function() {
                        return "0" != this._userId
                    }
                }, {
                    key: "_storageKey",
                    get: function() {
                        return `wbx-user-active-orders-${this._userId}`
                    }
                }]),
                i
            }();
            module.exports = i
        }();

    }
    , {
        "../modules/delivery/states": 36
    }],
    140: [function(require, module, exports) {
        "use strict";
        function _defineProperties(e, r) {
            for (var t = 0; t < r.length; t++) {
                var o = r[t];
                o.enumerable = o.enumerable || !1,
                o.configurable = !0,
                "value"in o && (o.writable = !0),
                Object.defineProperty(e, _toPropertyKey(o.key), o)
            }
        }
        function _createClass(e, r, t) {
            return r && _defineProperties(e.prototype, r),
            t && _defineProperties(e, t),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            e
        }
        function _toPropertyKey(e) {
            var r = _toPrimitive(e, "string");
            return "symbol" == typeof r ? r : String(r)
        }
        function _toPrimitive(e, r) {
            if ("object" != typeof e || !e)
                return e;
            var t = e[Symbol.toPrimitive];
            if (void 0 !== t) {
                var o = t.call(e, r || "default");
                if ("object" != typeof o)
                    return o;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === r ? String : Number)(e)
        }
        const Router = require("./router/router")
          , MenuLkHelper = require("./menuLk")
          , httpClient = require("./httpClient")
          , wbxHttpClient = require("./wbxHttpClient")
          , wbxAuthService = require("./wbxAuthService")
          , utils = require("./utils/core")
          , ModuleLoader = require("./utils/moduleLoader")
          , AdultHelper = require("./utils/adultHelper")
          , ObserverHelper = require("./utils/observerHelper")
          , ProductCardPopupHelper = require("./utils/productCardPopupHelper")
          , eventBus = require("./utils/eventBus")
          , seoHelper = require("./utils/seoHelper")
          , verificationTokenHelper = require("./utils/validationTokenHelper")
          , storageHelper = require("./utils/storageHelper")
          , UserHelper = require("./utils/userHelper")
          , GeoLocation = require("./layout/geoLocation")
          , ApiSupport = require("./utils/apiSupport")
          , RecentViewHelper = require("./utils/recentViewHelper")
          , PromotionsHelper = require("./utils/promotionsHelper");
        require("./wb"),
        require("../helpers");
        const FavsService = require("./services/favoriteGoods/favsService")
          , GroupedDeliveriesService = require("./services/groupedDeliveriesService")
          , UserDataService = require("./services/userDataService")
          , NotificationsService = require("./services/userNotificationsService")
          , CartService = require("./services/cartService")
          , UserAddressService = require("./services/userAddressService")
          , StoreService = require("./services/storeService")
          , ProductCardService = require("./services/productCard/productCardService")
          , BannersService = require("./services/banners/bannersService")
          , OrderService = require("./services/orderService")
          , WbxOrderService = require("./services/wbxOrderService")
          , ApiUserStorageService = require("./services/userStorageService")
          , TrackingService = require("./services/trackingService")
          , SessionService = require("./services/sessionService")
          , RefundService = require("./services/refundService")
          , PagerService = require("./services/pager/pagerService")
          , RetryFetchService = require("./services/retryFetchService")
          , SplitterService = require("./services/splitter/splitterService")
          , RouteExtensions = require("./router/extensions/routeExtensions");
        let router = new Router;
        const routeExtensions = new RouteExtensions
          , apiSupport = new ApiSupport;
        let moduleLoader, localizationDictionary, adultHelper, observerHelper, userHelper, geoLocation, services, loadingError, productCardPopupHelper = null, menuLkHelper = null;
        const displayType = Object.freeze({
            mobile: "m",
            desktop: "d"
        });
        let WbSpa = function() {
            function e() {}
            var r = e.prototype;
            return r.asObservable = function(e) {
                return $.observable(e)
            }
            ,
            r.toggleProperty = function(e) {
                this.asObservable(this).setProperty(e, !this[e])
            }
            ,
            r.$localize = function(e) {
                var r;
                return (null === (r = localizationDictionary[router.current]) || void 0 === r ? void 0 : r[e]) || e
            }
            ,
            r.$moveToAnchor = function(...e) {
                const r = arguments[0]
                  , t = e.find(e=>e instanceof Event || e instanceof jQuery.Event)
                  , o = arguments[1]instanceof Event || arguments[1]instanceof jQuery.Event || arguments[1]
                  , i = !(arguments[2]instanceof Event || arguments[2]instanceof jQuery.Event) && arguments[2]
                  , n = arguments[3]instanceof Event || arguments[3]instanceof jQuery.Event || !arguments[3] ? 0 : arguments[3];
                null == t || t.preventDefault(),
                null == t || t.stopPropagation(),
                null == t || t.stopImmediatePropagation();
                const s = document.getElementById(r);
                if (null == s)
                    return void console.warn("anchor element doesnt exist");
                const p = {
                    top: 0 + n
                };
                let u = this.$helper.isElementInViewport(s, !0, p);
                function c() {
                    "scrollBehavior"in document.documentElement.style ? window.scrollTo({
                        top: window.pageYOffset + s.getBoundingClientRect().top - n,
                        left: 0,
                        behavior: o ? "smooth" : "auto"
                    }) : window.scrollTo(0, window.pageYOffset + s.getBoundingClientRect().top - n)
                }
                if (c(),
                i) {
                    const e = setInterval(()=>{
                        (u = this.$helper.isElementInViewport(s, !0, p)) ? clearInterval(e) : c()
                    }
                    , 500)
                }
            }
            ,
            r.$void = function() {}
            ,
            r.$getCurrentXInfoAsync = function() {
                return userHelper.getXinfo()
            }
            ,
            r.$getCurrentXInfoWithClustersAndVectorsAsync = function(e) {
                return userHelper.getXinfoWithClustersAndVectors(e)
            }
            ,
            r.$getUserGender = async function() {
                const {userInfo: e} = await this.$services.userData.getUserDataAsync();
                return e.genderE
            }
            ,
            r.$generateGuid = function() {
                const e = ()=>Math.floor(65536 * (1 + Math.random())).toString(16).substring(1);
                return e() + e() + "-" + e() + "-" + e() + "-" + e() + "-" + e() + e() + e()
            }
            ,
            r.$getLoadingError = async function() {
                if (loadingError)
                    return loadingError;
                try {
                    const e = await moduleLoader.loadModuleAsync("loadingError");
                    return loadingError = new e
                } catch (e) {
                    return null
                }
            }
            ,
            r.$checkLotteryAvailabilityAsync = async function() {
                var e, r;
                if ("ru" != wb.settings.currentLocale)
                    return !1;
                const t = null !== (e = null === (r = wb.global) || void 0 === r || null === (r = r.settings) || void 0 === r || null === (r = r.variables.lotteryAccessSettings) || void 0 === r || null === (r = r.permitted) || void 0 === r ? void 0 : r.split(";")) && void 0 !== e ? e : [];
                if (t.length) {
                    const [e,{userInfo: r}] = await Promise.all([this.$user.getShardAsync(), this.$services.userData.getUserDataAsync()]);
                    return r.isAuthenticated && t.some(r=>{
                        const [t,o] = r.split("&").map(e=>parseInt(e));
                        return e >= t && e <= o
                    }
                    )
                }
                return !0
            }
            ,
            r.$isWbxOrderEnabled = function() {
                var e, r;
                return !(null === (e = this.$auth.jwtData) || void 0 === e || !e.user || null === (r = wb.global.settings) || void 0 === r || null === (r = r.variables) || void 0 === r || !r.wbxOrderUsersRange) && this._checkByRange(wb.global.settings.variables.wbxOrderUsersRange)
            }
            ,
            r.$isUserGradeEnabled = function() {
                var e, r;
                return !(null === (e = this.$auth.jwtData) || void 0 === e || !e.user || null === (r = wb.global.settings) || void 0 === r || null === (r = r.variables) || void 0 === r || !r.userGradeUsersRange) && this._checkByRange(wb.global.settings.variables.userGradeUsersRange)
            }
            ,
            r._checkByRange = function(e) {
                var r;
                const t = (null !== (r = e.split(";")) && void 0 !== r ? r : []).map(e=>parseInt(e));
                if (t.length < 2)
                    return !1;
                const o = isNaN(this.$auth.jwtData.user) ? Math.abs(this.$auth.jwtData.user.hashCode()) : parseInt(this.$auth.jwtData.user);
                return o > t[0] && o <= t[1]
            }
            ,
            r.$isRangeEnabledFor = function(e) {
                var r;
                return !(null === (r = this.$auth.jwtData) || void 0 === r || !r.user || !e) && this._checkByRange(e)
            }
            ,
            _createClass(e, [{
                key: "$userEnv",
                get: function() {
                    return userEnv
                }
            }, {
                key: "$router",
                get: function() {
                    return router
                }
            }, {
                key: "$helper",
                get: function() {
                    return utils
                }
            }, {
                key: "$moduleLoader",
                get: function() {
                    return moduleLoader
                }
            }, {
                key: "$verificationTokenHelper",
                get: function() {
                    return verificationTokenHelper
                }
            }, {
                key: "$menuLk",
                get: function() {
                    return null == menuLkHelper && (menuLkHelper = (new MenuLkHelper).init()),
                    menuLkHelper
                }
            }, {
                key: "$localziation",
                get: function() {
                    return localizationDictionary
                },
                set: function(e) {
                    return localizationDictionary = e,
                    !0
                }
            }, {
                key: "$httpClient",
                get: function() {
                    return httpClient
                }
            }, {
                key: "$auth",
                get: function() {
                    return wbxAuthService
                }
            }, {
                key: "$wbxHttpClient",
                get: function() {
                    return wbxHttpClient
                }
            }, {
                key: "$observable",
                get: function() {
                    return $.observable(this)
                }
            }, {
                key: "$storageHelper",
                get: function() {
                    return storageHelper
                }
            }, {
                key: "$seoHelper",
                get: function() {
                    return seoHelper
                }
            }, {
                key: "$stat",
                get: function() {
                    return wb.stat
                }
            }, {
                key: "$user",
                get: function() {
                    return userHelper
                }
            }, {
                key: "$geoLocation",
                get: function() {
                    return geoLocation
                }
            }, {
                key: "$adult",
                get: function() {
                    return adultHelper
                }
            }, {
                key: "$observerHelper",
                get: function() {
                    return observerHelper
                }
            }, {
                key: "$analitic",
                get: function() {
                    return wb.analitics
                }
            }, {
                key: "$productCardPopup",
                get: function() {
                    var e;
                    return productCardPopupHelper = null !== (e = productCardPopupHelper) && void 0 !== e ? e : new ProductCardPopupHelper
                }
            }, {
                key: "$isDesktop",
                get: function() {
                    return displayType.desktop == wb.settings.displayMode
                }
            }, {
                key: "$eventBus",
                get: function() {
                    return eventBus
                }
            }, {
                key: "$services",
                get: function() {
                    return services
                }
            }, {
                key: "$routeExtensions",
                get: function() {
                    return routeExtensions
                }
            }, {
                key: "$apiSupport",
                get: function() {
                    return apiSupport
                }
            }, {
                key: "$recentViews",
                get: function() {
                    return RecentViewHelper
                }
            }, {
                key: "$promotionsHelper",
                get: function() {
                    return PromotionsHelper
                }
            }]),
            e
        }();
        Object.defineProperties(window, {
            WbSpaModel: {
                value: WbSpa
            }
        }),
        Object.setPrototypeOf(Router.prototype, WbSpa.prototype),
        Object.setPrototypeOf(UserHelper.prototype, WbSpa.prototype),
        Object.setPrototypeOf(GeoLocation.prototype, WbSpa.prototype),
        Object.setPrototypeOf(ModuleLoader.prototype, WbSpa.prototype),
        Object.setPrototypeOf(AdultHelper.prototype, WbSpa.prototype),
        Object.setPrototypeOf(ObserverHelper.prototype, WbSpa.prototype),
        Object.setPrototypeOf(ProductCardPopupHelper.prototype, WbSpa.prototype),
        Object.setPrototypeOf(Object.getPrototypeOf(seoHelper), WbSpa.prototype),
        Object.setPrototypeOf(MenuLkHelper.prototype, WbSpa.prototype),
        Object.setPrototypeOf(RouteExtensions.prototype, WbSpa.prototype),
        Object.setPrototypeOf(PromotionsHelper.prototype, WbSpa.prototype),
        Object.setPrototypeOf(CartService.prototype, WbSpa.prototype),
        Object.setPrototypeOf(UserAddressService.prototype, WbSpa.prototype),
        Object.setPrototypeOf(StoreService.prototype, WbSpa.prototype),
        Object.setPrototypeOf(FavsService.prototype, WbSpa.prototype),
        Object.setPrototypeOf(GroupedDeliveriesService.prototype, WbSpa.prototype),
        Object.setPrototypeOf(UserDataService.prototype, WbSpa.prototype),
        Object.setPrototypeOf(NotificationsService.prototype, WbSpa.prototype),
        Object.setPrototypeOf(BannersService.prototype, WbSpa.prototype),
        Object.setPrototypeOf(OrderService.prototype, WbSpa.prototype),
        Object.setPrototypeOf(WbxOrderService.prototype, WbSpa.prototype),
        Object.setPrototypeOf(ApiUserStorageService.prototype, WbSpa.prototype),
        Object.setPrototypeOf(TrackingService.prototype, WbSpa.prototype),
        Object.setPrototypeOf(SessionService.prototype, WbSpa.prototype),
        Object.setPrototypeOf(RefundService.prototype, WbSpa.prototype),
        Object.setPrototypeOf(ProductCardService.prototype, WbSpa.prototype),
        Object.setPrototypeOf(RetryFetchService.prototype, WbSpa.prototype),
        Object.setPrototypeOf(SplitterService.prototype, WbSpa.prototype),
        moduleLoader = new ModuleLoader(WbSpa.prototype).init(),
        adultHelper = new AdultHelper,
        userHelper = new UserHelper,
        geoLocation = new GeoLocation,
        observerHelper = new ObserverHelper,
        module.exports = WbSpa,
        wb.utils = Object.assign(wb.utils, utils),
        wb.user = userHelper,
        wb.adult = adultHelper;
        const userEnv = {
            currency: wb.user.getCurrency()
        };
        services = {
            storeService: new StoreService,
            userAddressService: new UserAddressService,
            cartService: new CartService,
            favsService: new FavsService,
            groupedDeliveriesService: new GroupedDeliveriesService,
            userData: new UserDataService,
            notifications: new NotificationsService,
            productCard: new ProductCardService,
            bannersService: new BannersService,
            orderService: new OrderService,
            wbxOrderService: new WbxOrderService,
            apiUserStorage: new ApiUserStorageService,
            trackingService: new TrackingService,
            sessionService: new SessionService,
            refundService: new RefundService,
            pager: PagerService,
            retryFetchService: new RetryFetchService,
            splitterService: new SplitterService
        },
        localStorage.removeItem("suppliersInfo"),
        Object.keys(services).forEach(e=>services[e].init && services[e].init());

    }
    , {
        "../helpers": 3,
        "./httpClient": 17,
        "./layout/geoLocation": 21,
        "./menuLk": 32,
        "./router/extensions/routeExtensions": 41,
        "./router/router": 80,
        "./services/banners/bannersService": 86,
        "./services/cartService": 101,
        "./services/favoriteGoods/favsService": 113,
        "./services/groupedDeliveriesService": 119,
        "./services/orderService": 120,
        "./services/pager/pagerService": 122,
        "./services/productCard/productCardService": 123,
        "./services/refundService": 124,
        "./services/retryFetchService": 125,
        "./services/sessionService": 127,
        "./services/splitter/splitterService": 128,
        "./services/storeService": 133,
        "./services/trackingService": 134,
        "./services/userAddressService": 135,
        "./services/userDataService": 136,
        "./services/userNotificationsService": 137,
        "./services/userStorageService": 138,
        "./services/wbxOrderService": 139,
        "./utils/adultHelper": 141,
        "./utils/apiSupport": 142,
        "./utils/core": 145,
        "./utils/eventBus": 147,
        "./utils/moduleLoader": 148,
        "./utils/observerHelper": 149,
        "./utils/productCardPopupHelper": 151,
        "./utils/promotionsHelper": 152,
        "./utils/recentViewHelper": 153,
        "./utils/seoHelper": 154,
        "./utils/storageHelper": 155,
        "./utils/userHelper": 156,
        "./utils/validationTokenHelper": 157,
        "./wb": 158,
        "./wbxAuthService": 159,
        "./wbxHttpClient": 160
    }],
    141: [function(require, module, exports) {
        "use strict";
        function _defineProperties(e, t) {
            for (var r = 0; r < t.length; r++) {
                var o = t[r];
                o.enumerable = o.enumerable || !1,
                o.configurable = !0,
                "value"in o && (o.writable = !0),
                Object.defineProperty(e, _toPropertyKey(o.key), o)
            }
        }
        function _createClass(e, t, r) {
            return t && _defineProperties(e.prototype, t),
            r && _defineProperties(e, r),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            e
        }
        function _toPropertyKey(e) {
            var t = _toPrimitive(e, "string");
            return "symbol" == typeof t ? t : String(t)
        }
        function _toPrimitive(e, t) {
            if ("object" != typeof e || !e)
                return e;
            var r = e[Symbol.toPrimitive];
            if (void 0 !== r) {
                var o = r.call(e, t || "default");
                if ("object" != typeof o)
                    return o;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === t ? String : Number)(e)
        }
        let AdultHelper = function() {
            function e() {
                this.proceedIfAdultConfirmed = this.proceedIfAdultConfirmed.bind(this)
            }
            var t = e.prototype;
            return t.proceedIfAdultConfirmed = function(e, t, r, ...o) {
                this.adultPopup.then(i=>{
                    i.closePopup(),
                    !e || this.isConfirmed ? null == t || t.apply(r, o) : i.proceedIfAdultConfirmed(t, r, o).then(e=>{
                        $.observable(this).setProperty({
                            isConfirmed: e
                        })
                    }
                    )
                }
                )
            }
            ,
            t.pushToQueue = function(e) {
                this.adultPopup.then(t=>t.pushToQueue(e))
            }
            ,
            t.closePopup = function() {
                this.adultPopup.then(e=>e.closePopup(callback))
            }
            ,
            _createClass(e, [{
                key: "isConfirmed",
                get: function() {
                    return null == this._isConfirmed && (this._isConfirmed = "true" == wb.cookieHelper.getCookie("__ac1")),
                    this._isConfirmed
                },
                set: function(e) {
                    return this._isConfirmed = e,
                    e
                }
            }, {
                key: "adultPopup",
                get: function() {
                    return this._adultPopup ? Promise.resolve(this._adultPopup) : new Promise(e=>{
                        WbSpaModel.prototype.$moduleLoader.loadModuleAsync("adultConfirmedPopup").then(t=>{
                            this._adultPopup = new t,
                            e(this._adultPopup)
                        }
                        )
                    }
                    )
                }
            }]),
            e
        }();
        module.exports = AdultHelper;

    }
    , {}],
    142: [function(require, module, exports) {
        "use strict";
        const testImage = "data:image/avif;base64,AAAAHGZ0eXBtaWYxAAAAAG1pZjFhdmlmbWlhZgAAAOxtZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAABEAAAQABAAAAAAEQAAEAAAATAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUltYWdlAAAAAGtpcHJwAAAATGlwY28AAAAUaXNwZQAAAAAAAAABAAAAAQAAABBwYXNwAAAAAQAAAAEAAAASYXYxQ4EAHAAKBBgABpUAAAAOcGl4aQAAAAABCAAAABdpcG1hAAAAAAAAAAEAAQQBAoOEAAAAG21kYXQKBBgABpUyCxZAAAEgAAF1VEKY"
          , testWebpLossyImage = "data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA";
        let ApiSupport = function() {
            function A() {
                this.nativeLazyImage = "loading"in HTMLImageElement.prototype,
                this.intersectionObserver = "IntersectionObserver"in window,
                this.webpImage = !1,
                this._checkWebpImageSupport()
            }
            var e = A.prototype;
            return e._checkAvifImageSupportAsync = async function() {
                if (window.createImageBitmap)
                    try {
                        const A = await fetch(testImage).then(A=>A.blob());
                        return await createImageBitmap(A),
                        this.avifImage = !0,
                        !0
                    } catch (A) {}
            }
            ,
            e._checkWebpImageSupport = async function() {
                if (0 === document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp"))
                    this.webpImage = !0;
                else
                    try {
                        const A = new Image;
                        A.onload = function() {
                            A.width > 0 && A.height > 0 && (this.webpImage = !0)
                        }
                        .bind(this),
                        A.src = testWebpLossyImage
                    } catch (A) {}
            }
            ,
            A
        }();
        module.exports = ApiSupport;

    }
    , {}],
    143: [function(require, module, exports) {
        "use strict";
        function b64ToUint6(r) {
            return r > 64 && r < 91 ? r - 65 : r > 96 && r < 123 ? r - 71 : r > 47 && r < 58 ? r + 4 : 43 === r ? 62 : 47 === r ? 63 : 0
        }
        function base64DecToArr(r, n) {
            for (var t, e, o = r.replace(/[^A-Za-z0-9\+\/]/g, ""), u = o.length, i = n ? Math.ceil((3 * u + 1 >> 2) / n) * n : 3 * u + 1 >> 2, c = new Uint8Array(i), f = 0, a = 0, T = 0; T < u; T++)
                if (e = 3 & T,
                f |= b64ToUint6(o.charCodeAt(T)) << 6 * (3 - e),
                3 === e || u - T == 1) {
                    for (t = 0; t < 3 && a < i; t++,
                    a++)
                        c[a] = f >>> (16 >>> t & 24) & 255;
                    f = 0
                }
            return c
        }
        function uint6ToB64(r) {
            return r < 26 ? r + 65 : r < 52 ? r + 71 : r < 62 ? r - 4 : 62 === r ? 43 : 63 === r ? 47 : 65
        }
        function base64EncArr(r) {
            for (var n = 2, t = "", e = r.length, o = 0, u = 0; u < e; u++)
                n = u % 3,
                o |= r[u] << (16 >>> n & 24),
                2 !== n && r.length - u != 1 || (t += String.fromCodePoint(uint6ToB64(o >>> 18 & 63), uint6ToB64(o >>> 12 & 63), uint6ToB64(o >>> 6 & 63), uint6ToB64(63 & o)),
                o = 0);
            return t.substr(0, t.length - 2 + n) + (2 === n ? "" : 1 === n ? "=" : "==")
        }
        function UTF8ArrToStr(r) {
            for (var n, t = "", e = r.length, o = 0; o < e; o++)
                n = r[o],
                t += String.fromCodePoint(n > 251 && n < 254 && o + 5 < e ? 1073741824 * (n - 252) + (r[++o] - 128 << 24) + (r[++o] - 128 << 18) + (r[++o] - 128 << 12) + (r[++o] - 128 << 6) + r[++o] - 128 : n > 247 && n < 252 && o + 4 < e ? (n - 248 << 24) + (r[++o] - 128 << 18) + (r[++o] - 128 << 12) + (r[++o] - 128 << 6) + r[++o] - 128 : n > 239 && n < 248 && o + 3 < e ? (n - 240 << 18) + (r[++o] - 128 << 12) + (r[++o] - 128 << 6) + r[++o] - 128 : n > 223 && n < 240 && o + 2 < e ? (n - 224 << 12) + (r[++o] - 128 << 6) + r[++o] - 128 : n > 191 && n < 224 && o + 1 < e ? (n - 192 << 6) + r[++o] - 128 : n);
            return t
        }
        function strToUTF8Arr(r) {
            for (var n, t, e = r.length, o = 0, u = 0; u < e; u++)
                (t = r.codePointAt(u)) > 65536 && u++,
                o += t < 128 ? 1 : t < 2048 ? 2 : t < 65536 ? 3 : t < 2097152 ? 4 : t < 67108864 ? 5 : 6;
            n = new Uint8Array(o);
            for (var i = 0, c = 0; i < o; c++)
                (t = r.codePointAt(c)) < 128 ? n[i++] = t : t < 2048 ? (n[i++] = 192 + (t >>> 6),
                n[i++] = 128 + (63 & t)) : t < 65536 ? (n[i++] = 224 + (t >>> 12),
                n[i++] = 128 + (t >>> 6 & 63),
                n[i++] = 128 + (63 & t)) : t < 2097152 ? (n[i++] = 240 + (t >>> 18),
                n[i++] = 128 + (t >>> 12 & 63),
                n[i++] = 128 + (t >>> 6 & 63),
                n[i++] = 128 + (63 & t),
                c++) : t < 67108864 ? (n[i++] = 248 + (t >>> 24),
                n[i++] = 128 + (t >>> 18 & 63),
                n[i++] = 128 + (t >>> 12 & 63),
                n[i++] = 128 + (t >>> 6 & 63),
                n[i++] = 128 + (63 & t),
                c++) : (n[i++] = 252 + (t >>> 30),
                n[i++] = 128 + (t >>> 24 & 63),
                n[i++] = 128 + (t >>> 18 & 63),
                n[i++] = 128 + (t >>> 12 & 63),
                n[i++] = 128 + (t >>> 6 & 63),
                n[i++] = 128 + (63 & t),
                c++);
            return n
        }
        let Base64 = function() {
            function r() {}
            return r.decode = function(r) {
                return r ? UTF8ArrToStr(base64DecToArr(r)) : null
            }
            ,
            r.encode = function(r) {
                return r ? base64EncArr(strToUTF8Arr(r)) : ""
            }
            ,
            r.encodeBytesArr = function(r) {
                return base64EncArr(r)
            }
            ,
            r
        }();
        module.exports = Base64;

    }
    , {}],
    144: [function(require, module, exports) {
        "use strict";
        !function() {
            let e = function() {
                function e() {}
                return e.getCookie = function(e) {
                    const o = document.cookie.split(";").find(o=>{
                        const [t] = o.trim().split("=");
                        return t == e
                    }
                    );
                    return o ? decodeURIComponent(o.trim().split("=")[1]) : null
                }
                ,
                e.setCookie = function(e, o, t={}) {
                    t = {
                        path: "/",
                        "max-age": 31536e3,
                        ...t
                    };
                    let n = encodeURIComponent(e) + "=" + encodeURIComponent(o);
                    Object.keys(t).forEach(e=>{
                        n += `; ${e}`,
                        1 != t[e] && (n += `=${t[e]}`)
                    }
                    ),
                    document.cookie = n
                }
                ,
                e.deleteCookie = function(o, t={}) {
                    e.setCookie(o, "", {
                        "max-age": -1,
                        ...t
                    })
                }
                ,
                e
            }();
            wb.cookieHelper = e
        }();

    }
    , {}],
    145: [function(require, module, exports) {
        "use strict";
        require("./cookieHelper"),
        require("./priceHelper");
        const Base64 = require("./base64")
          , scriptLoader = {
            cache: {},
            onFirstExecution() {
                0 === Object.keys(this.cache).length && document.querySelectorAll("script[type='text/javascript']").forEach(e=>{
                    "" !== e.src && (this.cache[e.src.replace(/https?:/, "")] = Promise.resolve())
                }
                )
            },
            require(e) {
                let t = this.cache[e];
                return null == t && (this.onFirstExecution(),
                null == (t = this.cache[e]) && (t = this.cache[e] = switchableLoadAsync(e, this.loadScriptAsync))),
                t.catch(t=>(this.cache[e] = null,
                Promise.reject(t)))
            },
            loadScriptAsync: e=>new Promise((t,r)=>{
                try {
                    const o = document.createElement("script");
                    o.type = "text/javascript",
                    o.src = e,
                    o.readyState ? o.onreadystatechange = function() {
                        "loaded" !== o.readyState && "complete" !== o.readyState || (o.onreadystatechange = null,
                        t())
                    }
                    : o.onload = t,
                    o.onerror = r,
                    document.body.appendChild(o)
                } catch (e) {
                    r(e)
                }
            }
            )
        }
          , styleLoader = {
            cashe: {},
            orinalStylesIncluded: !1,
            require(e) {
                return new Promise((t,r)=>{
                    this.orinalStylesIncluded || this.addOrinalStyles(),
                    null == this.cashe[e] && (this.cashe[e] = switchableLoadAsync(e, this.loadCssAsync)),
                    this.cashe[e].then(t).catch(t=>{
                        this.cashe[e] = null,
                        r(t)
                    }
                    )
                }
                )
            },
            addOrinalStyles() {
                this.orinalStylesIncluded = !0,
                document.querySelectorAll("link[type='text/css']").forEach(e=>this.cashe[e.href.replace(/https?:/, "")] = Promise.resolve())
            },
            loadCssAsync: e=>new Promise((t,r)=>{
                let o;
                if (navigator.userAgent.indexOf("MSIE ") > 0 || navigator.userAgent.indexOf("Trident/") > 0) {
                    const n = document.createElement("link");
                    n.href = e,
                    n.type = "text/css",
                    n.rel = "stylesheet",
                    n.onload = t,
                    n.onerror = r,
                    o = n
                } else {
                    const n = document.createElement("style");
                    n.onload = t,
                    n.textContent = `@import "${e}"`,
                    n.onload = t,
                    n.onerror = r,
                    o = n
                }
                document.querySelector("head").appendChild(o)
            }
            )
        };
        async function switchableLoadAsync(e, t) {
            return new Promise((r,o)=>{
                t(e).then(e=>r()).catch(o=>t(wb.helpers.url.urlStaticDataFallback(e)).then(e=>r()))
            }
            )
        }
        function objectSerializer(e, t=new URLSearchParams, r=!1, o=!1) {
            const n = (e,i)=>{
                o && "boolean" == typeof i ? t.append(e, i.toString()) : "object" == typeof i && null != i ? Object.entries(i).forEach(([r,o])=>{
                    n(`${e}[${r}]`, o, t)
                }
                ) : r && null == i || t.append(e, i)
            }
            ;
            return Object.entries(e).forEach(([e,t])=>n(e, t)),
            t
        }
        function serializeToFormData(e, t=new FormData) {
            const r = (e,o="")=>{
                for (let n in e) {
                    const i = e[n];
                    let a = n;
                    o && (a = Array.isArray(e) ? `${o}[${n}]` : `${o}.${n}`),
                    "boolean" == typeof i ? t.append(a, i.toString()) : "string" == typeof i || "number" == typeof i ? t.append(a, i) : "object" == typeof i && r(i, a)
                }
            }
            ;
            return r(e),
            t
        }
        const currentCulture = function() {
            const e = wb.cookieHelper.getCookie(".AspNetCore.Culture");
            if (e) {
                const t = e.match(/^c=([a-z]{2})(-[A-Z]{2})?\|uic=([a-z]{2})(-[A-Z]{2})?$/);
                if (t)
                    return t[1]
            }
            return document.documentElement.getAttribute("lang")
        }();
        function deepMerge() {
            let e = arguments[0]
              , t = t=>{
                for (let r in t)
                    t.hasOwnProperty(r) && ("[object Object]" === Object.prototype.toString.call(t[r]) && null != e[r] ? e[r] = deepMerge(e[r], t[r]) : e[r] = t[r])
            }
            ;
            for (let e = 1; e < arguments.length; e++)
                t(arguments[e]);
            return e
        }
        function deepMerge_v2() {
            let e = arguments[0]
              , t = t=>{
                for (let r in t)
                    t.hasOwnProperty(r) && ("[object Object]" === Object.prototype.toString.call(t[r]) && null != e[r] ? e[r] = deepMerge_v2(e[r], t[r]) : void 0 !== t[r] && (e[r] = t[r]))
            }
            ;
            for (let e = 1; e < arguments.length; e++)
                t(arguments[e]);
            return e
        }
        const debounce = (e,t)=>{
            let r = null;
            return (...o)=>{
                r && clearTimeout(r),
                r = setTimeout(()=>{
                    e.apply(void 0, o),
                    r = null
                }
                , t)
            }
        }
          , debounceLead = (e,t=300)=>{
            let r;
            return function(...o) {
                r || e.apply(this, o),
                clearTimeout(r),
                r = setTimeout(()=>r = null, t)
            }
        }
          , debounceTrail = (e,t=300)=>{
            let r;
            return function(...o) {
                clearTimeout(r),
                r = setTimeout(()=>{
                    e.apply(this, o)
                }
                , t)
            }
        }
          , throttle = (e,t)=>{
            let r, o, n = !1;
            return function i() {
                if (n)
                    return r = arguments,
                    void (o = this);
                e.apply(this, arguments),
                n = !0,
                setTimeout(function() {
                    n = !1,
                    r && (i.apply(o, r),
                    r = o = null)
                }, t)
            }
        }
          , repeat = (e,t,r,o)=>{
            let n = 0
              , i = setInterval(function() {
                if (n > t)
                    return clearInterval(i),
                    void (o && o());
                e(i) && clearInterval(i),
                n++
            }, r);
            return i
        }
          , once = e=>{
            let t;
            return function() {
                return once.done || (t = e.apply(this, arguments),
                once.done = !0),
                t
            }
        }
          , delegator = (e,t)=>(function(r) {
            const o = r.target.closest(e);
            null != o && t(r, o)
        }
        )
          , nextTick = ()=>Promise.resolve().then(()=>Promise.resolve())
          , sleep = e=>new Promise(t=>setTimeout(t, e));
        function isElementInViewport(e, t, r) {
            const o = e.getBoundingClientRect();
            var n;
            if (r && (r.threshold = null !== (n = r.threshold) && void 0 !== n ? n : 10,
            isNumber(r.top)))
                return o.top >= r.top - r.threshold && o.top <= r.top + r.threshold;
            return o.top >= 0 && (t || o.left >= 0) && o.bottom <= (window.innerHeight || document.documentElement.clientHeight) && (t || o.right <= (window.innerWidth || document.documentElement.clientWidth))
        }
        function Deferred() {
            this.promise = new Promise((e,t)=>{
                this.reject = t,
                this.resolve = e
            }
            )
        }
        function getClientDt() {
            const e = new Date
              , t = new Date(e.getTime() - 6e4 * e.getTimezoneOffset()).toISOString();
            return t.slice(0, t.length - 1)
        }
        function isMobileBrowser() {
            if (void 0 !== window._isMobileBrowser)
                return window._isMobileBrowser;
            let e = !1;
            var t;
            return t = navigator.userAgent || navigator.vendor || window.opera,
            (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0, 4))) && (e = !0),
            window._isMobileBrowser = e,
            window._isMobileBrowser
        }
        function isNumber(e) {
            return !isNaN(parseFloat(e)) && isFinite(e)
        }
        function animationFrameWithMinDelay(e, t) {
            const r = performance.now()
              , o = ()=>performance.now() - r > e ? t() : window.requestAnimationFrame(o);
            window.requestAnimationFrame(o)
        }
        module.exports = {
            base64: Base64,
            loadJsAsync: scriptLoader.require.bind(scriptLoader),
            loadCssAsync: styleLoader.require.bind(styleLoader),
            currentCulture: currentCulture,
            deepMerge: deepMerge,
            deepMerge_v2: deepMerge_v2,
            debounce: debounce,
            debounceLead: debounceLead,
            debounceTrail: debounceTrail,
            throttle: throttle,
            once: once,
            delegator: delegator,
            nextTick: nextTick,
            sleep: sleep,
            isElementInViewport: isElementInViewport,
            Deferred: Deferred,
            repeat: repeat,
            getClientDt: getClientDt,
            isMobileBrowser: isMobileBrowser,
            serializeToFormData: serializeToFormData,
            objectSerializer: objectSerializer,
            isNumber: isNumber,
            animationFrameWithMinDelay: animationFrameWithMinDelay
        };

    }
    , {
        "./base64": 143,
        "./cookieHelper": 144,
        "./priceHelper": 150
    }],
    146: [function(require, module, exports) {
        "use strict";
        function _inheritsLoose(r, t) {
            r.prototype = Object.create(t.prototype),
            r.prototype.constructor = r,
            _setPrototypeOf(r, t)
        }
        function _wrapNativeSuper(r) {
            var t = "function" == typeof Map ? new Map : void 0;
            return (_wrapNativeSuper = function(r) {
                if (null === r || !_isNativeFunction(r))
                    return r;
                if ("function" != typeof r)
                    throw new TypeError("Super expression must either be null or a function");
                if (void 0 !== t) {
                    if (t.has(r))
                        return t.get(r);
                    t.set(r, e)
                }
                function e() {
                    return _construct(r, arguments, _getPrototypeOf(this).constructor)
                }
                return e.prototype = Object.create(r.prototype, {
                    constructor: {
                        value: e,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }),
                _setPrototypeOf(e, r)
            }
            )(r)
        }
        function _construct(r, t, e) {
            if (_isNativeReflectConstruct())
                return Reflect.construct.apply(null, arguments);
            var o = [null];
            o.push.apply(o, t);
            var n = new (r.bind.apply(r, o));
            return e && _setPrototypeOf(n, e.prototype),
            n
        }
        function _isNativeReflectConstruct() {
            try {
                var r = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}))
            } catch (r) {}
            return (_isNativeReflectConstruct = function() {
                return !!r
            }
            )()
        }
        function _isNativeFunction(r) {
            try {
                return -1 !== Function.toString.call(r).indexOf("[native code]")
            } catch (t) {
                return "function" == typeof r
            }
        }
        function _setPrototypeOf(r, t) {
            return (_setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(r, t) {
                return r.__proto__ = t,
                r
            }
            )(r, t)
        }
        function _getPrototypeOf(r) {
            return (_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
                return r.__proto__ || Object.getPrototypeOf(r)
            }
            )(r)
        }
        let KnownServerError = function(r) {
            function t(e) {
                var o;
                const {message: n, payload: u} = t.parsePayload(e);
                return (o = r.call(this, n) || this).isCustomError = !0,
                o.payload = u,
                o
            }
            return _inheritsLoose(t, r),
            t.parsePayload = function(r) {
                var t;
                return "string" == typeof r ? {
                    message: r,
                    payload: null
                } : {
                    message: null !== (t = null == r ? void 0 : r.message) && void 0 !== t ? t : "Unknow error",
                    payload: null == r ? void 0 : r.payload
                }
            }
            ,
            t
        }(_wrapNativeSuper(Error))
          , UnauthorizeError = function(r) {
            function t({msg: t, jwtDrop: e}={}) {
                var o;
                return (o = r.call(this, t) || this).isUnauthorize = !0,
                o.jwtDrop = e,
                o
            }
            return _inheritsLoose(t, r),
            t
        }(KnownServerError)
          , CancelledRequestError = function(r) {
            function t(t="") {
                var e;
                return (e = r.call(this, t) || this).isCancelled = !0,
                e
            }
            return _inheritsLoose(t, r),
            t
        }(KnownServerError)
          , NotFoundError = function(r) {
            function t(t="") {
                var e;
                return (e = r.call(this, t) || this).isNotFound = !0,
                e
            }
            return _inheritsLoose(t, r),
            t
        }(KnownServerError)
          , NetworkError = function() {
            this.isNetworkError = !0
        };
        Object.defineProperties(window, {
            KnownServerError: {
                value: KnownServerError
            },
            UnauthorizeError: {
                value: UnauthorizeError
            },
            CancelledRequestError: {
                value: CancelledRequestError
            },
            NotFoundError: {
                value: NotFoundError
            },
            NetworkError: {
                value: NetworkError
            }
        });

    }
    , {}],
    147: [function(require, module, exports) {
        "use strict";
        function _defineProperties(t, e) {
            for (var n = 0; n < e.length; n++) {
                var i = e[n];
                i.enumerable = i.enumerable || !1,
                i.configurable = !0,
                "value"in i && (i.writable = !0),
                Object.defineProperty(t, _toPropertyKey(i.key), i)
            }
        }
        function _createClass(t, e, n) {
            return e && _defineProperties(t.prototype, e),
            n && _defineProperties(t, n),
            Object.defineProperty(t, "prototype", {
                writable: !1
            }),
            t
        }
        function _toPropertyKey(t) {
            var e = _toPrimitive(t, "string");
            return "symbol" == typeof e ? e : String(e)
        }
        function _toPrimitive(t, e) {
            if ("object" != typeof t || !t)
                return t;
            var n = t[Symbol.toPrimitive];
            if (void 0 !== n) {
                var i = n.call(t, e || "default");
                if ("object" != typeof i)
                    return i;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === e ? String : Number)(t)
        }
        let EventBus = function() {
            function t() {
                this.eventsDictionary = {}
            }
            var e = t.prototype;
            return e.addEventListener = function(t, e, {single: n}={}) {
                const i = this._validateInput(t, e);
                if (!i.valid)
                    throw i.error;
                null == this.eventsDictionary[t] && (this.eventsDictionary[t] = []);
                const r = this.eventsDictionary[t];
                n && r.includes(e) || r.push(e)
            }
            ,
            e.removeEventListener = function(t, e) {
                var n;
                const i = this._validateInput(t, e);
                if (!i.valid)
                    throw i.error;
                const r = this.eventsDictionary[t];
                this.eventsDictionary[t] = null !== (n = null == r ? void 0 : r.filter(t=>t !== e)) && void 0 !== n ? n : []
            }
            ,
            e.dispatchEvent = function(t) {
                if (!(t instanceof Event))
                    throw new TypeError("DispatchEvent can be called only with Event instance");
                if ("" == t.type)
                    throw new TypeError("Event doesnt have sufficient type");
                const e = this.eventsDictionary[t.type];
                null == e || e.forEach(e=>{
                    t.isPropagationStopped || queueMicrotask(()=>{
                        e(t)
                    }
                    )
                }
                )
            }
            ,
            e._validateInput = function(t, e) {
                return "string" != typeof t || "" == t ? {
                    valid: !1,
                    error: new TypeError("Event type must be a valid string value")
                } : e instanceof Function ? {
                    valid: !0
                } : {
                    valid: !1,
                    error: new TypeError("Callback must be a function")
                }
            }
            ,
            t
        }()
          , CallbackLinkedList = function() {
            function t(t) {
                this.type = t,
                this.head = null
            }
            var e = t.prototype;
            return e.addNode = function(t) {
                if (null == this.head)
                    return void (this.head = t);
                const e = this.tail;
                e.next = t,
                t.previous = e
            }
            ,
            e.removeNode = function(t) {
                const e = this.find(e=>(null == e ? void 0 : e.callback) == t);
                e && (e == this.head || null == e.previous ? this.head = e.next : e.previous.next = e.next)
            }
            ,
            e.forEach = function(t) {
                if (!(t instanceof Function))
                    throw new TypeError("Callback is not a function at CallbackLinkedList.forEach");
                let e = this.head;
                for (; null != e; )
                    t(e),
                    e = e.next
            }
            ,
            e.find = function(t) {
                if (!(t instanceof Function))
                    throw new TypeError("Callback is not a function at CallbackLinkedList.forEach");
                let e = this.head;
                for (; null != e; ) {
                    if (t(e))
                        return e;
                    e = e.next
                }
            }
            ,
            _createClass(t, [{
                key: "length",
                get: function() {
                    let t = 0
                      , e = this.head;
                    for (; e; )
                        e = e.next,
                        t++;
                    return t
                }
            }, {
                key: "tail",
                get: function() {
                    let t = this.head;
                    for (; null != (null === (e = t) || void 0 === e ? void 0 : e.next); ) {
                        var e;
                        t = t.next
                    }
                    return t
                }
            }]),
            t
        }()
          , CallbackLinkedListItem = function(t) {
            this.callback = t,
            this.next = null,
            this.previous = null
        };
        module.exports = new EventBus;

    }
    , {}],
    148: [function(require, module, exports) {
        "use strict";
        let DynamicModuleLoader = function() {
            function e() {
                this.allModules = {},
                this.modulesDict = {},
                this.allServices = {},
                this.servicesDict = {}
            }
            var t = e.prototype;
            return t.init = function() {
                return window.__spaModuleManager__ = {
                    register: (e,t)=>{
                        this._enrichProto(t),
                        this.modulesDict[e] = t
                    }
                    ,
                    getModule: (e,t)=>{
                        if (null != this.modulesDict[e] || t)
                            return this.modulesDict[e];
                        throw new Error("Module " + e + " has not been loaded yet")
                    }
                },
                window.__spaServiceManager__ = {
                    register: (e,t)=>{
                        this._enrichProto(t),
                        this.servicesDict[e] = t
                    }
                    ,
                    getService: (e,t)=>{
                        if (null != this.servicesDict[e] || t)
                            return this.servicesDict[e];
                        throw new Error("Service " + e + " has not been loaded yet")
                    }
                },
                this
            }
            ,
            t.setModules = function(e) {
                this.allModules = e
            }
            ,
            t.setServices = function(e) {
                this.allServices = e
            }
            ,
            t.loadServiceAsync = async function(e) {
                const {name: t, physicalPath: l} = this.allServices[e] || {};
                if (null == t || null == l)
                    throw new Error(e + " service doesnt exist");
                const s = await this._loadServiceAsync(t, l);
                this.$services[t] = new s
            }
            ,
            t.loadModuleAsync = async function(e, t=!1) {
                let {name: l, physicalPath: s, dataPath: i, templateName: o, isDynamic: n=!1, httpMethod: r="GET", cssPath: a, cssPaths: c, jsPaths: u, apiName: d, isDictionaryTemplate: h=!1, externalPath: p} = this.allModules[e] || {};
                if (null == l || null == s)
                    throw new Error(e + " module doesnt exist");
                (p = window._debug ? null : p) && (s = `${p}${s.split("/").last()}`,
                a = `${p}${a.split("/").last()}`);
                const y = null == o ? Promise.resolve(null) : h ? $.views.loadTemplateDictionaryAsync(o) : $.views.loadTemplateAsync(o, p)
                  , m = this._loadDataAsync(e, i, n, r, d)
                  , w = null == a ? Promise.resolve(null) : this.$helper.loadCssAsync(a)
                  , v = null == c ? [Promise.resolve(null)] : c.map(e=>this.$helper.loadCssAsync(e))
                  , _ = null == u ? [Promise.resolve(null)] : u.map(e=>this.$helper.loadJsAsync(e))
                  , [f,M,D] = await Promise.all([this._loadModule(l, s, t), m, y, w, ...v, ..._]);
                return null != f && (f.data = M,
                f.template = D),
                f
            }
            ,
            t.execModule = async function(e="", t="", l=[]) {
                try {
                    (await this.loadModuleAsync(e))[t](...l)
                } catch (e) {
                    console.error(e)
                }
            }
            ,
            t._loadModule = async function(e, t, l) {
                if (null == e || null == t)
                    throw new Error("path and name are required to load module");
                return await this.$helper.loadJsAsync(t),
                window.__spaModuleManager__.getModule(e, l)
            }
            ,
            t._loadServiceAsync = async function(e, t) {
                if (null == e || null == t)
                    throw new Error("path and name are required to load service");
                return await this.$helper.loadJsAsync(t),
                window.__spaServiceManager__.getService(e)
            }
            ,
            t._loadDataAsync = async function(e, t, l, s, i) {
                return null == t ? null : l || null == this.modulesDict[e] ? ("basket" === i && (t = `${this.$services.cartService.publicBasketApiUrl}${t}`),
                await this.$httpClient.fetchJSON(t, {
                    method: s || "GET",
                    credentials: "include"
                })) : this.modulesDict[e].data
            }
            ,
            t._enrichProto = function(e) {
                if (!e.prototype)
                    return;
                let t = e.prototype
                  , l = null;
                for (; (l = Object.getPrototypeOf(t)) && l != Object.prototype; )
                    t = l;
                t != WbSpaModel.prototype && Object.setPrototypeOf(t, WbSpaModel.prototype)
            }
            ,
            e
        }();
        module.exports = DynamicModuleLoader;

    }
    , {}],
    149: [function(require, module, exports) {
        "use strict";
        let ObserverHelper = function() {
            function e() {}
            var t = e.prototype;
            return t.getVerticalObserver = function(e, t, r) {
                return new VerticalObserver(e,t,r)
            }
            ,
            t.getCarouselBannersObserver = function(e, t, r) {
                const s = Object.assign({
                    keepObserve: !0,
                    sendOutEvent: !0
                }, null != r ? r : {});
                return new VerticalObserver(e,t,s)
            }
            ,
            t.getSimpleObserver = function(e, t, r) {
                if (WbSpaModel.prototype.$apiSupport.intersectionObserver) {
                    const s = {
                        threshold: .5
                    }
                      , n = Object.assign(s, null != t ? t : {})
                      , i = {
                        keepObserve: !1
                    }
                      , o = Object.assign(i, null != r ? r : {});
                    let v = [];
                    const l = new IntersectionObserver((t,r)=>{
                        t.forEach(t=>{
                            t.isIntersecting && (e(t.target, v.indexOf(t.target) + 1),
                            o.keepObserve || r.unobserve(t.target))
                        }
                        )
                    }
                    ,n);
                    return {
                        observe: function(e) {
                            v.forEach(e=>l.unobserve(e)),
                            v = [],
                            (v = e).forEach(e=>l.observe(e))
                        },
                        destroy: function() {
                            null == l || l.disconnect()
                        }
                    }
                }
                return {
                    observe: t=>t.forEach(r=>e(r, t.indexOf(r) + 1)),
                    destroy: ()=>{}
                }
            }
            ,
            e
        }();
        module.exports = ObserverHelper;
        let VerticalObserver = function() {
            function e(e, t, r) {
                var s;
                this.intersectionObserverEnable = WbSpaModel.prototype.$apiSupport.intersectionObserver,
                e = null !== (s = e) && void 0 !== s ? s : [],
                this.items = (Array.isArray(e) ? e : [e]).toHashSet(),
                this.options = null != t ? t : {};
                this.settings = Object.assign({
                    keepObserve: !1,
                    sendOutEvent: !1
                }, null != r ? r : {}),
                this.observer = null,
                this.elementInViewportEventName = "elementInViewportEvent",
                this.elementOutOfViewportEventName = "elementOutOfViewportEvent"
            }
            var t = e.prototype;
            return t._observe = function(e) {
                var t;
                const r = {
                    bubbles: !0
                };
                null !== (t = this.settings) && void 0 !== t && t.eventDetails && (r.detail = this.settings.eventDetails);
                let s = new CustomEvent(this.elementInViewportEventName,r)
                  , n = new CustomEvent(this.elementOutOfViewportEventName,r);
                var i;
                this.intersectionObserverEnable ? (this.observer = null !== (i = this.observer) && void 0 !== i ? i : new IntersectionObserver((e,t)=>{
                    e.forEach(e=>{
                        e.isIntersecting ? (e.target.dispatchEvent(s),
                        this.settings.keepObserve || (this.items.delete(e.target),
                        t.unobserve(e.target))) : !e.isIntersecting && this.settings.sendOutEvent && e.target.dispatchEvent(n)
                    }
                    )
                }
                ,this.options),
                e.forEach(e=>{
                    e && this.observer.observe(e)
                }
                )) : e.forEach(e=>{
                    e.dispatchEvent(s),
                    this.items.delete(e)
                }
                )
            }
            ,
            t.observe = function() {
                return this._observe(this.items),
                this
            }
            ,
            t.update = function(e) {
                let t;
                if (Array.isArray(e))
                    t = e;
                else if (e instanceof HTMLElement)
                    t = [e];
                else {
                    if (!("toArray"in e))
                        return;
                    t = e.toArray()
                }
                this._observe(t)
            }
            ,
            t.unobserve = function(e) {
                e && this.intersectionObserverEnable && this.observer.unobserve(e)
            }
            ,
            t.unobserveAll = function() {
                this.items.forEach(e=>this.observer.unobserve(e)),
                this.items.clear()
            }
            ,
            t.destroy = function() {
                var e;
                this.items.clear(),
                null === (e = this.observer) || void 0 === e || e.disconnect()
            }
            ,
            e
        }();

    }
    , {}],
    150: [function(require, module, exports) {
        "use strict";
        function _defineProperty(e, t, r) {
            return (t = _toPropertyKey(t))in e ? Object.defineProperty(e, t, {
                value: r,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = r,
            e
        }
        function _toPropertyKey(e) {
            var t = _toPrimitive(e, "string");
            return "symbol" == typeof t ? t : String(t)
        }
        function _toPrimitive(e, t) {
            if ("object" != typeof e || !e)
                return e;
            var r = e[Symbol.toPrimitive];
            if (void 0 !== r) {
                var i = r.call(e, t || "default");
                if ("object" != typeof i)
                    return i;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === t ? String : Number)(e)
        }
        !function() {
            let e = function() {
                function e() {}
                return e.canShowWalletDiscount = function(t=0, r="", i=0, n=0) {
                    return wb.global.settings.variables.walletDiscountPercent > 0 && (n || wb.global.settings.variables.walletDiscountDisplayMaxPrice) >= t && "RUB" === r && (0 === i || -1 === e.disabledSellers.indexOf(i))
                }
                ,
                e.calculateDiscount = function(e=0, t=0, r="") {
                    if (!t)
                        return 0;
                    let i = e * (t / 100);
                    const n = $.views.helpers.minFiscalPriceInCurrency(r);
                    return i < n ? n : Math.ceil(i / n) * n
                }
                ,
                e
            }();
            _defineProperty(e, "disabledSellers", [26308, 291470, 2044, 107529, 202]),
            wb.priceHelper = e
        }();

    }
    , {}],
    151: [function(require, module, exports) {
        "use strict";
        let ProductCardPopup = null
          , ProductCardPopupHelper = function() {
            function r() {
                this.productCardPopup = null,
                this.processing = !1,
                this.currentData = null,
                this.targetData = null,
                this.onPopupShow = this.onPopupShow.bind(this)
            }
            var t = r.prototype;
            return t.showSlider = async function(r, t, o) {
                if (!this.$isDesktop)
                    return void this.$router.moveTo($.views.converters.urlForGood(r.cod1S, !0, r.newTargetUrl, null, !1, r.chrtId));
                const {observeDisplayMode: e, removeObserver: s} = this._createObservable();
                if (wb.displayModeSettings.addObserver(e),
                r.onHideCallback = s,
                await this._processingPopup(r.cod1S, r.chrtId, r.newTargetUrl, o))
                    try {
                        await ProductCardPopup.showSlider(r, t, o)
                    } catch (r) {
                        this._onShowError(s)
                    } finally {
                        this.onPopupShow()
                    }
            }
            ,
            t.show = async function(r, t, o, e, s) {
                if (!this.$isDesktop)
                    return void this.$router.moveTo($.views.converters.urlForGood(r, !0, o, null, !1, t));
                const {observeDisplayMode: n, removeObserver: i} = this._createObservable();
                if (wb.displayModeSettings.addObserver(n),
                await this._processingPopup(r, t, o, null))
                    try {
                        await ProductCardPopup.show(r, t, o, e, i, s)
                    } catch (r) {
                        this._onShowError(i)
                    } finally {
                        this.onPopupShow()
                    }
            }
            ,
            t.onPopupShow = async function() {
                this.processing = !1,
                this.currentData = null,
                this.targetData = null
            }
            ,
            t._processingPopup = async function(r, t, o, e) {
                var s;
                return this.processing ? (r != (null === (s = this.currentData) || void 0 === s ? void 0 : s.cod1S) && (this.targetData = {
                    cod1S: r,
                    chrtId: t,
                    newTargetUrl: o,
                    cardIndex: e
                }),
                !1) : (this.processing = !0,
                this.currentData = {
                    cod1S: r,
                    chrtId: t,
                    newTargetUrl: o,
                    cardIndex: e
                },
                await this._loadProductCardPopup(),
                !0)
            }
            ,
            t._loadProductCardPopup = async function() {
                if (this.productCardPopup)
                    return;
                const r = await this.$moduleLoader.loadModuleAsync("productCardPopup");
                ProductCardPopup = r;
                window.addEventListener("spaTransition", (()=>{
                    this.processing = !1,
                    this.currentData = null,
                    this.targetData = null
                }
                ).bind(this))
            }
            ,
            t._createObservable = function() {
                const r = ()=>wb.displayModeSettings.removeObserver(t)
                  , t = ()=>{
                    var t;
                    null === (t = this.productCardPopup) || void 0 === t || t.hidePopup(),
                    r()
                }
                ;
                return {
                    observeDisplayMode: t,
                    removeObserver: r
                }
            }
            ,
            t._onShowError = function(r) {
                navigator.onLine || wb.popup.renderModalError("Internet connection is lost"),
                null == r || r(),
                this.processing = !1,
                this.currentData = null,
                this.targetData = null
            }
            ,
            r
        }();
        module.exports = ProductCardPopupHelper;

    }
    , {}],
    152: [function(require, module, exports) {
        "use strict";
        !function() {
            let t, o, e = function() {
                function e() {}
                return e.getById = async function(t) {
                    const o = await this.getPromotions();
                    if (o[t])
                        return o[t]
                }
                ,
                e.getPromotions = async function() {
                    if (this._promotions)
                        return this._promotions;
                    {
                        o || (await this._startUpdate(),
                        o = setInterval(this._startUpdate, 18e4));
                        const t = localStorage.getObject("promotions");
                        return t ? (this._promotions = t,
                        this._promotions) : {}
                    }
                }
                ,
                e._startUpdate = async function() {
                    e.prototype.$httpClient.fetchText("/webapi/settings/promo/hash", {
                        method: "GET"
                    }, {
                        noProcessResponse: !0
                    }).then(o=>{
                        o && o !== localStorage.getObject("promotions-hash") && e.prototype.$httpClient.fetchJSON("/webapi/settings/promo/get", {
                            method: "GET",
                            headers: {
                                "Content-Type": "application/json"
                            }
                        }, {
                            noProcessResponse: !0
                        }).then(e=>{
                            t = {},
                            e.forEach(o=>t[o.id] = o),
                            localStorage.putObject("promotions", t),
                            localStorage.putObject("promotions-hash", o)
                        }
                        ).catch()
                    }
                    ).catch()
                }
                ,
                e
            }();
            module.exports = e
        }();

    }
    , {}],
    153: [function(require, module, exports) {
        "use strict";
        let RecentViewHelper = function() {
            function e() {}
            return e.get = function() {
                const t = localStorage.getObject(e.storageKey()) || {
                    url: [],
                    query: [],
                    nm: []
                };
                return t.nm = t.nm.map(e=>e.nmId),
                t
            }
            ,
            e.getRecentWithTimestamp = function() {
                return localStorage.getObject(e.storageKey()) || {
                    url: [],
                    query: [],
                    nm: []
                }
            }
            ,
            e.addProduct = function(t) {
                ("number" == typeof t || "string" == typeof t && !isNaN(Number(t))) && e.putInStorage("nm", t, 100)
            }
            ,
            e.putInStorage = function(t, n, r) {
                let o = e.getRecentWithTimestamp()
                  , c = {
                    time: parseInt(Date.now() / 1e3),
                    nmId: n
                }
                  , a = o[t];
                const u = a.indexOf(c);
                0 !== u && (u > 0 && a.splice(u, 1),
                a.unshift(c),
                a.length > r && (a.length = r),
                o[t] = a,
                e.clearPrevStorage(),
                localStorage.putObject(e.storageKey(), o))
            }
            ,
            e.storageKey = function() {
                return `recentViewsV2-${WbSpaModel.prototype.$user.getId()}`
            }
            ,
            e.clearPrevStorage = function() {
                const e = `recentViews-${WbSpaModel.prototype.$user.getId()}`;
                localStorage.removeItem(e)
            }
            ,
            e
        }();
        module.exports = RecentViewHelper;

    }
    , {}],
    154: [function(require, module, exports) {
        "use strict";
        let SeoHelper = function() {
            function e() {
                this.items = [],
                this.requestUrl = ""
            }
            var t = e.prototype;
            return t.init = function(e, t, r) {
                this.requestUrl = t,
                this.items = e.map(e=>{
                    try {
                        var t;
                        return document.querySelector(`${e.tagName}${Object.keys(null !== (t = e.attributesDictionary) && void 0 !== t ? t : {}).map(t=>`[${t}='${e.attributesDictionary[t].replace(/[\n\r]/g, "").replace(/["']/g, "\\$&")}']`).join("")}`)
                    } catch (e) {
                        return console.error(e.message),
                        null
                    }
                }
                ),
                this.defaultTitle = r
            }
            ,
            t.update = async function(e, t=null) {
                return this._loadMetaTags(null != t ? t : this.requestUrl, e).then(e=>{
                    if (this.delete(),
                    (null != e ? e : []).length > 0)
                        return this._renderMetatags(e),
                        e;
                    this._renderDefaultTitle()
                }
                ).catch(()=>void 0)
            }
            ,
            t.render = function(e) {
                this.delete(),
                (null != e ? e : []).length > 0 ? this._renderMetatags(e) : this._renderDefaultTitle()
            }
            ,
            t.loadMetaTags = async function(e, t) {
                if (e.metaTags)
                    return this.render(e.metaTags);
                const r = await this.update(window.location.pathname, WbSpaModel.prototype.$router.currentRoute.metaTagsUrl);
                if (!r)
                    return;
                const n = r.find(e=>"H1" === e.tagName);
                if (n && window.requestAnimationFrame(()=>$.observable(e).setProperty({
                    title: n.hTMLContent
                })),
                t) {
                    const t = r.find(e=>"bottomText" === e.tagName);
                    t && window.requestAnimationFrame(()=>$.observable(e).setProperty({
                        bottomText: t.hTMLContent
                    }))
                }
            }
            ,
            t.delete = function() {
                this.items.forEach(e=>null == e ? void 0 : e.remove()),
                this.items.length = 0
            }
            ,
            t._loadMetaTags = function(e, t) {
                if (!e)
                    return Promise.resolve();
                const r = new URLSearchParams(this.$router.queryParams);
                let n;
                return r.append("targetUrl", encodeURIComponent(("/" === t[0] ? "" : "/") + t)),
                e.indexOf("{*category}") > -1 && (e = e.replace("{*category}", this.$router.routeParameters.category)),
                e.indexOf("{brandBasePath}") > -1 && "/" === (e = e.replace("{brandBasePath}", this.$router.routeParameters.brandBasePath))[e.length - 1] && (e = e.slice(0, -1)),
                e.indexOf("{promoBasePath}") > -1 && "/" === (e = e.replace("{promoBasePath}", this.$router.routeParameters.promoBasePath))[e.length - 1] && (e = e.slice(0, -1)),
                n = e,
                this.$httpClient.fetchJSON(n + "?" + r).then(e=>Promise.resolve(null == e ? void 0 : e.metaTags)).catch(r=>(r.isCancelled || "" === r.message || (console.error(r.message),
                console.error(`Error loading meta tags for path ${t} by requesting ${e}`)),
                Promise.resolve()))
            }
            ,
            t._renderMetatags = function(e) {
                const t = document.createDocumentFragment();
                e.forEach(e=>{
                    var r;
                    if ("H1" === e.tagName)
                        return;
                    if ("bottomText" === e.tagName)
                        return;
                    const n = document.createElement(e.tagName);
                    Object.keys(null !== (r = e.attributesDictionary) && void 0 !== r ? r : {}).forEach(t=>n.setAttribute(t, e.attributesDictionary[t])),
                    (e.hTMLContent || e.htmlContent) && (n.innerHTML = e.hTMLContent || e.htmlContent),
                    this.items.push(n),
                    t.appendChild(n)
                }
                ),
                document.head.appendChild(t)
            }
            ,
            t._renderDefaultTitle = function() {
                const e = document.createElement("title");
                e.innerHTML = this.defaultTitle,
                this.items.push(e),
                document.head.appendChild(e)
            }
            ,
            e
        }();
        module.exports = new SeoHelper;

    }
    , {}],
    155: [function(require, module, exports) {
        "use strict";
        function _defineProperties(e, r) {
            for (var t = 0; t < r.length; t++) {
                var n = r[t];
                n.enumerable = n.enumerable || !1,
                n.configurable = !0,
                "value"in n && (n.writable = !0),
                Object.defineProperty(e, _toPropertyKey(n.key), n)
            }
        }
        function _createClass(e, r, t) {
            return r && _defineProperties(e.prototype, r),
            t && _defineProperties(e, t),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            e
        }
        function _toPropertyKey(e) {
            var r = _toPrimitive(e, "string");
            return "symbol" == typeof r ? r : String(r)
        }
        function _toPrimitive(e, r) {
            if ("object" != typeof e || !e)
                return e;
            var t = e[Symbol.toPrimitive];
            if (void 0 !== t) {
                var n = t.call(e, r || "default");
                if ("object" != typeof n)
                    return n;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === r ? String : Number)(e)
        }
        !function() {
            const e = {
                short: 9e5,
                halfHour: 18e5,
                normal: 36e5
            };
            Object.freeze(e);
            let r = function() {
                function r() {}
                return r.createStorageHelperItem = function(e, r, n) {
                    return new t(e,r,n)
                }
                ,
                r.supportIndexedDb = function() {
                    return null != window.indexedDB
                }
                ,
                r.metadataTableName = function(e) {
                    return e + "_metadata"
                }
                ,
                r.openDb = function(e, r={}) {
                    return new Promise((t,n)=>{
                        var o;
                        const i = indexedDB.open(e, null !== (o = null == r ? void 0 : r.version) && void 0 !== o ? o : 1);
                        i.onupgradeneeded = (e=>{
                            var t;
                            null === (t = r.onupgradeneeded) || void 0 === t || t.call(r, e.target.result)
                        }
                        ),
                        i.onsuccess = (e=>{
                            t(e.target.result)
                        }
                        ),
                        i.onerror = (r=>{
                            n(new Error(`[StorageHelper]: Database cannot be opened db_name=${e} error=${i.error}`))
                        }
                        )
                    }
                    )
                }
                ,
                r.setItem = function(e, r, t) {
                    return new Promise((n,o)=>{
                        const i = e.transaction([r], "readwrite").objectStore(r).put(t);
                        i.onsuccess = n,
                        i.onerror = (e=>{
                            console.error(e.message),
                            o("Error while setting item from indexedDb")
                        }
                        )
                    }
                    )
                }
                ,
                r.addItem = function(e, r, t, n) {
                    return new Promise((o,i)=>{
                        const s = e.transaction([r], "readwrite").objectStore(r).add(t);
                        s.onsuccess = (e=>o(e.target.result)),
                        s.onerror = (e=>{
                            !n && console.error(e.message),
                            i("Error while setting item from indexedDb")
                        }
                        )
                    }
                    )
                }
                ,
                r.setItems = function(e, r, t, n) {
                    return new Promise((o,i)=>{
                        let s = e.transaction([r], "readwrite")
                          , a = s.objectStore(r);
                        a.clear(),
                        n.forEach(e=>{
                            e.__expiredAt__ = t,
                            a.add(e)
                        }
                        ),
                        s.oncomplete = o,
                        s.onerror = (e=>{
                            console.error(e.message),
                            i("Error while setting item from indexedDb")
                        }
                        )
                    }
                    )
                }
                ,
                r.getAll = function(e, r) {
                    return new Promise((t,n)=>{
                        const o = e.transaction([r]).objectStore(r).getAll();
                        o.onsuccess = (e=>t(e.target.result)),
                        o.onerror = (()=>n("Error while getting item from indexedDb"))
                    }
                    )
                }
                ,
                r.get = function(e, r, t) {
                    return new Promise((n,o)=>{
                        const i = e.transaction([r]).objectStore(r).get(t);
                        i.onsuccess = (e=>n(e.target.result)),
                        i.onerror = (()=>o("Error while getting item from indexedDb"))
                    }
                    )
                }
                ,
                r.getItem = function(e, t, n) {
                    return new Promise((o,i)=>{
                        const s = e.transaction([t]).objectStore(t).get(n);
                        s.onsuccess = (i=>{
                            const s = i.target.result;
                            return s && s.__expiredAt__ <= Date.now() ? (r.removeItem(e, t, n),
                            o(null)) : o(i.target.result)
                        }
                        ),
                        s.onerror = (()=>i("Error while getting item from indexedDb"))
                    }
                    )
                }
                ,
                r.removeItem = function(e, r, t) {
                    return new Promise((n,o)=>{
                        const i = e.transaction([r], "readwrite").objectStore(r).delete(t);
                        i.onsuccess = n,
                        i.onerror = (()=>o("Error while removing item from indexedDb"))
                    }
                    )
                }
                ,
                r.updateItem = function(e, r, t, n) {
                    return new Promise((o,i)=>{
                        const s = e.transaction([r], "readwrite").objectStore(r).put(t, n);
                        s.onsuccess = o,
                        s.onerror = (e=>{
                            console.error(e.message),
                            i("Error while updating item in indexedDb")
                        }
                        )
                    }
                    )
                }
                ,
                r.clear = function(e, r) {
                    return new Promise((t,n)=>{
                        const o = e.transaction([r], "readwrite").objectStore(r).clear();
                        o.onsuccess = t,
                        o.onerror = (()=>n("Error while removing item from indexedDb"))
                    }
                    )
                }
                ,
                r.removeDb = function(e) {
                    return new Promise((r,t)=>{
                        const n = indexedDB.deleteDatabase(e);
                        n.onsuccess = r,
                        n.onerror = (()=>t("Error while removing database"))
                    }
                    )
                }
                ,
                r.exec = function(e, r, t) {
                    if ("function" == typeof t)
                        return new Promise((n,o)=>{
                            const i = e.transaction([r]).objectStore(r)
                              , s = t(i);
                            s.onsuccess = (e=>n(e.target.result)),
                            s.onerror = (()=>o("Error while getting item from indexedDb"))
                        }
                        )
                }
                ,
                r.withCursor = function(e, r, t, n) {
                    return new Promise((o,i)=>{
                        let s = e.transaction([r], "readwrite").objectStore(r);
                        t && (s = s.index(t));
                        const a = s.openCursor();
                        a.onsuccess = (e=>{
                            const r = e.target.result;
                            r ? (n(r.key, r.value, r),
                            r.continue()) : o()
                        }
                        ),
                        a.onerror = (()=>i("Error while getting item from indexedDb"))
                    }
                    )
                }
                ,
                r.objectStorePromise = function(e, r, t) {
                    return new Promise((n,o)=>{
                        const i = e.objectStore(r)
                          , s = t(i);
                        s.onsuccess = (e=>n(e.target.result)),
                        s.onerror = (()=>o("Error while work on objectStore from indexedDb"))
                    }
                    )
                }
                ,
                r.withTransaction = function(e, r, t) {
                    return new Promise((n,o)=>{
                        const i = e.transaction(r, "readwrite");
                        t(i).then(e=>{}
                        ),
                        i.onsuccess = n(i),
                        i.onerror = (()=>o("Error while open transaction in indexedDb on :" + r.join(",")))
                    }
                    )
                }
                ,
                _createClass(r, null, [{
                    key: "cacheActivityType",
                    get: function() {
                        return e
                    }
                }]),
                r
            }()
              , t = function() {
                function e(e, r, t=1) {
                    if (null == e || "" == e)
                        throw new Error("creating database without name is impossible");
                    this.databaseName = e,
                    this.databaseVersion = t,
                    this.onupgradeneeded = r
                }
                var t = e.prototype;
                return t.updateCacheAsync = function(e, t, n, o, i) {
                    return i = {
                        saveAllDb: !1,
                        getResultFunc: e=>e,
                        ...i
                    },
                    r.supportIndexedDb() ? this._getItemFromDb(e, t, n, o, i) : this._getItemFromLocalStorage(e, t, n, o, i)
                }
                ,
                t._getItemFromDb = function(e, t, n, o, i) {
                    let s;
                    return r.openDb(this.databaseName, {
                        version: this.databaseVersion,
                        onupgradeneeded: this.onupgradeneeded
                    }).then(n=>(s = n,
                    r.getItem(s, e, t))).then(t=>null != t ? Promise.resolve(t) : o().then(t=>{
                        null != t && (i.saveAllDb ? r.setItems(s, e, Date.now() + n, t) : r.setItem(s, e, {
                            __expiredAt__: Date.now() + n,
                            ...t
                        }));
                        const o = i.getResultFunc(t);
                        return Promise.resolve(o)
                    }
                    ))
                }
                ,
                t._getItemFromLocalStorage = function(e, r, t, n, o) {
                    const i = o.saveAllDb ? `${this.databaseName};${this.databaseVersion};${e}` : `${this.databaseName};${this.databaseVersion};${e};${r}`
                      , s = localStorage.getItem(i)
                      , a = s ? JSON.parse(s) : null;
                    if ((null == a ? void 0 : a.__expiredAt__) >= Date.now() && (!o.saveAllDb || !!a.items.length)) {
                        const e = o.getResultFunc(o.saveAllDb ? a.items : a);
                        return Promise.resolve(e)
                    }
                    return n().then(e=>{
                        const r = o.saveAllDb ? {
                            items: e
                        } : e;
                        return r.__expiredAt__ = Date.now() + t,
                        localStorage.setItem(i, JSON.stringify(r)),
                        Promise.resolve(o.getResultFunc(e))
                    }
                    )
                }
                ,
                e
            }();
            module.exports = r
        }();

    }
    , {}],
    156: [function(require, module, exports) {
        "use strict";
        var _UserHelper;
        function _defineProperties(e, t) {
            for (var a = 0; a < t.length; a++) {
                var r = t[a];
                r.enumerable = r.enumerable || !1,
                r.configurable = !0,
                "value"in r && (r.writable = !0),
                Object.defineProperty(e, _toPropertyKey(r.key), r)
            }
        }
        function _createClass(e, t, a) {
            return t && _defineProperties(e.prototype, t),
            a && _defineProperties(e, a),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            e
        }
        function _defineProperty(e, t, a) {
            return (t = _toPropertyKey(t))in e ? Object.defineProperty(e, t, {
                value: a,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = a,
            e
        }
        function _toPropertyKey(e) {
            var t = _toPrimitive(e, "string");
            return "symbol" == typeof t ? t : String(t)
        }
        function _toPrimitive(e, t) {
            if ("object" != typeof e || !e)
                return e;
            var a = e[Symbol.toPrimitive];
            if (void 0 !== a) {
                var r = a.call(e, t || "default");
                if ("object" != typeof r)
                    return r;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === t ? String : Number)(e)
        }
        require("../../currencies");
        const SYS_AUTH_KEY = "_sys_auth"
          , USER_BALANCE_KEY = "user-balance";
        let UserHelper = function() {
            function e() {
                var t;
                for (const t in e.syncData)
                    e.syncData[t].init();
                this.balance = localStorage.getObject(e.storageKey(USER_BALANCE_KEY)),
                this.balance && (this._savedBalance = Object.assign(this.balance)),
                this._balanceTs = (null === (t = this.balance) || void 0 === t ? void 0 : t.balanceTs) || 0,
                window.addEventListener("storage", this._onSync.bind(this))
            }
            var t = e.prototype;
            return t.getId = function() {
                return e._getUserId()
            }
            ,
            t.getIdInt = function() {
                const t = e._getUserId();
                return null == t || "0" === t ? 0 : decodeURIComponent(atob(t).split("").map(function(e) {
                    return "%" + ("00" + e.charCodeAt(0).toString(16)).slice(-2)
                }).join("")).split("").map(function(e) {
                    return String.fromCharCode(129 ^ e.charCodeAt(0))
                }).join("").substring(5)
            }
            ,
            t.getUserInfo = function() {
                return new Promise((e,t)=>{
                    this._initBasketShortInfo().then(t=>{
                        e(t.userInfo)
                    }
                    )
                }
                )
            }
            ,
            t.getBasketShortInfo = function() {
                return new Promise((e,t)=>{
                    this._initBasketShortInfo().then(t=>{
                        e(t.basketInfo)
                    }
                    )
                }
                )
            }
            ,
            t._initBasketShortInfo = function() {
                return this._getBasketShortInfo ? this._getBasketShortInfo : (this._getBasketShortInfo = new Promise((t,a)=>{
                    fetch("/webapi/basket/info", {
                        method: "POST"
                    }).then(async e=>{
                        const t = e.headers.get("Date");
                        return e.json().then(e=>Promise.resolve({
                            date: t,
                            data: e
                        }))
                    }
                    ).then(e=>{
                        const a = e.data;
                        a.IsAuthenticated || a.BasketUid || (a.BasketUid = this.$services.sessionService.getBasketUid()),
                        localStorage.setItem("_sys_auth", a.IsAuthenticated ? a.t : "unauth");
                        const r = this._initUser(a.IsAuthenticated, a.t, a.BasketUid);
                        wb.spa && wb.spa.setUserStatus({
                            userIsAuth: a.IsAuthenticated,
                            userUid: a.IsAuthenticated ? r.uid : a.BasketUid,
                            userIsEmp: a.IsEmp,
                            userId: parseInt(a.t, 10)
                        }),
                        wb.helpers.date.serverDate = new Date(e.date),
                        this.$eventBus.dispatchEvent(new CustomEvent("serverDate",{
                            detail: wb.helpers.date.serverDate
                        })),
                        t({
                            userInfo: r,
                            basketInfo: a
                        })
                    }
                    ).catch(async a=>{
                        var r;
                        const n = "0" !== e._getUserId()
                          , s = null === (r = this.$auth.jwtData) || void 0 === r ? void 0 : r.user
                          , i = this.$services.sessionService.getBasketUid()
                          , o = this._initUser(n, s, i);
                        wb.spa && wb.spa.setUserStatus({
                            userIsAuth: n,
                            userUid: n ? o.uid : null
                        }),
                        t({
                            userInfo: o,
                            basketInfo: {
                                IsAuthenticated: n
                            },
                            broken: !0
                        })
                    }
                    )
                }
                ),
                this._getBasketShortInfo)
            }
            ,
            t.getBalance = async function({force: t, timeout: a}={}) {
                var r, n;
                let s = !1;
                if (t || null !== (r = this._savedBalance) && void 0 !== r && r.balanceCurrency && this._savedBalance.balanceCurrency !== this.getCurrency() || !this.balance || this._balanceTs < (new Date).getTime()) {
                    this._balanceTs = (new Date).getTime() + 24e4;
                    try {
                        this.balance = await this.$httpClient.fetchJSON("/webapi/account/getsignedbalance", {
                            method: "POST"
                        }, a ? {
                            timeout: a
                        } : {}),
                        this.balance.balanceCurrency = this.getCurrency(),
                        this.balance.walletTypeCode = this._getWalletTypeCode(this.balance.walletType, this.balance.walletStatus),
                        this._savedBalance = Object.assign(this.balance),
                        this.balance.balanceTs = this._balanceTs,
                        localStorage.putObject(e.storageKey(USER_BALANCE_KEY), this.balance),
                        s = !0
                    } catch (e) {
                        if (!this._savedBalance)
                            throw this._balanceTs = (new Date).getTime() + 15e3,
                            e;
                        this.balance = Object.assign(this._savedBalance)
                    }
                }
                if (null === this.balance)
                    return this.balance;
                const i = null !== (n = this.balance[`moneyBalance${this.balance.balanceCurrency}`]) && void 0 !== n ? n : "RUB" === this.balance.balanceCurrency ? this.balance.moneyBalance : 0;
                return this.balance.totalBalance = i + ("RUB" === this.balance.balanceCurrency ? this.balance.bonusBalance + this.balance.walletBalance : 0),
                "RUB" === this.balance.balanceCurrency && (this.balance.totalBalance = Math.floor(Math.abs(this.balance.totalBalance) < 1 ? 0 : this.balance.totalBalance)),
                this.balance.totalBalanceRub = (this.balance.moneyBalanceRUB || 0) + (this.balance.bonusBalance || 0) + (this.balance.walletBalance || 0),
                this.balance.totalBalanceRub = Math.floor(Math.abs(this.balance.totalBalanceRub) < 1 ? 0 : this.balance.totalBalanceRub),
                s && this.$eventBus.dispatchEvent(new CustomEvent("BalanceUpdated",{
                    detail: this.balance
                })),
                this.balance
            }
            ,
            t._getWalletTypeCode = function(e="", t="") {
                return "rejected" === t || "closed" === t ? 0 : "verified" === e ? 2 : "anonymous" === e ? 1 : 0
            }
            ,
            t.resetBalance = function() {
                this.balance = null,
                this.$eventBus.dispatchEvent(new CustomEvent("BalanceReset"))
            }
            ,
            t.getInstallmentLimit = async function() {
                return "0" === this.getId() ? 0 : ((!this.installmentLimit || this._installmentLimitTs < Date.now()) && (this._installmentLimitTs = Date.now() + 18e4,
                this.installmentLimit = await this.$httpClient.fetchJSON(`${this.$services.cartService.publicBasketApiUrl}/lk/account/getinstlimit`, {
                    method: "POST",
                    credentials: "include"
                })),
                this.installmentLimit)
            }
            ,
            t.resetInstallmentLimit = function() {
                this.installmentLimit = null
            }
            ,
            t.getUserGrade = async function(e="RUB") {
                if (!this.$isWbxOrderEnabled() && !this.$isUserGradeEnabled())
                    return null;
                let t = localStorage.getObject("wbx_user_grade");
                if (this.$auth.jwtData.user !== localStorage.user_id && (t = null),
                null == t || t.expire < Date.now() || this.$auth.jwtData.user !== t.user_id || t.currency !== e)
                    try {
                        const a = await this.$wbxHttpClient.fetch(`https://user-grade.wildberries.ru/api/v3/grade?curr=${e}`);
                        if (!a.ok)
                            throw new Error(`resp_status=${a.status}`);
                        const r = await a.json();
                        if (null == r.payload || 0 !== r.state)
                            throw new Error(`resp=${JSON.stringify(a || {})}`);
                        (t = r.payload).sign = r.sign,
                        t.expire = Date.now() + 3e5,
                        localStorage.putObject("wbx_user_grade", t)
                    } catch (e) {
                        wb.spa.logError(e, "[WBX_USER_GRADE]: failed to fetch user grade data")
                    }
                return t || {
                    spp: 0,
                    postpaid_limit: 0,
                    currency: e
                }
            }
            ,
            t.reset = function() {
                wb.cookieHelper.deleteCookie("access_token"),
                this._getBasketShortInfo = null,
                this.resetBalance(),
                this.clearXInfo(),
                this.$services.userData.clear(),
                this.$services.groupedDeliveriesService.resetCache()
            }
            ,
            t.clearLocalUserData = function() {
                this.$services.userData.clearLocalUserInfo(),
                localStorage.removeItem(e.storageKey(USER_BALANCE_KEY))
            }
            ,
            t._initUser = function(e, t, a) {
                let r = {
                    uid: 0,
                    basketUid: void 0,
                    isAuth: !1
                };
                if (e) {
                    const e = wb.cookieHelper.getCookie("um");
                    e && e.split(":").map(e=>{
                        const t = e.split("=");
                        r[t[0]] = decodeURIComponent(t[1])
                    }
                    ),
                    r.isAuth = !0,
                    r.t = t
                } else
                    r.basketUid = a;
                const n = r.isAuth ? r.uid : ""
                  , s = r.isAuth ? r.t : "";
                return wb.analitics.sendUserEvent(n, s),
                wb.analitics.sendSessionStartEvent(),
                r
            }
            ,
            e._getUserId = function() {
                let e = "0";
                const t = wb.cookieHelper.getCookie("um");
                if (t)
                    t.split(":").map(t=>{
                        const a = t.split("=");
                        "uid" === a[0] && (e = decodeURIComponent(a[1]))
                    }
                    );
                else {
                    const {userUid: t} = WbSpaModel.prototype.$auth.um;
                    t && (e = t)
                }
                return e
            }
            ,
            t._getUserData = async function() {
                return e.syncData.userData.time <= Date.now() && !e.syncData.userData.updateInProgress && await this._xInfoUpdate(),
                e.syncData.userData.data
            }
            ,
            e.storageKey = function(t) {
                return `${t}-${e._getUserId()}`
            }
            ,
            t._xInfoUpdate = async function() {
                const t = e.syncData.userData;
                t.updateInProgress = !0;
                const a = e.storageKey(t.prefix);
                await navigator.locks.request(`lock-${a}`, async r=>{
                    const n = e.syncData.userData;
                    if (!n || n.time < Date.now()) {
                        const e = null == t ? void 0 : t.data;
                        let r = new URLSearchParams;
                        (null == e ? void 0 : e.currency) && r.set("currency", e.currency),
                        e && (r.set("latitude", e.latitude),
                        r.set("longitude", e.longitude),
                        r.set("locale", e.locale),
                        r.set("address", e.address),
                        r.set("dt", e.dt || "0"));
                        const n = t.fetchParam.url(r)
                          , i = await WbSpaModel.prototype.$httpClient.fetchBasicJSON(n, {
                            credentials: "include"
                        }, {
                            timeout: t.fetchParam.timeout,
                            nullOnError: !0,
                            addAuthHeader: !0
                        });
                        if (i) {
                            var s;
                            const e = null === (s = localStorage.getObject(a)) || void 0 === s ? void 0 : s.data
                              , r = {
                                time: Date.now() + t.interval,
                                data: {
                                    ...e,
                                    ...i
                                }
                            };
                            localStorage.putObject(a, r),
                            Object.assign(t, r),
                            this._checkForRefresh(e, i)
                        } else
                            e.time = Date.now() + 1e4
                    } else
                        n && n.time !== t.time && Object.assign(t, n);
                    t.updateInProgress = !1
                }
                )
            }
            ,
            t.getXinfo = function() {
                return this._getUserData().then(e=>Promise.resolve(e.xinfo))
            }
            ,
            t.getXinfoWithClustersAndVectors = function(t) {
                return this._checkNeedUpdateData(e.syncData.userClusters),
                this._checkNeedUpdateData(e.syncData.userVector),
                this._getUserData().then(a=>{
                    var r;
                    let n = e.syncData.userClusters.data.length > 0 ? a.xinfo + `&uclusters=${e.syncData.userClusters.data.join(",")}` : a.xinfo;
                    if (wb.global.settings.switches.addUserVector && t && null !== (r = e.syncData.userVector) && void 0 !== r && null !== (r = r.data[t]) && void 0 !== r && r.value) {
                        const a = e.syncData.userVector.data[t];
                        n += `&uv=${a.value}&uiv=${a.version}`
                    }
                    return Promise.resolve(n)
                }
                )
            }
            ,
            t.getUserClusters = function() {
                return this._checkNeedUpdateData(e.syncData.userClusters),
                e.syncData.userClusters.data.join(",")
            }
            ,
            t.getBannersClusters = function() {
                return this._checkNeedUpdateData(e.syncData.userClustersBanners),
                e.syncData.userClustersBanners.data.length > 0 ? e.syncData.userClustersBanners.data : []
            }
            ,
            t.getXinfoSignedV1 = function() {
                return this._getUserData().then(e=>Promise.resolve({
                    xinfo: e.xinfo,
                    userDataSign: e.userDataSign,
                    addressDataSign: e.addressDataSign,
                    shard: e.shard,
                    latitude: e.latitude,
                    longitude: e.longitude,
                    address: e.address
                }))
            }
            ,
            t.getLocationData = async function() {
                const e = await this._getUserData();
                return {
                    latitude: e.latitude,
                    longitude: e.longitude,
                    address: e.address,
                    destinations: e.destinations
                }
            }
            ,
            t.setGeo = async function(t, a, r, n, s, i) {
                if (t && a && r) {
                    var o;
                    const c = e.syncData.userData
                      , l = e.storageKey(c.prefix)
                      , u = `officeId=${n}&dest=${s}&sign=${i}`
                      , d = {
                        ...null == c ? void 0 : c.data,
                        ...null === (o = localStorage.getObject(l)) || void 0 === o ? void 0 : o.data,
                        latitude: t,
                        longitude: a,
                        address: r,
                        dt: Date.now() / 1e3 | 0,
                        addressDataSign: u,
                        relevant: !1
                    };
                    s && (d.xinfo = this._changeXDest(d.xinfo, s));
                    const h = {
                        data: d,
                        time: e._timeInPast(c.interval)
                    };
                    Object.assign(c, h),
                    localStorage.putObject(l, h),
                    WbSpaModel.prototype.$geoLocation.setCityName(r),
                    await this._xInfoUpdate()
                }
            }
            ,
            t.setCurrency = async function(t) {
                if (t) {
                    var a;
                    const r = e.syncData.userData
                      , n = e.storageKey(r.prefix)
                      , s = {
                        ...null == r ? void 0 : r.data,
                        ...null === (a = localStorage.getObject(n)) || void 0 === a ? void 0 : a.data,
                        currency: t,
                        relevant: !1
                    };
                    s.xinfo = this._changeXCurrency(s.xinfo, t),
                    Object.assign(r, {
                        data: s,
                        time: e._timeInPast(r.interval)
                    }),
                    await this._xInfoUpdate()
                }
            }
            ,
            t.clearXInfo = function() {
                for (const t in e.syncData)
                    e.syncData[t].time = e._timeInPast(e.syncData[t].interval);
                Object.keys(localStorage).forEach(t=>{
                    for (const a in e.syncData)
                        -1 !== t.indexOf(e.syncData[a].prefix) && localStorage.removeItem(t)
                }
                )
            }
            ,
            t.getShardAsync = async function() {
                return (await this._getUserData()).shard
            }
            ,
            t.getIp = function() {
                return e.syncData.userData.data.ip
            }
            ,
            t.getCurrency = function() {
                return e.syncData.userData.data.currency
            }
            ,
            t.getCurrencyAsync = async function() {
                return (await this._getUserData()).currency
            }
            ,
            t.getLocale = function() {
                return e.syncData.userData.data.locale
            }
            ,
            t._changeXCurrency = function(e, t) {
                const a = `$1${t.toLowerCase()}$3`;
                return e.replace(/(&curr=)(.*?)(&)/, a)
            }
            ,
            t._changeXDest = function(e, t) {
                const a = `$1${t}$3`;
                return e.replace(/(&dest=)(.*?)(&)/, a)
            }
            ,
            e.getXCurrency = function(e) {
                var t;
                return null === (t = /curr=(.*?)&/.exec(e)) || void 0 === t ? void 0 : t[1]
            }
            ,
            t._checkForRefresh = function(t, a, r) {
                var n;
                let s = !1;
                var i, o, c;
                (null == t ? void 0 : t.currency) !== (null == a ? void 0 : a.currency) && (e._checkCurrencyInvalid(a) && location.reload(),
                null === (i = wb.spa.getMainLayout().header) || void 0 === i || i.changeCurrency.refresh(a.currency),
                s = !0);
                ((null == t ? void 0 : t.destinations[t.destinations.length - 1]) !== (null == a ? void 0 : a.destinations[a.destinations.length - 1]) && (s = !0),
                null != a && a.address && (null === (n = WbSpaModel.prototype.$geoLocation.location) || void 0 === n ? void 0 : n.address) !== (null == a ? void 0 : a.address) && WbSpaModel.prototype.$geoLocation.updateLocation(),
                s) && (this.$eventBus.dispatchEvent(new CustomEvent("GeoUpdated")),
                null === (o = wb.spa) || void 0 === o || null === (o = o.getMainLayout()) || void 0 === o || null === (o = o.menuTop) || void 0 === o || o.refreshMenu((null == t ? void 0 : t.locale) !== (null == a ? void 0 : a.locale)),
                this.$router.clearNotActiveContainer(),
                (r || WbSpaModel.prototype.$router.currentRoute && "SpaBasketEntrypoint" !== WbSpaModel.prototype.$router.currentRoute.name && "SpaBasketBuyItNowEntrypoint" !== WbSpaModel.prototype.$router.currentRoute.name) && (null === (c = wb.spa) || void 0 === c || c.refresh()))
            }
            ,
            t._onSync = function({key: t, oldValue: a, newValue: r}) {
                if ("_sys_auth" === t && r) {
                    if (a !== r) {
                        if (this._getBasketShortInfo = null,
                        "unauth" === r && this.$router.userIsAuth)
                            return void location.reload();
                        this.$services.userData.clear(),
                        this.$eventBus.dispatchEvent(new CustomEvent("UserReset"))
                    }
                } else if (t === e.storageKey(e.syncData.userData.prefix)) {
                    if (r) {
                        const t = JSON.parse(a)
                          , n = JSON.parse(r);
                        Object.assign(e.syncData.userData, n),
                        this._checkForRefresh(null == t ? void 0 : t.data, n.data, !0)
                    }
                } else
                    for (const a in e.syncData)
                        if (t === e.storageKey(e.syncData[a].prefix)) {
                            const t = JSON.parse(r);
                            Object.assign(e.syncData[a], t)
                        }
            }
            ,
            e._getFallbackData = function() {
                const t = e._getDefaultLocale()
                  , a = e._getDefaultCurrency(t);
                let r;
                switch (t) {
                case "ru":
                    r = {
                        xinfo: `appType=1&curr=${a.toLowerCase()}&dest=-1257786&locale=${t}&spp=30&lang=${WbSpaModel.prototype.$helper.currentCulture}`,
                        address: "Москва",
                        latitude: 55.753737,
                        longitude: 37.6201,
                        currency: a,
                        destinations: [-1029256, -102269, -2162196, -1257786]
                    };
                    break;
                case "by":
                    r = {
                        xinfo: `appType=1&curr=${a.toLowerCase()}&dest=-8139704&locale=${t}&spp=30&lang=${WbSpaModel.prototype.$helper.currentCulture}`,
                        address: "Минск",
                        latitude: 53.901328,
                        longitude: 27.549044,
                        currency: a,
                        destinations: [12358386, 12358403, -70563, -8139704]
                    };
                    break;
                case "kz":
                    r = {
                        xinfo: `appType=1&curr=${a.toLowerCase()}&dest=85&locale=${t}&spp=30&lang=${WbSpaModel.prototype.$helper.currentCulture}`,
                        address: "Нур-Султан",
                        latitude: 51.129669,
                        longitude: 71.495475,
                        currency: a,
                        destinations: [12358388, 12358412, -3479876, 85]
                    };
                    break;
                case "kg":
                    r = {
                        xinfo: `appType=1&curr=${a.toLowerCase()}&dest=28&locale=${t}&spp=30&lang=${WbSpaModel.prototype.$helper.currentCulture}`,
                        address: "Бишкек",
                        latitude: 42.8618,
                        longitude: 74.5831,
                        currency: a,
                        destinations: [12358387, 12358395, -10860151, 28]
                    };
                    break;
                case "am":
                    r = {
                        xinfo: `appType=1&curr=${a.toLowerCase()}&dest=36&locale=${t}&spp=30&lang=${WbSpaModel.prototype.$helper.currentCulture}`,
                        address: "Ереван",
                        latitude: 40.177628,
                        longitude: 44.512547,
                        currency: a,
                        destinations: [12358387, 12358400, -13404218, 36]
                    };
                    break;
                case "uz":
                    r = {
                        xinfo: `appType=1&curr=${a.toLowerCase()}&dest=491&locale=${t}&spp=30&lang=${WbSpaModel.prototype.$helper.currentCulture}`,
                        address: "Ташкент",
                        latitude: 41.311158,
                        longitude: 69.279737,
                        currency: a,
                        destinations: [12358390, 12358442, -2448072, 491]
                    }
                }
                return r.locale = t,
                r.shard = 0,
                r
            }
            ,
            e._getDefaultCurrency = function(e) {
                return wb.currencies.getDefaultForLocale(e)
            }
            ,
            e._getDefaultLocale = function() {
                switch (document.location.hostname) {
                case "by.wildberries.ru":
                case "www.wildberries.by":
                    return "by";
                case "kz.wildberries.ru":
                    return "kz";
                case "kg.wildberries.ru":
                    return "kg";
                case "am.wildberries.ru":
                    return "am";
                case "uz.wildberries.ru":
                    return "uz"
                }
                return "ru"
            }
            ,
            e._timeInPast = function(e) {
                return Date.now() - e
            }
            ,
            e._checkCurrencyInvalid = function(t) {
                var a;
                return !t || !wb.currencies.info[t.currency] || !wb.currencies.info[null === (a = e.getXCurrency(t.xinfo)) || void 0 === a ? void 0 : a.toUpperCase()]
            }
            ,
            t._checkNeedUpdateData = function(t) {
                if (t.time >= Date.now() || t.updateInProgress)
                    return;
                t.updateInProgress = !0;
                const a = e.storageKey(t.prefix);
                navigator.locks.request(`lock-${a}`, async r=>{
                    const n = localStorage.getObject(a);
                    if (!n || n.time < Date.now()) {
                        let r;
                        if ("0" !== e._getUserId()) {
                            const a = t.fetchParam.url(e._getUserId())
                              , n = await WbSpaModel.prototype.$httpClient.fetchBasicJSON(a, {
                                credentials: "omit"
                            }, {
                                timeout: t.fetchParam.timeout,
                                nullOnError: !0,
                                addAuthHeader: t.fetchParam.jwt
                            });
                            r = t.processData(n)
                        } else
                            r = [];
                        if (r) {
                            const e = {
                                time: Date.now() + t.interval,
                                data: r
                            };
                            localStorage.putObject(a, e),
                            Object.assign(t, e)
                        } else
                            t.time = Date.now() - t.interval + 6e4
                    } else
                        n && n.time != n.time && Object.assign(t, n);
                    t.updateInProgress = !1
                }
                )
            }
            ,
            _createClass(e, [{
                key: "geoDataStorageKey",
                get: function() {
                    return e.storageKey(e.syncData.userData.prefix)
                }
            }]),
            e
        }();
        _UserHelper = UserHelper,
        _defineProperty(UserHelper, "syncData", {
            userData: {
                prefix: "geo-data-v1",
                data: null,
                interval: 18e4,
                fetchParam: {
                    url: e=>`https://user-geo-data.wildberries.ru/get-geo-info?${e}`,
                    timeout: 3e3
                },
                init: function() {
                    const e = {
                        data: _UserHelper._getFallbackData(),
                        time: _UserHelper._timeInPast(this.interval)
                    }
                      , t = localStorage.getObject(_UserHelper.storageKey(this.prefix));
                    null != t && t.data && _UserHelper._checkCurrencyInvalid(t.data) && (t.time = _UserHelper._timeInPast(this.interval)),
                    Object.assign(this, {
                        ...e,
                        ...t
                    })
                }
            },
            userClusters: {
                prefix: "user-clusters",
                data: null,
                processData: function(e) {
                    return this.fetchParam.dataField ? e[this.fetchParam.dataField] : e
                },
                interval: 432e5,
                fetchParam: {
                    url: e=>`https://personal-clusters.wildberries.ru/api/v1/clusters?id=${e}`,
                    dataField: "uclusters",
                    timeout: 2e4
                },
                init: function() {
                    Object.assign(this, {
                        data: [],
                        time: _UserHelper._timeInPast(this.interval),
                        ...localStorage.getObject(_UserHelper.storageKey(this.prefix))
                    })
                }
            },
            userClustersBanners: {
                prefix: "user-clusters-banners",
                data: null,
                processData: function(e) {
                    return this.fetchParam.dataField ? e[this.fetchParam.dataField] : e
                },
                interval: 432e5,
                fetchParam: {
                    url: e=>`https://user-banner.wb.ru/api/v1/clusters?id=${e}`,
                    timeout: 2e4
                },
                init: function() {
                    Object.assign(this, {
                        data: [],
                        time: _UserHelper._timeInPast(this.interval),
                        ...localStorage.getObject(_UserHelper.storageKey(this.prefix))
                    })
                }
            },
            userVector: {
                prefix: "user-vector",
                data: null,
                processData: function(e) {
                    var t;
                    return e ? null === (t = e.data[0]) || void 0 === t ? void 0 : t.vectors.reduce((e,t)=>(e[t.space] = {
                        value: t.value,
                        version: t.version
                    },
                    e), {}) : this.data
                },
                interval: 432e5,
                fetchParam: {
                    url: ()=>"https://user-vector-info.wb.ru/api/v1/vector",
                    timeout: 2e4,
                    jwt: !0
                },
                init: function() {
                    Object.assign(this, {
                        data: [],
                        time: _UserHelper._timeInPast(this.interval),
                        ...localStorage.getObject(_UserHelper.storageKey(this.prefix))
                    })
                }
            }
        }),
        module.exports = UserHelper;

    }
    , {
        "../../currencies": 2
    }],
    157: [function(require, module, exports) {
        "use strict";
        module.exports = {
            updateVerificationToken(e) {
                const t = document.querySelector("input[name=__RequestVerificationToken]");
                t && (t.value = e)
            }
        };

    }
    , {}],
    158: [function(require, module, exports) {
        "use strict";
        window.wb = {
            namespace: function(e, t) {
                for (var n = e.split("."), o = this, r = n.length, i = 0; i < r; i++)
                    void 0 === o[n[i]] && (o[n[i]] = t && i === r - 1 ? t : {}),
                    o = o[n[i]];
                return o
            },
            getURLparam: function(e) {
                return (RegExp("[\\?&]" + e + "=([^&#]*)", "i").exec(location.href) || [, null])[1]
            }
        },
        $.processResponse = function(e, t, n, o) {
            var r;
            if (null == e)
                return !1;
            let i = void 0 !== e.ResultState ? e.ResultState : e.resultState;
            switch (e.hasOwnProperty("resultState") || e.hasOwnProperty("ResultState") || (i = e.state),
            i) {
            case -1:
                const a = e.Value || e.value || (null === (r = e.data) || void 0 === r ? void 0 : r.errorMsg) || "Ошибка сервера";
                if ("boolean" == $.type(n)) {
                    n && wb.popup.renderModalError(a);
                    break
                }
                null != n ? n(a) : alert(a);
                break;
            case 0:
                if (null == t)
                    return !1;
                t(e.Value || e.value);
                break;
            case 1:
                window.location.href = e.Value || e.value;
                break;
            case 2:
            case 4:
                if (4 === i && wb.spa) {
                    wb.spa.refresh();
                    break
                }
                let s = window.location.href;
                const l = s.indexOf("#");
                -1 !== l && (s = s.substr(0, l)),
                null != e.Value || null != e.value ? (window.location.href = s + (e.Value || e.value),
                window.location.reload()) : window.location.href = s;
                break;
            case 3:
                const c = e.Value || e.value;
                if (null == wb.spa)
                    return window.location.href = c.url;
                const u = new URL(decodeURIComponent(c.url),window.location.origin);
                c.redirect = !0,
                null == o || o(c),
                wb.spa.redirect(u.href, c.replaceState, c.forceUpdate)
            }
            return !0
        }
        ,
        wb.quickNav = function(e) {
            var t = e || {}
              , n = document.querySelector(".j-quicknav");
            n.addEventListener("click", function() {
                return window.scrollTo({
                    top: 0,
                    behavior: "smooth"
                }),
                !1
            });
            let o;
            function r() {
                n.style.display = "block"
            }
            function i() {
                n.style.display = "none"
            }
            window.addEventListener("scroll", function() {
                n && (document.documentElement.clientWidth >= 768 ? function() {
                    const e = t.bottomPx || function() {
                        const e = document.querySelector("#app");
                        return e ? e.offsetTop + parseFloat(getComputedStyle(e, null).height.replace("px", "")) : 0
                    }();
                    (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0) > e ? r() : i()
                }() : function() {
                    const e = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
                    o || (o = e),
                    function() {
                        if (e >= o)
                            return !1;
                        const t = document.documentElement.clientHeight;
                        return !(e < 1.5 * t)
                    }() ? r() : i(),
                    o = e
                }())
            })
        }
        ,
        wb.namespace("utils.script", function() {
            var e = {};
            function t(e) {
                var t = $("html").attr("lang");
                if ("ru" == t)
                    return Promise.resolve();
                var n = e.substring(e.lastIndexOf("/") + 1).replace(".min.js", ".js").split("?");
                return fetch("j/localized/" + n[0] + "?v=" + n[1] + "&c=" + t)
            }
            return {
                require: function(n, o) {
                    var r, i = e[n];
                    return i || ($.isEmptyObject(e) && document.querySelectorAll("script[type='text/javascript']").forEach(function(t) {
                        if (t.type) {
                            var n = t.src.replace("http:", "").replace("https:", "");
                            e[n] = Promise.resolve()
                        }
                    }),
                    e[n] || (i = Promise.all([o ? t(n) : Promise.resolve(), (r = n,
                    new Promise((e,t)=>{
                        try {
                            var n = document.createElement("script");
                            n.type = "text/javascript",
                            n.src = r,
                            n.readyState ? n.onreadystatechange = function() {
                                "loaded" !== n.readyState && "complete" !== n.readyState || (n.onreadystatechange = null,
                                e())
                            }
                            : (n.onload = function() {
                                e()
                            }
                            ,
                            n.onerror = function() {
                                t()
                            }
                            ),
                            document.body.appendChild(n)
                        } catch (e) {
                            t()
                        }
                    }
                    ))]),
                    e[n] = i)),
                    i
                }
            }
        }()),
        wb.namespace("displayModeSettings", function() {
            const e = "displayMode";
            let t;
            var n = new Map;
            return {
                init: function() {
                    function n() {
                        const n = wb.settings.breakponts
                          , o = window.innerWidth;
                        for (var r in t = "d",
                        n)
                            o < r && (t = n[r]);
                        let i = "desktop";
                        o <= 767.98 && (i = "phone"),
                        o >= 768 && o <= 1023.98 && (i = "tablet"),
                        $.observable(wb.settings).setProperty(e, t),
                        $.observable(wb.settings).setProperty({
                            displayType: i
                        })
                    }
                    n(),
                    window.addEventListener("resize", n)
                },
                addObserver: function(o, r) {
                    if ("function" == typeof o) {
                        r && o(t);
                        var i = ()=>o(t);
                        $.observe(wb.settings, e, i),
                        $.observe(wb.settings, "displayType", i),
                        n.set(o, i)
                    }
                },
                removeObserver: function(t) {
                    let o = n.get(t);
                    o && ($.unobserve(wb.settings, e, o),
                    $.unobserve(wb.settings, "displayType", o))
                }
            }
        }()),
        wb.namespace("network", function() {
            const e = "isOffline";
            return {
                init: function() {
                    function t() {
                        $.observable(wb.settings).setProperty(e, !window.navigator.onLine)
                    }
                    t(),
                    window.addEventListener("online", t),
                    window.addEventListener("offline", t)
                }
            }
        }());

    }
    , {}],
    159: [function(require, module, exports) {
        "use strict";
        function _defineProperties(e, t) {
            for (var r = 0; r < t.length; r++) {
                var n = t[r];
                n.enumerable = n.enumerable || !1,
                n.configurable = !0,
                "value"in n && (n.writable = !0),
                Object.defineProperty(e, _toPropertyKey(n.key), n)
            }
        }
        function _createClass(e, t, r) {
            return t && _defineProperties(e.prototype, t),
            r && _defineProperties(e, r),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            e
        }
        function _toPropertyKey(e) {
            var t = _toPrimitive(e, "string");
            return "symbol" == typeof t ? t : String(t)
        }
        function _toPrimitive(e, t) {
            if ("object" != typeof e || !e)
                return e;
            var r = e[Symbol.toPrimitive];
            if (void 0 !== r) {
                var n = r.call(e, t || "default");
                if ("object" != typeof n)
                    return n;
                throw new TypeError("@@toPrimitive must return a primitive value.")
            }
            return ("string" === t ? String : Number)(e)
        }
        const authTokenKey = "wbx__tokenData"
          , AUTH_HOST_VER = "v2"
          , AUTH_HOST = "https://wbx-auth.wildberries.ru/v2"
          , AUTH_SLIDE = `${AUTH_HOST}/auth/slide-v3`
          , AUTH_SLIDE_CONFIRM = `${AUTH_HOST}/auth/slide-v3-confirm`
          , AUTH_WBCRYPT = `${AUTH_HOST}/auth/wbcrypt`
          , AUTH_SIGNOUT = `${AUTH_HOST}/auth/logoff`
          , JWT_AUTH_EXPIRE = 259200;
        let WbxAuthService = function() {
            function e() {
                this._pull(),
                window.addEventListener("storage", e=>{
                    e.key === authTokenKey && this._pull()
                }
                )
            }
            var t = e.prototype;
            return t._isValid = function(e, t) {
                return !(null == e || !e.phone) && (!(null == (null == e ? void 0 : e.user) || !isNaN(null == e ? void 0 : e.user)) || (null == e ? void 0 : e.user) === (null == t ? void 0 : t.t))
            }
            ,
            t.refreshToken = async function(e) {
                e || this.setToken(null)
            }
            ,
            t.getToken = async function() {
                let e = await wb.user.getUserInfo();
                if (!e.isAuth)
                    return this.setToken(null),
                    this._data;
                if (this.jwt) {
                    const t = this.jwtData;
                    if (this._isValid(t, e)) {
                        this._isJwtExpired(t) && this._slide()
                    } else
                        this.setToken(null)
                } else {
                    const e = await this._updateToken();
                    this.setToken(e)
                }
                return this._data
            }
            ,
            t.setToken = function(e) {
                try {
                    if (e) {
                        const t = this._tryDecodeJwt(e);
                        this._data = {
                            token: e,
                            data: t,
                            um: this._createUm(t)
                        };
                        try {
                            localStorage.putObject(authTokenKey, {
                                token: e
                            })
                        } catch (e) {}
                    } else
                        this._data = {
                            token: null,
                            data: {},
                            um: this._createUm()
                        },
                        localStorage.removeItem(authTokenKey)
                } catch (e) {} finally {
                    this._jwtUpdateResp = null
                }
            }
            ,
            t.signOut = async function(e) {
                const t = new AbortController;
                setTimeout(()=>t.abort(), 2e3),
                await fetch(AUTH_SIGNOUT, {
                    method: "POST",
                    credentials: "include",
                    signal: t.signal,
                    headers: {
                        deviceid: WbSpaModel.prototype.$services.sessionService.getSession(),
                        "wb-apptype": "web",
                        "wb-appversion": WbSpaModel.appVersion
                    }
                }).catch(e=>Promise.resolve({
                    isNetworkError: !0
                })),
                WbSpaModel.prototype.$httpClient.fetchJSON(`/webapi/security/exit?returnUrl=${encodeURIComponent(e || "")}`, {
                    method: "POST"
                }),
                this.setToken(null)
            }
            ,
            t._pull = function() {
                var e;
                const t = null === (e = localStorage.getObject(authTokenKey)) || void 0 === e ? void 0 : e.token
                  , r = this._tryDecodeJwt(t);
                this._data = {
                    token: t,
                    data: r,
                    um: this._createUm(r)
                }
            }
            ,
            t._isJwtExpired = function(e) {
                return Date.now() >= 1e3 * (e.iat + 259200)
            }
            ,
            t._slide = function() {
                try {
                    return this._slideToken()
                } catch (e) {
                    wb.spa.logError(e, {
                        msg: "wbx_auth_slide"
                    })
                }
            }
            ,
            t._createUm = function(e) {
                let t = null == e ? void 0 : e.user;
                if (t) {
                    t = `user:${t}`;
                    const e = [];
                    for (let r = 0; r < t.length; r++)
                        e.push(129 ^ t.charCodeAt(r));
                    return {
                        userUid: btoa(String.fromCodePoint(...(new TextEncoder).encode(String.fromCharCode.apply(null, e)))),
                        userId: t
                    }
                }
                return {
                    userUid: "",
                    userId: ""
                }
            }
            ,
            t._tryDecodeJwt = function(e) {
                try {
                    if (!e)
                        return {};
                    const [t,r,n] = e.split(".");
                    if (!(t || r || n))
                        return {};
                    const o = atob(r);
                    return o && JSON.parse(o) || {}
                } catch (e) {
                    return console.error(e),
                    {}
                }
            }
            ,
            t._slideToken = async function() {
                navigator.locks.request("lock-auth-slide", async e=>{
                    var t;
                    if (!this._isJwtExpired(this.jwtData))
                        return;
                    const r = new AbortController;
                    setTimeout(()=>r.abort(), 1e4);
                    const n = WbSpaModel.prototype.$services.sessionService.getSession()
                      , o = await fetch(AUTH_SLIDE, {
                        method: "POST",
                        credentials: "include",
                        signal: r.signal,
                        headers: {
                            deviceid: n,
                            "wb-apptype": "web",
                            "wb-appversion": WbSpaModel.appVersion
                        }
                    }).then(e=>e.ok ? e.json() : {}).then(e=>(e.error && wb.spa.logError(new Error(`[wbx_auth_slide]: res: ${e.result}, error: ${e.error}`)),
                    e)).catch(()=>({}));
                    if (12 !== o.result) {
                        if (0 === o.result && null !== (t = o.payload) && void 0 !== t && t.sticker && o.payload.access_token) {
                            const e = JSON.stringify({
                                sticker: o.payload.sticker
                            })
                              , t = await fetch(AUTH_SLIDE_CONFIRM, {
                                method: "POST",
                                credentials: "include",
                                signal: r.signal,
                                headers: {
                                    deviceid: n,
                                    "wb-apptype": "web",
                                    "wb-appversion": WbSpaModel.appVersion
                                },
                                body: e
                            }).then(e=>e.ok ? e.json() : {}).then(e=>(e.error && wb.spa.logError(new Error(`[wbx_auth_slide_confirm]: res: ${e.result}, error: ${e.error}`)),
                            e)).catch(()=>({}));
                            12 === t.result ? this.setToken(null) : 0 === t.result && this.setToken(o.payload.access_token)
                        }
                    } else
                        this.setToken(null)
                }
                )
            }
            ,
            t._updateToken = async function() {
                if (this._jwtUpdateResp)
                    return this._jwtUpdateResp;
                const e = WbSpaModel.prototype.$services.sessionService.getSession()
                  , t = window.navigator.userAgent;
                return this._jwtUpdateResp = fetch(AUTH_WBCRYPT, {
                    method: "GET",
                    credentials: "include",
                    headers: {
                        deviceid: e,
                        deviceName: t,
                        "wb-apptype": "web",
                        "wb-appversion": WbSpaModel.appVersion
                    }
                }).then(e=>e.ok ? e.json() : null).then(e=>{
                    var t;
                    return null != e && e.error && wb.spa.logError(new Error(`[wbx_auth_crypt]: res: ${e.result}, error: ${e.error}`)),
                    null == e || null === (t = e.payload) || void 0 === t ? void 0 : t.access_token
                }
                ).catch(e=>(wb.spa.logError(new Error(`[wbx_auth_crypt]: error: ${e.message}`)),
                null)).finally(()=>{
                    this._jwtUpdateResp = null
                }
                ),
                this._jwtUpdateResp
            }
            ,
            _createClass(e, [{
                key: "AUTH_HOST",
                get: function() {
                    return AUTH_HOST
                }
            }, {
                key: "jwt",
                get: function() {
                    return this._data.token
                }
            }, {
                key: "jwtData",
                get: function() {
                    return this._data.data
                }
            }, {
                key: "isUserGuid",
                get: function() {
                    var e;
                    return isNaN(null === (e = this.jwtData) || void 0 === e ? void 0 : e.user)
                }
            }, {
                key: "um",
                get: function() {
                    return this._data.um
                }
            }, {
                key: "shard",
                get: function() {
                    var e;
                    return Number(null === (e = this.jwtData) || void 0 === e ? void 0 : e.shard_key) || 1
                }
            }, {
                key: "sShard",
                get: function() {
                    return $.views.converters.leadZero(this.shard, 2)
                }
            }]),
            e
        }();
        module.exports = new WbxAuthService;

    }
    , {}],
    160: [function(require, module, exports) {
        "use strict";
        let WbxHttpClient = function() {
            function t() {}
            var e = t.prototype;
            return e.fetch = async function(t, e, n, o) {
                var s;
                const r = WbSpaModel.prototype.$auth;
                let i = await r.getToken();
                const a = null == o ? void 0 : o(null === (s = i.data) || void 0 === s ? void 0 : s.shard_key);
                if (null != e && e.timeout) {
                    const t = new AbortController;
                    setTimeout(()=>t.abort(), e.timeout),
                    e.signal = t.signal
                }
                return this._fetch(`${a || ""}${t}`, e, i.token).then(e=>{
                    if (e.ok)
                        return e;
                    function o(n, o) {
                        return wb.spa.logError({
                            message: n
                        }, {
                            status: o,
                            msg: "wbx_fetch"
                        }),
                        Promise.reject(new Error(`url:${t}, response:${n}, code:${e.status}`))
                    }
                    return 401 === e.status && r._slide(i),
                    "function" == typeof n ? n(e, o) : e.text().then(t=>o(t, e.status))
                }
                )
            }
            ,
            e.postJSON = async function(t, e, n) {
                const o = {
                    method: "POST"
                };
                Object.assign(o, n),
                o.headers = {
                    "X-Service-Name": "site"
                },
                e && (o.headers["Content-Type"] = "application/json",
                o.body = e);
                const s = await this.fetch(t, o);
                if (s.ok)
                    return await s.json()
            }
            ,
            e._fetch = function(t, e, n) {
                return n ? (!e && (e = {}),
                e.headers = Object.assign({}, e.headers, {
                    Authorization: "Bearer " + n
                }),
                fetch(t, e)) : Promise.reject("miss accessToken")
            }
            ,
            t
        }();
        module.exports = new WbxHttpClient;

    }
    , {}],
    161: [function(require, module, exports) {
        "use strict";
        function isReferrerEvent(t) {
            let n = !0;
            return ["wb.", "wildberries."].forEach(function(e) {
                t.indexOf(e) >= 0 && -1 === $.inArray(t.split(".")[0], ["style", "blog", "lookshop"]) && (n = !1)
            }),
            n
        }
        wb.stat = function() {
            let t, n = [];
            function e() {
                const t = n;
                return n = [],
                t
            }
            function a() {
                if (!n.length)
                    return;
                const a = e()
                  , r = {};
                r.pageViewGuid = t,
                r.path = window.location.pathname,
                r.queryString = window.location.search,
                r.urlReferrer = null != wb.spa ? wb.spa.getReferrer() : document.referrer,
                r.deviceId = wb.cookieHelper.getCookie("_wbauid"),
                r.statisticEvents = a,
                fetch("/webapi/stats/events", {
                    method: "POST",
                    body: JSON.stringify(r),
                    headers: {
                        "Content-Type": "application/json"
                    }
                }).catch(t=>{
                    n = n.concat(a)
                }
                )
            }
            return setInterval(function() {
                a()
            }, 3e3),
            {
                sendEvent: function(t, e, r) {
                    const s = e.slice();
                    n.push({
                        EventName: t,
                        EventParams: s
                    }),
                    r && a()
                },
                wrapParam: function(t, n) {
                    return {
                        ParamName: t,
                        ParamValue: void 0 === n ? null : n.toString().replace(/"/g, "\\x22")
                    }
                },
                sendPageView: function() {
                    const a = {};
                    let r;
                    a.statusCode = 200,
                    a.path = window.location.pathname,
                    a.queryString = window.location.search,
                    a.urlReferrer = document.referrer,
                    a.deviceId = wb.cookieHelper.getCookie("_wbauid"),
                    n.length > 0 && (r = e(),
                    a.statisticEvents = r),
                    WbSpaModel.prototype.$user.getLocationData().then(t=>(t && (a.address = t.address,
                    a.latitude = t.latitude,
                    a.longitude = t.longitude),
                    fetch("/webapi/stats/pageview", {
                        method: "POST",
                        body: JSON.stringify(a),
                        headers: {
                            "Content-Type": "application/json"
                        }
                    }))).then(t=>t.json()).then(n=>{
                        t = n
                    }
                    ).catch(t=>{
                        n = n.concat(r)
                    }
                    )
                }
            }
        }(),
        wb.stat.banners = function() {
            const t = {
                ths: this,
                cl: {
                    banner: "j-banner"
                }
            };
            t.sl = {
                shownStat: ".j-banner-shown-stat",
                clickStat: ".j-banner-click-stat",
                banner: "." + t.cl.banner
            };
            const n = function(t) {
                const n = []
                  , e = t.data("banner-id")
                  , a = t.data("section")
                  , r = t.data("statistic-fields");
                return "" === e ? null : (n.push(wb.stat.wrapParam("BID", e)),
                n.push(wb.stat.wrapParam("SCTN", a)),
                r && (n.push(wb.stat.wrapParam("BUT", r.urlType)),
                n.push(wb.stat.wrapParam("BLT", r.locationType)),
                n.push(wb.stat.wrapParam("BDT", r.displayType)),
                n.push(wb.stat.wrapParam("SORT", r.sort))),
                n)
            }
              , e = function(t) {
                if (t instanceof jQuery || (t = $(t)),
                t.data("shown-stat-sent"))
                    return;
                const e = n(t);
                if (!e)
                    return;
                const a = t[0].classList.contains("j-banner-stat-send");
                wb.stat.sendEvent("BSE", e, a),
                t.attr("data-shown-stat-sent", !0)
            };
            var a = function(t, e) {
                if ((null == t ? void 0 : t.length) > 0) {
                    const n = t[0];
                    if (n.classList.contains("j-banner-wba")) {
                        var a;
                        let {data: t} = $.view(n);
                        (t = t.length > 0 ? t[0] : t).banner && (t = t.banner);
                        const e = (null === (a = t.bannerSelections) || void 0 === a ? void 0 : a.length) > 0 ? t.bannerSelections.map(t=>t.href).toString() : t.link;
                        wb.analitics.sendBannersWbaEvent("Banner_T", t.alt, n.dataset.analiticsCode, e, n.dataset.bannerIndex, t.id)
                    }
                }
                var r;
                e || (t.data("click-stat-sent") || (r = n(t)) && (wb.stat.sendEvent("BCE", r, !0),
                t.attr("data-click-stat-sent", !0)))
            };
            return {
                initClickEvent: function(n) {
                    $("body").off("mousedown", t.sl.clickStat).on("mousedown", t.sl.clickStat, function(e) {
                        if (3 !== e.which) {
                            var r, s = e.currentTarget.classList.contains(t.cl.banner), o = $(e.currentTarget);
                            s || (r = $this.data("banner-id"),
                            o = $(t.sl.banner).filter(function(t, n) {
                                return $(n).data("banner-id") === r
                            }).first()),
                            a(o, n)
                        }
                    })
                },
                sendShownStatistic: e,
                sendAllShownStatistic: function() {
                    var n = $(t.sl.shownStat);
                    wb.scrollListener.addElements(n, function(t) {
                        e($(t))
                    }, !1, .6),
                    wb.scrollListener.start()
                },
                sendStatisticNow: function() {
                    $.each($(t.sl.shownStat), function(t, n) {
                        wb.stat.banners.sendShownStatistic($(n))
                    })
                },
                sendShownCarousel: function(t) {
                    var n;
                    n = t.find("li:not(.jc-clone)").find(".j-banner"),
                    $.each(n, function(t, n) {
                        wb.stat.banners.sendShownStatistic($(n))
                    })
                },
                callShownVisibleHandlerForCarousel: function(t, n) {
                    var e;
                    e = t.find("li").find(".j-banner:not(.j-banner-section)"),
                    wb.scrollListener.addElements(e, function(t) {
                        wb.stat.banners.sendShownStatistic($(t))
                    }, !1, n),
                    wb.scrollListener.start()
                },
                getShownAfterSetActiveEvent: function(t) {
                    return function(n) {
                        var e = n.find(".j-banner").first();
                        wb.scrollListener.checkRatio(e, t) && wb.stat.banners.sendShownStatistic(e)
                    }
                },
                sendClickStatistic: a,
                destroyClickEvent: function() {
                    $("body").off("mousedown", t.sl.clickStat)
                },
                bannerBlockShownStatWba: function(t) {
                    const n = function(t) {
                        if (!t)
                            return;
                        const n = document.querySelectorAll(".j-banners-block")
                          , e = [];
                        function a(n) {
                            const a = n.querySelectorAll(".j-banner-wba").toArray()
                              , r = t.$observerHelper.getVerticalObserver(a, {
                                threshold: .5
                            });
                            function s(n) {
                                const e = n.target;
                                t.$analitic.sendBannersWbaEvent("Banner_S", e.title, e.dataset.analiticsCode, e.href, e.dataset.bannerIndex, e.dataset.bannerId),
                                t.$stat.banners.sendShownStatistic(e),
                                e.removeEventListener(r.elementInViewportEventName, s)
                            }
                            e.push(r),
                            a.forEach(t=>{
                                t.addEventListener(r.elementInViewportEventName, s)
                            }
                            ),
                            r.observe()
                        }
                        return n.forEach(t=>{
                            a(t)
                        }
                        ),
                        {
                            destroy: function() {
                                e.forEach(t=>{
                                    t.destroy()
                                }
                                )
                            },
                            addBlocks: function(t) {
                                null != t && t.length && t.filter(t=>t.classList.contains("j-banners-block")).forEach(t=>{
                                    a(t)
                                }
                                )
                            }
                        }
                    }(t);
                    return {
                        destroy: function() {
                            n.destroy()
                        },
                        addBlocks: function(t) {
                            n.addBlocks(t)
                        }
                    }
                }
            }
        }(),
        function() {
            var t = document.createElement("a");
            if (t.href = document.referrer,
            isReferrerEvent(t.hostname)) {
                var n = wb.helpers.getParamsFromUrlQuery(location.search)
                  , e = wb.stat
                  , a = [];
                t.hostname || n.utm_medium || n.utm_campaign || n.utm_source ? (a.push(e.wrapParam("UTMM", n.utm_medium ? n.utm_medium : "not_set")),
                a.push(e.wrapParam("UTMC", n.utm_campaign ? n.utm_campaign : "not_set")),
                a.push(e.wrapParam("UTMS", n.utm_source ? n.utm_source : t.hostname ? t.hostname : "not_set")),
                n.gclid && a.push(e.wrapParam("GCID", "adwords")),
                t.hostname && a.push(e.wrapParam("Rfr", t.hostname))) : a.push(e.wrapParam("Rfr", "direct")),
                wb.stat.sendEvent("RFR", a)
            }
        }(),
        function() {
            var t = wb.getURLparam("wb_tp")
              , n = wb.getURLparam("wb_bnd")
              , e = wb.stat
              , a = [];
            t && n && (a.push(e.wrapParam("Btp", t)),
            a.push(e.wrapParam("Bbnd", n)),
            e.sendEvent("BV", a))
        }();

    }
    , {}],
    162: [function(require, module, exports) {
        "use strict";
        $.observable.Object.prototype.setAllProperty = function(t, e) {
            var r = this;
            $.each(t, function(t, n) {
                var o = t;
                e && (o = e + "." + o),
                $.isPlainObject(n) ? r.setAllProperty(n, o) : !$.isArray(n) && r.setProperty(o, n)
            })
        }
        ,
        $.observable.Array.prototype.refreshArray = function(t) {
            for (var e = 0; e < t.length; e++)
                this._data.length === e ? this.insert(t[e]) : $.observable(this._data[e]).setProperty(t[e]);
            for (; t.length < this._data.length; )
                this.remove(this._data.length - 1)
        }
        ,
        $.views.helpers({
            suppliersOrgForms: ["ООО", "ПАО", "ОАО", "ЗАО", "ИП", "Фонд", "Ассоциации", "Союзы", "НАО", "ТОО", "АО"],
            ImageUrl: wb.helpers.url.imageUrl,
            urlFeedbackPhoto: wb.helpers.url.urlFeedbackPhoto,
            urlProductVideo: wb.helpers.url.urlVideoProduct,
            urlFeedbackVideoPreview: wb.helpers.url.urlFeedbackVideoPreview,
            productCardUrl: function(t, e, r) {
                var n = [];
                return e && n.push("size=" + e),
                r && n.push("targetUrl=" + r),
                wb.settings.fullDomainName + "/catalog/" + t + "/detail.aspx" + (n.length > 0 ? "?" + n.join("&") : "")
            },
            forBrandLogoFromId: function(t) {
                return t ? wb.helpers.url.urlToExternalStatic(`/vol1/sellers/brands/${t}.${$.views.converters.toWebp("jpg")}`) : `${wb.settings.staticSiteUrl}/i/nologo.gif`
            },
            forSellerLogo: function(t, e=!1) {
                return wb.helpers.url.urlToExternalStatic(`/vol1/crm-bnrs/shops/${t}_${e ? "main_banner" : "logo"}.${$.views.converters.toWebp("jpg")}`)
            },
            isEmptyObject: function(t) {
                return $.isEmptyObject(t)
            },
            PersonalPhoto: function() {
                return "https://static-basket-01.wbbasket.ru/vol0/i/v3/user/avatar.png"
            },
            Declension: function(t, e, r, n, o) {
                var i, s = t % 10, a = t % 100;
                return i = 1 == s && 11 != a ? e : 2 == s && 12 != a || 3 == s && 13 != a || 4 == s && 14 != a ? r : n || r,
                void 0 === o ? i : String.format(o, t, String.format(i, t))
            },
            pluralize: function(t) {
                return $.pluralize(null != t ? t : 0, Array.prototype.slice.call(arguments, 1))
            },
            debug: function(t) {
                console.log(t)
            },
            toDateFormat: function(t, e) {
                return new Date(parseInt(t.replace("/Date(", "").replace(")\\/", ""), 10)).format(e)
            },
            formatDate: function(t, e) {
                return new Date(t).format(e)
            },
            toJson: function(t) {
                return JSON.stringify(t)
            },
            fromJson: function(t) {
                return JSON.parse(t)
            },
            encode: function() {
                for (var t = "", e = 0; e < arguments.length; e++)
                    t = t.concat(arguments[e]);
                return encodeURIComponent(t)
            },
            isLazyImgInCarousel: function(t, e, r, n, o) {
                return !0 === t && (!0 === r ? e >= 2 * n && e < o - n : e >= 2 * n)
            },
            timeLeft: function(t) {
                var e = $.views.helpers.parseFromDotNet(t);
                return wb.helpers.date.leftBefore(e)
            },
            parseFromDotNet: function(t) {
                return new Date(parseInt(t.replace("/Date(", "").replace(")\\/", ""), 10))
            },
            timeLeftSpa: function(t) {
                var e = new Date(t);
                return wb.helpers.date.leftBefore(e)
            },
            isPriceEqual: function(t, e) {
                return t === e
            },
            isNullOrWhiteSpace: function(t) {
                return !t || 0 === t.length || /^\s*$/.test(t)
            },
            HasFlag: function(t, e) {
                return (t & e) == e
            },
            blurAdult: function(t) {
                return t && !wb.adult.isConfirmed
            },
            nonBreakingSpaceFormatted: function(t) {
                return String(t).replace(/\B(?=(\d{3})+(?!\d))/g, "&nbsp;")
            },
            pickupType: function(t, e) {
                if (86 == t.dtype)
                    return t.name;
                if ("courier" == t.deliveryType)
                    return "Курьерский адрес";
                if (63 == t.dtype || t.isSortCenter)
                    return e ? "СЦ / Склад" : "СЦ / Склад Wildberries";
                if (29 == t.dtype || 31 == t.dtype || 32 == t.dtype)
                    return e ? "Почта" : "Отделение Почты";
                if (23 == t.dtype)
                    return 2 == t.pickupType ? "Партнерский&nbsp;пункт выдачи (Почта&nbsp;России)" : e ? "Почта&nbsp;России" : "Отделение Почты России";
                if (14 == t.dtype)
                    return "Постамат Халва";
                if (15 == t.dtype && t.pickupType >= 0) {
                    if (1 == t.pickupType)
                        return "Отделение&nbsp;Сбербанка";
                    if (0 == t.pickupType)
                        return "Постамат&nbsp;Сбербанка"
                }
                return 16 == t.dtype ? "Постамат&nbsp;Пятерочка" : t.isExternalPostamat ? "Партнерский&nbsp;постамат" : t.isWb ? "Пункт выдачи" : "Партнерский&nbsp;пункт выдачи"
            },
            pickupPhotos: t=>{
                var e;
                if (!t.photos)
                    return [];
                if (86 == t.dtype)
                    return t.photos;
                const r = new Set
                  , n = new Set;
                for (let e of t.photos) {
                    const t = e.split(".").pop();
                    e = e.replace("preview", ""),
                    "webp" == (null == t ? void 0 : t.toLowerCase()) ? r.add(e) : n.add(e)
                }
                return [...r.size > 0 && null !== (e = WbSpaModel.prototype) && void 0 !== e && null !== (e = e.$apiSupport) && void 0 !== e && e.webpImage ? r : n]
            }
            ,
            priceFromRub: (t,e,r)=>{
                var n;
                if (null === (n = wb.global) || void 0 === n || null === (n = n.settings) || void 0 === n || !n.currencies)
                    return t;
                const o = r || WbSpaModel.prototype.$user.getCurrency();
                if ("RUB" === o)
                    return t;
                if (!wb.global.settings.currencies[o])
                    return t;
                let i = t / wb.global.settings.currencies[o].rubRate;
                return e ? "AMD" === o || "KZT" === o ? 10 * Math.floor(i / 10) : "BYN" === o ? Math.floor(100 * i) / 100 : "UZS" === o ? 100 * Math.floor(i / 100) : Math.floor(i) : i
            }
            ,
            priceToRub: (t,e)=>{
                var r;
                return null !== (r = wb.global) && void 0 !== r && null !== (r = r.settings) && void 0 !== r && r.currencies && wb.global.settings.currencies[e] ? t * wb.global.settings.currencies[e].rubRate : t
            }
            ,
            max: t=>Math.max(t, 0),
            abs: t=>Math.abs(t),
            trimWord: function(t, e) {
                var r, n;
                if (null === (r = e) || void 0 === r || !r.length || !t)
                    return t;
                if ((null === (n = e = [].concat(e)) || void 0 === n ? void 0 : n.length) > 0) {
                    const r = (t = t.trim()).toLowerCase();
                    for (var o = 0; o < e.length; o++) {
                        const n = e[o].toLowerCase()
                          , i = r.indexOf(n + " ", 0);
                        0 == i && (t = t.substring(n.length).trim());
                        const s = t.toLowerCase().indexOf(n, t.length - n.length);
                        if (s > 0 && (t = t.substring(0, s)),
                        0 == i || s > 0)
                            return t.trim()
                    }
                }
                return t
            },
            brandUrl: function(t) {
                return `/brands/${encodeURIComponent(t)}`
            },
            brandUrlById: async function(t) {
                if (!t)
                    return null;
                const e = await WbSpaModel.prototype.$httpClient.fetchBasicJSON(`https://static-basket-01.wbbasket.ru/vol0/data/brands-by-id/${t}.json`, {}, {
                    nullOnError: !0
                }).catch(t=>null);
                return e ? $.views.helpers.brandUrl(e.url) : null
            },
            formatPrice: function(t, e, r) {
                let n = $.views.converters.divideNumberBySeparator(t) + (e ? `,${e}` : "");
                return "" != r && (n += "&nbsp;" + (r || wb.settings.currencyShortName)),
                n
            },
            isDateToday: t=>new Date(t).dateEqual(new Date),
            isClosedByUser: t=>{
                var e;
                return (null === (e = wb.global.userSettings.closed) || void 0 === e ? void 0 : e.includes(t)) || !1
            }
            ,
            getCurrentCurrency: function() {
                return $.views.converters.currencySign(WbSpaModel.prototype.$user.getCurrency())
            },
            fillFeedbackPhotos: function(t) {
                const e = [];
                return t ? t.map(t=>({
                    preview: wb.helpers.url.urlFeedbackPhoto(t, "ms"),
                    fullPath: wb.helpers.url.urlFeedbackPhoto(t, "fs")
                })) : e
            },
            fillFeedbackVideos: function(t) {
                if (!t)
                    return [];
                return (Array.isArray(t) ? t : [t]).map(t=>{
                    const e = t.id
                      , [r,n] = null == e ? void 0 : e.split("/")
                      , o = ("00" + r).slice(-2);
                    return {
                        preview: `https://videofeedback${o}.wb.ru/${n}/preview.jpg`,
                        video: `https://videofeedback${o}.wb.ru/${n}/index.m3u8`,
                        mp4: `https://videofeedback${o}.wb.ru/${n}/preview.mp4`,
                        isVideo: !0,
                        duration: t.durationSec ? wb.helpers.formatVideoDuration(t.durationSec) : "-"
                    }
                }
                )
            },
            stripHtml: (t,e)=>{
                if (!t)
                    return "";
                if (e)
                    return t;
                return (new DOMParser).parseFromString(t, "text/html").body.textContent || ""
            }
            ,
            isIosDevice: wb.helpers.iOS,
            isHuaweiDevice: wb.helpers.huawei,
            minFiscalPriceInCurrency: function(t) {
                switch (t.toUpperCase()) {
                case "UZS":
                    return 100;
                case "AMD":
                case "KZT":
                    return 10;
                case "BYN":
                case "USD":
                    return .01;
                default:
                    return 1
                }
            },
            stopPropagation: t=>t.stopPropagation()
        }),
        $.views.converters({
            not: function(t) {
                return !t
            },
            toOrdinalDigitByFemaleGender: function(t) {
                return ["Первая", "Вторая", "Третья", "Четвертая", "Пятая", "Шестая", "Седьмая", "Восьмая", "Девятая", "Десятая"][t] || t + 1
            },
            spaceFormatted: function(t) {
                return String(t).replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1 ")
            },
            plusMinus: t=>{
                let e = "";
                return t > 0 ? e = "+" : t < 0 && (e = "-"),
                e + " " + $.views.converters.spaceFormatted(Math.abs(t))
            }
            ,
            toInt: function(t) {
                return parseInt(t, 10)
            },
            toFixed: function(t, e) {
                var r = parseFloat(t);
                return isNaN(r) ? "" : r.toFixed(e)
            },
            leadZero: function(t, e) {
                if (isNaN(t) || null == t)
                    return null;
                for (var r = Math.floor(t); r.toString().length < e; )
                    r = "0" + r;
                return r
            },
            basketDeliveryDate: function(t, e, r, n) {
                if (!t)
                    return "";
                if (8 == (8 & r) && n < 5)
                    return $.views.converters.deliveryDateTxt(n, !0);
                if (!e)
                    return `${t.format("d MMMM")}`;
                const o = e instanceof Date ? e : new Date;
                return "number" == typeof e && (o.setTime(t.getTime()),
                o.setDate(o.getDate() + e)),
                o.is1stJan() && o.setDate(o.getDate() + 1),
                t.getMonth() !== o.getMonth() ? `${t.format("d MMMM")}-${o.format("d MMMM")}` : `${t.format("d")}-${o.format("d MMMM")}`
            },
            priceWithCoins: function(t, e, r=!1) {
                var n, o, i, s = Math.abs(Math.round(100 * (t % 1).toFixed(2)));
                t = t > 0 ? Math.floor(t) : Math.ceil(t);
                const a = (null === (n = this.tagCtx) || void 0 === n || null === (n = n.props) || void 0 === n || null === (n = n.iso) || void 0 === n ? void 0 : n.toUpperCase()) || this.ctxPrm && (null === (o = this.ctxPrm("iso")) || void 0 === o ? void 0 : o.toUpperCase());
                return a && (e = null === (i = wb.currencies) || void 0 === i || null === (i = i.info[a]) || void 0 === i ? void 0 : i.sign),
                0 == s && r ? s = null : s < 10 && (s = "0" + s),
                $.views.helpers.formatPrice(t, s, e)
            },
            priceWithCurrencyOld: function(t, e, r, n=!1) {
                if (!e && (isNaN(t) || !t))
                    return "";
                if (("byn" === r || !r && "" !== r) && ("by" === wb.settings.currentLocale || "byn" === r || n)) {
                    let e = Math.round(100 * (t % 1).toFixed(2));
                    return t = Math.floor(t),
                    e < 10 && (e = "0" + e),
                    r && "byn" !== r && (e = null),
                    r = "р.",
                    $.views.helpers.formatPrice(t, e, r)
                }
                let o = "" === r ? "" : r || wb.settings.currencyShortName;
                return t = Math.floor(100 * t) / 100,
                $.views.helpers.formatPrice(t, null, o)
            },
            priceWithCurrencyV2: function(t, e, r) {
                var n, o, i, s, a, l, u;
                if (!e && (isNaN(t) || !t))
                    return "";
                const c = t.toString().split(".")
                  , p = r ? null === (n = wb.currencies) || void 0 === n || null === (o = n.getIsoBySign) || void 0 === o ? void 0 : o.call(n, r) : (null === (i = this.tagCtx) || void 0 === i || null === (i = i.props) || void 0 === i || null === (i = i.iso) || void 0 === i ? void 0 : i.toUpperCase()) || this.ctxPrm && (null === (s = this.ctxPrm("iso")) || void 0 === s ? void 0 : s.toUpperCase()) || WbSpaModel.prototype.$user.getCurrency();
                r || (r = null === (a = wb.currencies) || void 0 === a || null === (a = a.info[p]) || void 0 === a ? void 0 : a.sign);
                const d = null !== (l = null === (u = this.tagCtx) || void 0 === u || null === (u = u.props) || void 0 === u ? void 0 : u.sale) && void 0 !== l ? l : 0;
                if (d > 0) {
                    t = Number(t);
                    let e = Math.ceil(t * (d / 100));
                    const n = $.views.helpers.minFiscalPriceInCurrency(r);
                    t += e = e < n ? -n : -Math.ceil(e / n) * n,
                    c[0] = `${t}`
                }
                if ("RUB" === p && "byn" !== r)
                    return $.views.helpers.formatPrice(c[0], null, r || "₽");
                let f, h = t;
                if ("byn" === r || "BYN" === p) {
                    h = Math.floor(t),
                    f = "00";
                    const e = t.toString().replace(",", ".").split(".")[1];
                    (null == e ? void 0 : e.length) > 0 && 1 == (f = e.substring(0, 2)).length && (f += "0"),
                    r = "р."
                } else
                    "AMD" !== p && "KZT" !== p || "string" == typeof t ? "UZS" === p ? h = 100 * parseInt(t / 100) : "KGS" === p && (h = Math.floor(t)) : h = 10 * parseInt(t / 10);
                return $.views.helpers.formatPrice(h, f, r)
            },
            priceUsdRaw: function(t) {
                var e;
                if (null === (e = wb.global) || void 0 === e || null === (e = e.settings) || void 0 === e || null === (e = e.variables) || void 0 === e || !e.toUsdExchangeRate)
                    return 0;
                return (parseInt(t * wb.global.settings.variables.toUsdExchangeRate * 100) / 100).toFixedNumber(2)
            },
            priceUsd: function(t) {
                var e;
                if (null === (e = wb.global) || void 0 === e || null === (e = e.settings) || void 0 === e || null === (e = e.variables) || void 0 === e || !e.toUsdExchangeRate)
                    return "";
                return "$" + $.views.converters.priceUsdRaw(t).toString().replace(/\B(?=(\d{3})+(?!\d))/g, "&nbsp;").replace(".", ",")
            },
            urlForGood: function(t, e, r, n, o, i) {
                var s = new URL("/catalog/" + t + "/detail.aspx",wb.settings.fullDomainName || window.location.origin);
                return r && s.searchParams.set("targetUrl", r),
                i && s.searchParams.set("size", i),
                n && (s.hash = n),
                s.toString()
            },
            urlForStatic: function(t, e) {
                return wb.settings.staticSiteUrl + t
            },
            toLower: function(t) {
                return null == t ? void 0 : t.toLowerCase()
            },
            dateFromTimestamp: function(t, e) {
                return new Date(t).format(e || "dd.MM.yyyy HH:mm")
            },
            formatDate: function(t, e) {
                var r;
                if (!t)
                    return "";
                const n = new Date(t);
                return null !== (r = this.tagCtx) && void 0 !== r && r.props.yearFormat && (new Date).getFullYear() != n.getFullYear() && (e += this.tagCtx.props.yearFormat),
                n.format(e)
            },
            humanDate: function(t, e) {
                if (!t)
                    return "";
                "string" == typeof t && (t = new Date(t));
                const r = t=>`${t} мес`
                  , n = t=>$.pluralize(t, "{0} год", "{0} года", "{0} лет")
                  , {years: o, months: i, days: s} = wb.helpers.date.diff(t);
                let a = (o > 0 || i > 0) && s > 15 ? i + 1 : i;
                return o > 0 ? 0 == a ? n(o) : 12 == a ? n(o + 1) : `${n(o)} ${r(a)}` : i > 0 ? 12 == a ? n(o + 1) : r(a) : null != e ? e : $.pluralize(s, "{0} день", "{0} дня", "{0} дней")
            },
            humanTime: function(t) {
                var e, r;
                if (t <= 0 || isNaN(t))
                    return "";
                const n = null === (e = this.tagCtx) || void 0 === e || null === (e = e.props) || void 0 === e ? void 0 : e.genitive
                  , o = []
                  , i = Math.floor(t % 86400 / 3600);
                i && o.push(n ? $.pluralize(i, "{0} часа", "{0} часов") : $.pluralize(i, "{0} час", "{0} часа", "{0} часов"));
                const s = null === (r = this.tagCtx) || void 0 === r || null === (r = r.props) || void 0 === r ? void 0 : r.withSeconds
                  , a = Math.floor(t % 3600 / 60) + (s ? 0 : 1);
                if (a && o.push(n ? $.pluralize(a, "{0} минуты", "{0} минут") : $.pluralize(a, "{0} минута", "{0} минуты", "{0} минут")),
                s) {
                    const e = t % 60;
                    e && o.push(n ? $.pluralize(e, "{0} секунды", "{0} секунд") : $.pluralize(e, "{0} секунда", "{0} секунды", "{0} секунд"))
                }
                return o.reduce((t,e,r,n)=>{
                    if (0 == r)
                        return e;
                    return `${t}${n.length - 1 == r ? " и " : ", "}${e}`
                }
                , "")
            },
            dateStringToFormat: function(t, e) {
                if (!t || "string" != typeof t)
                    return "";
                const [r,n,o] = t.split(".").map(t=>parseInt(t));
                try {
                    return new Date(o,n - 1,r).format(e || "dd MMMM yyyy")
                } catch (t) {
                    return ""
                }
            },
            localize: function(t) {
                return $.localize(t, Array.prototype.slice.call(arguments, 1))
            },
            pluralize: function(t) {
                return $.pluralize(null != t ? t : 0, Array.prototype.slice.call(arguments, 1))
            },
            customDateTimeFormat: function(t, e, r, n, o) {
                o || (o = "HH:mm");
                var i = new Date(t)
                  , s = new Date;
                if (i.toDateString() === s.toDateString())
                    return r + ", " + i.format(o);
                var a = function() {
                    return this.setDate(this.getDate() - 1),
                    this
                }
                .call(s);
                if (i.toDateString() === a.toDateString())
                    return n + ", " + i.format(o);
                var l = i.format(e);
                return i.getFullYear() < s.getFullYear() ? l + " " + i.getFullYear() + ", " + i.format(o) : l + ", " + i.format(o)
            },
            divideNumberBySeparator: function(t, e) {
                return Object.is(t, -0) ? "-0" : null == t ? void 0 : t.toString().replace(/\B(?=(\d{3})+(?!\d))/g, e || "&nbsp;")
            },
            trimWord: $.views.helpers.trimWord,
            join: function(t) {
                if (!t || 0 == t.length)
                    return "";
                const {upper: e, prefix: r, separator: n} = this.tagCtx.props;
                return t.map(t=>(e && (t = t.toUpperCase()),
                r && (t = `${r}${t}`),
                t)).join(n)
            },
            humanBytes: t=>{
                const e = ["Б", "КБ", "МБ", "ГБ"];
                let r = 0;
                for (; r < e.length - 1 && t >= 1024; )
                    t /= 1024,
                    r++;
                return `${+t.toFixed(2)} ${e[r]}`
            }
            ,
            deliveryDateTxt: function(t, e) {
                if (!t || "number" != typeof t)
                    return "";
                let r;
                const n = new Date(Date.now())
                  , o = new Date(n.getTime() + 60 * t * 60 * 1e3);
                o.is1stJan() && (o.setDate(o.getDate() + 1),
                t += 24);
                const i = 24 - n.getHours()
                  , s = o.getHours();
                return n.getDate() === o.getDate() && t < 24 ? r = s < 9 ? "Сегодня утром" : s < 23 ? e ? $.pluralize(t, "Сегодня за {0} час", "Сегодня за {0} часа", "Сегодня за {0} часов") : $.pluralize(t, "За {0} час", "За {0} часа", "За {0} часов") : "Завтра утром" : t < i + 9 ? r = t < 5 ? "Завтра утром" : "Завтра" : t < 24 + i ? r = s < 23 ? "Завтра" : "Послезавтра" : t < 48 + i && s < 23 ? r = "Послезавтра" : (s >= 23 && (t += i),
                r = $.views.converters.dateFromTimestamp(Date.now() + 60 * t * 60 * 1e3, "d MMMM")),
                r
            },
            catalogDeliveryDate: function(t) {
                return `Доставка <span class="product-card__delivery-date">${$.views.converters.deliveryDateTxt(t)}</span>`
            },
            deliveryType: function() {
                const {storeType: t} = this.tagCtx.props;
                return `${4 == (4 & t) ? "Грузовая доставка" : "Доставка"} ${8 == (8 & t) ? "продавца" : "Wildberries"}`
            },
            formatString: function() {
                let[t,e,r,n] = arguments;
                if ("string" != typeof t)
                    throw new Error("Template must be a string");
                return r && (t = t.replace(/\[(\d+)\]/gm, "{$1}")),
                n && (e = $.views.converters.encode(e)),
                String.format.apply(null, [t, e])
            },
            trim: function(t) {
                return t.trim()
            },
            imgForPromoCategory: function(t=0, e=!1) {
                const r = WbSpaModel.prototype.$apiSupport.webpImage ? "webp" : "png"
                  , n = e ? "small/" : "";
                return wb.helpers.url.urlToExternalStatic(`/vol1/wbx-catalog/promo_v2/${n}${t}.${r}`)
            },
            fileName: function(t) {
                var e;
                const r = t.substring(t.lastIndexOf("/") + 1)
                  , n = null === (e = this.tagCtx) || void 0 === e || null === (e = e.props) || void 0 === e ? void 0 : e.mode;
                return "name" == n ? r.substring(0, r.lastIndexOf(".")) || r : "extension" == n ? r.slice(1 + (Math.max(r.lastIndexOf("."), 0) || r.length)) || "" : r
            },
            toHttps: t=>$.views.converters.url(null == t ? void 0 : t.replace(/^http:/i, "https:")),
            onlyDigits: t=>null == t ? void 0 : t.replace(/[^\d\.]/g, ""),
            toWebp: function(t) {
                var e;
                return null !== (e = WbSpaModel.prototype) && void 0 !== e && null !== (e = e.$apiSupport) && void 0 !== e && e.webpImage ? "webp" : t
            },
            toNumber: t=>+t
        }),
        $.views.tags({
            range: {
                boundProps: ["start", "end"],
                baseTag: "for",
                render: function(t) {
                    var e = t
                      , r = this.tagCtx
                      , n = r.props.start || 0
                      , o = r.props.end
                      , i = r.params.props;
                    if (n || o)
                        if (r.args.length)
                            $.isArray(e) && (e = e.slice(n, o));
                        else {
                            e = [],
                            o = o || 0;
                            for (var s = n; s <= o; s++)
                                e.push(s)
                        }
                    return arguments.length || i && (i.start || i.end) ? this.base(e) : this.base()
                },
                onArrayChange: function(t, e) {
                    this.refresh()
                }
            },
            calendarV2: {
                dataBoundOnly: !0,
                onUpdate: !1,
                bindTo: ["selected", "limitTo", "limitFrom"],
                linkedCtxParam: ["selected", "limitTo", "limitFrom"],
                format: "dd.MM.yyyy",
                init: function(t) {
                    t.props.format && (this.format = t.props.format),
                    t.props.appendTo && (this.appendTo = t.props.appendTo)
                },
                onBind: function(t) {
                    const e = {
                        x: 0,
                        y: 1
                    };
                    t.props.offsetX && (e.x = t.props.offsetX),
                    this.datePicker = $(t.props.target).glDatePicker({
                        selectedDate: this.ctxPrm("selected") ? this.ctxPrm("selected") : t.props.limitTo,
                        customWidth: t.props.width,
                        zIndex: t.props.zIndex,
                        appendTo: this.appendTo,
                        overlay: "m" === wb.settings.displayMode,
                        useClick: !0,
                        calendarOffset: e,
                        onClick: (e,r,n,o)=>{
                            this.ctxPrm("selected", n),
                            "function" == typeof t.props.onSelect && t.props.onSelect(n.format(this.format))
                        }
                    }).glDatePicker(!0)
                },
                onAfterLink: function(t, e, r, n, o) {
                    var i = {
                        from: t.props.defaultFrom ? t.props.defaultFrom : new Date(2001,1,1),
                        to: new Date
                    };
                    t.props.limitFrom && (i.from = t.props.limitFrom),
                    t.props.limitTo && (i.to = t.props.limitTo),
                    this.datePicker.options.selectableDateRange = [i];
                    for (var s = [], a = i.from.getFullYear(); a <= i.to.getFullYear(); a++)
                        s.push(a);
                    this.datePicker.options.selectableYears = s,
                    this.datePicker.render()
                }
            },
            swiper: {
                dataBoundOnly: !0,
                mainElement: ".custom-slider",
                boundProps: ["total", "needRefresh"],
                template: '\n                <div class="custom-slider{{if ~tag.showArrows}} {{: ~tag.sliderClass}}{{/if}}">\n                    <div class="custom-slider__list">\n                        {{include tmpl=#content/}}\n                    </div>\n                    {{if ~tag.showArrows}}\n                    <button type="button" aria-label="Назад" class="custom-slider__arrow custom-slider__arrow--prev" data-link="{on ~tag.scroll \'left\'}disabled{:~leftArrowDisabled}"></button>\n                    <button type="button" aria-label="Вперёд" class="custom-slider__arrow custom-slider__arrow--next" data-link="{on ~tag.scroll \'right\'}disabled{:~rightArrowDisabled}"></button>\n                    {{/if}}\n                </div>\n            ',
                init: function() {
                    var t, e, r;
                    const n = this.tagCtx.props.slidesPerView;
                    this.slidesPerView = "auto" === n || "number" == typeof n ? n : 1,
                    this.showArrows = null !== (t = this.tagCtx.props.showArrows) && void 0 !== t && t,
                    this.sliderClass = null !== (e = this.tagCtx.props.sliderClass) && void 0 !== e && e,
                    this.slideSelector = null !== (r = this.tagCtx.props.slideSelector) && void 0 !== r ? r : ".custom-slider__item",
                    this.checkArrows = this.checkArrows.bind(this),
                    this.doOnScroll = this.ctx.root.$helper.throttle(this.doOnScroll.bind(this), 300)
                },
                onAfterLink: function() {
                    this.checkArrows()
                },
                onBind: function(t) {
                    this.containerList = this.mainElem[0].querySelector(".custom-slider__list"),
                    this.containerList.addEventListener("scroll", this.doOnScroll)
                },
                onUpdate: function(t, e, r) {
                    return "propertyChange" === t.type && "needRefresh" === e.path && (this.containerList.scrollLeft = 0,
                    this.checkArrows()),
                    !1
                },
                scroll: function(t) {
                    const e = this.containerList.querySelector(this.slideSelector).clientWidth + parseInt(getComputedStyle(this.containerList).gap);
                    let r = this.slidesPerView;
                    if ("auto" === this.slidesPerView) {
                        const t = this.mainElem[0].getBoundingClientRect();
                        r = Math.floor(t.width / e)
                    }
                    const n = e * r
                      , o = Math.round(this.containerList.scrollLeft) + ("left" === t ? -n : n);
                    this.containerList.scrollLeft = Math.round(o / e) * e
                },
                doOnScroll: async function(t) {
                    this.checkArrows()
                },
                checkArrows: function() {
                    const t = this.mainElem[0].getBoundingClientRect()
                      , e = this.containerList.querySelectorAll(this.slideSelector)
                      , r = e[e.length - 1].getBoundingClientRect();
                    this.ctxPrm("leftArrowDisabled", this.containerList.scrollLeft <= 0),
                    this.ctxPrm("rightArrowDisabled", t.right >= r.right)
                }
            },
            btnAdvertising: {
                template: "\n            {{if ordBannerMark}}<button type=\"button\" class=\"btn-advertising\" data-link=\"{on ~tag.onClickBtn}{tooltip classes='tooltip-advertising j-tooltip-advertising tooltip--dark' pos='alignright bottom' trigger='hover' distance=0 tmplName='advertisingTooltipTmpl' tmplData=ordBannerMark}\"><span>Реклама</span></button>{{/if}}\n        ",
                onClickBtn: function(t) {
                    t.preventDefault()
                }
            }
        });

    }
    , {}],
    163: [function(require, module, exports) {
        "use strict";
        wb.namespace("analitics", (()=>{
            const e = "wbAnalitic"
              , t = "__wba_s"
              , r = "purchase_checkout"
              , n = "stat_helper"
              , s = {
                l: "AAA",
                iid: 1
            }
              , i = 3e5;
            let a = {
                moveFrom: ""
            }
              , o = "";
            if (null == sessionStorage.getItem(e)) {
                const t = JSON.parse(localStorage.getItem(e));
                (null == t ? void 0 : t.expired) > Date.now() - i && sessionStorage.setItem(e, JSON.stringify(t.payload))
            }
            const l = JSON.parse(localStorage.getItem(n));
            function c() {
                return a
            }
            async function d() {
                return WbSpaModel.prototype.$services.splitterService.getSplitInfo()
            }
            async function u(e) {
                return WbSpaModel.prototype.$services.splitterService.getSplitInfoV2(e)
            }
            function S(e, t, r="", n) {
                e || (e = "");
                const s = ["targetUrl", "iid", "l", "lw", "s", "t", "t1", "t2", "t3", "t4"]
                  , i = (e,n)=>{
                    var s;
                    return null !== (s = null != e ? e : null == t ? void 0 : t[n]) && void 0 !== s ? s : r
                }
                  , a = {}
                  , o = e.split("|");
                for (let e = n ? 2 : 0; e < s.length; e++) {
                    var l;
                    let t = null !== (l = o[e]) && void 0 !== l ? l : null
                      , r = s[e];
                    if (!r)
                        return;
                    a[r] = i(t, r)
                }
                return a
            }
            return (null == l ? void 0 : l.expired) > Date.now() - i && (a = l.info),
            {
                getQueryIdForSearch: function() {
                    return `qid${wb.cookieHelper.getCookie("_wbauid")}${(new Date).format("yyyyMMddHHmmss", !0)}`
                },
                analiticsInfoToListName: function(e={}, t={}) {
                    const r = {
                        ...e,
                        ...t
                    }
                      , {l: n="", lw: s="", s: i="", t: a="", t1: o="", t2: l="", t3: c="", t4: d=""} = r;
                    return `${n}|${s}|${i}|${a}|${o}|${l}|${c}|${d}`
                },
                getAnaliticsInfoFromTargetUrl: S,
                getTailObjectFromAnalyticsInfo: function({l: e="", lw: t="", s: r="", t: n="", t1: s="", t2: i="", t3: a="", t4: o="", t5: l="", t6: c="", t7: d=""}={}) {
                    const u = {
                        loc: e,
                        loc_way: t,
                        sort: r
                    }
                      , S = l
                      , p = o
                      , g = d
                      , m = i
                      , C = {
                        catalog_type: i,
                        catalog_value: s,
                        normquery: "",
                        rmi: ""
                    }
                      , y = {
                        catalog_type: "",
                        catalog_value: "",
                        normquery: "",
                        rmi: ""
                    }
                      , _ = {
                        filters: "",
                        filters_entry_point: ""
                    }
                      , v = {
                        adv_type: o,
                        adv_id: s,
                        adv_rate: i
                    }
                      , f = {
                        category: n,
                        id_category: s
                    }
                      , A = {
                        bid: n,
                        bid_index: i
                    }
                      , h = {
                        supplier_type: s
                    };
                    return ["SVR", "STA", "SNT", "SHS", "SNH", "STH", "SNS", "SST", "SHT", "SCF", "STC", "STB"].includes(e) ? {
                        ...u,
                        terms: {
                            ...C,
                            ..._,
                            search_text: n,
                            query_id: S,
                            click_suggest: p
                        }
                    } : ["SAB", "AVR", "ANH", "ANS", "AST", "AHT", "ATR"].includes(e) ? {
                        ...u,
                        terms: {
                            ...v,
                            search_text: a,
                            query_id: S
                        }
                    } : ["ATC"].includes(e) ? {
                        ...u,
                        terms: {
                            ...v,
                            id_category: a,
                            query_id: S
                        }
                    } : ["ATB"].includes(e) ? {
                        ...u,
                        terms: {
                            ...v,
                            brand: a,
                            query_id: S,
                            filtersT7: g
                        }
                    } : "STB" === e ? {
                        ...u,
                        terms: {
                            brand: n,
                            catalog_value: s,
                            catalog_type: i,
                            click_suggest: p,
                            query_id: S
                        }
                    } : "STC" === e ? {
                        ...u,
                        terms: {
                            ...C,
                            ..._,
                            category: n,
                            click_suggest: p,
                            query_id: S
                        }
                    } : "STS" === e ? {
                        ...u,
                        terms: {
                            ...C,
                            ..._,
                            supplier_name: n,
                            click_suggest: p,
                            supplier_id: "",
                            query_id: S
                        }
                    } : ["STR", "STG"].includes(e) ? {
                        ...u,
                        terms: {
                            ..._,
                            ...y,
                            tag_text: n,
                            tag_index: s,
                            click_suggest: p,
                            supplier_id: "",
                            query_id: S
                        }
                    } : ["SBA", "SIS", "SCM", "SCN", "SPH", "STM", "SCR", "SPA"].includes(e) ? {
                        ...u,
                        terms: {
                            click_suggest: p,
                            query_id: S
                        }
                    } : ["MBB", "MBH", "MBM", "MBS", "MBV"].includes(e) ? {
                        ...u,
                        terms: {
                            ...A,
                            ..._
                        }
                    } : "MBT" === e ? {
                        ...u,
                        terms: {
                            ...A,
                            ..._,
                            tv_block: s
                        }
                    } : ["MBG", "MBF"].includes(e) ? {
                        ...u,
                        terms: {
                            ...A
                        }
                    } : ["MAB", "AMB"].includes(e) ? {
                        ...u,
                        terms: {
                            ...v
                        }
                    } : ["MCS", "MCB", "MCP", "MCV", "MCO", "MPF", "MCM", "MCN", "MSA"].includes(e) ? {
                        ...u
                    } : ["BBB", "BBA", "BBD"].includes(e) ? {
                        ...u,
                        terms: {
                            ..._,
                            ...A
                        }
                    } : "BCA" === e ? {
                        ...u,
                        terms: {
                            filters: m,
                            ...f
                        }
                    } : ["BPA"].includes(e) ? {
                        ...u,
                        terms: {
                            ...v,
                            brand: a,
                            filters: g
                        }
                    } : ["BCR", "BCB", "BCP"].includes(e) ? {
                        ...u,
                        terms: {
                            ..._
                        }
                    } : ["CCC", "CTC"].includes(e) ? {
                        ...u,
                        terms: {
                            ...f,
                            filters: m,
                            filters_entry_point: ""
                        }
                    } : "CAB" === e ? {
                        ...u,
                        terms: {
                            ..._,
                            ...v,
                            id_category: a
                        }
                    } : "CAA" === e ? {
                        ...u,
                        terms: {
                            ..._,
                            ...v,
                            search_text: a,
                            query_id: S,
                            filters: g
                        }
                    } : ["CBB", "CBA", "CBS", "CBU"].includes(e) ? {
                        ...u,
                        terms: {
                            ...A,
                            ..._
                        }
                    } : ["CCA", "CCR", "CCT", "CAR", "CBP", "CPA"].includes(e) ? {
                        ...u
                    } : "CAR" === e ? {
                        ...u,
                        terms: {
                            search_text: n,
                            catalog_value: s,
                            catalog_type: i,
                            query_id: S,
                            filters: g
                        }
                    } : "SPL" === e ? {
                        ...u,
                        terms: {
                            ...h
                        }
                    } : ["SBB", "SBT", "SBC"].includes(e) ? {
                        ...u,
                        terms: {
                            ...h,
                            ...A
                        }
                    } : "SCA" === e ? {
                        ...u,
                        terms: {
                            ...h,
                            category: n
                        }
                    } : "SBR" === e ? {
                        ...u,
                        terms: {
                            ...h,
                            brand_index: i
                        }
                    } : ["SCB", "SCO", "SCP"].includes(e) ? {
                        ...u,
                        terms: {
                            ...h
                        }
                    } : ["ABP", "ABC", "ABN"].includes(e) ? {
                        ...u,
                        terms: {
                            parent_item_id: n,
                            ...v,
                            brand: a,
                            filters: g
                        }
                    } : ["ICO", "ICB", "ICF", "ICV", "ICD", "ICR", "ICE", "ICS", "IBS", "ICL", "ICI", "ISC", "IAD"].includes(e) ? {
                        ...u,
                        terms: {
                            parent_item_id: n,
                            ..._
                        }
                    } : "ICA" === e ? {
                        ...u,
                        terms: {
                            ...v,
                            parent_item_id: n
                        }
                    } : "IAB" === e ? {
                        ...u,
                        terms: {
                            ...A,
                            ..._
                        }
                    } : ["IBN", "IBP", "IBC", "ICC", "IRC", "ISP", "ITA"].includes(e) ? {
                        ...u,
                        terms: {
                            ..._
                        }
                    } : ["CCB", "CCM", "CPF", "CRA"].includes(e) ? {
                        ...u,
                        terms: {
                            item_ids: n
                        }
                    } : "CSI" === e ? {
                        ...u,
                        terms: {
                            parent_item_id: n
                        }
                    } : "CRV" === e ? {
                        ...u,
                        terms: {
                            empty_cart: n
                        }
                    } : ["CRT", "CER", "CEB"].includes(e) ? {
                        ...u
                    } : ["DLV", "DCR", "DCV", "DRC", "DRE"].includes(e) ? {
                        ...u,
                        terms: {
                            ..._
                        }
                    } : "TCB" === e ? {
                        ...u,
                        terms: {
                            parent_item_id: n
                        }
                    } : "TCM" === e ? {
                        ...u
                    } : ["FCR", "FCS", "FRP", "FCV"].includes(e) ? {
                        ...u
                    } : ["VRW", "VCV"].includes(e) ? {
                        ...u
                    } : ["AAA", "AAB", "AAC", "AAS"].includes(e) ? {
                        ...u
                    } : ["LCS", "LCR", "WTL"].includes(e) ? {
                        ...u
                    } : ["WSH", "WCA", "WCV", "WCS", "WCR", "WAB"].includes(e) ? {
                        ...u
                    } : "RWA" === e ? {
                        ...u
                    } : ["NCV", "NCB", "NCM", "NCR"].includes(e) ? {
                        ...u
                    } : "NIA" === e ? {
                        ...u
                    } : ["PRC", "PCV"].includes(e) ? {
                        ...u
                    } : "PPM" === e ? {
                        ...u
                    } : ["FBR", "FBV"].includes(e) ? {
                        ...u,
                        terms: {
                            ..._
                        }
                    } : "FBA" === e ? {
                        ...u,
                        terms: {
                            ...v,
                            brand: a,
                            filters: g
                        }
                    } : "LBA" === e ? {
                        ...u,
                        terms: {
                            ..._
                        }
                    } : "PCA" === e ? {
                        ...u,
                        terms: {
                            ..._,
                            type: n,
                            name: s,
                            link: i
                        }
                    } : ["PBC", "PBB"].includes(e) ? {
                        ...u,
                        terms: {
                            ...A
                        }
                    } : ["PSA", "PBA", "PPA"].includes(e) ? {
                        ...u,
                        terms: {
                            ...v,
                            bid: l,
                            bid_index: c
                        }
                    } : "PAP" === e ? {
                        ...u,
                        terms: {
                            ...v,
                            category: l,
                            id_category: c
                        }
                    } : "PCB" === e ? {
                        ...u,
                        terms: {
                            ...f
                        }
                    } : "PSP" === e ? {
                        ...u,
                        terms: {
                            parent_item_id: n
                        }
                    } : "PCS" === e ? {
                        ...u
                    } : ["TBV", "TBN", "TBC", "TBA", "TBP", "TBT"].includes(e) ? {
                        ...u,
                        terms: {
                            ...A
                        }
                    } : {}
                },
                tryGetAnaliticsCodeForSearchAdvert: function(e) {
                    switch (e) {
                    case "SNH":
                        return "ANH";
                    case "SNS":
                        return "ANS";
                    case "SHT":
                        return "ATR";
                    case "STC":
                        return "ATC";
                    case "SNT":
                        return "SAB";
                    default:
                        return null
                    }
                },
                getRecomendationsSplitterHeaders: async function() {
                    return await async function(e) {
                        var t, r;
                        const [n,s] = await Promise.all([WbSpaModel.prototype.$user.getUserInfo(), u(e)])
                          , i = (null !== (t = null == n ? void 0 : n.uid) && void 0 !== t ? t : 0).toString();
                        let a = "";
                        return null != s && s.length && s.forEach(e=>{
                            a += `${e.key}=${e.value};`
                        }
                        ),
                        {
                            UserID: i,
                            "Test-Properties": (null === (r = a) || void 0 === r ? void 0 : r.substring(0, a.length - 1)) || ""
                        }
                    }("rec")
                },
                checkDataInSplitterServiceV2: async function(e, t, r) {
                    let n = !1;
                    if (e) {
                        const s = await u(e);
                        for (let e = 0; e < s.length; e++)
                            s[e].key === t && s[e].value === r && (n = !0,
                            e = s.length)
                    }
                    return n
                },
                getSplitInfo: d,
                getSplitInfoV2: u,
                appendSplitInfoV2: async function(e, t) {
                    return WbSpaModel.prototype.$services.splitterService.appendSplitInfoV2(e, t)
                },
                getStatInfo: c,
                updateStatInfo: function(e) {
                    const t = c();
                    t.moveFrom = o || "",
                    o = "",
                    function(e, t) {
                        try {
                            var r;
                            null === (r = localStorage) || void 0 === r || r.putObject(n, {
                                info: e,
                                expired: Date.now() + i
                            }),
                            t || (a = e)
                        } catch (e) {
                            console.warn("Saving analitics state has failed"),
                            console.error(e.message)
                        }
                    }(t, e)
                },
                sendWbaEcomStat: function(e, t, r) {
                    try {
                        var n, s;
                        if (!window.wba || !(null != t && t.length) > 0)
                            return;
                        if ((r = null !== (n = r) && void 0 !== n ? n : {}).hasOwnProperty("country") || (r.country = wb.settings.currentLocale),
                        !r.hasOwnProperty("cluster")) {
                            const e = WbSpaModel.prototype.$user.getUserClusters();
                            e && (r.cluster = e)
                        }
                        r.address = null !== (s = this.currentAddress) && void 0 !== s ? s : "not_selected";
                        const i = (new Date).format("yyyy-MM-dd HH:mm:ss");
                        t.forEach(e=>{
                            var t, r, n, s, a, o, l, c, d;
                            let u = {
                                utcTime: i,
                                id: null === (t = e.id) || void 0 === t ? void 0 : t.toString(),
                                nm: Number(e.id),
                                chrt: Number(e.chrt),
                                rid: null === (r = e.rid) || void 0 === r ? void 0 : r.toString(),
                                name: e.name,
                                brand: e.brand,
                                price: parseInt(e.price),
                                inListIndex: parseInt(e.inListIndex) || 1,
                                listName: e.listName,
                                variant: null !== (n = e.variant) && void 0 !== n ? n : "",
                                quantity: 1,
                                affiliation: `${null !== (s = e.affiliation) && void 0 !== s ? s : ""}|${null !== (a = e.storeId) && void 0 !== a ? a : ""}`,
                                category: null !== (o = null == e ? void 0 : e.category) && void 0 !== o ? o : "regular",
                                category2: (null == e ? void 0 : e.subjectId) > 0 ? e.subjectId.toString() : "",
                                category3: (null == e ? void 0 : e.subjectParentId) > 0 ? e.subjectParentId.toString() : "",
                                coupon: `${null !== (l = e.feedbacksCount) && void 0 !== l ? l : ""}|${null !== (c = e.rating) && void 0 !== c ? c : ""}`,
                                tailObject: e.tailObject
                            };
                            const S = parseInt(e.quantity) || 1;
                            window.wba("ec:setCurrency", WbSpaModel.prototype.$user.getCurrency());
                            const p = !!e.rid && S > 1 && (null === (d = u.rid) || void 0 === d ? void 0 : d.split(",")) || [];
                            for (let e = 0; e < S; e++)
                                (null == p ? void 0 : p.length) > e && ((u = Object.assign({}, u)).rid = p[e]),
                                window.wba("ec:addProduct", u)
                        }
                        ),
                        window.wba("ec:setAction", e),
                        window.wba("ec:send", r)
                    } catch (e) {
                        console.log("wba exception", e)
                    }
                },
                savePurchaseCheckout: function(e) {
                    sessionStorage.setItem(r, e)
                },
                getPurchaseCheckout: function() {
                    var e;
                    return null !== (e = sessionStorage.getItem(r)) && void 0 !== e ? e : "not_found"
                },
                sendCarouselWbaEvent: function(e, t, r, n, s, i) {
                    "Carousel_All" === e && (o = "carousel");
                    let a = {
                        location: t = t || this.getState().l,
                        index: null == r ? void 0 : r.toString(),
                        item_id: null == n ? void 0 : n.toString(),
                        name: s
                    };
                    i && (a = Object.assign(a, i)),
                    this.sendEvent(e, a)
                },
                sendEvent: function(e, t={}) {
                    var r;
                    if (!window.wba)
                        return;
                    t.country = wb.settings.currentLocale;
                    const n = WbSpaModel.prototype.$user.getUserClusters();
                    n && (t.cluster = n),
                    t.address = null !== (r = this.currentAddress) && void 0 !== r ? r : "not_selected",
                    "Header_T" === e && (t.type = "d" === wb.settings.displayMode ? "desktop" : "mobile"),
                    window.wba(e, t)
                },
                sendAddressSelection: function({source: e, deliveryType: t, addressId: r, address: n, isChanged: s}) {
                    const i = s ? "DLV_Address_Add_Ok" : "DLV_Address_Slt"
                      , a = {
                        location: e
                    };
                    "courier" === t ? (a.type = "CRR",
                    a.address_crr = n) : (a.type = "PUP",
                    a.pup_id = r.toString()),
                    this.sendEvent(i, a)
                },
                sendBannersWbaEvent: function(e, t, r, n, s="0", i) {
                    r = r || this.getState().l,
                    "Banner_T" === e && (o = "banner");
                    const a = {
                        name: null != t ? t : "",
                        location: r,
                        link: n,
                        index: (s = parseInt(s) + 1).toString(),
                        id: i
                    };
                    this.sendEvent(e, a)
                },
                sendSessionStartEvent: function() {
                    wb.cookieHelper.getCookie(t) || (wb.cookieHelper.setCookie(t, 1, {
                        "max-age": void 0
                    }),
                    this.sendEvent("session_start"))
                },
                sendEventTmpl(e, ...t) {
                    if (!window.wba)
                        return;
                    const r = t.slice(0, -2)
                      , n = {};
                    if (r && r.length % 2 == 0)
                        for (let e = 0; e < r.length; e += 2)
                            n[r[e]] = r[e + 1];
                    this.sendEvent(e, n)
                },
                proceedAndSave(e, t, r, n, s, i, a, o) {
                    if ("string" != typeof e)
                        return;
                    "string" != typeof t && "number" != typeof t && (t = null),
                    "string" != typeof r && "number" != typeof r && (r = null),
                    "string" != typeof n && "number" != typeof n && (n = null),
                    "string" != typeof s && "number" != typeof s && (s = null),
                    "string" != typeof i && "number" != typeof i && (i = null),
                    "string" != typeof a && "number" != typeof a && (a = null),
                    "string" != typeof o && "number" != typeof o && (o = null);
                    const l = {
                        l: e
                    };
                    let c = parseInt(t);
                    null == t || isNaN(c) || (l.iid = Math.max(1, c)),
                    null != r && (l.opt = r),
                    null != n && (l.t = n),
                    null != s && (l.t1 = s),
                    null != i && (l.t2 = i),
                    null != a && (l.t3 = a),
                    null != o && (l.t4 = o),
                    this.saveState(l)
                },
                updateAnalyticsFromQuery() {
                    const e = new URL(window.location.href);
                    document.referrer.indexOf("guru.wildberries.ru") > 0 && e.searchParams.has("externalSource") && e.searchParams.has("analyticsCode") ? this.saveState(e.searchParams.get("analyticsCode"), !1, !0) : e.searchParams.has("analiticsCode") && this.saveState({
                        l: e.searchParams.get("analiticsCode")
                    }, !0)
                },
                saveState(t, r=!1, n=!1) {
                    try {
                        "string" == typeof t && (t = S(`||${t}`),
                        t = this.listNameToAnalyticState(t, null, null, !0));
                        const s = JSON.stringify({
                            payload: t,
                            expired: Date.now() + i
                        });
                        n || (t.s = function(e) {
                            var t;
                            const r = null === (t = function(e) {
                                let t = document.cookie.match(new RegExp("(?:^|; )" + e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, "\\$1") + "=([^;]*)"));
                                return t ? decodeURIComponent(t[1]) : void 0
                            }("__catalogOptions")) || void 0 === t || null === (t = t.split("&").find(e=>{
                                const [t] = e.trim().split(":");
                                return "Sort" === t
                            }
                            )) || void 0 === t ? void 0 : t.split(":")
                              , n = (null == r ? void 0 : r.length) > 0 ? r[1] : "popular";
                            return "DRE" === e.l ? "" : n.toLowerCase()
                        }(t));
                        const a = JSON.stringify(t);
                        sessionStorage.setItem(e, a),
                        r || localStorage.setItem(e, s)
                    } catch (e) {
                        console.warn("Saving analitics state has failed"),
                        console.error(e.message)
                    }
                },
                updateState(e, t) {
                    const r = this.getState(!1);
                    let n = {
                        ...r,
                        ...e
                    };
                    !e.extraTerms && t && t[r.l] && (n = {
                        ...n,
                        ...t[r.l]
                    }),
                    this.saveState(n)
                },
                getState(t=!0) {
                    var r;
                    let n = null !== (r = sessionStorage.getObject(e)) && void 0 !== r ? r : s;
                    return t && n.extraL && (n.l = n.extraL,
                    n.extraTerms && (n = {
                        ...n,
                        ...n.extraTerms
                    })),
                    this._validateAndFix(n)
                },
                saveLastSearchAnaliticsData(e, t, r) {
                    sessionStorage.setItem("lats_search_type", `${e}&${t}&${r}`)
                },
                saveQueryIdForSearch(e) {
                    sessionStorage.setItem("query_id_search", e)
                },
                retrieveQueryIdForSearch() {
                    const e = sessionStorage.getItem("query_id_search");
                    if (e)
                        return e;
                    {
                        const e = this.getQueryIdForSearch();
                        return this.saveQueryIdForSearch(e),
                        e
                    }
                },
                getLastSearchAnaliticsData() {
                    var e;
                    return null !== (e = sessionStorage.getItem("lats_search_type")) && void 0 !== e ? e : ""
                },
                _validateAndFix(e) {
                    return (null == e.iid || isNaN(e.iid) || e.iid < 1) && (e.iid = 1),
                    e.t = this._escape(e.t),
                    e.t1 = this._escape(e.t1),
                    e.t2 = this._escape(e.t2),
                    e
                },
                _escape: e=>e ? "string" != typeof e ? e : e.replace(/'/g, " ") : "",
                async isAbTest133Approved() {
                    const {splitId: e, title: t} = await d();
                    return "133" === e && "test_1" === t
                },
                async isAbTest155Approved() {
                    const {splitId: e, title: t} = await d();
                    return "155" === e && "test_1" === t
                },
                sendUserEvent(e, t) {
                    this.sendEvent("user_id", {
                        clientId: e,
                        account_id: t
                    })
                },
                setCurrentAddress(e, t) {
                    this.currentAddress = `${"courier" === e ? "CRR" : ""}${t}`
                }
            }
        }
        )());

    }
    , {}],
    164: [function(require, module, exports) {
        "use strict";
        wb.xnm = function() {
            const e = e=>e ? "https://card.wb.ru/cards/v2/list" : "https://card.wb.ru/cards/v2/detail"
              , t = [3382, 2596, 2602, 2603, 2604, 2605, 2606, 2607, 2608, 2609, 2610, 2611, 2612, 2613, 2614, 2615, 2616, 2617, 2618, 2909, 3392, 3415, 5019, 5020, 5021, 5023, 5025, 5026, 5037, 5039, 5040, 5041, 5042, 5043, 5044, 5045, 5046, 5047, 5048, 5049, 5050, 5051, 5052, 5064, 5065, 5066, 5067, 5068, 5069, 5070, 5071, 5072, 5073, 5074, 5075, 5076, 5080, 5082, 5083, 5084, 5085, 5086, 5087, 5088, 5089, 5090, 5091, 5116, 5117, 5118, 5119, 5120, 5121, 5122, 5125, 5126, 5127, 5128, 5129, 5132, 5150, 5153, 5156, 5158, 5159, 5186, 5193, 5194, 5197, 5288, 5289, 5292, 5293, 5294, 5295, 5296, 5297, 5298, 5340, 5478, 5482, 5519, 5576, 5668, 5719, 5772, 5779, 5780, 5783, 5784, 5789, 5812, 5813, 5814, 5880, 5948, 6062, 6217, 6296, 6302, 6303, 6304, 6412, 6939, 7012, 7013, 7014, 7015, 7016, 7017, 7018, 7019, 7020, 7025, 7106, 7438, 7571];
            let n = [];
            const r = 864e5
              , i = "adultSubjectIds";
            async function s() {
                if (n.length > 0)
                    return Promise.resolve();
                const e = JSON.parse(localStorage.getItem(i));
                if ((null == e ? void 0 : e.expired) > Date.now() - r)
                    return n = e.info,
                    Promise.resolve();
                try {
                    var t;
                    const e = "adult-subjects.json"
                      , s = await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(e, 5e3);
                    return s && 0 !== s.length ? (n = s,
                    null === (t = localStorage) || void 0 === t || t.putObject(i, {
                        info: s,
                        expired: Date.now() + r
                    }),
                    Promise.resolve()) : (console.warn("Getting adult subjects has failed"),
                    Promise.reject())
                } catch (e) {
                    return console.warn("Getting adult subjects has failed"),
                    console.error(e.message),
                    Promise.resolve()
                }
            }
            let o = {};
            const l = 36e5
              , a = "no-return-subjects.json";
            function c(e, r) {
                const i = n.length > 0 ? n : t;
                return -1 !== i.indexOf(e) || !!r && -1 !== i.indexOf(r)
            }
            let u = function(e) {
                let t = this;
                this.width = this.weight = this.length = this.depth = 0,
                null == e || e.forEach(function(e, n) {
                    "Вес с упаковкой (кг)" === e.name && (t.weight = parseFloat(e.value) || 0),
                    "Ширина упаковки (мм)" === e.name && (t.width = parseInt(e.value, 10) || 0),
                    "Длина упаковки (мм)" === e.name && (t.length = parseInt(e.value, 10) || 0),
                    "Высота упаковки (мм)" === e.name && (t.depth = parseInt(e.value, 10) || 0)
                }),
                this.v = this.width / 1e3 * (this.length / 1e3) * (this.depth / 1e3),
                this.sum3d = this.width + this.length + this.depth
            };
            const d = (e,t)=>{
                if (e) {
                    if ("BYN" !== t && "byn" !== t)
                        return e.toString().slice(0, -2);
                    {
                        const t = e.toString();
                        return (t.slice(0, -2) || "0") + "." + t.slice(-2)
                    }
                }
                return e
            }
            ;
            function p(e, t) {
                if (t && e.pics > 0)
                    return !0;
                if (!e.price)
                    return !1;
                if (0 === e.pics || !e.sizes || 0 === e.sizes.length)
                    return !1;
                for (let t = 0; t < e.sizes.length; t++) {
                    const n = e.sizes[t];
                    if (n.stocks && n.stocks.length > 0)
                        return !0
                }
                return !1
            }
            function h(e) {
                return !!(e.sizes && e.sizes.length > 0)
            }
            function f(e, t) {
                return !t || !e.isAdult
            }
            async function m(t, n, r) {
                const i = `${e(r)}?${t}&nm=${n.join(";")}`;
                return WbSpaModel.prototype.$httpClient.fetchBasicJSON(i, {
                    xhrFields: {
                        withCredentials: !1
                    },
                    processData: !1,
                    dataType: "json"
                }, {
                    addAuthHeader: !0,
                    retry: 2,
                    nullOnError: !0
                })
            }
            function v(e, t) {
                return new Promise((n,r)=>{
                    Promise.all([wb.user.getXinfo(), s()]).then(([i])=>{
                        var s;
                        const o = [];
                        let l = 0
                          , a = 0
                          , u = [];
                        e.forEach(e=>{
                            100 === l && (o[a] = m(i, u, t),
                            a += 1,
                            l = 0,
                            u = []),
                            u[l++] = e
                        }
                        ),
                        u.length > 0 && (o[a] = m(i, u, t));
                        const d = {}
                          , p = new URLSearchParams(i)
                          , h = null === (s = p.get("curr")) || void 0 === s ? void 0 : s.toUpperCase()
                          , f = +p.get("spp")
                          , v = +p.get("dest");
                        Promise.all(o).then(e=>{
                            e.forEach(e=>{
                                !function(e) {
                                    0 === e.state && e.data.products && e.data.products.forEach(e=>{
                                        var t;
                                        e.name = (null === (t = e.name) || void 0 === t ? void 0 : t.length) > 0 ? e.name : "Название не указано",
                                        e.isAdult = e.isAdult || c(e.subjectId, e.subjectParentId),
                                        e.currency = h,
                                        e.spp = f,
                                        e.dest = v,
                                        g(e),
                                        b(e),
                                        d[e.id] = e
                                    }
                                    )
                                }(e)
                            }
                            ),
                            n(d)
                        }
                        ).catch(e=>{
                            console.log(e.statusText + " " + e.responseText),
                            r()
                        }
                        )
                    }
                    )
                }
                )
            }
            function g(e, t) {
                if (!e || !e.sizes)
                    return;
                let n = {}
                  , r = !1;
                e.sizes.forEach(e=>{
                    if (!e.price)
                        return;
                    const t = ~~(100 * (e.price.basic - e.price.total) / e.price.basic);
                    e.price.sale = t > 0 ? t : 0,
                    (e.price.basic < e.price.total || e.price.basic === e.price.total && e.sale > 0 || e.price.sale <= wb.global.settings.variables.pricesDeltaToShowSale) && (e.price.basic = e.price.total,
                    e.price.sale = 0),
                    n.total || (n = e.price),
                    n.total !== e.price.total && (r = !0,
                    n.total > e.price.total && (n = e.price))
                }
                ),
                e.price = n,
                r && (e.diffPrice = !0)
            }
            function b(e, t, n) {
                var r, i, s, o;
                e && (t || (t = null !== (r = null !== (i = null === (s = e.sizes) || void 0 === s || null === (s = s.filter(e=>e.payload)) || void 0 === s ? void 0 : s[0]) && void 0 !== i ? i : null === (o = e.sizes) || void 0 === o ? void 0 : o[0]) && void 0 !== r ? r : e),
                t && t.saleConditions && (0 != (1 & t.saleConditions) && (e.isUnrefusable = !0),
                0 != (2 & t.saleConditions) && (e[1 === n ? "needPrepay" : "isPrepaid"] = !0),
                0 != (4 & t.saleConditions) && (e.isUnreturnable = !0),
                0 != (8 & t.saleConditions) && (e.isVerificationReturn = !0)))
            }
            function w() {
                try {
                    return localStorage.getObject("product_colors") || {}
                } catch (e) {
                    return console.warn("[ProductColorsCache]: failed to read from local storage", e),
                    {}
                }
            }
            function P(e) {
                var t;
                if (!wb.global.settings.switches.enableManualGluingOnProduct)
                    return null;
                let n = {
                    isOnlyColor: !1,
                    value: ""
                }
                  , r = null == e ? void 0 : e.map(e=>{
                    if (e.is_variable) {
                        if (!/^-?\d+\.?\d*$/.test(e.value))
                            return {
                                value: e.value,
                                name: e.name
                            }
                    }
                }
                ).filter(e=>e).splice(0, 3);
                return 1 == (null == r ? void 0 : r.length) && "Цвет" == (null === (t = r[0]) || void 0 === t ? void 0 : t.name) ? (n.isOnlyColor = !0,
                n.value = null == r ? void 0 : r.map(e=>e.value).toString(),
                n) : (null == r ? void 0 : r.length) >= 1 ? (n.isOnlyColor = !1,
                n.value = null == r ? void 0 : r.map(e=>e.value).join(" • "),
                n) : null
            }
            function y(e, t=!1, n=!1) {
                var r, i, s, o, l;
                g(e);
                const a = null !== (r = null === (i = e.sizes) || void 0 === i || null === (i = i.filter(e=>e.payload)) || void 0 === i ? void 0 : i[0]) && void 0 !== r ? r : null === (s = e.sizes) || void 0 === s ? void 0 : s[0];
                b(e, a);
                const u = null !== (o = e.price) && void 0 !== o ? o : {}
                  , p = 20624 === e.brandId || 30624 === e.siteBrandId;
                let h = {
                    nmId: e.id,
                    cod1S: e.id,
                    imtId: e.root,
                    name: e.name,
                    pics: e.pics,
                    subjectId: e.subjectId,
                    subjectParentId: e.subjectParentId,
                    kindId: e.kindId,
                    brand: e.brand,
                    brandId: e.siteBrandId,
                    brandCod: e.brandId,
                    price: d(u.basic, e.currency),
                    salePrice: d(u.total, e.currency),
                    logisticsCost: u.logistics,
                    colorCodes: e.colors.map(e=>e.id),
                    sale: u.sale,
                    priceDiff: e.diffPrice,
                    star: e.rating,
                    reviewRating: e.reviewRating,
                    feedbacks: e.feedbacks,
                    adult: e.isAdult || c(e.subjectId, e.subjectParentId) || !1,
                    isDigitalGood: e.isDigital || !1,
                    sizes: I(e.sizes, t, n, e.currency),
                    promoTxt: e.promoTextCat,
                    promoTextCard: e.promoTextCard,
                    color: e.colors.map(e=>e.name).join(","),
                    woSize: 1 === (null === (l = e.sizes) || void 0 === l ? void 0 : l.length) && "" === a.name,
                    canQuickOrder: !e.isDigital,
                    soldOut: e.soldOut || !1,
                    deliveryHours: (e.time1 || 0) + (e.time2 || 0),
                    fastestStore: e.wh,
                    isPreorder: 5772 === e.brandId && wb.settings.preOrderList.includes(e.id),
                    currency: e.currency,
                    spp: e.spp,
                    dest: e.dest,
                    saleConditions: null == a ? void 0 : a.saleConditions,
                    isUnrefusable: e.isUnrefusable,
                    isPrepaid: e.isPrepaid,
                    isUnreturnable: e.isUnreturnable,
                    isVerificationReturn: e.isVerificationReturn,
                    dist: e.dist,
                    time1: e.time1,
                    time2: e.time2,
                    payloadV2: null == a ? void 0 : a.payload,
                    optionId: null == a ? void 0 : a.optionId,
                    whDtype: null == a ? void 0 : a.dtype,
                    log: e.log,
                    supplierId: e.supplierId,
                    supplier: e.supplier,
                    sort: e.sort || 0,
                    viewFlags: e.viewFlags,
                    shouldShowOriginalMark: !p && 0 != (8 & e.viewFlags),
                    paymentDiscountAmount: wb.priceHelper.canShowWalletDiscount(u.total / 100, e.currency, e.supplierId) ? wb.priceHelper.calculateDiscount(u.total / 100, wb.global.settings.variables.walletDiscountPercent, "RUB") : 0,
                    catalogPrice: u,
                    supplierFlags: e.supplierFlags
                };
                return h.priceWithCouponAndDiscount = h.salePrice,
                h
            }
            const I = (e,t=!1,n=!1,r=null)=>{
                if (null == e)
                    return;
                e.sort(function(e, t) {
                    return e.rank - t.rank
                });
                let i = e;
                return t && (i = e.filter(e=>{
                    var t;
                    return (null === (t = e.stocks) || void 0 === t ? void 0 : t.length) > 0
                }
                )),
                i.map(e=>{
                    var t;
                    const i = {
                        ch: e.optionId,
                        s: 1,
                        nm: e.origName,
                        rusNm: e.name,
                        stocks: e.stocks,
                        unavailable: (null === (t = e.stocks) || void 0 === t ? void 0 : t.length) <= 0,
                        payload: e.payload,
                        returnCost: e.returnCost,
                        saleConditions: e.saleConditions
                    };
                    return n && e.price && (i.price = d(e.price.basic, e.currency || r),
                    i.salePrice = d(e.price.total, e.currency || r),
                    i.catalogPrice = e.price),
                    i
                }
                )
            }
            ;
            return {
                getGoodsForRecommendAndCatalog: function(e, t, n, r) {
                    return new Promise((i,s)=>{
                        const o = [];
                        if (!e)
                            return o;
                        const l = !t;
                        v(e, l).then(s=>{
                            e.forEach(e=>{
                                if (s[e]) {
                                    const i = s[e];
                                    if (l) {
                                        if (i && h(i) && f(i, n)) {
                                            const e = y(i, !1, !0);
                                            e.soldOut = !i.sizes || 0 === i.sizes.length,
                                            o.push(e)
                                        }
                                    } else if (i && p(i, t) && f(i, n)) {
                                        const e = y(i, !r, !0);
                                        e.soldOut = !p(i, !1),
                                        o.push(e)
                                    }
                                }
                            }
                            ),
                            i(o)
                        }
                        ).catch(()=>{
                            e.forEach(e=>{
                                o.push({
                                    nmId: e,
                                    cod1S: e,
                                    isFail: !0
                                })
                            }
                            ),
                            i(o)
                        }
                        )
                    }
                    )
                },
                getXnmProducts: v,
                getInfoForWbaStat: async function(e, t) {
                    try {
                        const n = e.map(e=>e.nmId)
                          , r = t ? await t : await v(n);
                        return e.reduce((e,t)=>{
                            const {nmId: n, size: i} = t;
                            let s = null;
                            if (null != r && r.hasOwnProperty(t.nmId)) {
                                var o;
                                const e = r[n]
                                  , t = null === (o = e.sizes.find(e=>e.optionId === i)) || void 0 === o || null === (o = o.price) || void 0 === o ? void 0 : o.total
                                  , l = i ? e.sizes.find(e=>e.optionId === i) : I(e.sizes).filter(e=>{
                                    var t;
                                    return (null === (t = e.stocks) || void 0 === t ? void 0 : t.length) > 0
                                }
                                )[0];
                                s = {
                                    salePrice: t / 100,
                                    stores: null == l ? void 0 : l.stocks
                                }
                            }
                            return e.set(n, s),
                            e
                        }
                        , new Map)
                    } catch (e) {
                        return console.error(e),
                        new Map
                    }
                },
                getCatalogCards: function(e, t, n, r=!1) {
                    return new Promise((i,s)=>{
                        const o = {};
                        e.forEach(e=>{
                            o[e] = {}
                        }
                        );
                        const l = !n;
                        v(e, l).then(e=>{
                            Object.keys(e).forEach(i=>{
                                let s = e[i];
                                const a = o[s.id];
                                function c(e, t) {
                                    return e.rank > t.rank ? 1 : e.rank === t.rank ? 0 : e.rank < t.rank ? -1 : void 0
                                }
                                if (l)
                                    a && h(s) && f(s, t) && (o[s.id] = s,
                                    o[s.id].sizes.sort(c),
                                    s.soldOut = !1);
                                else if (a && p(s, n) && f(s, t)) {
                                    if (o[s.id] = s,
                                    s.sizes && s.sizes.length > 0) {
                                        const e = r ? s.sizes : s.sizes.filter(e=>e.stocks && e.stocks.length > 0);
                                        e.sort(c),
                                        o[s.id].sizes = e
                                    }
                                    s.soldOut = !p(s, !1)
                                }
                            }
                            )
                        }
                        ).then(()=>i(o), ()=>s())
                    }
                    )
                },
                convertXProductToSpaCatalogProduct: y,
                getProductNamesMap: w,
                getProductColorsByNmIdsAsync: function(e) {
                    return new Promise((t,n)=>{
                        let r = w()
                          , i = {}
                          , s = [];
                        if (e.forEach(e=>{
                            let t = r[e];
                            t && t.dims ? i[e] = t : s.push(e)
                        }
                        ),
                        !s.length)
                            return void t(i);
                        let o = s.map(e=>fetch(wb.helpers.url.urlProductStatic(e)).then(e=>e.json()).then(e=>Promise.resolve({
                            options: e.options,
                            nmId: e.nm_id,
                            color: e.nm_colors_names,
                            name: e.imt_name,
                            dims: new u(e.options),
                            gluedOptions: P(e.options)
                        })).catch(()=>Promise.resolve({
                            nmId: e,
                            color: ""
                        })));
                        return Promise.all(o).then(e=>{
                            !function(e, t) {
                                try {
                                    var n;
                                    const r = 255;
                                    t = null !== (n = t) && void 0 !== n ? n : w(),
                                    e.forEach(e=>t[e.nmId] = {
                                        nmId: e.nmId,
                                        c: e.color,
                                        n: e.name,
                                        dims: e.dims,
                                        gluedOptions: e.gluedOptions,
                                        ts: Date.now()
                                    });
                                    let i = Object.values(t);
                                    i.length > r && (i.sort((e,t)=>t.ts - e.ts),
                                    i.splice(r),
                                    t = i.reduce((e,t)=>(e[t.nmId] = t,
                                    e), {})),
                                    localStorage.putObject("product_colors", t)
                                } catch (e) {
                                    return console.warn("[ProductColorsCache]: failed to update colors map", e),
                                    {}
                                }
                            }(e, r),
                            t(r)
                        }
                        )
                    }
                    )
                },
                fillOtherSellersProducts: function(e) {
                    return new Promise(t=>{
                        v(e.map(e=>e.nmId)).then(n=>{
                            e.forEach(e=>{
                                const t = n[e.nmId];
                                null != t && p(t) && (Object.assign(e, y(t, !0)),
                                e.stocks = function(e) {
                                    return Object.keys(e.sizes.reduce((e,t)=>{
                                        var n;
                                        return (null === (n = t.stocks) || void 0 === n ? void 0 : n.length) > 0 && t.stocks.forEach(t=>e[t.wh] = !0),
                                        e
                                    }
                                    , {}))
                                }(t),
                                e.isAvailable = !0)
                            }
                            ),
                            t()
                        }
                        )
                    }
                    )
                },
                getMiniProductCard: async function(e) {
                    if (isNaN(e))
                        throw new TypeError("nmId at getMiniProductCard is not a number");
                    const t = await v([e]);
                    return t[e] ? y(t[e], !1, !0) : null
                },
                proceedPrices: g,
                waitNoReturnSubjectsInitialized: async function() {
                    if (Object.keys(o).length > 0)
                        return Promise.resolve();
                    const e = JSON.parse(localStorage.getItem(a));
                    if ((null == e ? void 0 : e.expired) > Date.now() - l)
                        return o = e.info,
                        Promise.resolve();
                    try {
                        var t;
                        const e = "no-return-subjects.json"
                          , n = await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(e, 5e3);
                        return n && 0 !== n.length ? (o = n,
                        null === (t = localStorage) || void 0 === t || t.putObject(a, {
                            info: n,
                            expired: Date.now() + l
                        }),
                        Promise.resolve()) : (console.warn("Getting subjects has failed"),
                        Promise.reject())
                    } catch (e) {
                        return console.warn("Getting adult subjects has failed"),
                        console.error(e.message),
                        Promise.resolve()
                    }
                },
                setNoRefund: function(e) {
                    const t = o[e];
                    if (!t)
                        return !1;
                    let n;
                    switch (WbSpaModel.prototype.$user.getLocale()) {
                    case "by":
                        n = 2;
                        break;
                    case "kz":
                        n = 3;
                        break;
                    case "kg":
                        n = 4;
                        break;
                    case "am":
                        n = 5;
                        break;
                    case "uz":
                        n = 13;
                        break;
                    default:
                        n = 1
                    }
                    return 0 != (t & 1 << n - 1)
                },
                expandSaleConditions: b,
                convertOptionsToGluedOptions: P
            }
        }();

    }
    , {}]
}, {}, [158, 163, 18]);
